import{a as e0,c as o9,d as a9,e as s9,f as l9,g as c9}from"./chunk-UJKDJTTH.js";import{$ as BI,A as EI,Aa as r9,B as AI,Ba as i9,C as TI,D as PI,E as NI,F as LI,G as II,H as DI,I as Wr,J as qr,K as wi,L as ui,M as ss,N as zI,O as Ml,P as _b,Q as kl,R as Wc,S as RI,T as FI,U as ls,V as wb,W as Sb,X as El,Y as Cb,Z as Ob,_ as Mb,aa as jI,b as Cl,ba as VI,c as Ol,ca as HI,d as yo,da as WI,e as ep,ea as qI,f as Md,fa as kb,g as CI,ga as qc,h as ic,ha as Eb,i as is,ia as Ab,j as tp,ja as Tb,k as t0,ka as Pb,l as n0,la as Nb,m as r0,ma as UI,n as xb,na as GI,o as OI,oa as $I,p as MI,pa as o0,q as bb,qa as YI,r as Kn,ra as XI,s as Vc,sa as KI,t as Hc,ta as ZI,u as Ji,ua as JI,v as as,va as QI,w as kI,wa as e9,x as i0,xa as Lb,y as ra,ya as t9,z as np,za as n9}from"./chunk-YWAPYMX7.js";import{e as wl,ib as Zi,k as Qm,kb as cr,n as Qf,o as rs,ob as SI,p as yb,q as ei,r as bI,s as t6,u as ci,v as _I,w as Sl,x as wI,xa as Xn}from"./chunk-ZLQJDIN4.js";import"./chunk-NTRBBWEL.js";import{$b as uv,Aa as qu,Ad as Ki,Bc as e6,Bd as hb,Ca as hI,Cd as mb,Dd as gb,Eb as Je,Ed as yI,Fc as Ea,Fd as vb,Hc as ns,Hd as Uu,Ia as cv,Ib as oe,Id as xI,Ja as ze,Ka as Re,Kb as pb,Kc as dn,Kd as fv,La as Ct,Lb as br,Ma as Yn,Ra as Ja,Rb as Fs,Tb as mI,Ua as JM,Ub as gI,Vb as vI,Wb as D,Xb as F,Yb as xe,Yc as Zm,ac as pt,dc as Xe,f as Xr,fc as me,kc as Qa,l as ut,lb as Xm,lc as es,m as Te,mc as ts,n as Wn,nc as bn,oa as Rs,ob as $,oc as ce,p as Bc,pa as Wu,pb as ht,pc as Yt,q as jc,qc as Wt,r as $i,ra as dI,rc as Km,s as G,sc as db,t as qe,ta as _l,tc as QM,u as fb,uc as qt,vc as Ut,w as lv,wc as Gt,y as pI,yd as Jm,za as tn,zc as Yi,zd as Xi}from"./chunk-R4QVWN2J.js";import{a as Lee}from"./chunk-C3KJNLBW.js";import{a as Hr}from"./chunk-O3NHZOCN.js";import{a as ka,b as Jf,e as Hu,f as Fc,g as Ym,i as fI}from"./chunk-QDSGMOWV.js";var rz=Hu((E9e,nz)=>{"use strict";nz.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var oz=Hu((A9e,iz)=>{"use strict";iz.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var lz=Hu((T9e,sz)=>{"use strict";var xoe=oz(),boe=Array.prototype.concat,_oe=Array.prototype.slice,az=sz.exports=function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];xoe(o)?n=boe.call(n,_oe.call(o)):n.push(o)}return n};az.wrap=function(e){return function(){return e(az(arguments))}}});var pz=Hu((P9e,fz)=>{"use strict";var Iv=rz(),Dv=lz(),cz=Object.hasOwnProperty,uz=Object.create(null);for(R5 in Iv)cz.call(Iv,R5)&&(uz[Iv[R5]]=R5);var R5,Gs=fz.exports={to:{},get:{}};Gs.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case"hsl":n=Gs.get.hsl(e),r="hsl";break;case"hwb":n=Gs.get.hwb(e),r="hwb";break;default:n=Gs.get.rgb(e),r="rgb";break}return n?{model:r,value:n}:null};Gs.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,a=[0,0,0,1],s,l,c;if(s=e.match(n)){for(c=s[2],s=s[1],l=0;l<3;l++){var u=l*2;a[l]=parseInt(s.slice(u,u+2),16)}c&&(a[3]=parseInt(c,16)/255)}else if(s=e.match(t)){for(s=s[1],c=s[3],l=0;l<3;l++)a[l]=parseInt(s[l]+s[l],16);c&&(a[3]=parseInt(c+c,16)/255)}else if(s=e.match(r)){for(l=0;l<3;l++)a[l]=parseInt(s[l+1],0);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else if(s=e.match(i)){for(l=0;l<3;l++)a[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else return(s=e.match(o))?s[1]==="transparent"?[0,0,0,0]:cz.call(Iv,s[1])?(a=Iv[s[1]],a[3]=1,a):null:null;for(l=0;l<3;l++)a[l]=hp(a[l],0,255);return a[3]=hp(a[3],0,1),a};Gs.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=hp(parseFloat(n[2]),0,100),a=hp(parseFloat(n[3]),0,100),s=hp(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null};Gs.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=hp(parseFloat(n[2]),0,100),a=hp(parseFloat(n[3]),0,100),s=hp(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null};Gs.to.hex=function(){var e=Dv(arguments);return"#"+F5(e[0])+F5(e[1])+F5(e[2])+(e[3]<1?F5(Math.round(e[3]*255)):"")};Gs.to.rgb=function(){var e=Dv(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Gs.to.rgb.percent=function(){var e=Dv(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};Gs.to.hsl=function(){var e=Dv(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Gs.to.hwb=function(){var e=Dv(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Gs.to.keyword=function(e){return uz[e.slice(0,3)]};function hp(e,t,n){return Math.min(Math.max(t,e),n)}function F5(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var rR=Hu((yje,Ck)=>{"use strict";var Uae=Object.prototype.hasOwnProperty,Pa="~";function Jv(){}Object.create&&(Jv.prototype=Object.create(null),new Jv().__proto__||(Pa=!1));function Gae(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function nR(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new Gae(n,r||e,i),a=Pa?Pa+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function x_(e,t){--e._eventsCount===0?e._events=new Jv:delete e._events[t]}function la(){this._events=new Jv,this._eventsCount=0}la.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)Uae.call(n,r)&&t.push(Pa?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};la.prototype.listeners=function(t){var n=Pa?Pa+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a};la.prototype.listenerCount=function(t){var n=Pa?Pa+t:t,r=this._events[n];return r?r.fn?1:r.length:0};la.prototype.emit=function(t,n,r,i,o,a){var s=Pa?Pa+t:t;if(!this._events[s])return!1;var l=this._events[s],c=arguments.length,u,f;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,r),!0;case 4:return l.fn.call(l.context,n,r,i),!0;case 5:return l.fn.call(l.context,n,r,i,o),!0;case 6:return l.fn.call(l.context,n,r,i,o,a),!0}for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l.fn.apply(l.context,u)}else{var p=l.length,d;for(f=0;f<p;f++)switch(l[f].once&&this.removeListener(t,l[f].fn,void 0,!0),c){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,n);break;case 3:l[f].fn.call(l[f].context,n,r);break;case 4:l[f].fn.call(l[f].context,n,r,i);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];l[f].fn.apply(l[f].context,u)}}return!0};la.prototype.on=function(t,n,r){return nR(this,t,n,r,!1)};la.prototype.once=function(t,n,r){return nR(this,t,n,r,!0)};la.prototype.removeListener=function(t,n,r,i){var o=Pa?Pa+t:t;if(!this._events[o])return this;if(!n)return x_(this,o),this;var a=this._events[o];if(a.fn)a.fn===n&&(!i||a.once)&&(!r||a.context===r)&&x_(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==n||i&&!a[s].once||r&&a[s].context!==r)&&l.push(a[s]);l.length?this._events[o]=l.length===1?l[0]:l:x_(this,o)}return this};la.prototype.removeAllListeners=function(t){var n;return t?(n=Pa?Pa+t:t,this._events[n]&&x_(this,n)):(this._events=new Jv,this._eventsCount=0),this};la.prototype.off=la.prototype.removeListener;la.prototype.addListener=la.prototype.on;la.prefixed=Pa;la.EventEmitter=la;typeof Ck<"u"&&(Ck.exports=la)});var nq=Hu((x4,tq)=>{"use strict";(function(e,t){typeof x4=="object"&&typeof tq<"u"?t(x4):typeof define=="function"&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).Coordinate={})})(x4,function(e){"use strict";function t(U){var Y=typeof Symbol=="function"&&Symbol.iterator,se=Y&&U[Y],he=0;if(se)return se.call(U);if(U&&typeof U.length=="number")return{next:function(){return{value:(U=U&&he>=U.length?void 0:U)&&U[he++],done:!U}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(U,Y){var se=typeof Symbol=="function"&&U[Symbol.iterator];if(!se)return U;var he,Oe,ke=se.call(U),ve=[];try{for(;(Y===void 0||0<Y--)&&!(he=ke.next()).done;)ve.push(he.value)}catch(ge){Oe={error:ge}}finally{try{he&&!he.done&&(se=ke.return)&&se.call(ke)}finally{if(Oe)throw Oe.error}}return ve}function r(U,Y,se){if(se||arguments.length===2)for(var he,Oe=0,ke=Y.length;Oe<ke;Oe++)!he&&Oe in Y||((he=he||Array.prototype.slice.call(Y,0,Oe))[Oe]=Y[Oe]);return U.concat(he||Array.prototype.slice.call(Y))}function i(U){return a(U,"Function")}var o={}.toString,a=function(U,Y){return o.call(U)==="[object "+Y+"]"},s=function(U){return Array.isArray?Array.isArray(U):a(U,"Array")},l=function(U){if(typeof(Y=U)!="object"||Y===null||!a(U,"Object"))return!1;var Y;if(Object.getPrototypeOf(U)===null)return!0;for(var se=U;Object.getPrototypeOf(se)!==null;)se=Object.getPrototypeOf(se);return Object.getPrototypeOf(U)===se},c=function(U){return a(U,"Number")},u=Object.values?function(U){return Object.values(U)}:function(U){var Y,se=[],he=U,Oe=function(Le,Fe){i(U)&&Fe==="prototype"||se.push(Le)};if(he){if(s(he))for(var ke=0,ve=he.length;ke<ve&&Oe(he[ke],ke)!==!1;ke++);else if(Y=typeof he,he!==null&&Y=="object"||Y=="function"){for(var ge in he)if(he.hasOwnProperty(ge)&&Oe(he[ge],ge)===!1)break}}return se},f=5;function p(U){for(var Y=[],se=1;se<arguments.length;se++)Y[se-1]=arguments[se];for(var he=0;he<Y.length;he+=1)(function Oe(ke,ve,ge,Le){for(var Fe in ge=ge||0,Le=Le||f,ve){var vt;ve.hasOwnProperty(Fe)&&((vt=ve[Fe])!==null&&l(vt)?(l(ke[Fe])||(ke[Fe]={}),ge<Le?Oe(ke[Fe],vt,ge+1,Le):ke[Fe]=ve[Fe]):s(vt)?(ke[Fe]=[],ke[Fe]=ke[Fe].concat(vt)):vt!==void 0&&(ke[Fe]=vt))}})(U,Y[he]);return U}function d(U){return U}(function(U,Y){var se;if(i(U))return(se=function(){for(var he=[],Oe=0;Oe<arguments.length;Oe++)he[Oe]=arguments[Oe];var ke,ve=Y?Y.apply(this,he):he[0],ge=se.cache;return ge.has(ve)?ge.get(ve):(ke=U.apply(this,he),ge.set(ve,ke),ke)}).cache=new Map;throw new TypeError("Expected a function")})(function(U,ve){var se=(ve=ve===void 0?{}:ve).fontSize,he=ve.fontFamily,Oe=ve.fontWeight,ke=ve.fontStyle,ve=ve.fontVariant;return(h=h||document.createElement("canvas").getContext("2d")).font=[ke,ve,Oe,se+"px",he].join(" "),h.measureText(a(U,"String")?U:"").width},function(U,Y){return function(){for(var se=0,he=0,Oe=arguments.length;he<Oe;he++)se+=arguments[he].length;for(var ke=Array(se),ve=0,he=0;he<Oe;he++)for(var ge=arguments[he],Le=0,Fe=ge.length;Le<Fe;Le++,ve++)ke[ve]=ge[Le];return ke}([U],u(Y=Y===void 0?{}:Y)).join("")});var h,m=typeof Float32Array<"u"?Float32Array:Array;function g(){var U=new m(9);return m!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[5]=0,U[6]=0,U[7]=0),U[0]=1,U[4]=1,U[8]=1,U}Math.hypot||(Math.hypot=function(){for(var U=0,Y=arguments.length;Y--;)U+=arguments[Y]*arguments[Y];return Math.sqrt(U)});var v=function(U,yt,St){var he=yt[0],Oe=yt[1],ke=yt[2],ve=yt[3],ge=yt[4],Le=yt[5],Fe=yt[6],vt=yt[7],yt=yt[8],Ft=St[0],it=St[1],At=St[2],Ot=St[3],ct=St[4],en=St[5],Nt=St[6],Ht=St[7],St=St[8];return U[0]=Ft*he+it*ve+At*Fe,U[1]=Ft*Oe+it*ge+At*vt,U[2]=Ft*ke+it*Le+At*yt,U[3]=Ot*he+ct*ve+en*Fe,U[4]=Ot*Oe+ct*ge+en*vt,U[5]=Ot*ke+ct*Le+en*yt,U[6]=Nt*he+Ht*ve+St*Fe,U[7]=Nt*Oe+Ht*ge+St*vt,U[8]=Nt*ke+Ht*Le+St*yt,U};function y(){var U=new m(16);return m!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=0,U[12]=0,U[13]=0,U[14]=0),U[0]=1,U[5]=1,U[10]=1,U[15]=1,U}var x=function(U,Nt,se){var he=Nt[0],Oe=Nt[1],ke=Nt[2],ve=Nt[3],ge=Nt[4],Le=Nt[5],Fe=Nt[6],vt=Nt[7],yt=Nt[8],Ft=Nt[9],it=Nt[10],At=Nt[11],Ot=Nt[12],ct=Nt[13],en=Nt[14],Nt=Nt[15],Ht=se[0],St=se[1],Lt=se[2],Ln=se[3];return U[0]=Ht*he+St*ge+Lt*yt+Ln*Ot,U[1]=Ht*Oe+St*Le+Lt*Ft+Ln*ct,U[2]=Ht*ke+St*Fe+Lt*it+Ln*en,U[3]=Ht*ve+St*vt+Lt*At+Ln*Nt,Ht=se[4],St=se[5],Lt=se[6],Ln=se[7],U[4]=Ht*he+St*ge+Lt*yt+Ln*Ot,U[5]=Ht*Oe+St*Le+Lt*Ft+Ln*ct,U[6]=Ht*ke+St*Fe+Lt*it+Ln*en,U[7]=Ht*ve+St*vt+Lt*At+Ln*Nt,Ht=se[8],St=se[9],Lt=se[10],Ln=se[11],U[8]=Ht*he+St*ge+Lt*yt+Ln*Ot,U[9]=Ht*Oe+St*Le+Lt*Ft+Ln*ct,U[10]=Ht*ke+St*Fe+Lt*it+Ln*en,U[11]=Ht*ve+St*vt+Lt*At+Ln*Nt,Ht=se[12],St=se[13],Lt=se[14],Ln=se[15],U[12]=Ht*he+St*ge+Lt*yt+Ln*Ot,U[13]=Ht*Oe+St*Le+Lt*Ft+Ln*ct,U[14]=Ht*ke+St*Fe+Lt*it+Ln*en,U[15]=Ht*ve+St*vt+Lt*At+Ln*Nt,U};function _(U){for(var Y=[],se=1;se<arguments.length;se++)Y[se-1]=arguments[se];return U?Y.reduce(function(he,Oe){return function(ke){return Oe(he(ke))}},U):d}function w(U){return U instanceof Float32Array||U instanceof Array}function S(U,Y,se){for(;U<Y;)U+=2*Math.PI;for(;se<U;)U-=2*Math.PI;return U}Jt=new m(3),m!=Float32Array&&(Jt[0]=0,Jt[1]=0,Jt[2]=0),Jt=new m(4),m!=Float32Array&&(Jt[0]=0,Jt[1]=0,Jt[2]=0,Jt[3]=0);function M(ve,Y,se,he,Oe){var ke=(ve=n(ve,2))[0],ve=ve[1],ge=g();return ke=[ke,ve],(ve=ge)[0]=1,ve[1]=0,ve[2]=0,ve[3]=0,ve[4]=1,ve[5]=0,ve[6]=ke[0],ve[7]=ke[1],ve[8]=1,ve}function O(U,...Y){return Y.reduce((se,he)=>Oe=>se(he(Oe)),U)}function E(U,Y){return Y-U?se=>(se-U)/(Y-U):se=>.5}let P=Math.sqrt(50),k=Math.sqrt(10),A=Math.sqrt(2);function N(U,Y,se){return Y=(Y-U)/Math.max(0,se),U=Math.floor(Math.log(Y)/Math.LN10),se=Y/10**U,0<=U?(se>=P?10:se>=k?5:se>=A?2:1)*10**U:-(10**-U)/(se>=P?10:se>=k?5:se>=A?2:1)}let L=(U,Y,se=5)=>{U=[U,Y];let he=0,Oe=U.length-1,ke=U[he],ve=U[Oe],ge;return ve<ke&&([ke,ve]=[ve,ke],[he,Oe]=[Oe,he]),0<(ge=N(ke,ve,se))?(ke=Math.floor(ke/ge)*ge,ve=Math.ceil(ve/ge)*ge,ge=N(ke,ve,se)):ge<0&&(ke=Math.ceil(ke*ge)/ge,ve=Math.floor(ve*ge)/ge,ge=N(ke,ve,se)),0<ge?(U[he]=Math.floor(ke/ge)*ge,U[Oe]=Math.ceil(ve/ge)*ge):ge<0&&(U[he]=Math.ceil(ke*ge)/ge,U[Oe]=Math.floor(ve*ge)/ge),U};function z(U){return U!=null&&!Number.isNaN(U)}function B(U,Y){return se=>{se.prototype.rescale=function(){this.initRange(),this.nice();var[he]=this.chooseTransforms();this.composeOutput(he,this.chooseClamp(he))},se.prototype.initRange=function(){var he=this.options.interpolator;this.options.range=U(he)},se.prototype.composeOutput=function(he,Oe){var ke,{domain:ge,interpolator:ve,round:Le}=this.getOptions(),ge=Y(ge.map(he)),Le=Le?(ke=ve,Fe=>(Fe=ke(Fe),c(Fe)?Math.round(Fe):Fe)):ve;this.output=O(Le,ge,Oe,he)},se.prototype.invert=void 0}}var H,Jt={exports:{}},an={exports:{}},j=function(U){return!(!U||typeof U=="string")&&(U instanceof Array||Array.isArray(U)||0<=U.length&&(U.splice instanceof Function||Object.getOwnPropertyDescriptor(U,U.length-1)&&U.constructor.name!=="String"))},W=Array.prototype.concat,Z=Array.prototype.slice,ie=an.exports=function(U){for(var Y=[],se=0,he=U.length;se<he;se++){var Oe=U[se];j(Oe)?Y=W.call(Y,Z.call(Oe)):Y.push(Oe)}return Y},R=(ie.wrap=function(U){return function(){return U(ie(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),q=an.exports,J=Object.hasOwnProperty,te=Object.create(null);for(H in R)J.call(R,H)&&(te[R[H]]=H);var ae=Jt.exports={to:{},get:{}};function le(U,Y,se){return Math.min(Math.max(Y,U),se)}function ue(U){return U=Math.round(U).toString(16).toUpperCase(),U.length<2?"0"+U:U}ae.get=function(U){var Y,se;switch(U.substring(0,3).toLowerCase()){case"hsl":Y=ae.get.hsl(U),se="hsl";break;case"hwb":Y=ae.get.hwb(U),se="hwb";break;default:Y=ae.get.rgb(U),se="rgb"}return Y?{model:se,value:Y}:null},ae.get.rgb=function(U){if(!U)return null;var Y,se,he,Oe=[0,0,0,1];if(Y=U.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(he=Y[2],Y=Y[1],se=0;se<3;se++){var ke=2*se;Oe[se]=parseInt(Y.slice(ke,2+ke),16)}he&&(Oe[3]=parseInt(he,16)/255)}else if(Y=U.match(/^#([a-f0-9]{3,4})$/i)){for(he=(Y=Y[1])[3],se=0;se<3;se++)Oe[se]=parseInt(Y[se]+Y[se],16);he&&(Oe[3]=parseInt(he+he,16)/255)}else{if(Y=U.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(se=0;se<3;se++)Oe[se]=parseInt(Y[se+1],0);else{if(!(Y=U.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(Y=U.match(/^(\w+)$/))?Y[1]==="transparent"?[0,0,0,0]:J.call(R,Y[1])?((Oe=R[Y[1]])[3]=1,Oe):null:null;for(se=0;se<3;se++)Oe[se]=Math.round(2.55*parseFloat(Y[se+1]))}Y[4]&&(Y[5]?Oe[3]=.01*parseFloat(Y[4]):Oe[3]=parseFloat(Y[4]))}for(se=0;se<3;se++)Oe[se]=le(Oe[se],0,255);return Oe[3]=le(Oe[3],0,1),Oe},ae.get.hsl=function(U){var Y;return(U=U&&U.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(Y=parseFloat(U[4]),[(parseFloat(U[1])%360+360)%360,le(parseFloat(U[2]),0,100),le(parseFloat(U[3]),0,100),le(isNaN(Y)?1:Y,0,1)]):null},ae.get.hwb=function(U){var Y;return(U=U&&U.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(Y=parseFloat(U[4]),[(parseFloat(U[1])%360+360)%360,le(parseFloat(U[2]),0,100),le(parseFloat(U[3]),0,100),le(isNaN(Y)?1:Y,0,1)]):null},ae.to.hex=function(){var U=q(arguments);return"#"+ue(U[0])+ue(U[1])+ue(U[2])+(U[3]<1?ue(Math.round(255*U[3])):"")},ae.to.rgb=function(){var U=q(arguments);return U.length<4||U[3]===1?"rgb("+Math.round(U[0])+", "+Math.round(U[1])+", "+Math.round(U[2])+")":"rgba("+Math.round(U[0])+", "+Math.round(U[1])+", "+Math.round(U[2])+", "+U[3]+")"},ae.to.rgb.percent=function(){var U=q(arguments),Y=Math.round(U[0]/255*100),se=Math.round(U[1]/255*100),he=Math.round(U[2]/255*100);return U.length<4||U[3]===1?"rgb("+Y+"%, "+se+"%, "+he+"%)":"rgba("+Y+"%, "+se+"%, "+he+"%, "+U[3]+")"},ae.to.hsl=function(){var U=q(arguments);return U.length<4||U[3]===1?"hsl("+U[0]+", "+U[1]+"%, "+U[2]+"%)":"hsla("+U[0]+", "+U[1]+"%, "+U[2]+"%, "+U[3]+")"},ae.to.hwb=function(){var U=q(arguments),Y="";return 4<=U.length&&U[3]!==1&&(Y=", "+U[3]),"hwb("+U[0]+", "+U[1]+"%, "+U[2]+"%"+Y+")"},ae.to.keyword=function(U){return te[U.slice(0,3)]};var ye=Jt.exports;function Me(U,Y,se){let he=se;return he<0&&(he+=1),1<he&&--he,he<1/6?U+6*(Y-U)*he:he<.5?Y:he<2/3?U+(Y-U)*(2/3-he)*6:U}function we(Oe){var Y,se,he,Oe=ye.get(Oe);return Oe?({model:Oe,value:Y}=Oe,Oe==="rgb"?Y:Oe==="hsl"?(Y=(Oe=Y)[0]/360,se=Oe[1]/100,he=Oe[2]/100,Oe=Oe[3],se==0?[255*he,255*he,255*he,Oe]:[255*Me(se=2*he-(he=he<.5?he*(1+se):he+se-he*se),he,Y+1/3),255*Me(se,he,Y),255*Me(se,he,Y-1/3),Oe]):null):null}let De=(U,Y)=>se=>U*(1-se)+Y*se,Ve=(U,Y)=>{if(typeof U=="number"&&typeof Y=="number")return De(U,Y);if(typeof U!="string"||typeof Y!="string")return()=>U;{var se=U,he=Y;let Oe=we(se),ke=we(he);return Oe===null||ke===null?Oe?()=>se:()=>he:ve=>{var ge=new Array(4);for(let At=0;At<4;At+=1){var Le=Oe[At],Fe=ke[At];ge[At]=Le*(1-ve)+Fe*ve}var[vt,yt,Ft,it]=ge;return`rgba(${Math.round(vt)}, ${Math.round(yt)}, ${Math.round(Ft)}, ${it})`}}},Ze=(U,Y)=>{let se=De(U,Y);return he=>Math.round(se(he))};function Ae({map:U,initKey:Y},se){return Y=Y(se),U.has(Y)?U.get(Y):se}function pe(U){return typeof U=="object"?U.valueOf():U}class ft extends Map{constructor(Y){if(super(),this.map=new Map,this.initKey=pe,Y!==null)for(var[se,he]of Y)this.set(se,he)}get(Y){return super.get(Ae({map:this.map,initKey:this.initKey},Y))}has(Y){return super.has(Ae({map:this.map,initKey:this.initKey},Y))}set(Y,se){return super.set(([{map:Y,initKey:he},Oe]=[{map:this.map,initKey:this.initKey},Y],he=he(Oe),Y.has(he)?Y.get(he):(Y.set(he,Oe),Oe)),se);var he,Oe}delete(Y){return super.delete(([{map:Y,initKey:se},he]=[{map:this.map,initKey:this.initKey},Y],se=se(he),Y.has(se)&&(he=Y.get(se),Y.delete(se)),he));var se,he}}class nt{constructor(Y){this.options=p({},this.getDefaultOptions()),this.update(Y)}getOptions(){return this.options}update(Y={}){this.options=p({},this.options,Y),this.rescale(Y)}rescale(Y){}}let $e=Symbol("defaultUnknown");function at(U,Y,se){for(let he=0;he<Y.length;he+=1)U.has(Y[he])||U.set(se(Y[he]),he)}function mt(Y){var{value:Y,from:se,to:he,mapper:Oe,notFoundReturn:ke}=Y;let ve=Oe.get(Y);if(ve===void 0){if(ke!==$e)return ke;ve=se.push(Y)-1,Oe.set(Y,ve)}return he[ve%he.length]}function lt(U){return U instanceof Date?Y=>""+Y:typeof U=="object"?Y=>JSON.stringify(Y):Y=>Y}class Et extends nt{getDefaultOptions(){return{domain:[],range:[],unknown:$e}}constructor(Y){super(Y)}map(Y){return this.domainIndexMap.size===0&&at(this.domainIndexMap,this.getDomain(),this.domainKey),mt({value:this.domainKey(Y),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(Y){return this.rangeIndexMap.size===0&&at(this.rangeIndexMap,this.getRange(),this.rangeKey),mt({value:this.rangeKey(Y),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(Y){var[se]=this.options.domain,[he]=this.options.range;this.domainKey=lt(se),this.rangeKey=lt(he),this.rangeIndexMap?(Y&&!Y.range||this.rangeIndexMap.clear(),Y&&!Y.domain&&!Y.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new Et(this.options)}getRange(){return this.options.range}getDomain(){var Y,se;return this.sortedDomain||({domain:Y,compare:se}=this.options,this.sortedDomain=se?[...Y].sort(se):Y),this.sortedDomain}}function Rt(ct){let{domain:Y,range:se,paddingOuter:he,paddingInner:Oe,flex:ke,round:ve,align:ge}=ct;var Le=Y.length,it=0<(it=(ct=Le)-(Fe=ke).length)?[...Fe,...new Array(it).fill(1)]:it<0?Fe.slice(0,ct):Fe,[ct,Fe]=se,Fe=Fe-ct,Ot=Fe/(2/Le*he+1-1/Le*Oe);let vt=Ot*Oe/Le;Ot-=Le*vt;let yt=function(St){let Lt=Math.min(...St);return St.map(Ln=>Ln/Lt)}(it),Ft=Ot/yt.reduce((St,Lt)=>St+Lt);var it=new ft(Y.map((St,Lt)=>(Lt=yt[Lt]*Ft,[St,ve?Math.floor(Lt):Lt]))),At=new ft(Y.map((St,Lt)=>(Lt=yt[Lt]*Ft+vt,[St,ve?Math.floor(Lt):Lt]))),Ot=Array.from(At.values()).reduce((St,Lt)=>St+Lt),ct=ct+(Fe-(Ot-Ot/Le*Oe))*ge;let en=ve?Math.round(ct):ct;var Nt=new Array(Le);for(let St=0;St<Le;St+=1){Nt[St]=(Ht=en,Math.round(1e12*Ht)/1e12);var Ht=Y[St];en+=At.get(Ht)}return{valueBandWidth:it,valueStep:At,adjustedRange:Nt}}class Qt extends Et{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:$e,flex:[]}}constructor(Y){super(Y)}clone(){return new Qt(this.options)}getStep(Y){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:Y===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(Y)}getBandWidth(Y){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:Y===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(Y)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:Y,paddingInner:se}=this.options;return 0<Y?Y:se}getPaddingOuter(){var{padding:Y,paddingOuter:se}=this.options;return 0<Y?Y:se}rescale(){super.rescale();var{align:he,domain:Y,range:Oe,round:ke,flex:se}=this.options,{adjustedRange:he,valueBandWidth:Oe,valueStep:ke}=function(Fe){var ge=Fe.domain;if((ge=ge.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((Le=Fe.flex)==null||!Le.length))return Rt(Fe);var{range:Le,paddingOuter:Fe,paddingInner:vt,round:yt,align:Ft}=Fe;let it,At,Ot=Le[0];return Le=Le[1]-Ot,it=Le/Math.max(1,2*Fe+(ge-vt)),yt&&(it=Math.floor(it)),Ot+=(Le-it*(ge-vt))*Ft,At=it*(1-vt),yt&&(Ot=Math.round(Ot),At=Math.round(At)),Fe=new Array(ge).fill(0).map((ct,en)=>Ot+en*it),{valueStep:it,valueBandWidth:At,adjustedRange:Fe}}({align:he,range:Oe,round:ke,flex:se,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:Y});this.valueStep=ke,this.valueBandWidth=Oe,this.adjustedRange=he}}let It=(U,Y,se)=>{let he,Oe,ke=U,ve=Y;if(ke===ve&&0<se)return[ke];let ge=N(ke,ve,se);if(ge===0||!Number.isFinite(ge))return[];if(0<ge){ke=Math.ceil(ke/ge),ve=Math.floor(ve/ge),Oe=new Array(he=Math.ceil(ve-ke+1));for(let Le=0;Le<he;Le+=1)Oe[Le]=(ke+Le)*ge}else{ge=-ge,ke=Math.ceil(ke*ge),ve=Math.floor(ve*ge),Oe=new Array(he=Math.ceil(ve-ke+1));for(let Le=0;Le<he;Le+=1)Oe[Le]=(ke+Le)/ge}return Oe},Kt=(he,ke,se)=>{var[he,Oe]=he,[ke,ve]=ke;let ge,Le;return O(Le=he<Oe?(ge=E(he,Oe),se(ke,ve)):(ge=E(Oe,he),se(ve,ke)),ge)},Sn=(U,Y,se)=>{let he=Math.min(U.length,Y.length)-1,Oe=new Array(he),ke=new Array(he);var ve=U[0]>U[he],ge=ve?[...U].reverse():U,Le=ve?[...Y].reverse():Y;for(let Fe=0;Fe<he;Fe+=1)Oe[Fe]=E(ge[Fe],ge[Fe+1]),ke[Fe]=se(Le[Fe],Le[Fe+1]);return Fe=>{var vt=function(Ft,it,At,Ot,ct){let en=At||0,Nt=Ot||Ft.length;for(var Ht=ct||(Lt=>Lt);en<Nt;){var St=Math.floor((en+Nt)/2);Ht(Ft[St])>it?Nt=St:en=St+1}return en}(U,Fe,1,he)-1,yt=Oe[vt];return O(ke[vt],yt)(Fe)}},Dt=(U,Y,se,he)=>(2<Math.min(U.length,Y.length)?Sn:Kt)(U,Y,he?Ze:se);class ot extends nt{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:De,tickCount:5}}map(Y){return z(Y)?this.output(Y):this.options.unknown}invert(Y){return z(Y)?this.input(Y):this.options.unknown}nice(){var Y,se,he,Oe;this.options.nice&&([Y,se,he,...Oe]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(Y,se,he,...Oe))}getTicks(){var Y=this.options.tickMethod,[se,he,Oe,...ke]=this.getTickMethodOptions();return Y(se,he,Oe,...ke)}getTickMethodOptions(){var{domain:Y,tickCount:se}=this.options;return[Y[0],Y[Y.length-1],se]}chooseNice(){return L}rescale(){this.nice();var[Y,se]=this.chooseTransforms();this.composeOutput(Y,this.chooseClamp(Y)),this.composeInput(Y,se,this.chooseClamp(se))}chooseClamp(he){var{clamp:se,range:Oe}=this.options,he=this.options.domain.map(he),Oe=Math.min(he.length,Oe.length);if(se){se=he[0],he=he[Oe-1];let ke=he<se?he:se,ve=he<se?se:he;return ge=>Math.min(Math.max(ke,ge),ve)}return d}composeOutput(Y,se){var{domain:ve,range:he,round:Oe,interpolate:ke}=this.options,ve=Dt(ve.map(Y),he,ke,Oe);this.output=O(ve,se,Y)}composeInput(Y,se,he){var{domain:Oe,range:ke}=this.options,ke=Dt(ke,Oe.map(Y),De);this.input=O(se,he,ke)}}class We extends ot{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Ve,tickMethod:It,tickCount:5}}chooseTransforms(){return[d,d]}clone(){return new We(this.options)}}class Zt extends Qt{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:$e,paddingInner:1,paddingOuter:0}}constructor(Y){super(Y)}getPaddingInner(){return 1}clone(){return new Zt(this.options)}update(Y){super.update(Y)}getPaddingOuter(){return this.options.padding}}function Tt(U,Y){for(var se=[],he=0,Oe=U.length;he<Oe;he++)se.push(U[he].substr(0,Y));return se}var zn,an=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Jt=["January","February","March","April","May","June","July","August","September","October","November","December"],yr=Tt(Jt,3);(function(U){for(var Y=[],se=1;se<arguments.length;se++)Y[se-1]=arguments[se];for(var he=0,Oe=Y;he<Oe.length;he++){var ke,ve=Oe[he];for(ke in ve)U[ke]=ve[ke]}})({},{dayNamesShort:Tt(an,3),dayNames:an,monthNamesShort:yr,monthNames:Jt,amPm:["am","pm"],DoFn:function(U){return U+["th","st","nd","rd"][3<U%10?0:(U-U%10!=10?1:0)*U%10]}});var Cn;let yi=zn=class extends We{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:d,tickMethod:It,tickCount:5}}constructor(U){super(U)}clone(){return new zn(this.options)}};yi=zn=function(U,Y,se,he){var Oe,ke=arguments.length,ve=ke<3?Y:he===null?he=Object.getOwnPropertyDescriptor(Y,se):he;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(U,Y,se,he);else for(var ge=U.length-1;0<=ge;ge--)(Oe=U[ge])&&(ve=(ke<3?Oe(ve):3<ke?Oe(Y,se,ve):Oe(Y,se))||ve);return 3<ke&&ve&&Object.defineProperty(Y,se,ve),ve}([B(function(U){return[U(0),U(1)]},Y=>{var[Y,se]=Y;return O(De(0,1),E(Y,se))})],yi);let xr=Cn=class extends We{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:d,tickMethod:It,tickCount:5}}constructor(U){super(U)}clone(){return new Cn(this.options)}};xr=Cn=function(U,Y,se,he){var Oe,ke=arguments.length,ve=ke<3?Y:he===null?he=Object.getOwnPropertyDescriptor(Y,se):he;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(U,Y,se,he);else for(var ge=U.length-1;0<=ge;ge--)(Oe=U[ge])&&(ve=(ke<3?Oe(ve):3<ke?Oe(Y,se,ve):Oe(Y,se))||ve);return 3<ke&&ve&&Object.defineProperty(Y,se,ve),ve}([B(function(U){return[U(0),U(.5),U(1)]},U=>{let[Y,se,he]=U,Oe=O(De(0,.5),E(Y,se)),ke=O(De(.5,1),E(se,he));return ve=>(Y>he?ve<se?ke:Oe:ve<se?Oe:ke)(ve)})],xr);function to(U,Y,se,he,Oe){var ke=new We({range:[Y,Y+he]}),ve=new We({range:[se,se+Oe]});return{transform:function(Fe){var Fe=n(Fe,2),Le=Fe[0],Fe=Fe[1];return[ke.map(Le),ve.map(Fe)]},untransform:function(Fe){var Fe=n(Fe,2),Le=Fe[0],Fe=Fe[1];return[ke.invert(Le),ve.invert(Fe)]}}}function Ti(U,Y,se,he,Oe){return(0,n(U,1)[0])(Y,se,he,Oe)}function jr(U,Y,se,he,Oe){return n(U,1)[0]}function vn(Le,Y,se,he,Oe){var ke=(Le=n(Le,4))[0],ve=Le[1],ge=Le[2],Le=Le[3],Fe=new We({range:[ge,Le]}),vt=new We({range:[ke,ve]}),yt=1<(ge=Oe/he)?1:ge,Ft=1<ge?1/ge:1;return{transform:function(Ot){var Ot=n(Ot,2),At=Ot[0],Ot=Ot[1],At=vt.map(At),Ot=Fe.map(Ot);return[.5*(Ot*Math.cos(At)*yt)+.5,.5*(Ot*Math.sin(At)*Ft)+.5]},untransform:function(ct){var ct=n(ct,2),At=ct[0],ct=ct[1],At=2*(At-.5)/yt,ct=2*(ct-.5)/Ft,Ot=Math.sqrt(Math.pow(At,2)+Math.pow(ct,2)),ct=S(Math.atan2(ct,At),ke,ve);return[vt.invert(ct),Fe.invert(Ot)]}}}function $n(U,Y,se,he,Oe){return{transform:function(ve){var ve=n(ve,2),ge=ve[0];return[ve[1],ge]},untransform:function(ve){var ve=n(ve,2),ge=ve[0];return[ve[1],ge]}}}function As(U){for(var Y=[],se=1;se<arguments.length;se++)Y[se-1]=arguments[se];return Hi.apply(void 0,r([[-1,-1]],n(Y),!1))}function Pi(U){for(var Y=[],se=1;se<arguments.length;se++)Y[se-1]=arguments[se];return Hi.apply(void 0,r([[-1,1]],n(Y),!1))}function sr(U){for(var Y=[],se=1;se<arguments.length;se++)Y[se-1]=arguments[se];return Hi.apply(void 0,r([[1,-1]],n(Y),!1))}function po(ve,Y,se,he,Oe){var ke,ve=n(ve,1)[0],ge=g();return ge=ge,ve=ve,ke=Math.sin(ve),ve=Math.cos(ve),ge[0]=ve,ge[1]=ke,ge[2]=0,ge[3]=-ke,ge[4]=ve,ge[5]=0,ge[6]=0,ge[7]=0,ge[8]=1,ge}function fn(U,Y,se,he,Oe){var ke=(U=n(U,4))[0],ve=U[1],ge=U[2],Le=(U[3]-ge)/(+ve/(2*Math.PI)+1),Fe=Le/(2*Math.PI),vt=new We({range:[ge,ge+.99*Le]}),yt=new We({range:[ke,ve]}),Ft=1<(U=Oe/he)?1:U,it=1<U?1/U:1;return{transform:function(ct){var ct=n(ct,2),Ot=ct[0],ct=ct[1],Ot=yt.map(Ot),ct=vt.map(ct);return[.5*(Math.cos(Ot)*(Fe*Ot+ct)*Ft)+.5,.5*(Math.sin(Ot)*(Fe*Ot+ct)*it)+.5]},untransform:function(ct){var ct=n(ct,2),en=ct[0],ct=ct[1],en=2*(en-.5)/Ft,ct=2*(ct-.5)/it,Ot=Math.sqrt(Math.pow(en,2)+Math.pow(ct,2)),ct=S(Math.atan2(ct,en)+Math.floor(Ot/Le)*Math.PI*2,ke,ve),en=Ot-Fe*ct;return[yt.invert(ct),vt.invert(en)]}}}function no(Le,Y,se,he,Oe){var ke=(Le=n(Le,4))[0],ve=Le[1],ge=Le[2],Le=Le[3],Fe=new We({range:[ge,Le]});return{transform:function(vt){for(var yt=[],Ft=vt.length,it=new Zt({domain:new Array(Ft).fill(0).map(function(en,Nt){return Nt}),range:[ke,ve]}),At=0;At<Ft;At++){var ct=vt[At],Ot=it.map(At),ct=Fe.map(ct);yt.push(Ot,ct)}return yt},untransform:function(vt){for(var yt=[],Ft=0;Ft<vt.length;Ft+=2){var it=vt[Ft+1];yt.push(Fe.invert(it))}return yt}}}var Hi=function(ve,Y,se,he,Oe){var ve=n(ve,2),ke=ve[0],ve=ve[1],ge=g();return ke=[ke,ve],(ve=ge)[0]=ke[0],ve[1]=0,ve[2]=0,ve[3]=0,ve[4]=ke[1],ve[5]=0,ve[6]=0,ve[7]=0,ve[8]=1,ve};function ro(U){return 1/Math.tan(U)}function hi(U,Y,se,he,Oe){var ke=ro(n(U,1)[0]);return{transform:function(Le){var Le=n(Le,2),ge=Le[0],Le=Le[1];return[ge+Le*ke,Le]},untransform:function(Le){var Le=n(Le,2),ge=Le[0],Le=Le[1];return[ge-Le*ke,Le]}}}function si(U,Y,se,he,Oe){var ke=ro(n(U,1)[0]);return{transform:function(ge){var ge=n(ge,2),Le=ge[0];return[Le,ge[1]+Le*ke]},untransform:function(ge){var ge=n(ge,2),Le=ge[0];return[Le,ge[1]-Le*ke]}}}function io(U,Y,se,ge,ve){var ke=U<Y,ve=(ke?Y-ge:ve-Y)||ve-ge,ge=ke?-1:1;return ge*ve*(se+1)/(se+ve/((U-Y)*ge))+Y}function cl(U,Y,se,he,ve){var ke=U<Y,ve=(ke?Y-he:ve-Y)||ve-he;return ve/(ve*(se+1)/(U-Y)-se*(ke?-1:1))+Y}function Ga(U,Y,se){return se?new We({range:[0,1],domain:[0,Y]}).map(U):U}function Ts(ge,Y,se,he,Oe){var ke=(ge=n(ge,3))[0],ve=ge[1],ge=ge[2],Le=Ga(ke,he,ge!==void 0&&ge);return{transform:function(yt){var yt=n(yt,2),vt=yt[0],yt=yt[1];return[io(vt,Le,ve,0,1),yt]},untransform:function(yt){var yt=n(yt,2),vt=yt[0],yt=yt[1];return[cl(vt,Le,ve,0,1),yt]}}}function Ps(ge,Y,se,he,Oe){var ke=(ge=n(ge,3))[0],ve=ge[1],ge=ge[2],Le=Ga(ke,Oe,ge!==void 0&&ge);return{transform:function(Fe){return Fe=n(Fe,2),[Fe[0],io(Fe[1],Le,ve,0,1)]},untransform:function(Fe){return Fe=n(Fe,2),[Fe[0],cl(Fe[1],Le,ve,0,1)]}}}function Ns(Fe,Y,se,he,Oe){var ke=(Fe=n(Fe,5))[0],ve=Fe[1],ge=Fe[2],Le=Fe[3],Fe=Fe[4],vt=Ga(ke,he,Fe=Fe!==void 0&&Fe),yt=Ga(ve,Oe,Fe);return{transform:function(At){var At=n(At,2),it=At[0],At=At[1];return[io(it,vt,ge,0,1),io(At,yt,Le,0,1)]},untransform:function(At){var At=n(At,2),it=At[0],At=At[1];return[cl(it,vt,ge,0,1),cl(At,yt,Le,0,1)]}}}function ul(Fe,Y,se,he,Oe){var ke=(Fe=n(Fe,5))[0],ve=Fe[1],ge=Fe[2],Le=Fe[3],Fe=(Fe=Fe[4])!==void 0&&Fe,vt=new We({range:[0,he]}),yt=new We({range:[0,Oe]}),Ft=Fe?ke:vt.map(ke),it=Fe?ve:yt.map(ve);return{transform:function(ct){var ct=n(ct,2),Ot=ct[0],ct=ct[1],en=vt.map(Ot)-Ft,Nt=yt.map(ct)-it,Ht=Math.sqrt(en*en+Nt*Nt);return ge<Ht?[Ot,ct]:(Ot=io(Ht,0,Le,0,ge),ct=Math.atan2(Nt,en),Ht=Ft+Ot*Math.cos(ct),Nt=it+Ot*Math.sin(ct),[vt.invert(Ht),yt.invert(Nt)])},untransform:function(ct){var ct=n(ct,2),Ot=ct[0],ct=ct[1],en=vt.map(Ot)-Ft,Nt=yt.map(ct)-it,Ht=Math.sqrt(en*en+Nt*Nt);return ge<Ht?[Ot,ct]:(Ot=cl(Ht,0,Le,0,ge),ct=Math.atan2(Nt,en),Ht=Ft+Ot*Math.cos(ct),Nt=it+Ot*Math.sin(ct),[vt.invert(Ht),yt.invert(Nt)])}}}function $a(U,Y,se,he,Oe,ke,ve){var ge=new We({range:[Y,Y+Oe]}),Le=new We({range:[se,se+ke]}),Fe=new We({range:[he,he+ve]});return{transform:function(it){var it=n(it,3),yt=it[0],Ft=it[1],it=it[2];return[ge.map(yt),Le.map(Ft),Fe.map(it)]},untransform:function(it){var it=n(it,3),yt=it[0],Ft=it[1],it=it[2];return[ge.invert(yt),Le.invert(Ft),Fe.invert(it)]}}}function fl(vt,Y,se,he,Oe,ke,ve){var ge,Le=(vt=n(vt,3))[0],Fe=vt[1],vt=vt[2];return ge=y(),Le=[Le,Fe,vt],ge[0]=1,ge[1]=0,ge[2]=0,ge[3]=0,ge[4]=0,ge[5]=1,ge[6]=0,ge[7]=0,ge[8]=0,ge[9]=0,ge[10]=1,ge[11]=0,ge[12]=Le[0],ge[13]=Le[1],ge[14]=Le[2],ge[15]=1,ge}function Nu(U,Y,se,he,Oe,ke,ve){return{transform:function(Le){var Le=n(Le,3),Fe=Le[0];return[Le[1],Fe,Le[2]]},untransform:function(Le){var Le=n(Le,3),Fe=Le[0];return[Le[1],Fe,Le[2]]}}}function zf(vt,Y,se,he,Oe,ke,ve){var ge,Le=(vt=n(vt,3))[0],Fe=vt[1],vt=vt[2];return ge=y(),Le=[Le,Fe,vt],ge[0]=Le[0],ge[1]=0,ge[2]=0,ge[3]=0,ge[4]=0,ge[5]=Le[1],ge[6]=0,ge[7]=0,ge[8]=0,ge[9]=0,ge[10]=Le[2],ge[11]=0,ge[12]=0,ge[13]=0,ge[14]=0,ge[15]=1,ge}Ni.prototype.update=function(U){this.options=p({},this.options,U),this.recoordinate()},Ni.prototype.clone=function(){return new Ni(this.options)},Ni.prototype.getOptions=function(){return this.options},Ni.prototype.clear=function(){this.update({transformations:[]})},Ni.prototype.getSize=function(){var U=this.options;return[U.width,U.height]},Ni.prototype.getCenter=function(){var U=this.options,Y=U.x,se=U.y;return[(2*Y+U.width)/2,(2*se+U.height)/2]},Ni.prototype.transform=function(){for(var U=[],Y=0;Y<arguments.length;Y++)U[Y]=arguments[Y];var se=this.options.transformations;return this.update({transformations:r(r([],n(se),!1),[r([],n(U),!1)],!1)}),this},Ni.prototype.map=function(U){return this.output(U)},Ni.prototype.invert=function(U){return this.input(U)},Ni.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Ni.prototype.compose=function(U){function Y(St,Lt){var Ln;ge.push((Lt=Lt===void 0?!0:Lt)?(Ln=St,function(ho){for(var ea=[],Wi=0;Wi<ho.length-1;Wi+=2){var Ro=[ho[Wi],ho[Wi+1]],Ro=Ln(Ro);ea.push.apply(ea,r([],n(Ro),!1))}return ea}):St)}var se,he,Oe=(U=U===void 0?!1:U)?r([],n(this.options.transformations),!1).reverse():this.options.transformations,ke=U?function(St){return St.untransform}:function(St){return St.transform},ve=[],ge=[];try{for(var Le=t(Oe),Fe=Le.next();!Fe.done;Fe=Le.next()){var vt,yt,Ft,it,At,Ot,ct=n(Fe.value),en=ct[0],Nt=ct.slice(1),Ht=this.transformers[en];Ht&&(yt=(vt=this.options).x,Ft=vt.y,it=vt.width,At=vt.height,w(Ot=Ht(r([],n(Nt),!1),yt,Ft,it,At))?ve.push(Ot):(ve.length&&(Y(this.createMatrixTransform(ve,U)),ve.splice(0,ve.length)),Y(ke(Ot)||d,en!=="parallel")))}}catch(St){se={error:St}}finally{try{Fe&&!Fe.done&&(he=Le.return)&&he.call(Le)}finally{if(se)throw se.error}}return ve.length&&Y(this.createMatrixTransform(ve,U)),_.apply(void 0,r([],n(ge),!1))},Ni.prototype.createMatrixTransform=function(U,Y){var se,he,Oe,ke,ve,ge,Le,Fe,vt,yt,Ft,it,At=g();return Y&&U.reverse(),U.forEach(function(Ot){return v(At,At,Ot)}),Y&&(Y=U=At,(it=new m(9))[0]=Y[0],it[1]=Y[1],it[2]=Y[2],it[3]=Y[3],it[4]=Y[4],it[5]=Y[5],it[6]=Y[6],it[7]=Y[7],it[8]=Y[8],it=(Y=it)[0],se=Y[1],he=Y[2],Oe=Y[3],ke=Y[4],ve=Y[5],ge=Y[6],Le=Y[7],Fe=(Y=Y[8])*ke-ve*Le,Ft=it*Fe+se*(vt=-Y*Oe+ve*ge)+he*(yt=Le*Oe-ke*ge))&&(U[0]=Fe*(Ft=1/Ft),U[1]=(-Y*se+he*Le)*Ft,U[2]=(ve*se-he*ke)*Ft,U[3]=vt*Ft,U[4]=(Y*it-he*ge)*Ft,U[5]=(-ve*it+he*Oe)*Ft,U[6]=yt*Ft,U[7]=(-Le*it+se*ge)*Ft,U[8]=(ke*it-se*Oe)*Ft),function(Lt){var ct,en,Nt,Ht,St,Lt=[Lt[0],Lt[1],1];return Nt=At,Ht=(en=ct=Lt)[0],St=en[1],en=en[2],ct[0]=Ht*Nt[0]+St*Nt[3]+en*Nt[6],ct[1]=Ht*Nt[1]+St*Nt[4]+en*Nt[7],ct[2]=Ht*Nt[2]+St*Nt[5]+en*Nt[8],[Lt[0],Lt[1]]}},an=Ni;function Ni(U){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:to,translate:M,custom:Ti,matrix:jr,polar:vn,transpose:$n,scale:Hi,"shear.x":hi,"shear.y":si,reflect:As,"reflect.x":Pi,"reflect.y":sr,rotate:po,helix:fn,parallel:no,fisheye:Ns,"fisheye.x":Ts,"fisheye.y":Ps,"fisheye.circular":ul},this.update(U)}Li.prototype.update=function(U){this.options=p({},this.options,U),this.recoordinate()},Li.prototype.clone=function(){return new Li(this.options)},Li.prototype.getOptions=function(){return this.options},Li.prototype.clear=function(){this.update({transformations:[]})},Li.prototype.getSize=function(){var U=this.options;return[U.width,U.height,U.depth]},Li.prototype.getCenter=function(){var U=this.options,Y=U.x,se=U.y,he=U.z;return[(2*Y+U.width)/2,(2*se+U.height)/2,(2*he+U.depth)/2]},Li.prototype.transform=function(){for(var U=[],Y=0;Y<arguments.length;Y++)U[Y]=arguments[Y];var se=this.options.transformations;return this.update({transformations:r(r([],n(se),!1),[r([],n(U),!1)],!1)}),this},Li.prototype.map=function(U){return this.output(U)},Li.prototype.invert=function(U){return this.input(U)},Li.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Li.prototype.compose=function(U){function Y(Ln,ho){var ea;ge.push((ho=ho===void 0?!0:ho)?(ea=Ln,function(Wi){for(var Ro=[],ta=0;ta<Wi.length-1;ta+=3){var Zr=[Wi[ta],Wi[ta+1],Wi[ta+2]],Zr=ea(Zr);Ro.push.apply(Ro,r([],n(Zr),!1))}return Ro}):Ln)}var se,he,Oe=(U=U===void 0?!1:U)?r([],n(this.options.transformations),!1).reverse():this.options.transformations,ke=U?function(Ln){return Ln.untransform}:function(Ln){return Ln.transform},ve=[],ge=[];try{for(var Le=t(Oe),Fe=Le.next();!Fe.done;Fe=Le.next()){var vt,yt,Ft,it,At,Ot,ct,en,Nt=n(Fe.value),Ht=Nt[0],St=Nt.slice(1),Lt=this.transformers[Ht];Lt&&(yt=(vt=this.options).x,Ft=vt.y,it=vt.z,At=vt.width,Ot=vt.height,ct=vt.depth,w(en=Lt(r([],n(St),!1),yt,Ft,it,At,Ot,ct))?ve.push(en):(ve.length&&(Y(this.createMatrixTransform(ve,U)),ve.splice(0,ve.length)),Y(ke(en)||d,!0)))}}catch(Ln){se={error:Ln}}finally{try{Fe&&!Fe.done&&(he=Le.return)&&he.call(Le)}finally{if(se)throw se.error}}return ve.length&&Y(this.createMatrixTransform(ve,U)),_.apply(void 0,r([],n(ge),!1))},Li.prototype.createMatrixTransform=function(U,Y){var se,he,Oe,ke,ve,ge,Le,Fe,vt,yt,Ft,it,At,Ot,ct,en,Nt,Ht,St,Lt,Ln,ho,ea,Wi,Ro,ta,Zr,Er,Rf=y();return Y&&U.reverse(),U.forEach(function(Dg){return x(Rf,Rf,Dg)}),Y&&(Y=U=Rf,(Er=new m(16))[0]=Y[0],Er[1]=Y[1],Er[2]=Y[2],Er[3]=Y[3],Er[4]=Y[4],Er[5]=Y[5],Er[6]=Y[6],Er[7]=Y[7],Er[8]=Y[8],Er[9]=Y[9],Er[10]=Y[10],Er[11]=Y[11],Er[12]=Y[12],Er[13]=Y[13],Er[14]=Y[14],Er[15]=Y[15],Er=(Y=Er)[0],se=Y[1],he=Y[2],Oe=Y[3],ke=Y[4],ve=Y[5],ge=Y[6],Le=Y[7],Fe=Y[8],vt=Y[9],yt=Y[10],Ft=Y[11],it=Y[12],At=Y[13],Ot=Y[14],Y=Y[15],Zr=(ct=Er*ve-se*ke)*(ta=yt*Y-Ft*Ot)-(en=Er*ge-he*ke)*(Ro=vt*Y-Ft*At)+(Nt=Er*Le-Oe*ke)*(Wi=vt*Ot-yt*At)+(Ht=se*ge-he*ve)*(ea=Fe*Y-Ft*it)-(St=se*Le-Oe*ve)*(ho=Fe*Ot-yt*it)+(Lt=he*Le-Oe*ge)*(Ln=Fe*At-vt*it))&&(U[0]=(ve*ta-ge*Ro+Le*Wi)*(Zr=1/Zr),U[1]=(he*Ro-se*ta-Oe*Wi)*Zr,U[2]=(At*Lt-Ot*St+Y*Ht)*Zr,U[3]=(yt*St-vt*Lt-Ft*Ht)*Zr,U[4]=(ge*ea-ke*ta-Le*ho)*Zr,U[5]=(Er*ta-he*ea+Oe*ho)*Zr,U[6]=(Ot*Nt-it*Lt-Y*en)*Zr,U[7]=(Fe*Lt-yt*Nt+Ft*en)*Zr,U[8]=(ke*Ro-ve*ea+Le*Ln)*Zr,U[9]=(se*ea-Er*Ro-Oe*Ln)*Zr,U[10]=(it*St-At*Nt+Y*ct)*Zr,U[11]=(vt*Nt-Fe*St-Ft*ct)*Zr,U[12]=(ve*ho-ke*Wi-ge*Ln)*Zr,U[13]=(Er*Wi-se*ho+he*Ln)*Zr,U[14]=(At*en-it*Ht-Ot*ct)*Zr,U[15]=(Fe*Ht-vt*en+yt*ct)*Zr),function(dl){var Lu,oo,li,pl,Lc,xi,dl=[dl[0],dl[1],dl[2],1];return li=Rf,pl=(oo=Lu=dl)[0],Lc=oo[1],xi=oo[2],oo=oo[3],Lu[0]=li[0]*pl+li[4]*Lc+li[8]*xi+li[12]*oo,Lu[1]=li[1]*pl+li[5]*Lc+li[9]*xi+li[13]*oo,Lu[2]=li[2]*pl+li[6]*Lc+li[10]*xi+li[14]*oo,Lu[3]=li[3]*pl+li[7]*Lc+li[11]*xi+li[15]*oo,[dl[0],dl[1],dl[2]]}},yr=Li;function Li(U){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:$a,translate3D:fl,scale3D:zf,transpose3D:Nu},this.update(U)}e.Coordinate=an,e.Coordinate3D=yr,Object.defineProperty(e,"__esModule",{value:!0})})});var I$=Hu((owt,Yp)=>{"use strict";var UC=Yp.exports;Yp.exports.isNumber=function(e){return typeof e=="number"};Yp.exports.findMin=function(e){if(e.length===0)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t};Yp.exports.findMax=function(e){if(e.length===0)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t};Yp.exports.findMinMulti=function(e){for(var t=UC.findMin(e[0]),n=1;n<e.length;n++)t=Math.min(t,UC.findMin(e[n]));return t};Yp.exports.findMaxMulti=function(e){for(var t=UC.findMax(e[0]),n=1;n<e.length;n++)t=Math.max(t,UC.findMax(e[n]));return t};Yp.exports.inside=function(e,t,n){return e<=n&&n<=t}});var F$=Hu((awt,Xp)=>{"use strict";var D$=50,z$=2,Fye=Math.log(2),R$=Xp.exports,Cc=I$();function Bye(e){return 1-Math.abs(e)}Xp.exports.getUnifiedMinMax=function(e,t){return R$.getUnifiedMinMaxMulti([e],t)};Xp.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,r=!1,i=Cc.isNumber(t.width)?t.width:z$,o=Cc.isNumber(t.size)?t.size:D$,a=Cc.isNumber(t.min)?t.min:(n=!0,Cc.findMinMulti(e)),s=Cc.isNumber(t.max)?t.max:(r=!0,Cc.findMaxMulti(e)),l=s-a,c=l/(o-1);return n&&(a=a-2*i*c),r&&(s=s+2*i*c),{min:a,max:s}};Xp.exports.create=function(e,t){if(t=t||{},!e||e.length===0)return[];var n=Cc.isNumber(t.size)?t.size:D$,r=Cc.isNumber(t.width)?t.width:z$,i=R$.getUnifiedMinMax(e,{size:n,width:r,min:t.min,max:t.max}),o=i.min,a=i.max,s=a-o,l=s/(n-1);if(s===0)return[{x:o,y:1}];for(var c=[],u=0;u<n;u++)c.push({x:o+u*l,y:0});var f=function(x){return Math.floor((x-o)/l)},p=jye(Bye,r),d=p[r],h=p[r-1]-p[r-2],m=0;e.forEach(function(x){var _=f(x);if(!(_+r<0||_-r>=c.length)){var w=Math.max(_-r,0),S=_,M=Math.min(_+r,c.length-1),O=w-(_-r),E=_+r-M,P=p[-r-1+O]||0,k=p[-r-1+E]||0,A=d/(d-P-k);O>0&&(m+=A*(O-1)*h);var N=Math.max(0,_-r+1);Cc.inside(0,c.length-1,N)&&(c[N].y+=A*1*h),Cc.inside(0,c.length-1,S+1)&&(c[S+1].y-=A*2*h),Cc.inside(0,c.length-1,M+1)&&(c[M+1].y+=A*1*h)}});var g=m,v=0,y=0;return c.forEach(function(x){v+=x.y,g+=v,x.y=g,y+=g}),y>0&&c.forEach(function(x){x.y/=y}),c};function jye(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}Xp.exports.getExpectedValueFromPdf=function(e){if(!(!e||e.length===0)){var t=0;return e.forEach(function(n){t+=n.x*n.y}),t}};Xp.exports.getXWithLeftTailArea=function(e,t){if(!(!e||e.length===0)){for(var n=0,r=0,i=0;i<e.length&&(r=i,n+=e[i].y,!(n>=t));i++);return e[r].x}};Xp.exports.getPerplexity=function(e){if(!(!e||e.length===0)){var t=0;return e.forEach(function(n){var r=Math.log(n.y);isFinite(r)&&(t+=n.y*r)}),t=-t/Fye,Math.pow(2,t)}}});var V$=Hu(($C,j$)=>{"use strict";(function(e,t){typeof $C=="object"&&typeof j$<"u"?t($C):typeof define=="function"&&define.amd?define(["exports"],t):t(e.fmin=e.fmin||{})})($C,function(e){"use strict";function t(d,h,m,g){g=g||{};var v=g.maxIterations||100,y=g.tolerance||1e-10,x=d(h),_=d(m),w=m-h;if(x*_>0)throw"Initial bisect points must have opposite signs";if(x===0)return h;if(_===0)return m;for(var S=0;S<v;++S){w/=2;var M=h+w,O=d(M);if(O*x>=0&&(h=M),Math.abs(w)<y||O===0)return M}return h+w}function n(d){for(var h=new Array(d),m=0;m<d;++m)h[m]=0;return h}function r(d,h){return n(d).map(function(){return n(h)})}function i(d,h){for(var m=0,g=0;g<d.length;++g)m+=d[g]*h[g];return m}function o(d){return Math.sqrt(i(d,d))}function a(d,h,m){for(var g=0;g<h.length;++g)d[g]=h[g]*m}function s(d,h,m,g,v){for(var y=0;y<d.length;++y)d[y]=h*m[y]+g*v[y]}function l(d,h,m){m=m||{};var g=m.maxIterations||h.length*200,v=m.nonZeroDelta||1.05,y=m.zeroDelta||.001,x=m.minErrorDelta||1e-6,_=m.minErrorDelta||1e-5,w=m.rho!==void 0?m.rho:1,S=m.chi!==void 0?m.chi:2,M=m.psi!==void 0?m.psi:-.5,O=m.sigma!==void 0?m.sigma:.5,E,P=h.length,k=new Array(P+1);k[0]=h,k[0].fx=d(h),k[0].id=0;for(var A=0;A<P;++A){var N=h.slice();N[A]=N[A]?N[A]*v:y,k[A+1]=N,k[A+1].fx=d(N),k[A+1].id=A+1}function L(te){for(var ae=0;ae<te.length;ae++)k[P][ae]=te[ae];k[P].fx=te.fx}for(var z=function(te,ae){return te.fx-ae.fx},B=h.slice(),H=h.slice(),j=h.slice(),W=h.slice(),Z=0;Z<g;++Z){if(k.sort(z),m.history){var ie=k.map(function(te){var ae=te.slice();return ae.fx=te.fx,ae.id=te.id,ae});ie.sort(function(te,ae){return te.id-ae.id}),m.history.push({x:k[0].slice(),fx:k[0].fx,simplex:ie})}for(E=0,A=0;A<P;++A)E=Math.max(E,Math.abs(k[0][A]-k[1][A]));if(Math.abs(k[0].fx-k[P].fx)<x&&E<_)break;for(A=0;A<P;++A){B[A]=0;for(var R=0;R<P;++R)B[A]+=k[R][A];B[A]/=P}var q=k[P];if(s(H,1+w,B,-w,q),H.fx=d(H),H.fx<k[0].fx)s(W,1+S,B,-S,q),W.fx=d(W),W.fx<H.fx?L(W):L(H);else if(H.fx>=k[P-1].fx){var J=!1;if(H.fx>q.fx?(s(j,1+M,B,-M,q),j.fx=d(j),j.fx<q.fx?L(j):J=!0):(s(j,1-M*w,B,M*w,q),j.fx=d(j),j.fx<H.fx?L(j):J=!0),J){if(O>=1)break;for(A=1;A<k.length;++A)s(k[A],1-O,k[0],O,k[A]),k[A].fx=d(k[A])}}else L(H)}return k.sort(z),{fx:k[0].fx,x:k[0]}}function c(d,h,m,g,v,y,x){var _=m.fx,w=i(m.fxprime,h),S=_,M=_,O=w,E=0;v=v||1,y=y||1e-6,x=x||.1;function P(A,N,L){for(var z=0;z<16;++z)if(v=(A+N)/2,s(g.x,1,m.x,v,h),S=g.fx=d(g.x,g.fxprime),O=i(g.fxprime,h),S>_+y*v*w||S>=L)N=v;else{if(Math.abs(O)<=-x*w)return v;O*(N-A)>=0&&(N=A),A=v,L=S}return 0}for(var k=0;k<10;++k){if(s(g.x,1,m.x,v,h),S=g.fx=d(g.x,g.fxprime),O=i(g.fxprime,h),S>_+y*v*w||k&&S>=M)return P(E,v,M);if(Math.abs(O)<=-x*w)return v;if(O>=0)return P(v,E,S);M=S,E=v,v*=2}return v}function u(d,h,m){var g={x:h.slice(),fx:0,fxprime:h.slice()},v={x:h.slice(),fx:0,fxprime:h.slice()},y=h.slice(),x,_,w=1,S;m=m||{},S=m.maxIterations||h.length*20,g.fx=d(g.x,g.fxprime),x=g.fxprime.slice(),a(x,g.fxprime,-1);for(var M=0;M<S;++M){if(w=c(d,x,g,v,w),m.history&&m.history.push({x:g.x.slice(),fx:g.fx,fxprime:g.fxprime.slice(),alpha:w}),!w)a(x,g.fxprime,-1);else{s(y,1,v.fxprime,-1,g.fxprime);var O=i(g.fxprime,g.fxprime),E=Math.max(0,i(y,v.fxprime)/O);s(x,E,x,-1,v.fxprime),_=g,g=v,v=_}if(o(g.fxprime)<=1e-5)break}return m.history&&m.history.push({x:g.x.slice(),fx:g.fx,fxprime:g.fxprime.slice(),alpha:w}),g}function f(d,h,m){m=m||{};for(var g=m.maxIterations||h.length*100,v=m.learnRate||.001,y={x:h.slice(),fx:0,fxprime:h.slice()},x=0;x<g&&(y.fx=d(y.x,y.fxprime),m.history&&m.history.push({x:y.x.slice(),fx:y.fx,fxprime:y.fxprime.slice()}),s(y.x,1,y.x,-v,y.fxprime),!(o(y.fxprime)<=1e-5));++x);return y}function p(d,h,m){m=m||{};var g={x:h.slice(),fx:0,fxprime:h.slice()},v={x:h.slice(),fx:0,fxprime:h.slice()},y=m.maxIterations||h.length*100,x=m.learnRate||1,_=h.slice(),w=m.c1||.001,S=m.c2||.1,M,O=[];if(m.history){var E=d;d=function(k,A){return O.push(k.slice()),E(k,A)}}g.fx=d(g.x,g.fxprime);for(var P=0;P<y&&(a(_,g.fxprime,-1),x=c(d,_,g,v,x,w,S),m.history&&(m.history.push({x:g.x.slice(),fx:g.fx,fxprime:g.fxprime.slice(),functionCalls:O,learnRate:x,alpha:x}),O=[]),M=g,g=v,v=M,!(x===0||o(g.fxprime)<1e-5));++P);return g}e.bisect=t,e.nelderMead=l,e.conjugateGradient=u,e.gradientDescent=f,e.gradientDescentLineSearch=p,e.zeros=n,e.zerosM=r,e.norm2=o,e.weightedSum=s,e.scale=a})});function Iee(e,t){e&1&&(D(0,"li",33)(1,"span",9),Ct(),D(2,"svg",10),xe(3,"path",34)(4,"path",35),F()()())}function Dee(e,t){}function zee(e,t){if(e&1&&(D(0,"div",36),xe(1,"afc-logo-mark"),F(),D(2,"div",36)(3,"h1"),ce(4,"Flexi Doc"),F()(),D(5,"div",36)(6,"p"),ce(7,"Version 2.0.1"),F()(),D(8,"div",36)(9,"p"),ce(10),Ea(11,"date"),F()(),D(12,"div",36)(13,"p"),ce(14,"All Rights Reserved."),F()()),e&2){let n=me();$(10),Wt("\u2122 and \xA9 ",ns(11,1,n.currentDate,"yyyy")," AFC Holdings")}}function Ree(e,t){}var u9=(()=>{let t=class t{constructor(r,i,o,a){this.authService=r,this.cookiesService=i,this.routingService=o,this.cdr=a,this.user=this.cookiesService.getCookie("user"),this.isAdmin=!1,this.currentDate=new Date,this.isVisible=!1,this.isConfirmLoading=!1,console.log(this.user),this.checkIfAdmin()}ngOnInit(){this.cdr.detectChanges()}checkIfAdmin(){for(let r of this.user.authorities)r.authority=="ADMIN"&&(this.isAdmin=!0)}showModal(){this.isVisible=!0}handleOk(){this.isConfirmLoading=!0,setTimeout(()=>{this.isVisible=!1,this.isConfirmLoading=!1},1e3)}handleCancel(){this.isVisible=!1}openUserPreferences(){this.routingService.navigateByUrl("/authorise/preferences")}logout(){this.authService.logout()}};t.\u0275fac=function(i){return new(i||t)(ht(wI),ht(Sl),ht(cr),ht(Zm))},t.\u0275cmp=tn({type:t,selectors:[["app-app-layout"]],decls:53,vars:13,consts:[["menu","nzDropdownMenu"],["modalTitle",""],["modalContent",""],["modalFooter",""],[3,"nzCollapsed"],[1,"isupport-side-nav-children"],[1,"side-nav-logo"],["nz-menu","","nzTheme","dark","nzMode","inline",1,"sider-menu"],["routerLink","/authorise/workspace","routerLinkActive","ant-menu-item-selected","nz-menu-item","","nzTooltipTitle","Workspace","nzTooltipPlacement","right","nz-tooltip",""],["nz-icon",""],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","currentColor","d","M10 2h4c3.771 0 5.657 0 6.828 1.172C22 4.343 22 6.229 22 10v1c0 .552 0 1.55-.006 2H2.007C2 12.55 2 11.552 2 11v-1c0-3.771 0-5.657 1.172-6.828C4.343 2 6.229 2 10 2","opacity","0.5"],["fill","currentColor","d","M7.985 17.5c-2.84 0-4.26 0-5.141-.879C2.272 16.052 2.07 15.258 2 14v-1h20v1c-.07 1.258-.272 2.052-.844 2.621c-.882.879-2.301.879-5.14.879h-3.263v4h3.262c.416 0 .753.336.753.75s-.337.75-.753.75h-8.03a.751.751 0 0 1-.753-.75c0-.414.337-.75.753-.75h3.262v-4z"],["routerLink","/authorise/documents","routerLinkActive","ant-menu-item-selected","nz-menu-item","","nzTooltipTitle","Documents","nzTooltipPlacement","right","nz-tooltip",""],["fill","currentColor","d","M3 10c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172C21 4.343 21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828C18.657 22 16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172C3 19.657 3 17.771 3 14z","opacity","0.5"],["fill","currentColor","d","M16.519 16.501c.175-.136.334-.295.651-.612l3.957-3.958c.096-.095.052-.26-.075-.305a4.332 4.332 0 0 1-1.644-1.034a4.332 4.332 0 0 1-1.034-1.644c-.045-.127-.21-.171-.305-.075L14.11 12.83c-.317.317-.476.476-.612.651c-.161.207-.3.43-.412.666c-.095.2-.166.414-.308.84l-.184.55l-.292.875l-.273.82a.584.584 0 0 0 .738.738l.82-.273l.875-.292l.55-.184c.426-.142.64-.212.84-.308c.236-.113.46-.25.666-.412m5.849-5.809a2.163 2.163 0 1 0-3.06-3.059l-.126.128a.524.524 0 0 0-.148.465c.02.107.055.265.12.452c.13.375.376.867.839 1.33a3.5 3.5 0 0 0 1.33.839c.188.065.345.1.452.12a.525.525 0 0 0 .465-.148z"],["fill","currentColor","fill-rule","evenodd","d","M7.25 9A.75.75 0 0 1 8 8.25h6.5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 9m0 4a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75","clip-rule","evenodd"],["routerLink","/authorise/self-service-admin","routerLinkActive","ant-menu-item-selected","nz-menu-item","","nzTooltipTitle","Self Service Admin","nzTooltipPlacement","right","nz-tooltip",""],["fill","currentColor","fill-rule","evenodd","d","m6.72 10.6l1.439 1.2c1.836 1.53 2.755 2.295 3.84 2.295c1.087 0 2.005-.765 3.842-2.296l1.44-1.2c.353-.294.53-.442.624-.643c.095-.202.095-.432.095-.893V7q0-.48-.002-.898c-.012-1.771-.098-2.737-.73-3.37C16.535 2 15.357 2 13 2h-2c-2.357 0-3.536 0-4.268.732c-.633.633-.72 1.599-.732 3.37v2.961c0 .46 0 .691.094.893c.095.201.272.349.625.644M9.25 6a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5h-4A.75.75 0 0 1 9.25 6m1 3a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75","clip-rule","evenodd"],["fill","currentColor","d","m8.159 11.8l-1.44-1.2c-.353-.295-.53-.442-.625-.644S6 9.524 6 9.064V6.102c-1.3.128-2.175.417-2.828 1.07C2 8.343 2 10.23 2 14.002c0 3.77 0 5.656 1.172 6.827S6.229 22.002 10 22.002h4c3.771 0 5.657 0 6.828-1.172S22 17.773 22 14.002s0-5.658-1.172-6.83c-.653-.653-1.529-.942-2.83-1.07q.002.42.002.9v2.063c0 .46 0 .69-.095.892c-.094.202-.27.35-.625.644l-1.44 1.2c-1.836 1.53-2.754 2.295-3.84 2.295S9.995 13.33 8.159 11.8","opacity","0.5"],["routerLink","/authorise/preferences","routerLinkActive","ant-menu-item-selected","nz-menu-item","","nzTooltipTitle","Preferences","nzTooltipPlacement","right","nz-tooltip",""],["cx","12","cy","6","r","4","fill","currentColor"],["fill","currentColor","d","M20 17.5c0 2.485 0 4.5-8 4.5s-8-2.015-8-4.5S7.582 13 12 13s8 2.015 8 4.5","opacity","0.5"],["routerLink","/authorise/admin","routerLinkActive","ant-menu-item-selected","nz-menu-item","","nzTooltipTitle","Admin","nzTooltipPlacement","right","nz-tooltip","",4,"ngIf"],[1,"ant-menu-item-bottom","d-flex","justify-content-center",2,"padding","20px","margin-bottom","20px"],["nz-dropdown","","nzPlacement","topLeft",2,"color","#f56a00","background-color","#fde3cf",3,"nzText","nzDropdownMenu"],["nz-menu",""],["nz-menu-item",""],["nz-menu-item","",3,"click"],[1,"right-layout"],[1,"container-fluid","h-100"],[1,"authorise-app-footer",3,"click"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter"],["routerLink","/authorise/admin","routerLinkActive","ant-menu-item-selected","nz-menu-item","","nzTooltipTitle","Admin","nzTooltipPlacement","right","nz-tooltip",""],["fill","currentColor","d","M3 10.417c0-3.198 0-4.797.378-5.335c.377-.537 1.88-1.052 4.887-2.081l.573-.196C10.405 2.268 11.188 2 12 2c.811 0 1.595.268 3.162.805l.573.196c3.007 1.029 4.51 1.544 4.887 2.081C21 5.62 21 7.22 21 10.417v1.574c0 5.638-4.239 8.375-6.899 9.536C13.38 21.842 13.02 22 12 22s-1.38-.158-2.101-.473C7.239 20.365 3 17.63 3 11.991z","opacity","0.5"],["fill","currentColor","d","M13.5 15a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-1.401A2.999 2.999 0 0 1 12 8a3 3 0 0 1 1.5 5.599z"],[1,"d-flex","justify-content-center"]],template:function(i,o){if(i&1){let a=pt();D(0,"nz-layout")(1,"nz-sider",4)(2,"div",5)(3,"div",6),xe(4,"afc-logo-mark"),F(),D(5,"ul",7)(6,"li",8)(7,"span",9),Ct(),D(8,"svg",10),xe(9,"path",11)(10,"path",12),F()()(),Yn(),D(11,"li",13)(12,"span",9),Ct(),D(13,"svg",10),xe(14,"path",14)(15,"path",15)(16,"path",16),F()()(),Yn(),D(17,"li",17)(18,"span",9),Ct(),D(19,"svg",10),xe(20,"path",18)(21,"path",19),F()()(),Yn(),D(22,"li",20)(23,"span",9),Ct(),D(24,"svg",10),xe(25,"circle",21)(26,"path",22),F()()(),Je(27,Iee,5,0,"li",23),F(),Yn(),D(28,"div",24),xe(29,"nz-avatar",25),F(),D(30,"nz-dropdown-menu",null,0)(32,"ul",26)(33,"li",27),ce(34),F(),D(35,"li",28),Xe("click",function(){return ze(a),Re(o.openUserPreferences())}),ce(36,"Preferences"),F(),D(37,"li",28),Xe("click",function(){return ze(a),Re(o.logout())}),ce(38,"Logout"),F()()()()(),D(39,"nz-layout",29)(40,"nz-content")(41,"div",30),xe(42,"router-outlet"),F()(),D(43,"nz-footer",31),Xe("click",function(){return ze(a),Re(o.showModal())}),ce(44),Ea(45,"date"),F()()(),D(46,"nz-modal",32),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(47,Dee,0,0,"ng-template",null,1,dn)(49,zee,15,4,"ng-template",null,2,dn)(51,Ree,0,0,"ng-template",null,3,dn),F()}if(i&2){let a=bn(31),s=bn(48),l=bn(50),c=bn(52);$(),oe("nzCollapsed",!0),$(26),oe("ngIf",o.isAdmin),$(2),oe("nzText",o.user.email.substring(0,2).toUpperCase())("nzDropdownMenu",a),$(5),Yt(o.user.name),$(10),Wt("Flexi Doc \xA9 ",ns(45,10,o.currentDate,"yyyy")," Implementation By AFC Holdings - v2.0.1"),$(2),qt("nzVisible",o.isVisible),oe("nzTitle",s)("nzContent",l)("nzFooter",c)}},dependencies:[Ki,rs,ei,bI,SI,Kn,LI,TI,PI,NI,AI,EI,Xn,ra,II,DI,ls,qc,Uu],styles:[".trigger[_ngcontent-%COMP%]{font-size:18px;line-height:64px;padding:0 24px;cursor:pointer;transition:color .3s}.trigger[_ngcontent-%COMP%]:hover{color:#1890ff}.side-nav-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:15px 0}nz-content[_ngcontent-%COMP%]{padding:0 20px}nz-footer[_ngcontent-%COMP%]{text-align:center;background:transparent}.layout[_ngcontent-%COMP%]{min-height:100vh}nz-sider[_ngcontent-%COMP%]{overflow:auto;height:100%;position:fixed;left:0;margin:15px 0 15px 15px;max-height:calc(100vh - 30px);border-radius:25px;box-shadow:0 0 2rem #3347501a}.right-layout[_ngcontent-%COMP%]{margin-left:95px;height:100vh;width:calc(100vw - 95px)!important}.authorise-app-footer[_ngcontent-%COMP%]{font-family:Space Mono,monospace;font-size:12px;transition-duration:.5s}.authorise-app-footer[_ngcontent-%COMP%]:hover{color:#2ab347;cursor:pointer}nz-header[_ngcontent-%COMP%]{background:#fff;padding:0}.inner-content[_ngcontent-%COMP%]{padding:24px;text-align:center}.sider-menu[_ngcontent-%COMP%]{height:unset!important;display:flex;flex-direction:column;justify-content:center;flex-grow:1;border-right:0}.isupport-side-nav-children[_ngcontent-%COMP%]{height:calc(100vh - 30px);display:flex;margin-top:-.1px;padding-top:.1px;flex-direction:column;justify-content:space-between}.custom-dropdown-container[_ngcontent-%COMP%]   .ant-dropdown[_ngcontent-%COMP%]{top:40px!important;left:40px!important}.ant-menu-dark[_ngcontent-%COMP%]   .ant-menu-item-selected[_ngcontent-%COMP%]   .ant-menu-item-icon[_ngcontent-%COMP%], .ant-menu-dark[_ngcontent-%COMP%]   .ant-menu-item-selected[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{color:#2ab347}.ant-menu-dark.ant-menu-dark[_ngcontent-%COMP%]:not(.ant-menu-horizontal)   .ant-menu-item-selected[_ngcontent-%COMP%]{background-color:transparent}.navbar[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-lg[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-md[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-sm[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xl[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xxl[_ngcontent-%COMP%]{justify-content:end}.ant-menu.ant-menu-dark[_ngcontent-%COMP%], .ant-menu-dark[_ngcontent-%COMP%]   .ant-menu-sub[_ngcontent-%COMP%], .ant-menu.ant-menu-dark[_ngcontent-%COMP%]   .ant-menu-sub[_ngcontent-%COMP%]{background:transparent}.ant-layout[_ngcontent-%COMP%]{background-image:url(/assets/images/brand/authorise_light_green_BG.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;overflow:hidden}"]});let e=t;return e})();var Db=()=>[["cartesian"]];Db.props={};function f9(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}var zb=(e={})=>{let t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),f9(n.startAngle,n.endAngle))},Uc=e=>{let{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=zb(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};Uc.props={};var s0=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];s0.props={transform:!0};var p9=(e={})=>{let t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},Rb=e=>{let{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=p9(e);return[...s0(),...Uc({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};Rb.props={};var Fb=(e={})=>{let t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},l0=e=>{let{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Fb(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...Uc({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};l0.props={};var c0=()=>[["parallel",0,1,0,1]];c0.props={};var Bb=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];Bb.props={transform:!0};var jb=e=>{let{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...c0(),...Uc({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};jb.props={};var Vb=({value:e})=>t=>t.map(()=>e);Vb.props={};var Hb=({value:e})=>t=>t.map(e);Hb.props={};var Wb=({value:e})=>t=>t.map(n=>n[e]);Wb.props={};var qb=({value:e})=>()=>e;qb.props={};var Fee=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},oc=Fee;var Bee=function(e,t){if(!oc(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},n6=Bee;var Sr=function(e){return typeof e=="function"};var jee=function(e){return e==null},on=jee;var Vee={}.toString,Hee=function(e,t){return Vee.call(e)==="[object "+t+"]"},Gc=Hee;var nr=function(e){return Array.isArray?Array.isArray(e):Gc(e,"Array")};var Al=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function Wee(e,t){if(e){var n;if(nr(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(Al(e)){for(var o in e)if(e.hasOwnProperty(o)&&(n=t(e[o],o),n===!1))break}}}var u0=Wee;var qee=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return u0(e,function(n,r){Sr(e)&&r==="prototype"||t.push(r)}),t},dv=qee;function Uee(e,t){var n=dv(t),r=n.length;if(on(e))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(t[o]!==e[o]||!(o in e))return!1}return!0}var d9=Uee;var Gee=function(e){return typeof e=="object"&&e!==null},hv=Gee;var $ee=function(e){if(!hv(e)||!Gc(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},oa=$ee;function Yee(e,t){if(!nr(e))return null;var n;if(Sr(t)&&(n=t),oa(t)&&(n=function(i){return d9(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var Gu=Yee;var Ed=function(e){if(nr(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])};var Ad=function(e){if(nr(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])};var Xee=function(e,t,n){if(!nr(e)&&!oa(e))return e;var r=n;return u0(e,function(i,o){r=t(r,i,o)}),r},h9=Xee;var rr=function(e){return Gc(e,"String")};function $c(e){if(oc(e)){var t=e;return t[t.length-1]}}var Kee=function(e,t,n){return e<t?t:e>n?n:e},hr=Kee;var Zee=function(e){return Gc(e,"Number")},Dn=Zee;var Jee=1e-5;function $u(e,t,n){return n===void 0&&(n=Jee),Math.abs(e-t)<n}var r6=function(e,t){if(nr(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var o=e[i],a=Sr(t)?t(o):o[t];a>r&&(n=o,r=a)}return n}};var i6=function(e,t){if(nr(e)){for(var n,r=1/0,i=0;i<e.length;i++){var o=e[i],a=Sr(t)?t(o):o[t];a<r&&(n=o,r=a)}return n}};var Qee=function(e,t){return(e%t+t)%t},Ub=Qee;var Gb=function(e){return on(e)?"":e.toString()};var ete=function(e){var t=Gb(e);return t.charAt(0).toLowerCase()+t.substring(1)},f0=ete;function tte(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var o6=tte;var nte=function(e){var t=Gb(e);return t.charAt(0).toUpperCase()+t.substring(1)},aa=nte;var rte=function(e){return Gc(e,"Boolean")},$b=rte;var ite=function(e){return e===null},a6=ite;var ote=function(e){return e===void 0},mr=ote;var s6=function(e){if(typeof e!="object"||e===null)return e;var t;if(nr(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=s6(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=s6(e[i]):t[i]=e[i]}return t},Td=s6;function ate(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}var mv=ate;function ste(e){var t,n,r,i=e||1;function o(s,l){++t>i&&(r=n,a(1),++t),n[s]=l}function a(s){t=0,n=Object.create(null),s||(r=Object.create(null))}return a(),{clear:a,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return o(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:o(s,l)}}}var l6=function(e,t,n){if(n===void 0&&(n=128),!Sr(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=t?t.apply(this,i):i[0],s=r.cache;if(s.has(a))return s.get(a);var l=e.apply(this,i);return s.set(a,l),l};return r.cache=ste(n),r};var lte=5;function cte(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function m9(e,t,n,r){n=n||0,r=r||lte;for(var i in t)if(cte(t,i)){var o=t[i];o!==null&&oa(o)?(oa(e[i])||(e[i]={}),n<r?m9(e[i],o,n+1,r):e[i]=t[i]):nr(o)?(e[i]=[],e[i]=e[i].concat(o)):o!==void 0&&(e[i]=o)}}var ute=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)m9(e,t[r]);return e},_e=ute;var fte=function(e,t){if(!oc(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},Yb=fte;var c6=function(e,t){if(e===t)return!0;if(!e||!t||rr(e)||rr(t))return!1;if(oc(e)||oc(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=c6(e[r],t[r]),!!n);r++);return n}if(hv(e)||hv(t)){var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var n=!0,r=0;r<i.length&&(n=c6(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},gv=c6;var Cr=function(e,t,n){for(var r=0,i=rr(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e};var u6=function(e,t,n){var r=e,i=rr(t)?t.split("."):t;return i.forEach(function(o,a){a<i.length-1?(Al(r[o])||(r[o]=Dn(i[a+1])?[]:{}),r=r[o]):r[o]=n}),e};var pte=Object.prototype.hasOwnProperty,f6=function(e,t){if(e===null||!oa(e))return{};var n={};return u0(t,function(r){pte.call(e,r)&&(n[r]=e[r])}),n};var Pd=function(e,t){return h9(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};var js=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=n.leading===!1?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var u=Date.now();!s&&n.leading===!1&&(s=u);var f=t-(u-s);return i=this,o=arguments,f<=0||f>t?(r&&(clearTimeout(r),r=null),s=u,a=e.apply(i,o),r||(i=o=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,f)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c};var vv=function(){};var Vs=function(e){return e};function rp(e){return on(e)?0:oc(e)?e.length:Object.keys(e).length}var On=1e-6,Ar=typeof Float32Array<"u"?Float32Array:Array,cs=Math.random;var w7e=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Nd={};Fc(Nd,{add:()=>Dte,adjoint:()=>_te,clone:()=>hte,copy:()=>mte,create:()=>p6,determinant:()=>wte,equals:()=>Bte,exactEquals:()=>Fte,frob:()=>Ite,fromMat2d:()=>Ate,fromMat4:()=>dte,fromQuat:()=>Tte,fromRotation:()=>kte,fromScaling:()=>Ete,fromTranslation:()=>Mte,fromValues:()=>gte,identity:()=>yte,invert:()=>bte,mul:()=>jte,multiply:()=>g9,multiplyScalar:()=>zte,multiplyScalarAndAdd:()=>Rte,normalFromMat4:()=>Pte,projection:()=>Nte,rotate:()=>Cte,scale:()=>Ote,set:()=>vte,str:()=>Lte,sub:()=>Vte,subtract:()=>v9,translate:()=>Ste,transpose:()=>xte});function p6(){var e=new Ar(9);return Ar!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function dte(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function hte(e){var t=new Ar(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function mte(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function gte(e,t,n,r,i,o,a,s,l){var c=new Ar(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=l,c}function vte(e,t,n,r,i,o,a,s,l,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=c,e}function yte(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function xte(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function bte(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=u*a-s*c,p=-u*o+s*l,d=c*o-a*l,h=n*f+r*p+i*d;return h?(h=1/h,e[0]=f*h,e[1]=(-u*r+i*c)*h,e[2]=(s*r-i*a)*h,e[3]=p*h,e[4]=(u*n-i*l)*h,e[5]=(-s*n+i*o)*h,e[6]=d*h,e[7]=(-c*n+r*l)*h,e[8]=(a*n-r*o)*h,e):null}function _te(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e}function wte(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*o-a*l)+n*(-c*i+a*s)+r*(l*i-o*s)}function g9(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],p=n[0],d=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],x=n[7],_=n[8];return e[0]=p*r+d*a+h*c,e[1]=p*i+d*s+h*u,e[2]=p*o+d*l+h*f,e[3]=m*r+g*a+v*c,e[4]=m*i+g*s+v*u,e[5]=m*o+g*l+v*f,e[6]=y*r+x*a+_*c,e[7]=y*i+x*s+_*u,e[8]=y*o+x*l+_*f,e}function Ste(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],p=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=p*r+d*a+c,e[7]=p*i+d*s+u,e[8]=p*o+d*l+f,e}function Cte(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],p=Math.sin(n),d=Math.cos(n);return e[0]=d*r+p*a,e[1]=d*i+p*s,e[2]=d*o+p*l,e[3]=d*a-p*r,e[4]=d*s-p*i,e[5]=d*l-p*o,e[6]=c,e[7]=u,e[8]=f,e}function Ote(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Mte(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function kte(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ete(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ate(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Tte(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,f=r*s,p=i*a,d=i*s,h=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-f-h,e[3]=u-v,e[6]=p+g,e[1]=u+v,e[4]=1-c-h,e[7]=d-m,e[2]=p-g,e[5]=d+m,e[8]=1-c-f,e}function Pte(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,x=n*l-i*a,_=n*c-o*a,w=r*l-i*s,S=r*c-o*s,M=i*c-o*l,O=u*m-f*h,E=u*g-p*h,P=u*v-d*h,k=f*g-p*m,A=f*v-d*m,N=p*v-d*g,L=y*N-x*A+_*k+w*P-S*E+M*O;return L?(L=1/L,e[0]=(s*N-l*A+c*k)*L,e[1]=(l*P-a*N-c*E)*L,e[2]=(a*A-s*P+c*O)*L,e[3]=(i*A-r*N-o*k)*L,e[4]=(n*N-i*P+o*E)*L,e[5]=(r*P-n*A-o*O)*L,e[6]=(m*M-g*S+v*w)*L,e[7]=(g*_-h*M-v*x)*L,e[8]=(h*S-m*_+v*y)*L,e):null}function Nte(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Lte(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ite(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Dte(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function v9(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function zte(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Rte(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function Fte(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Bte(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=t[0],p=t[1],d=t[2],h=t[3],m=t[4],g=t[5],v=t[6],y=t[7],x=t[8];return Math.abs(n-f)<=On*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-p)<=On*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-d)<=On*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-h)<=On*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-m)<=On*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=On*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=On*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-y)<=On*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-x)<=On*Math.max(1,Math.abs(u),Math.abs(x))}var jte=g9,Vte=v9;var Qe={};Fc(Qe,{add:()=>One,adjoint:()=>Xte,clone:()=>Wte,copy:()=>qte,create:()=>Hte,determinant:()=>Kte,equals:()=>Ane,exactEquals:()=>Ene,frob:()=>Cne,fromQuat:()=>hne,fromQuat2:()=>cne,fromRotation:()=>one,fromRotationTranslation:()=>b9,fromRotationTranslationScale:()=>pne,fromRotationTranslationScaleOrigin:()=>dne,fromScaling:()=>ine,fromTranslation:()=>rne,fromValues:()=>Ute,fromXRotation:()=>ane,fromYRotation:()=>sne,fromZRotation:()=>lne,frustum:()=>mne,getRotation:()=>fne,getScaling:()=>_9,getTranslation:()=>une,identity:()=>y9,invert:()=>Yte,lookAt:()=>_ne,mul:()=>Tne,multiply:()=>x9,multiplyScalar:()=>Mne,multiplyScalarAndAdd:()=>kne,ortho:()=>xne,orthoNO:()=>S9,orthoZO:()=>bne,perspective:()=>gne,perspectiveFromFieldOfView:()=>yne,perspectiveNO:()=>w9,perspectiveZO:()=>vne,rotate:()=>Qte,rotateX:()=>ene,rotateY:()=>tne,rotateZ:()=>nne,scale:()=>Jte,set:()=>Gte,str:()=>Sne,sub:()=>Pne,subtract:()=>C9,targetTo:()=>wne,translate:()=>Zte,transpose:()=>$te});function Hte(){var e=new Ar(16);return Ar!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Wte(e){var t=new Ar(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qte(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ute(e,t,n,r,i,o,a,s,l,c,u,f,p,d,h,m){var g=new Ar(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=l,g[9]=c,g[10]=u,g[11]=f,g[12]=p,g[13]=d,g[14]=h,g[15]=m,g}function Gte(e,t,n,r,i,o,a,s,l,c,u,f,p,d,h,m,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=c,e[9]=u,e[10]=f,e[11]=p,e[12]=d,e[13]=h,e[14]=m,e[15]=g,e}function y9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $te(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Yte(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,x=n*l-i*a,_=n*c-o*a,w=r*l-i*s,S=r*c-o*s,M=i*c-o*l,O=u*m-f*h,E=u*g-p*h,P=u*v-d*h,k=f*g-p*m,A=f*v-d*m,N=p*v-d*g,L=y*N-x*A+_*k+w*P-S*E+M*O;return L?(L=1/L,e[0]=(s*N-l*A+c*k)*L,e[1]=(i*A-r*N-o*k)*L,e[2]=(m*M-g*S+v*w)*L,e[3]=(p*S-f*M-d*w)*L,e[4]=(l*P-a*N-c*E)*L,e[5]=(n*N-i*P+o*E)*L,e[6]=(g*_-h*M-v*x)*L,e[7]=(u*M-p*_+d*x)*L,e[8]=(a*A-s*P+c*O)*L,e[9]=(r*P-n*A-o*O)*L,e[10]=(h*S-m*_+v*y)*L,e[11]=(f*_-u*S-d*y)*L,e[12]=(s*E-a*k-l*O)*L,e[13]=(n*k-r*E+i*O)*L,e[14]=(m*x-h*w-g*y)*L,e[15]=(u*w-f*x+p*y)*L,e):null}function Xte(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(p*v-d*g)-f*(l*v-c*g)+m*(l*d-c*p),e[1]=-(r*(p*v-d*g)-f*(i*v-o*g)+m*(i*d-o*p)),e[2]=r*(l*v-c*g)-s*(i*v-o*g)+m*(i*c-o*l),e[3]=-(r*(l*d-c*p)-s*(i*d-o*p)+f*(i*c-o*l)),e[4]=-(a*(p*v-d*g)-u*(l*v-c*g)+h*(l*d-c*p)),e[5]=n*(p*v-d*g)-u*(i*v-o*g)+h*(i*d-o*p),e[6]=-(n*(l*v-c*g)-a*(i*v-o*g)+h*(i*c-o*l)),e[7]=n*(l*d-c*p)-a*(i*d-o*p)+u*(i*c-o*l),e[8]=a*(f*v-d*m)-u*(s*v-c*m)+h*(s*d-c*f),e[9]=-(n*(f*v-d*m)-u*(r*v-o*m)+h*(r*d-o*f)),e[10]=n*(s*v-c*m)-a*(r*v-o*m)+h*(r*c-o*s),e[11]=-(n*(s*d-c*f)-a*(r*d-o*f)+u*(r*c-o*s)),e[12]=-(a*(f*g-p*m)-u*(s*g-l*m)+h*(s*p-l*f)),e[13]=n*(f*g-p*m)-u*(r*g-i*m)+h*(r*p-i*f),e[14]=-(n*(s*g-l*m)-a*(r*g-i*m)+h*(r*l-i*s)),e[15]=n*(s*p-l*f)-a*(r*p-i*f)+u*(r*l-i*s),e}function Kte(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],p=e[11],d=e[12],h=e[13],m=e[14],g=e[15],v=t*a-n*o,y=t*s-r*o,x=t*l-i*o,_=n*s-r*a,w=n*l-i*a,S=r*l-i*s,M=c*h-u*d,O=c*m-f*d,E=c*g-p*d,P=u*m-f*h,k=u*g-p*h,A=f*g-p*m;return v*A-y*k+x*P+_*E-w*O+S*M}function x9(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],p=t[9],d=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],x=n[0],_=n[1],w=n[2],S=n[3];return e[0]=x*r+_*s+w*f+S*m,e[1]=x*i+_*l+w*p+S*g,e[2]=x*o+_*c+w*d+S*v,e[3]=x*a+_*u+w*h+S*y,x=n[4],_=n[5],w=n[6],S=n[7],e[4]=x*r+_*s+w*f+S*m,e[5]=x*i+_*l+w*p+S*g,e[6]=x*o+_*c+w*d+S*v,e[7]=x*a+_*u+w*h+S*y,x=n[8],_=n[9],w=n[10],S=n[11],e[8]=x*r+_*s+w*f+S*m,e[9]=x*i+_*l+w*p+S*g,e[10]=x*o+_*c+w*d+S*v,e[11]=x*a+_*u+w*h+S*y,x=n[12],_=n[13],w=n[14],S=n[15],e[12]=x*r+_*s+w*f+S*m,e[13]=x*i+_*l+w*p+S*g,e[14]=x*o+_*c+w*d+S*v,e[15]=x*a+_*u+w*h+S*y,e}function Zte(e,t,n){var r=n[0],i=n[1],o=n[2],a,s,l,c,u,f,p,d,h,m,g,v;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*o+t[12],e[13]=t[1]*r+t[5]*i+t[9]*o+t[13],e[14]=t[2]*r+t[6]*i+t[10]*o+t[14],e[15]=t[3]*r+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],c=t[3],u=t[4],f=t[5],p=t[6],d=t[7],h=t[8],m=t[9],g=t[10],v=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=c,e[4]=u,e[5]=f,e[6]=p,e[7]=d,e[8]=h,e[9]=m,e[10]=g,e[11]=v,e[12]=a*r+u*i+h*o+t[12],e[13]=s*r+f*i+m*o+t[13],e[14]=l*r+p*i+g*o+t[14],e[15]=c*r+d*i+v*o+t[15]),e}function Jte(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qte(e,t,n,r){var i=r[0],o=r[1],a=r[2],s=Math.hypot(i,o,a),l,c,u,f,p,d,h,m,g,v,y,x,_,w,S,M,O,E,P,k,A,N,L,z;return s<On?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(n),c=Math.cos(n),u=1-c,f=t[0],p=t[1],d=t[2],h=t[3],m=t[4],g=t[5],v=t[6],y=t[7],x=t[8],_=t[9],w=t[10],S=t[11],M=i*i*u+c,O=o*i*u+a*l,E=a*i*u-o*l,P=i*o*u-a*l,k=o*o*u+c,A=a*o*u+i*l,N=i*a*u+o*l,L=o*a*u-i*l,z=a*a*u+c,e[0]=f*M+m*O+x*E,e[1]=p*M+g*O+_*E,e[2]=d*M+v*O+w*E,e[3]=h*M+y*O+S*E,e[4]=f*P+m*k+x*A,e[5]=p*P+g*k+_*A,e[6]=d*P+v*k+w*A,e[7]=h*P+y*k+S*A,e[8]=f*N+m*L+x*z,e[9]=p*N+g*L+_*z,e[10]=d*N+v*L+w*z,e[11]=h*N+y*L+S*z,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ene(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+f*r,e[7]=l*i+p*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=f*i-s*r,e[11]=p*i-l*r,e}function tne(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-f*r,e[3]=l*i-p*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+f*i,e[11]=l*r+p*i,e}function nne(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+f*r,e[3]=l*i+p*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=f*i-s*r,e[7]=p*i-l*r,e}function rne(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ine(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function one(e,t,n){var r=n[0],i=n[1],o=n[2],a=Math.hypot(r,i,o),s,l,c;return a<On?null:(a=1/a,r*=a,i*=a,o*=a,s=Math.sin(t),l=Math.cos(t),c=1-l,e[0]=r*r*c+l,e[1]=i*r*c+o*s,e[2]=o*r*c-i*s,e[3]=0,e[4]=r*i*c-o*s,e[5]=i*i*c+l,e[6]=o*i*c+r*s,e[7]=0,e[8]=r*o*c+i*s,e[9]=i*o*c-r*s,e[10]=o*o*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ane(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function sne(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lne(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b9(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,c=o+o,u=r*s,f=r*l,p=r*c,d=i*l,h=i*c,m=o*c,g=a*s,v=a*l,y=a*c;return e[0]=1-(d+m),e[1]=f+y,e[2]=p-v,e[3]=0,e[4]=f-y,e[5]=1-(u+m),e[6]=h+g,e[7]=0,e[8]=p+v,e[9]=h-g,e[10]=1-(u+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function cne(e,t){var n=new Ar(3),r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=r*r+i*i+o*o+a*a;return f>0?(n[0]=(s*a+u*r+l*o-c*i)*2/f,n[1]=(l*a+u*i+c*r-s*o)*2/f,n[2]=(c*a+u*o+s*i-l*r)*2/f):(n[0]=(s*a+u*r+l*o-c*i)*2,n[1]=(l*a+u*i+c*r-s*o)*2,n[2]=(c*a+u*o+s*i-l*r)*2),b9(e,t,n),e}function une(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function _9(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,c,u),e}function fne(e,t){var n=new Ar(3);_9(n,t);var r=1/n[0],i=1/n[1],o=1/n[2],a=t[0]*r,s=t[1]*i,l=t[2]*o,c=t[4]*r,u=t[5]*i,f=t[6]*o,p=t[8]*r,d=t[9]*i,h=t[10]*o,m=a+u+h,g=0;return m>0?(g=Math.sqrt(m+1)*2,e[3]=.25*g,e[0]=(f-d)/g,e[1]=(p-l)/g,e[2]=(s-c)/g):a>u&&a>h?(g=Math.sqrt(1+a-u-h)*2,e[3]=(f-d)/g,e[0]=.25*g,e[1]=(s+c)/g,e[2]=(p+l)/g):u>h?(g=Math.sqrt(1+u-a-h)*2,e[3]=(p-l)/g,e[0]=(s+c)/g,e[1]=.25*g,e[2]=(f+d)/g):(g=Math.sqrt(1+h-a-u)*2,e[3]=(s-c)/g,e[0]=(p+l)/g,e[1]=(f+d)/g,e[2]=.25*g),e}function pne(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,c=o+o,u=a+a,f=i*l,p=i*c,d=i*u,h=o*c,m=o*u,g=a*u,v=s*l,y=s*c,x=s*u,_=r[0],w=r[1],S=r[2];return e[0]=(1-(h+g))*_,e[1]=(p+x)*_,e[2]=(d-y)*_,e[3]=0,e[4]=(p-x)*w,e[5]=(1-(f+g))*w,e[6]=(m+v)*w,e[7]=0,e[8]=(d+y)*S,e[9]=(m-v)*S,e[10]=(1-(f+h))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function dne(e,t,n,r,i){var o=t[0],a=t[1],s=t[2],l=t[3],c=o+o,u=a+a,f=s+s,p=o*c,d=o*u,h=o*f,m=a*u,g=a*f,v=s*f,y=l*c,x=l*u,_=l*f,w=r[0],S=r[1],M=r[2],O=i[0],E=i[1],P=i[2],k=(1-(m+v))*w,A=(d+_)*w,N=(h-x)*w,L=(d-_)*S,z=(1-(p+v))*S,B=(g+y)*S,H=(h+x)*M,j=(g-y)*M,W=(1-(p+m))*M;return e[0]=k,e[1]=A,e[2]=N,e[3]=0,e[4]=L,e[5]=z,e[6]=B,e[7]=0,e[8]=H,e[9]=j,e[10]=W,e[11]=0,e[12]=n[0]+O-(k*O+L*E+H*P),e[13]=n[1]+E-(A*O+z*E+j*P),e[14]=n[2]+P-(N*O+B*E+W*P),e[15]=1,e}function hne(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,f=r*s,p=i*a,d=i*s,h=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-f-h,e[1]=u+v,e[2]=p-g,e[3]=0,e[4]=u-v,e[5]=1-c-h,e[6]=d+m,e[7]=0,e[8]=p+g,e[9]=d-m,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mne(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),c=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function w9(e,t,n,r,i){var o=1/Math.tan(t/2),a;return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}var gne=w9;function vne(e,t,n,r,i){var o=1/Math.tan(t/2),a;return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(r-i),e[10]=i*a,e[14]=i*r*a):(e[10]=-1,e[14]=-r),e}function yne(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),c=2/(i+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((a-s)*l*.5),e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function S9(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e}var xne=S9;function bne(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=o*c,e[15]=1,e}function _ne(e,t,n,r){var i,o,a,s,l,c,u,f,p,d,h=t[0],m=t[1],g=t[2],v=r[0],y=r[1],x=r[2],_=n[0],w=n[1],S=n[2];return Math.abs(h-_)<On&&Math.abs(m-w)<On&&Math.abs(g-S)<On?y9(e):(u=h-_,f=m-w,p=g-S,d=1/Math.hypot(u,f,p),u*=d,f*=d,p*=d,i=y*p-x*f,o=x*u-v*p,a=v*f-y*u,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-p*o,l=p*i-u*a,c=u*o-f*i,d=Math.hypot(s,l,c),d?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=c,e[10]=p,e[11]=0,e[12]=-(i*h+o*m+a*g),e[13]=-(s*h+l*m+c*g),e[14]=-(u*h+f*m+p*g),e[15]=1,e)}function wne(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=r[0],l=r[1],c=r[2],u=i-n[0],f=o-n[1],p=a-n[2],d=u*u+f*f+p*p;d>0&&(d=1/Math.sqrt(d),u*=d,f*=d,p*=d);var h=l*p-c*f,m=c*u-s*p,g=s*f-l*u;return d=h*h+m*m+g*g,d>0&&(d=1/Math.sqrt(d),h*=d,m*=d,g*=d),e[0]=h,e[1]=m,e[2]=g,e[3]=0,e[4]=f*g-p*m,e[5]=p*h-u*g,e[6]=u*m-f*h,e[7]=0,e[8]=u,e[9]=f,e[10]=p,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function Sne(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Cne(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function One(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function C9(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Mne(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function kne(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Ene(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ane(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],d=e[11],h=e[12],m=e[13],g=e[14],v=e[15],y=t[0],x=t[1],_=t[2],w=t[3],S=t[4],M=t[5],O=t[6],E=t[7],P=t[8],k=t[9],A=t[10],N=t[11],L=t[12],z=t[13],B=t[14],H=t[15];return Math.abs(n-y)<=On*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-x)<=On*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-_)<=On*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-w)<=On*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-S)<=On*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-M)<=On*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-O)<=On*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-E)<=On*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-P)<=On*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(f-k)<=On*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(p-A)<=On*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-N)<=On*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(h-L)<=On*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(m-z)<=On*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(g-B)<=On*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(v-H)<=On*Math.max(1,Math.abs(v),Math.abs(H))}var Tne=x9,Pne=C9;var hn={};Fc(hn,{add:()=>Jre,calculateW:()=>Vre,clone:()=>Yre,conjugate:()=>Ure,copy:()=>Kre,create:()=>M6,dot:()=>q9,equals:()=>iie,exactEquals:()=>rie,exp:()=>j9,fromEuler:()=>Gre,fromMat3:()=>H9,fromValues:()=>Xre,getAngle:()=>Rre,getAxisAngle:()=>zre,identity:()=>Dre,invert:()=>qre,len:()=>tie,length:()=>U9,lerp:()=>eie,ln:()=>V9,mul:()=>Qre,multiply:()=>B9,normalize:()=>k6,pow:()=>Hre,random:()=>Wre,rotateX:()=>Fre,rotateY:()=>Bre,rotateZ:()=>jre,rotationTo:()=>oie,scale:()=>W9,set:()=>Zre,setAxes:()=>sie,setAxisAngle:()=>F9,slerp:()=>e5,sqlerp:()=>aie,sqrLen:()=>nie,squaredLength:()=>G9,str:()=>$re});var Ne={};Fc(Ne,{add:()=>Dne,angle:()=>tre,bezier:()=>$ne,ceil:()=>zne,clone:()=>Nne,copy:()=>Lne,create:()=>Xb,cross:()=>yv,dist:()=>cre,distance:()=>A9,div:()=>lre,divide:()=>E9,dot:()=>Zb,equals:()=>ore,exactEquals:()=>ire,floor:()=>Rne,forEach:()=>pre,fromValues:()=>Kb,hermite:()=>Gne,inverse:()=>qne,len:()=>h6,length:()=>O9,lerp:()=>Une,max:()=>Bne,min:()=>Fne,mul:()=>sre,multiply:()=>k9,negate:()=>Wne,normalize:()=>d6,random:()=>Yne,rotateX:()=>Jne,rotateY:()=>Qne,rotateZ:()=>ere,round:()=>jne,scale:()=>Vne,scaleAndAdd:()=>Hne,set:()=>Ine,sqrDist:()=>ure,sqrLen:()=>fre,squaredDistance:()=>T9,squaredLength:()=>P9,str:()=>rre,sub:()=>are,subtract:()=>M9,transformMat3:()=>Kne,transformMat4:()=>Xne,transformQuat:()=>Zne,zero:()=>nre});function Xb(){var e=new Ar(3);return Ar!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Nne(e){var t=new Ar(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function O9(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Kb(e,t,n){var r=new Ar(3);return r[0]=e,r[1]=t,r[2]=n,r}function Lne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ine(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Dne(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function M9(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function k9(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function E9(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function zne(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Rne(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Fne(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Bne(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function jne(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Vne(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Hne(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function A9(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function T9(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function P9(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Wne(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function qne(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function d6(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Zb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yv(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function Une(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function Gne(e,t,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,c=a*(o-1),u=a*(3-2*o);return e[0]=t[0]*s+n[0]*l+r[0]*c+i[0]*u,e[1]=t[1]*s+n[1]*l+r[1]*c+i[1]*u,e[2]=t[2]*s+n[2]*l+r[2]*c+i[2]*u,e}function $ne(e,t,n,r,i,o){var a=1-o,s=a*a,l=o*o,c=s*a,u=3*o*s,f=3*l*a,p=l*o;return e[0]=t[0]*c+n[0]*u+r[0]*f+i[0]*p,e[1]=t[1]*c+n[1]*u+r[1]*f+i[1]*p,e[2]=t[2]*c+n[2]*u+r[2]*f+i[2]*p,e}function Yne(e,t){t=t||1;var n=cs()*2*Math.PI,r=cs()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function Xne(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function Kne(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function Zne(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],l=t[1],c=t[2],u=i*c-o*l,f=o*s-r*c,p=r*l-i*s,d=i*p-o*f,h=o*u-r*p,m=r*f-i*u,g=a*2;return u*=g,f*=g,p*=g,d*=2,h*=2,m*=2,e[0]=s+u+d,e[1]=l+f+h,e[2]=c+p+m,e}function Jne(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function Qne(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function ere(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function tre(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(o*o+a*a+s*s),u=l*c,f=u&&Zb(e,t)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function nre(e){return e[0]=0,e[1]=0,e[2]=0,e}function rre(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function ire(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ore(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=On*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=On*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=On*Math.max(1,Math.abs(i),Math.abs(s))}var are=M9,sre=k9,lre=E9,cre=A9,ure=T9,h6=O9,fre=P9,pre=function(){var e=Xb();return function(t,n,r,i,o,a){var s,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();var ti={};Fc(ti,{add:()=>x6,ceil:()=>dre,clone:()=>m6,copy:()=>v6,create:()=>N9,cross:()=>_re,dist:()=>Tre,distance:()=>z9,div:()=>Are,divide:()=>D9,dot:()=>w6,equals:()=>O6,exactEquals:()=>C6,floor:()=>hre,forEach:()=>Ire,fromValues:()=>g6,inverse:()=>bre,len:()=>Nre,length:()=>Jb,lerp:()=>S6,max:()=>gre,min:()=>mre,mul:()=>Ere,multiply:()=>I9,negate:()=>xre,normalize:()=>_6,random:()=>wre,round:()=>vre,scale:()=>b6,scaleAndAdd:()=>yre,set:()=>y6,sqrDist:()=>Pre,sqrLen:()=>Lre,squaredDistance:()=>R9,squaredLength:()=>Qb,str:()=>Mre,sub:()=>kre,subtract:()=>L9,transformMat4:()=>Sre,transformQuat:()=>Cre,zero:()=>Ore});function N9(){var e=new Ar(4);return Ar!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function m6(e){var t=new Ar(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function g6(e,t,n,r){var i=new Ar(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function v6(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function y6(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function x6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function L9(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function I9(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function D9(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function dre(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function hre(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function mre(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function gre(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function vre(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function b6(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function yre(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function z9(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.hypot(n,r,i,o)}function R9(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function Jb(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function Qb(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function xre(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function bre(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function _6(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function w6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function _re(e,t,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],l=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],u=t[0],f=t[1],p=t[2],d=t[3];return e[0]=f*c-p*l+d*s,e[1]=-(u*c)+p*a-d*o,e[2]=u*l-f*a+d*i,e[3]=-(u*s)+f*o-p*i,e}function S6(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function wre(e,t){t=t||1;var n,r,i,o,a,s;do n=cs()*2-1,r=cs()*2-1,a=n*n+r*r;while(a>=1);do i=cs()*2-1,o=cs()*2-1,s=i*i+o*o;while(s>=1);var l=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*l,e[3]=t*o*l,e}function Sre(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function Cre(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,f=c*i+l*r-a*o,p=c*o+a*i-s*r,d=-a*r-s*i-l*o;return e[0]=u*c+d*-a+f*-l-p*-s,e[1]=f*c+d*-s+p*-a-u*-l,e[2]=p*c+d*-l+u*-s-f*-a,e[3]=t[3],e}function Ore(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Mre(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function C6(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function O6(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=On*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=On*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=On*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=On*Math.max(1,Math.abs(o),Math.abs(c))}var kre=L9,Ere=I9,Are=D9,Tre=z9,Pre=R9,Nre=Jb,Lre=Qb,Ire=function(){var e=N9();return function(t,n,r,i,o,a){var s,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function M6(){var e=new Ar(4);return Ar!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Dre(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function F9(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function zre(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>On?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Rre(e,t){var n=q9(e,t);return Math.acos(2*n*n-1)}function B9(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+a*s+i*c-o*l,e[1]=i*u+a*l+o*s-r*c,e[2]=o*u+a*c+r*l-i*s,e[3]=a*u-r*s-i*l-o*c,e}function Fre(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}function Bre(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e}function jre(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function Vre(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function j9(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),l=a>0?s*Math.sin(a)/a:0;return e[0]=n*l,e[1]=r*l,e[2]=i*l,e[3]=s*Math.cos(a),e}function V9(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=.5*Math.log(n*n+r*r+i*i+o*o),e}function Hre(e,t,n){return V9(e,t),W9(e,e,n),j9(e,e),e}function e5(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],l=n[0],c=n[1],u=n[2],f=n[3],p,d,h,m,g;return d=i*l+o*c+a*u+s*f,d<0&&(d=-d,l=-l,c=-c,u=-u,f=-f),1-d>On?(p=Math.acos(d),h=Math.sin(p),m=Math.sin((1-r)*p)/h,g=Math.sin(r*p)/h):(m=1-r,g=r),e[0]=m*i+g*l,e[1]=m*o+g*c,e[2]=m*a+g*u,e[3]=m*s+g*f,e}function Wre(e){var t=cs(),n=cs(),r=cs(),i=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e}function qre(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}function Ure(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function H9(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[o*3+a]-t[a*3+o])*r,e[o]=(t[o*3+i]+t[i*3+o])*r,e[a]=(t[a*3+i]+t[i*3+a])*r}return e}function Gre(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return e[0]=o*l*u-a*s*c,e[1]=a*s*u+o*l*c,e[2]=a*l*c-o*s*u,e[3]=a*l*u+o*s*c,e}function $re(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Yre=m6,Xre=g6,Kre=v6,Zre=y6,Jre=x6,Qre=B9,W9=b6,q9=w6,eie=S6,U9=Jb,tie=U9,G9=Qb,nie=G9,k6=_6,rie=C6,iie=O6,oie=function(){var e=Xb(),t=Kb(1,0,0),n=Kb(0,1,0);return function(r,i,o){var a=Zb(i,o);return a<-.999999?(yv(e,t,i),h6(e)<1e-6&&yv(e,n,i),d6(e,e),F9(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(yv(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,k6(r,r))}}(),aie=function(){var e=M6(),t=M6();return function(n,r,i,o,a,s){return e5(e,r,a,s),e5(t,i,o,s),e5(n,e,t,2*s*(1-s)),n}}(),sie=function(){var e=p6();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],k6(t,H9(t,e))}}();var Yu={};Fc(Yu,{add:()=>pie,angle:()=>Nie,ceil:()=>die,clone:()=>lie,copy:()=>uie,create:()=>$9,cross:()=>Cie,dist:()=>Vie,distance:()=>Z9,div:()=>jie,divide:()=>K9,dot:()=>Sie,equals:()=>zie,exactEquals:()=>Die,floor:()=>hie,forEach:()=>qie,fromValues:()=>cie,inverse:()=>_ie,len:()=>Rie,length:()=>Q9,lerp:()=>Oie,max:()=>gie,min:()=>mie,mul:()=>Bie,multiply:()=>X9,negate:()=>bie,normalize:()=>wie,random:()=>Mie,rotate:()=>Pie,round:()=>vie,scale:()=>yie,scaleAndAdd:()=>xie,set:()=>fie,sqrDist:()=>Hie,sqrLen:()=>Wie,squaredDistance:()=>J9,squaredLength:()=>eD,str:()=>Iie,sub:()=>Fie,subtract:()=>Y9,transformMat2:()=>kie,transformMat2d:()=>Eie,transformMat3:()=>Aie,transformMat4:()=>Tie,zero:()=>Lie});function $9(){var e=new Ar(2);return Ar!=Float32Array&&(e[0]=0,e[1]=0),e}function lie(e){var t=new Ar(2);return t[0]=e[0],t[1]=e[1],t}function cie(e,t){var n=new Ar(2);return n[0]=e,n[1]=t,n}function uie(e,t){return e[0]=t[0],e[1]=t[1],e}function fie(e,t,n){return e[0]=t,e[1]=n,e}function pie(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Y9(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function X9(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function K9(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function die(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function hie(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function mie(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function gie(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function vie(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function yie(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function xie(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function Z9(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function J9(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Q9(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function eD(e){var t=e[0],n=e[1];return t*t+n*n}function bie(e,t){return e[0]=-t[0],e[1]=-t[1],e}function _ie(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function wie(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Sie(e,t){return e[0]*t[0]+e[1]*t[1]}function Cie(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function Oie(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function Mie(e,t){t=t||1;var n=cs()*2*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function kie(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function Eie(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function Aie(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function Tie(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function Pie(e,t,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=Math.sin(r),s=Math.cos(r);return e[0]=i*s-o*a+n[0],e[1]=i*a+o*s+n[1],e}function Nie(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function Lie(e){return e[0]=0,e[1]=0,e}function Iie(e){return"vec2("+e[0]+", "+e[1]+")"}function Die(e,t){return e[0]===t[0]&&e[1]===t[1]}function zie(e,t){var n=e[0],r=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=On*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=On*Math.max(1,Math.abs(r),Math.abs(o))}var Rie=Q9,Fie=Y9,Bie=X9,jie=K9,Vie=Z9,Hie=J9,Wie=eD,qie=function(){var e=$9();return function(t,n,r,i,o,a){var s,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}();var t5={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function tD(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}var ip={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function n5(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return ip[n]===t.length-1&&"achlmqstvz".includes(n)})}function r5(e){return n5(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function i5(e){return r5(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}function E6(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=ip[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,ip[n]))),!!ip[n]););}function nD(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function rD(e){return e>=48&&e<=57||e===43||e===45||e===46}function Ld(e){return e>=48&&e<=57}function iD(e){var t=e.max,n=e.pathValue,r=e.index,i=r,o=!1,a=!1,s=!1,l=!1,c;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(c=n.charCodeAt(i),(c===43||c===45)&&(i+=1,c=n.charCodeAt(i)),!Ld(c)&&c!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(c!==46){if(o=c===48,i+=1,c=n.charCodeAt(i),o&&i<t&&c&&Ld(c)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&Ld(n.charCodeAt(i));)i+=1,a=!0;c=n.charCodeAt(i)}if(c===46){for(l=!0,i+=1;Ld(n.charCodeAt(i));)i+=1,s=!0;c=n.charCodeAt(i)}if(c===101||c===69){if(l&&!a&&!s){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,c=n.charCodeAt(i),(c===43||c===45)&&(i+=1),i<t&&Ld(n.charCodeAt(i)))for(;i<t&&Ld(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function oD(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function d0(e){for(var t=e.pathValue,n=e.max;e.index<n&&oD(t.charCodeAt(e.index));)e.index+=1}function aD(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function sD(e){return(e|32)===97}function lD(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),o=ip[n[r].toLowerCase()];if(e.segmentStart=r,!aD(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,d0(e),e.data=[],!o){E6(e);return}for(;;){for(var a=o;a>0;a-=1){if(sD(i)&&(a===3||a===4)?nD(e):iD(e),e.err.length)return;e.data.push(e.param),d0(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,d0(e))}if(e.index>=e.max||!rD(n.charCodeAt(e.index)))break}E6(e)}var cD=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function uD(e){if(n5(e))return[].concat(e);var t=new cD(e);for(d0(t);t.index<t.max&&!t.err.length;)lD(t);return t.err?t.err:t.segments}function fD(e){if(r5(e))return[].concat(e);var t=uD(e),n=0,r=0,i=0,o=0;return t.map(function(a){var s=a.slice(1).map(Number),l=a[0],c=l.toUpperCase();if(l==="M")return n=s[0],r=s[1],i=n,o=r,["M",n,r];var u;if(l!==c)switch(c){case"A":u=[c,s[0],s[1],s[2],s[3],s[4],s[5]+n,s[6]+r];break;case"V":u=[c,s[0]+r];break;case"H":u=[c,s[0]+n];break;default:{var f=s.map(function(d,h){return d+(h%2?r:n)});u=[c].concat(f)}}else u=[c].concat(s);var p=u.length;switch(c){case"Z":n=i,r=o;break;case"H":n=u[1];break;case"V":r=u[1];break;default:n=u[p-2],r=u[p-1],c==="M"&&(i=n,o=r)}return u})}function pD(e,t){var n=e[0],r=t.x1,i=t.y1,o=t.x2,a=t.y2,s=e.slice(1).map(Number),l=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")l=["L",e[1],i];else if(n==="V")l=["L",r,e[1]];else if(n==="S"){var c=r*2-o,u=i*2-a;t.x1=c,t.y1=u,l=["C",c,u].concat(s)}else if(n==="T"){var f=r*2-t.qx,p=i*2-t.qy;t.qx=f,t.qy=p,l=["Q",f,p].concat(s)}else if(n==="Q"){var d=s[0],h=s[1];t.qx=d,t.qy=h}return l}function op(e){if(i5(e))return[].concat(e);for(var t=fD(e),n=Te({},t5),r=0;r<t.length;r+=1){t[r]=pD(t[r],n);var i=t[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return t}function dD(e){return i5(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function xv(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function h0(e,t,n,r,i,o,a,s,l,c){var u=e,f=t,p=n,d=r,h=s,m=l,g=Math.PI*120/180,v=Math.PI/180*(+i||0),y=[],x,_,w,S,M;if(c)_=c[0],w=c[1],S=c[2],M=c[3];else{x=xv(u,f,-v),u=x.x,f=x.y,x=xv(h,m,-v),h=x.x,m=x.y;var O=(u-h)/2,E=(f-m)/2,P=O*O/(p*p)+E*E/(d*d);P>1&&(P=Math.sqrt(P),p*=P,d*=P);var k=p*p,A=d*d,N=(o===a?-1:1)*Math.sqrt(Math.abs((k*A-k*E*E-A*O*O)/(k*E*E+A*O*O)));S=N*p*E/d+(u+h)/2,M=N*-d*O/p+(f+m)/2,_=Math.asin(((f-M)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((m-M)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),_=u<S?Math.PI-_:_,w=h<S?Math.PI-w:w,_<0&&(_=Math.PI*2+_),w<0&&(w=Math.PI*2+w),a&&_>w&&(_-=Math.PI*2),!a&&w>_&&(w-=Math.PI*2)}var L=w-_;if(Math.abs(L)>g){var z=w,B=h,H=m;w=_+g*(a&&w>_?1:-1),h=S+p*Math.cos(w),m=M+d*Math.sin(w),y=h0(h,m,p,d,i,0,a,B,H,[w,z,S,M])}L=w-_;var j=Math.cos(_),W=Math.sin(_),Z=Math.cos(w),ie=Math.sin(w),R=Math.tan(L/4),q=4/3*p*R,J=4/3*d*R,te=[u,f],ae=[u+q*W,f-J*j],le=[h+q*ie,m-J*Z],ue=[h,m];if(ae[0]=2*te[0]-ae[0],ae[1]=2*te[1]-ae[1],c)return ae.concat(le,ue,y);y=ae.concat(le,ue,y);for(var ye=[],Me=0,we=y.length;Me<we;Me+=1)ye[Me]=Me%2?xv(y[Me-1],y[Me],v).y:xv(y[Me],y[Me+1],v).x;return ye}function hD(e,t,n,r,i,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function ac(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return[r+(o-r)*n,i+(a-i)*n]}var A6=function(e,t,n,r){var i=.5,o=ac([e,t],[n,r],i);return qe(qe([],o,!0),[n,r,n,r],!1)};function mD(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],o=r[1],a,s=t.x1,l=t.y1,c=t.x,u=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=o,e;case"A":return a=[s,l].concat(r),["C"].concat(h0(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]));case"Q":return t.qx=i,t.qy=o,a=[s,l].concat(r),["C"].concat(hD(a[0],a[1],a[2],a[3],a[4],a[5]));case"L":return["C"].concat(A6(s,l,i,o));case"Z":return s===c&&l===u?["C",s,l,c,u,c,u]:["C"].concat(A6(s,l,c,u));default:}return e}function m0(e,t){if(t===void 0&&(t=!1),dD(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=op(e),i=Te({},t5),o=[],a="",s=r.length,l,c,u=[],f=0;f<s;f+=1){r[f]&&(a=r[f][0]),o[f]=a;var p=mD(r[f],i);r[f]=p,tD(r,o,f),s=r.length,a==="Z"&&u.push(f),l=r[f],c=l.length,i.x1=+l[c-2],i.y1=+l[c-1],i.x2=+l[c-4]||i.x1,i.y2=+l[c-3]||i.y1}return t?[r,u]:r}function T6(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function P6(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function Si(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function bv(e,t,n,r,i){var o=Si([e,t],[n,r]),a={x:0,y:0};if(typeof i=="number")if(i<=0)a={x:e,y:t};else if(i>=o)a={x:n,y:r};else{var s=ac([e,t],[n,r],i/o),l=s[0],c=s[1];a={x:l,y:c}}return{length:o,point:a,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function gD(e,t){var n=e.x,r=e.y,i=t.x,o=t.y,a=n*i+r*o,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2))),l=n*o-r*i<0?-1:1,c=l*Math.acos(a/s);return c}function Uie(e,t,n,r,i,o,a,s,l,c){var u=Math.abs,f=Math.sin,p=Math.cos,d=Math.sqrt,h=Math.PI,m=u(n),g=u(r),v=(i%360+360)%360,y=v*(h/180);if(e===s&&t===l)return{x:e,y:t};if(m===0||g===0)return bv(e,t,s,l,c).point;var x=(e-s)/2,_=(t-l)/2,w={x:p(y)*x+f(y)*_,y:-f(y)*x+p(y)*_},S=Math.pow(w.x,2)/Math.pow(m,2)+Math.pow(w.y,2)/Math.pow(g,2);S>1&&(m*=d(S),g*=d(S));var M=Math.pow(m,2)*Math.pow(g,2)-Math.pow(m,2)*Math.pow(w.y,2)-Math.pow(g,2)*Math.pow(w.x,2),O=Math.pow(m,2)*Math.pow(w.y,2)+Math.pow(g,2)*Math.pow(w.x,2),E=M/O;E=E<0?0:E;var P=(o!==a?1:-1)*d(E),k={x:P*(m*w.y/g),y:P*(-(g*w.x)/m)},A={x:p(y)*k.x-f(y)*k.y+(e+s)/2,y:f(y)*k.x+p(y)*k.y+(t+l)/2},N={x:(w.x-k.x)/m,y:(w.y-k.y)/g},L=gD({x:1,y:0},N),z={x:(-w.x-k.x)/m,y:(-w.y-k.y)/g},B=gD(N,z);!a&&B>0?B-=2*h:a&&B<0&&(B+=2*h),B%=2*h;var H=L+B*c,j=m*p(H),W=g*f(H),Z={x:p(y)*j-f(y)*W+A.x,y:f(y)*j+p(y)*W+A.y};return Z}function vD(e,t,n,r,i,o,a,s,l,c,u){var f,p=u.bbox,d=p===void 0?!0:p,h=u.length,m=h===void 0?!0:h,g=u.sampleSize,v=g===void 0?30:g,y=typeof c=="number",x=e,_=t,w=0,S=[x,_,w],M=[x,_],O=0,E={x:0,y:0},P=[{x,y:_}];y&&c<=0&&(E={x,y:_});for(var k=0;k<=v;k+=1){if(O=k/v,f=Uie(e,t,n,r,i,o,a,s,l,O),x=f.x,_=f.y,d&&P.push({x,y:_}),m&&(w+=Si(M,[x,_])),M=[x,_],y&&w>=c&&c>S[2]){var A=(w-c)/(w-S[2]);E={x:M[0]*(1-A)+S[0]*A,y:M[1]*(1-A)+S[1]*A}}S=[x,_,w]}return y&&c>=w&&(E={x:s,y:l}),{length:w,point:E,min:{x:Math.min.apply(null,P.map(function(N){return N.x})),y:Math.min.apply(null,P.map(function(N){return N.y}))},max:{x:Math.max.apply(null,P.map(function(N){return N.x})),y:Math.max.apply(null,P.map(function(N){return N.y}))}}}function Gie(e,t,n,r,i,o,a,s,l){var c=1-l;return{x:Math.pow(c,3)*e+3*Math.pow(c,2)*l*n+3*c*Math.pow(l,2)*i+Math.pow(l,3)*a,y:Math.pow(c,3)*t+3*Math.pow(c,2)*l*r+3*c*Math.pow(l,2)*o+Math.pow(l,3)*s}}function o5(e,t,n,r,i,o,a,s,l,c){var u,f=c.bbox,p=f===void 0?!0:f,d=c.length,h=d===void 0?!0:d,m=c.sampleSize,g=m===void 0?10:m,v=typeof l=="number",y=e,x=t,_=0,w=[y,x,_],S=[y,x],M=0,O={x:0,y:0},E=[{x:y,y:x}];v&&l<=0&&(O={x:y,y:x});for(var P=0;P<=g;P+=1){if(M=P/g,u=Gie(e,t,n,r,i,o,a,s,M),y=u.x,x=u.y,p&&E.push({x:y,y:x}),h&&(_+=Si(S,[y,x])),S=[y,x],v&&_>=l&&l>w[2]){var k=(_-l)/(_-w[2]);O={x:S[0]*(1-k)+w[0]*k,y:S[1]*(1-k)+w[1]*k}}w=[y,x,_]}return v&&l>=_&&(O={x:a,y:s}),{length:_,point:O,min:{x:Math.min.apply(null,E.map(function(A){return A.x})),y:Math.min.apply(null,E.map(function(A){return A.y}))},max:{x:Math.max.apply(null,E.map(function(A){return A.x})),y:Math.max.apply(null,E.map(function(A){return A.y}))}}}function $ie(e,t,n,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*e+2*s*a*n+Math.pow(a,2)*i,y:Math.pow(s,2)*t+2*s*a*r+Math.pow(a,2)*o}}function yD(e,t,n,r,i,o,a,s){var l,c=s.bbox,u=c===void 0?!0:c,f=s.length,p=f===void 0?!0:f,d=s.sampleSize,h=d===void 0?10:d,m=typeof a=="number",g=e,v=t,y=0,x=[g,v,y],_=[g,v],w=0,S={x:0,y:0},M=[{x:g,y:v}];m&&a<=0&&(S={x:g,y:v});for(var O=0;O<=h;O+=1){if(w=O/h,l=$ie(e,t,n,r,i,o,w),g=l.x,v=l.y,u&&M.push({x:g,y:v}),p&&(y+=Si(_,[g,v])),_=[g,v],m&&y>=a&&a>x[2]){var E=(y-a)/(y-x[2]);S={x:_[0]*(1-E)+x[0]*E,y:_[1]*(1-E)+x[1]*E}}x=[g,v,y]}return m&&a>=y&&(S={x:i,y:o}),{length:y,point:S,min:{x:Math.min.apply(null,M.map(function(P){return P.x})),y:Math.min.apply(null,M.map(function(P){return P.y}))},max:{x:Math.max.apply(null,M.map(function(P){return P.x})),y:Math.max.apply(null,M.map(function(P){return P.y}))}}}function a5(e,t,n){for(var r,i,o,a,s,l,c=op(e),u=typeof t=="number",f,p=[],d,h=0,m=0,g=0,v=0,y,x=[],_=[],w=0,S={x:0,y:0},M=S,O=S,E=S,P=0,k=0,A=c.length;k<A;k+=1)y=c[k],d=y[0],f=d==="M",p=f?p:[h,m].concat(y.slice(1)),f?(g=y[1],v=y[2],S={x:g,y:v},M=S,w=0,u&&t<.001&&(E=S)):d==="L"?(r=bv(p[0],p[1],p[2],p[3],(t||0)-P),w=r.length,S=r.min,M=r.max,O=r.point):d==="A"?(i=vD(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(t||0)-P,n||{}),w=i.length,S=i.min,M=i.max,O=i.point):d==="C"?(o=o5(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(t||0)-P,n||{}),w=o.length,S=o.min,M=o.max,O=o.point):d==="Q"?(a=yD(p[0],p[1],p[2],p[3],p[4],p[5],(t||0)-P,n||{}),w=a.length,S=a.min,M=a.max,O=a.point):d==="Z"&&(p=[h,m,g,v],s=bv(p[0],p[1],p[2],p[3],(t||0)-P),w=s.length,S=s.min,M=s.max,O=s.point),u&&P<t&&P+w>=t&&(E=O),_.push(M),x.push(S),P+=w,l=d!=="Z"?y.slice(-2):[g,v],h=l[0],m=l[1];return u&&t>=P&&(E={x:h,y:m}),{length:P,point:E,min:{x:Math.min.apply(null,x.map(function(N){return N.x})),y:Math.min.apply(null,x.map(function(N){return N.y}))},max:{x:Math.max.apply(null,_.map(function(N){return N.x})),y:Math.max.apply(null,_.map(function(N){return N.y}))}}}function N6(e,t){return a5(e,void 0,Te(Te({},t),{bbox:!1,length:!0})).length}function Yie(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(o,a){var s=i+a,l;return a===0||e[s]&&e[s][0]==="M"?(l=e[s],["M"].concat(l.slice(-2))):(s>=t&&(s-=n),e[s])})})}function L6(e,t){var n=e.length-1,r=[],i=0,o=0,a=Yie(e);return a.forEach(function(s,l){e.slice(1).forEach(function(c,u){o+=Si(e[(l+u)%n].slice(-2),t[u%n].slice(-2))}),r[l]=o,o=0}),i=r.indexOf(Math.min.apply(null,r)),a[i]}function Xie(e,t,n,r,i,o,a,s){return 3*((s-t)*(n+i)-(a-e)*(r+o)+r*(e-i)-n*(t-o)+s*(i+e/3)-a*(o+t/3))/20}function xD(e){var t=0,n=0,r=0;return m0(e).map(function(i){var o;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var a=i.slice(1),s=a[0],l=a[1],c=a[2],u=a[3],f=a[4],p=a[5];return r=Xie(t,n,s,l,c,u,f,p),o=i.slice(-2),t=o[0],n=o[1],r}}).reduce(function(i,o){return i+o},0)}function s5(e){return xD(e)>=0}function I6(e,t,n){return a5(e,t,Te(Te({},n),{bbox:!1,length:!0})).point}function Kie(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),o=e.slice(6,8),a=ac(n,r,t),s=ac(r,i,t),l=ac(i,o,t),c=ac(a,s,t),u=ac(s,l,t),f=ac(c,u,t);return[["C"].concat(a,c,f),["C"].concat(u,l,o)]}function bD(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),o=n?o5(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,a;return n?a=o?Kie(i):[t,t]:a=[t],{s:t,ss:a,l:o}})}function l5(e,t,n){var r=bD(e),i=bD(t),o=r.length,a=i.length,s=r.filter(function(g){return g.l}).length,l=i.filter(function(g){return g.l}).length,c=r.filter(function(g){return g.l}).reduce(function(g,v){var y=v.l;return g+y},0)/s||0,u=i.filter(function(g){return g.l}).reduce(function(g,v){var y=v.l;return g+y},0)/l||0,f=n||Math.max(o,a),p=[c,u],d=[f-o,f-a],h=0,m=[r,i].map(function(g,v){return g.l===f?g.map(function(y){return y.s}):g.map(function(y,x){return h=x&&d[v]&&y.l>=p[v],d[v]-=h?1:0,h?y.ss:[y.s]}).flat()});return m[0].length===m[1].length?m:l5(m[0],m[1],f)}function c5(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function Mn(e,t){if(e!==null)return{type:"column",value:e,field:t}}function ap(e,t){let n=Mn(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function Id(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function _D(e,t){let n=Mn(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function us(e,t){let n=[];for(let r of e)n[r]=t;return n}function sn(e,t){let n=e[t];if(!n)return[null,null];let{value:r,field:i=null}=n;return[r,i]}function Xu(e,...t){for(let n of t)if(typeof n=="string"){let[r,i]=sn(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function Yc(e){return e instanceof Date?!1:typeof e=="object"}var Xc=()=>(e,t)=>{let{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,_e({},t,{encode:{y1:ap(us(e,0))}})]};Xc.props={};function gr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function D6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hs(e){let t,n,r;e.length!==2?(t=gr,n=(s,l)=>gr(e(s),l),r=(s,l)=>e(s)-l):(t=e===gr||e===D6?e:Zie,n=e,r=e);function i(s,l,c=0,u=s.length){if(c<u){if(t(l,l)!==0)return u;do{let f=c+u>>>1;n(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(s,l,c=0,u=s.length){if(c<u){if(t(l,l)!==0)return u;do{let f=c+u>>>1;n(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){let f=i(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function Zie(){return 0}function g0(e){return e===null?NaN:+e}function*wD(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}var SD=Hs(gr),CD=SD.right,z6=SD.left,R6=Hs(g0).center,F6=CD;function _v(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function B6(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function v0(e,t){let n=B6(e,t);return n&&Math.sqrt(n)}function _o(e,t){let n,r;if(t===void 0)for(let i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}var Ws=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let n=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){let t=this._partials,n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}};var u5=class extends Map{constructor(t,n=eoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(OD(this,t))}has(t){return super.has(OD(this,t))}set(t,n){return super.set(Jie(this,t),n)}delete(t){return super.delete(Qie(this,t))}};function OD({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function Jie({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Qie({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function eoe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sp(e){return e}function An(e,...t){return f5(e,sp,sp,t)}function y0(e,...t){return f5(e,Array.from,sp,t)}function Dd(e,t,...n){return f5(e,sp,t,n)}function zd(e,t,...n){return f5(e,Array.from,t,n)}function f5(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);let s=new u5,l=r[a++],c=-1;for(let u of o){let f=l(u,++c,o),p=s.get(f);p?p.push(u):s.set(f,[u])}for(let[u,f]of s)s.set(u,i(f,a));return t(s)}(e,0)}function j6(e,t){return Array.from(t,n=>e[n])}function Qi(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){let r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(let a of t){let s=Rd(a[i],a[o]);if(s)return s}})):(n=e.map(n),r.sort((i,o)=>Rd(n[i],n[o]))),j6(e,r)}return e.sort(V6(n))}function V6(e=gr){if(e===gr)return Rd;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{let r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Rd(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function p5(e,t,n){return(t.length!==2?Qi(Dd(e,t,n),([r,i],[o,a])=>gr(i,a)||gr(r,o)):Qi(An(e,n),([r,i],[o,a])=>t(i,a)||gr(r,o))).map(([r])=>r)}var MD=Array.prototype,kD=MD.slice,fNe=MD.map;function wv(e){return()=>e}var toe=Math.sqrt(50),noe=Math.sqrt(10),roe=Math.sqrt(2);function d5(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=toe?10:o>=noe?5:o>=roe?2:1,s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?d5(e,t,n*2):[s,l,c]}function H6(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,o,a]=r?d5(t,e,n):d5(e,t,n);if(!(o>=i))return[];let s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function Sv(e,t,n){return t=+t,e=+e,n=+n,d5(e,t,n)[2]}function W6(e,t,n){let r;for(;;){let i=Sv(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function q6(e){return Math.max(1,Math.ceil(Math.log(_v(e))/Math.LN2)+1)}function Cv(){var e=sp,t=_o,n=q6;function r(i){Array.isArray(i)||(i=Array.from(i));var o,a=i.length,s,l,c=new Array(a);for(o=0;o<a;++o)c[o]=e(i[o],o,i);var u=t(c),f=u[0],p=u[1],d=n(c,f,p);if(!Array.isArray(d)){let x=p,_=+d;if(t===_o&&([f,p]=W6(f,p,_)),d=H6(f,p,_),d[0]<=f&&(l=Sv(f,p,_)),d[d.length-1]>=p)if(x>=p&&t===_o){let w=Sv(f,p,_);isFinite(w)&&(w>0?p=(Math.floor(p/w)+1)*w:w<0&&(p=(Math.ceil(p*-w)+1)/-w))}else d.pop()}for(var h=d.length,m=0,g=h;d[m]<=f;)++m;for(;d[g-1]>p;)--g;(m||g<h)&&(d=d.slice(m,g),h=g-m);var v=new Array(h+1),y;for(o=0;o<=h;++o)y=v[o]=[],y.x0=o>0?d[o-1]:f,y.x1=o<h?d[o]:p;if(isFinite(l)){if(l>0)for(o=0;o<a;++o)(s=c[o])!=null&&f<=s&&s<=p&&v[Math.min(h,Math.floor((s-f)/l))].push(i[o]);else if(l<0){for(o=0;o<a;++o)if((s=c[o])!=null&&f<=s&&s<=p){let x=Math.floor((f-s)*l);v[Math.min(h,x+(d[x]<=s))].push(i[o])}}}else for(o=0;o<a;++o)(s=c[o])!=null&&f<=s&&s<=p&&v[F6(d,s,0,h)].push(i[o]);return v}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:wv(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:wv([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:wv(Array.isArray(i)?kD.call(i):i),r):n},r}function kn(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function fs(e,t){let n,r=-1,i=-1;if(t===void 0)for(let o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function ni(e,t){let n;if(t===void 0)for(let r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function sc(e,t){let n,r=-1,i=-1;if(t===void 0)for(let o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Mv(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Rd:V6(i);r>n;){if(r-n>600){let l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+p)),h=Math.min(r,Math.floor(t+(l-c)*f/l+p));Mv(e,t,d,h,i)}let o=e[t],a=n,s=r;for(Ov(e,n,t),i(e[r],o)>0&&Ov(e,n,r);a<s;){for(Ov(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?Ov(e,n,s):(++s,Ov(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Ov(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function U6(e,t=gr){let n,r=!1;if(t.length===1){let i;for(let o of e){let a=t(o);(r?gr(a,i)>0:gr(a,a)===0)&&(n=o,i=a,r=!0)}}else for(let i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function lp(e,t,n){if(e=Float64Array.from(wD(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return ni(e);if(t>=1)return kn(e);var r,i=(r-1)*t,o=Math.floor(i),a=kn(Mv(e,o).subarray(0,o+1)),s=ni(e.subarray(o+1));return a+(s-a)*(i-o)}}function G6(e,t,n=g0){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(s,l)=>g0(n(e[l],l,e))),t<=0)return sc(r);if(t>=1)return fs(r);var r,i=Uint32Array.from(e,(s,l)=>l),o=r.length-1,a=Math.floor(o*t);return Mv(i,a,0,o,(s,l)=>Rd(r[s],r[l])),a=U6(i.subarray(0,a+1),s=>r[s]),a>=0?a:-1}}function h5(e,t,n){let r=_v(e),i=v0(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function lc(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function cp(e,t){return lp(e,.5,t)}function $6(e,t){return G6(e,.5,t)}function*ioe(e){for(let t of e)yield*fI(t)}function x0(e){return Array.from(ioe(e))}function Ku(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Ci(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var ooe=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};function cc(e){return e}function m5(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),cc)}function ED(e){return e.reduce((t,n)=>r=>ooe(this,void 0,void 0,function*(){let i=yield t(r);return n(i)}),cc)}function b0(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function Kc(e=""){throw new Error(e)}function kv(e,t){let{attributes:n}=t,r=new Set(["id","className"]);for(let[i,o]of Object.entries(n))r.has(i)||e.attr(i,o)}function qn(e){return e!=null&&!Number.isNaN(e)}function AD(e){let t=new Map;return n=>{if(t.has(n))return t.get(n);let r=e(n);return t.set(n,r),r}}function TD(e,t){let{transform:n}=e.style,i=(o=>o==="none"||o===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function Ke(e,t){return Y6(e,t)||{}}function Y6(e,t){let n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[f0(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function PD(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function g5(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function X6(e,t){if(e===void 0)return null;if(typeof e=="number")return e;let n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function Zc(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function Aa(e){return e===null||e===!1}function K6(e,t,n=5,r=0){if(!(r>=n)){for(let i of Object.keys(t)){let o=t[i];!oa(o)||!oa(e[i])?e[i]=o:K6(e[i],o,n,r+1)}return e}}function qs(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function Us(e){return e.map((t,n)=>n)}function ND(e){return e[0]}function v5(e){return e[e.length-1]}function LD(e){return Array.from(new Set(e))}function Z6(e,t){let n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function ID(e,t=e.length){if(t===1)return e.map(r=>[r]);let n=[];for(let r=0;r<e.length;r++){let i=e.slice(r+1);ID(i,t-1).forEach(a=>{n.push([e[r],...a])})}return n}function DD(e){if(e.length===1)return[e];let t=[];for(let n=1;n<=e.length;n++)t.push(...ID(e,n));return t}function sa(e,t,n){let{encode:r}=n;if(e===null)return[t];let i=aoe(e).map(a=>{var s;return[a,(s=sn(r,a))===null||s===void 0?void 0:s[0]]}).filter(([,a])=>qn(a)),o=a=>i.map(([,s])=>s[a]).join("-");return Array.from(An(t,o).values())}function y5(e){return Array.isArray(e)?coe(e):typeof e=="function"?loe(e):e==="series"?soe:e==="value"?uoe:e==="sum"?foe:e==="maxIndex"?poe:null}function x5(e,t){for(let n of e)n.sort(t)}function b5(e,t){return t?.domain||Array.from(new Set(e))}function aoe(e){return Array.isArray(e)?e:[e]}function soe(e,t,n){return Ev(r=>n[r])}function loe(e){return(t,n,r)=>Ev(i=>e(t[i]))}function coe(e){return(t,n,r)=>(i,o)=>e.reduce((a,s)=>a!==0?a:gr(t[i][s],t[o][s]),0)}function uoe(e,t,n){return Ev(r=>t[r])}function foe(e,t,n){let r=Us(e),i=Array.from(An(r,a=>n[+a]).entries()),o=new Map(i.map(([a,s])=>[a,s.reduce((l,c)=>l+ +t[c])]));return Ev(a=>o.get(n[a]))}function poe(e,t,n){let r=Us(e),i=Array.from(An(r,a=>n[+a]).entries()),o=new Map(i.map(([a,s])=>[a,fs(s,l=>t[l])]));return Ev(a=>o.get(n[a]))}function Ev(e){return(t,n)=>gr(e(t),e(n))}var _5=(e={})=>{let{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:o="y1",series:a=!0}=e;return(s,l)=>{var c;let{data:u,encode:f,style:p={}}=l,[d,h]=sn(f,"y"),[m,g]=sn(f,"y1"),[v]=a?Xu(f,"series","color"):sn(f,"color"),y=sa(t,s,l),_=((c=y5(n))!==null&&c!==void 0?c:()=>null)(u,d,v);_&&x5(y,_);let w=new Array(s.length),S=new Array(s.length),M=new Array(s.length),O=[],E=[];for(let L of y){r&&L.reverse();let z=m?+m[L[0]]:0,B=[],H=[];for(let J of L){let te=M[J]=+d[J]-z;te<0?H.push(J):te>=0&&B.push(J)}let j=B.length>0?B:H,W=H.length>0?H:B,Z=B.length-1,ie=0;for(;Z>0&&d[j[Z]]===0;)Z--;for(;ie<W.length-1&&d[W[ie]]===0;)ie++;O.push(j[Z]),E.push(W[ie]);let R=z;for(let J of H.reverse()){let te=M[J];R=w[J]=(S[J]=R)+te}let q=z;for(let J of B){let te=M[J];te>0?q=w[J]=(S[J]=q)+te:w[J]=S[J]=q}}let P=new Set(O),k=new Set(E),A=i==="y"?w:S,N=o==="y"?w:S;return[s,_e({},l,{encode:{y0:ap(d,h),y:Mn(A,h),y1:Mn(N,g)},style:Object.assign({first:(L,z)=>P.has(z),last:(L,z)=>k.has(z)},p)})]}};_5.props={};function Av(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function zD(e){let t=e.getFullYear(),n=Av(e.getMonth()+1),r=Av(e.getDate()),i=`${t}-${n}-${r}`,o=e.getHours(),a=e.getMinutes(),s=e.getSeconds();return o||a||s?`${i} ${Av(o)}:${Av(a)}:${Av(s)}`:i}var _0=(e={})=>{let{channel:t="x"}=e;return(n,r)=>{let{encode:i}=r,{tooltip:o}=r;if(Aa(o))return[n,r];let{title:a}=o;if(a!==void 0)return[n,r];let s=Object.keys(i).filter(c=>c.startsWith(t)).filter(c=>!i[c].inferred).map(c=>sn(i,c)).filter(([c])=>c).map(c=>c[0]);if(s.length===0)return[n,r];let l=[];for(let c of n)l[c]={value:s.map(u=>u[c]instanceof Date?zD(u[c]):u[c]).join(", ")};return[n,_e({},r,{tooltip:{title:l}})]}};_0.props={};var ps=()=>(e,t)=>{let{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,_e({},t,{encode:{x:ap(us(e,0))},scale:{x:{guide:null}}})]};ps.props={};var up=()=>(e,t)=>{let{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,_e({},t,{encode:{y:ap(us(e,0))},scale:{y:{guide:null}}})]};up.props={};var w5=()=>(e,t)=>{let{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,_e({},t,{encode:{size:Id(us(e,3))}})]};w5.props={};var doe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},S5=()=>(e,t)=>{let{encode:n}=t,{key:r}=n,i=doe(n,["key"]);if(r!==void 0)return[e,t];let o=Object.values(i).map(({value:s})=>s),a=e.map(s=>o.filter(Array.isArray).map(l=>l[s]).join("-"));return[e,_e({},t,{encode:{key:Mn(a)}})]};S5.props={};var w0=()=>(e,t)=>{let{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];let[o,a]=sn(n,"color");return[e,_e({},t,{encode:{series:Mn(o,a)}})]};w0.props={};var C5=()=>(e,t)=>{let{data:n}=t;return!Array.isArray(n)||n.some(Yc)?[e,t]:[e,_e({},t,{encode:{y:Mn(n)}})]};C5.props={};var O5=()=>(e,t)=>{let{data:n}=t;return!Array.isArray(n)||n.some(Yc)?[e,t]:[e,_e({},t,{encode:{x:Mn(n)}})]};O5.props={};var M5=()=>(e,t)=>{let{encode:n}=t,{y1:r}=n;if(r)return[e,t];let[i]=sn(n,"y");return[e,_e({},t,{encode:{y1:Mn([...i])}})]};M5.props={};var k5=()=>(e,t)=>{let{encode:n}=t,{x1:r}=n;if(r)return[e,t];let[i]=sn(n,"x");return[e,_e({},t,{encode:{x1:Mn([...i])}})]};k5.props={};var E5=()=>(e,t)=>{let{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Yc))){let r=(i,o)=>Array.isArray(i[0])?i.map(a=>a[o]):[i[o]];return[e,_e({},t,{encode:{x:Mn(r(n,0)),x1:Mn(r(n,1))}})]}return[e,t]};E5.props={};var A5=()=>(e,t)=>{let{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Yc))){let r=(i,o)=>Array.isArray(i[0])?i.map(a=>a[o]):[i[o]];return[e,_e({},t,{encode:{y:Mn(r(n,0)),y1:Mn(r(n,1))}})]}return[e,t]};A5.props={};var S0=e=>{let{channel:t}=e;return(n,r)=>{let{encode:i,tooltip:o}=r;if(Aa(o))return[n,r];let{items:a=[]}=o;if(!a||a.length>0)return[n,r];let l=(Array.isArray(t)?t:[t]).flatMap(c=>Object.keys(i).filter(u=>u.startsWith(c)).map(u=>{let{field:f,value:p,inferred:d=!1,aggregate:h}=i[u];return d?null:h&&p?{channel:u}:f?{field:f}:p?{channel:u}:null}).filter(u=>u!==null));return[n,_e({},r,{tooltip:{items:l}})]}};S0.props={};var C0=()=>(e,t)=>[e,_e({scale:{x:{padding:0},y:{padding:0}}},t)];C0.props={};var RD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},fp=()=>(e,t)=>{let{data:n,style:r={}}=t,i=RD(t,["data","style"]),{x:o,y:a}=r,s=RD(r,["x","y"]);if(o==null||a==null)return[e,t];let l=o||0,c=a||0;return[[0],_e({},i,{data:[0],cartesian:!0,encode:{x:Mn([l]),y:Mn([c])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};fp.props={};var T5=()=>(e,t)=>{let{style:n={}}=t;return[e,_e({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};T5.props={};var pp=()=>(e,t)=>{let{data:n}=t;if(!Array.isArray(n)||n.some(Yc))return[e,t];let r=Array.isArray(n[0])?n:[n],i=r.map(a=>a[0]),o=r.map(a=>a[1]);return[e,_e({},t,{encode:{x:Mn(i),y:Mn(o)}})]};pp.props={};var P5=()=>(e,t)=>{let{style:n={},encode:r}=t,{series:i}=r,{gradient:o}=n;return!o||i?[e,t]:[e,_e({},t,{encode:{series:Id(us(e,void 0))}})]};P5.props={};var hoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},N5=(e={})=>{let{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,o=hoe(e,["groupBy","reverse","orderBy","padding"]);return(a,s)=>{let{data:l,encode:c,scale:u}=s,{series:f}=u,[p]=sn(c,"y"),[d]=Xu(c,"series","color"),h=b5(d,f),m=_e({},s,{scale:{series:{domain:h,paddingInner:i}}}),g=sa(t,a,s),v=y5(r);if(!v)return[a,_e(m,{encode:{series:Mn(d)}})];let y=v(l,p,d);y&&x5(g,y);let x=new Array(a.length);for(let _ of g){n&&_.reverse();for(let w=0;w<_.length;w++)x[_[w]]=h[w]}return[a,_e(m,{encode:{series:Mn(r?x:d)}})]}};N5.props={};var L5=e=>{let{groupBy:t=["x"],reducer:n=(a,s)=>s[a[0]],orderBy:r=null,reverse:i=!1,duration:o}=e;return(a,s)=>{let{encode:l}=s,u=(Array.isArray(t)?t:[t]).map(g=>[g,sn(l,g)[0]]);if(u.length===0)return[a,s];let f=[a];for(let[,g]of u){let v=[];for(let y of f){let x=Array.from(An(y,_=>g[_]).values());v.push(...x)}f=v}if(r){let[g]=sn(l,r);g&&f.sort((v,y)=>n(v,g)-n(y,g)),i&&f.reverse()}let p=(o||3e3)/f.length,[d]=o?[us(a,p)]:Xu(l,"enterDuration",us(a,p)),[h]=Xu(l,"enterDelay",us(a,0)),m=new Array(a.length);for(let g=0,v=0;g<f.length;g++){let y=f[g],x=kn(y,_=>+d[_]);for(let _ of y)m[_]=+h[_]+v;v+=x}return[a,_e({},s,{encode:{enterDuration:Id(d),enterDelay:Id(m)}})]}};L5.props={};var moe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function goe(e){return typeof e=="function"?e:{min:(n,r)=>ni(n,i=>r[+i]),max:(n,r)=>kn(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>lc(n,i=>r[+i]),median:(n,r)=>cp(n,i=>r[+i]),sum:(n,r)=>Ci(n,i=>r[+i]),deviation:(n,r)=>v0(n,i=>r[+i])}[e]||kn}var I5=(e={})=>{let{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{let{encode:o,tooltip:a}=i,{x:s}=o,l=moe(o,["x"]),c=Object.entries(l).filter(([m])=>m.startsWith("y")).map(([m])=>[m,sn(o,m)[0]]),[,u]=c.find(([m])=>m==="y"),f=c.map(([m])=>[m,new Array(r.length)]),p=sa(t,r,i),d=goe(n);for(let m of p){let g=d(m,u);for(let v of m)for(let y=0;y<c.length;y++){let[,x]=c[y],[,_]=f[y];_[v]=+x[v]/g}}let h=Aa(a)||a?.items&&a?.items.length!==0;return[r,_e({},i,Object.assign({encode:Object.fromEntries(f.map(([m,g])=>[m,Mn(g,sn(o,m)[1])]))},!h&&o.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};I5.props={};function Jc(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function Fd(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function J6(e,t){let n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}function Bd(e,t,n,r,i){let o=n||0,a=r||e.length,s=i||(l=>l);for(;o<a;){let l=Math.floor((o+a)/2);s(e[l])>t?a=l:o=l+1}return o}var Q6=Math.sqrt(50),ek=Math.sqrt(10),tk=Math.sqrt(2);function jd(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/10**i;return i>=0?(o>=Q6?10:o>=ek?5:o>=tk?2:1)*10**i:-(10**-i)/(o>=Q6?10:o>=ek?5:o>=tk?2:1)}function D5(e,t,n){let r=Math.abs(t-e)/Math.max(0,n),i=10**Math.floor(Math.log(r)/Math.LN10),o=r/i;return o>=Q6?i*=10:o>=ek?i*=5:o>=tk&&(i*=2),t<e?-i:i}var Tv=(e,t,n=5)=>{let r=[e,t],i=0,o=r.length-1,a=r[i],s=r[o],l;return s<a&&([a,s]=[s,a],[i,o]=[o,i]),l=jd(a,s,n),l>0?(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,l=jd(a,s,n)):l<0&&(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,l=jd(a,s,n)),l>0?(r[i]=Math.floor(a/l)*l,r[o]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(a*l)/l,r[o]=Math.floor(s*l)/l),r};function Vo(e,t,n,r){let i=(c,u)=>{let f=d=>r(d)%u===0,p=u;for(;p&&!f(c);)n(c,-1),p-=1;return c},o=(c,u)=>{u&&i(c,u),t(c)},a=(c,u)=>{let f=new Date(+c);return o(f,u),f},s=(c,u)=>{let f=new Date(+c-1);return o(f,u),n(f,u),o(f),f};return{ceil:s,floor:a,range:(c,u,f,p)=>{let d=[],h=Math.floor(f),m=p?s(c,f):s(c);for(let g=m;g<u;n(g,h),o(g))d.push(new Date(+g));return d},duration:e}}var FD=Vo(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),BD=Vo(1e3,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+1e3*t)},e=>e.getSeconds()),jD=Vo(6e4,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+6e4*t)},e=>e.getMinutes()),VD=Vo(36e5,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+36e5*t)},e=>e.getHours()),HD=Vo(864e5,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+864e5*t)},e=>e.getDate()-1),nk=Vo(2592e6,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{let n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),WD=Vo(6048e5,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{let t=nk.floor(e),n=new Date(+e);return Math.floor((+n-+t)/6048e5)}),qD=Vo(31536e6,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{let n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),Pv={millisecond:FD,second:BD,minute:jD,hour:VD,day:HD,week:WD,month:nk,year:qD};var $D=Vo(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),YD=Vo(1e3,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+1e3*t)},e=>e.getUTCSeconds()),XD=Vo(6e4,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+6e4*t)},e=>e.getUTCMinutes()),KD=Vo(36e5,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+36e5*t)},e=>e.getUTCHours()),ZD=Vo(864e5,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+864e5*t)},e=>e.getUTCDate()-1),sk=Vo(2592e6,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{let n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),JD=Vo(6048e5,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+6048e5*t)},e=>{let t=sk.floor(e),n=new Date(+e);return Math.floor((+n-+t)/6048e5)}),QD=Vo(31536e6,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{let n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),Nv={millisecond:$D,second:YD,minute:XD,hour:KD,day:ZD,week:JD,month:sk,year:QD};function voe(e){let t=e?Nv:Pv,{year:n,month:r,week:i,day:o,hour:a,minute:s,second:l,millisecond:c}=t;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[a,1],[a,3],[a,6],[a,12],[o,1],[o,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:c}}function Lv(e,t,n,r,i){let o=+e,a=+t,{tickIntervals:s,year:l,millisecond:c}=voe(i),u=([g,v])=>g.duration*v,f=r?(a-o)/r:n||5,p=r||(a-o)/f,d=s.length,h=Bd(s,p,0,d,u),m;if(h===d){let g=D5(o/l.duration,a/l.duration,f);m=[l,g]}else if(h){let g=p/u(s[h-1])<u(s[h])/p,[v,y]=g?s[h-1]:s[h],x=r?Math.ceil(r/v.duration):y;m=[v,x]}else{let g=Math.max(D5(o,a,f),1);m=[c,g]}return m}var lk=(e,t,n,r,i)=>{let o=e>t,a=o?t:e,s=o?e:t,[l,c]=Lv(a,s,n,r,i),u=[l.floor(a,c),l.ceil(s,c)];return o?u.reverse():u};function dp(e){return!mr(e)&&!a6(e)&&!Number.isNaN(e)}var ez=e=>t=>-e(-t),Vd=(e,t)=>{let n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?ez(r):r},Hd=(e,t)=>{let n=e===Math.E?Math.exp:r=>e**r;return t?ez(n):n};var tz=(e,t,n,r)=>{let i=e<0,o=Vd(r,i),a=Hd(r,i),s=e>t,l=s?t:e,c=s?e:t,u=[a(Math.floor(o(l))),a(Math.ceil(o(c)))];return s?u.reverse():u};var yoe=e=>t=>{let n=e(t);return Dn(n)?Math.round(n):n};function ck(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();let[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){let{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){let{domain:o,interpolator:a,round:s}=this.getOptions(),l=t(o.map(r)),c=s?yoe(a):a;this.output=Jc(c,l,i,r)},n.prototype.invert=void 0}}var dz=Ym(pz());function uk(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function woe(e){let t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];let o=r<.5?r*(1+n):r+n-r*n,a=2*r-o,s=uk(a,o,t+1/3),l=uk(a,o,t),c=uk(a,o,t-1/3);return[s*255,l*255,c*255,i]}function fk(e){let t=dz.default.get(e);if(!t)return null;let{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?woe(r):null}var uc=(e,t)=>n=>e*(1-n)+t*n,pk=(e,t)=>{let n=fk(e),r=fk(t);return n===null||r===null?n?()=>e:()=>t:i=>{let o=new Array(4);for(let u=0;u<4;u+=1){let f=n[u],p=r[u];o[u]=f*(1-i)+p*i}let[a,s,l,c]=o;return`rgba(${Math.round(a)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},Tl=(e,t)=>typeof e=="number"&&typeof t=="number"?uc(e,t):typeof e=="string"&&typeof t=="string"?pk(e,t):()=>e,dk=(e,t)=>{let n=uc(e,t);return r=>Math.round(n(r))};function hk(e,t){let{second:n,minute:r,hour:i,day:o,week:a,month:s,year:l}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":o.floor(e)<e?"hh A":s.floor(e)<e?a.floor(e)<e?"MMM DD":"ddd DD":l.floor(e)<e?"MMMM":"YYYY"}function hz({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):n}function Soe({map:e,initKey:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Coe({map:e,initKey:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ooe(e){return typeof e=="object"?e.valueOf():e}var O0=class extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=Ooe,t!==null)for(let[n,r]of t)this.set(n,r)}get(t){return super.get(hz({map:this.map,initKey:this.initKey},t))}has(t){return super.has(hz({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(Soe({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(Coe({map:this.map,initKey:this.initKey},t))}};var Pl=class{constructor(t){this.options=_e({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=_e({},this.options,t),this.rescale(t)}rescale(t){}};var M0=Symbol("defaultUnknown");function mz(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function gz(e){let{value:t,from:n,to:r,mapper:i,notFoundReturn:o}=e,a=i.get(t);if(a===void 0){if(o!==M0)return o;a=n.push(t)-1,i.set(t,a)}return r[a%r.length]}function vz(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}var Wd=class e extends Pl{getDefaultOptions(){return{domain:[],range:[],unknown:M0}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&mz(this.domainIndexMap,this.getDomain(),this.domainKey),gz({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&mz(this.rangeIndexMap,this.getRange(),this.rangeKey),gz({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){let[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=vz(n),this.rangeKey=vz(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new e(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;let{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}};function Moe(e){let t=Math.min(...e);return e.map(n=>n/t)}function koe(e,t){let n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function Eoe(e){return Math.round(e*1e12)/1e12}function Aoe(e){let{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:o,round:a,align:s}=e,l=t.length,c=koe(o,l),[u,f]=n,p=f-u,d=2/l*r+1-1/l*i,h=p/d,m=h*i/l,g=h-l*m,v=Moe(c),y=v.reduce((A,N)=>A+N),x=g/y,_=new O0(t.map((A,N)=>{let L=v[N]*x;return[A,a?Math.floor(L):L]})),w=new O0(t.map((A,N)=>{let z=v[N]*x+m;return[A,a?Math.floor(z):z]})),S=Array.from(w.values()).reduce((A,N)=>A+N),O=(p-(S-S/l*i))*s,E=u+O,P=a?Math.round(E):E,k=new Array(l);for(let A=0;A<l;A+=1){k[A]=Eoe(P);let N=t[A];P+=w.get(N)}return{valueBandWidth:_,valueStep:w,adjustedRange:k}}function Toe(e){var t;let{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return Aoe(e);let{range:o,paddingOuter:a,paddingInner:s,round:l,align:c}=e,u,f,p=o[0],h=o[1]-p,m=a*2,g=r-s;u=h/Math.max(1,m+g),l&&(u=Math.floor(u)),p+=(h-u*(r-s))*c,f=u*(1-s),l&&(p=Math.round(p),f=Math.round(f));let v=new Array(r).fill(0).map((y,x)=>p+x*u);return{valueStep:u,valueBandWidth:f,adjustedRange:v}}var ds=class e extends Wd{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:M0,flex:[]}}constructor(t){super(t)}clone(){return new e(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){let{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){let{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();let{align:t,domain:n,range:r,round:i,flex:o}=this.options,{adjustedRange:a,valueBandWidth:s,valueStep:l}=Toe({align:t,range:r,round:i,flex:o,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=a}};var $s=(e,t,n)=>{let r,i,o=e,a=t;if(o===a&&n>0)return[o];let s=jd(o,a,n);if(s===0||!Number.isFinite(s))return[];if(s>0){o=Math.ceil(o/s),a=Math.floor(a/s),i=new Array(r=Math.ceil(a-o+1));for(let l=0;l<r;l+=1)i[l]=(o+l)*s}else{s=-s,o=Math.ceil(o*s),a=Math.floor(a*s),i=new Array(r=Math.ceil(a-o+1));for(let l=0;l<r;l+=1)i[l]=(o+l)/s}return i};var Zu=class e extends Pl{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:$s}}map(t){let[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){let[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){let{tickMethod:t,domain:n,tickCount:r}=this.options,[i,o]=n;return!Dn(i)||!Dn(o)?[]:t(i,o,r)}clone(){return new e(this.options)}};function k0(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}var Poe=[1,5,2,2.5,4,3];var yz=Number.EPSILON*100;function Noe(e,t){return(e%t+t)%t}function Loe(e){return Math.round(e*1e12)/1e12}function Ioe(e,t,n,r,i,o){let a=rp(t),s=Yb(t,e),l=0,c=Noe(r,o);return(c<yz||o-c<yz)&&r<=0&&i>=0&&(l=1),1-s/(a-1)-n+l}function Doe(e,t,n){let r=rp(t);return 1-Yb(t,e)/(r-1)-n+1}function zoe(e,t,n,r,i,o){let a=(e-1)/(o-i),s=(t-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function Roe(e,t){return e>=t?2-(e-1)/(t-1):1}function Foe(e,t,n,r){let i=t-e;return 1-.5*((t-r)**2+(e-n)**2)/(.1*i)**2}function Boe(e,t,n){let r=t-e;return n>r?1-((n-r)/2)**2/(.1*r)**2:1}function joe(){return 1}var E0=(e,t,n=5,r=!0,i=Poe,o=[.25,.2,.5,.05])=>{let a=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!a)return[];if(t-e<1e-15||a===1)return[e];let s={score:-2,lmin:0,lmax:0,lstep:0},l=1;for(;l<1/0;){for(let h=0;h<i.length;h+=1){let m=i[h],g=Doe(m,i,l);if(o[0]*g+o[1]+o[2]+o[3]<s.score){l=1/0;break}let v=2;for(;v<1/0;){let y=Roe(v,a);if(o[0]*g+o[1]+o[2]*y+o[3]<s.score)break;let x=(t-e)/(v+1)/l/m,_=Math.ceil(Math.log10(x));for(;_<1/0;){let w=l*m*10**_,S=Boe(e,t,w*(v-1));if(o[0]*g+o[1]*S+o[2]*y+o[3]<s.score)break;let M=Math.floor(t/w)*l-(v-1)*l,O=Math.ceil(e/w)*l;if(M<=O){let E=O-M;for(let P=0;P<=E;P+=1){let A=(M+P)*(w/l),N=A+w*(v-1),L=w,z=Ioe(m,i,l,A,N,L),B=Foe(e,t,A,N),H=zoe(v,a,e,t,A,N),j=joe(),W=o[0]*z+o[1]*B+o[2]*H+o[3]*j;W>s.score&&(!r||A<=e&&N>=t)&&(s.lmin=A,s.lmax=N,s.lstep=L,s.score=W)}}_+=1}v+=1}}l+=1}let c=k0(s.lmax),u=k0(s.lmin),f=k0(s.lstep),p=Math.floor(Loe((c-u)/f))+1,d=new Array(p);d[0]=k0(u);for(let h=1;h<p;h+=1)d[h]=k0(d[h-1]+f);return d};var qd=class e extends Pl{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:E0}}map(t){return dp(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new e(this.options)}getTicks(){let{domain:t,tickCount:n,tickMethod:r}=this.options,[i,o]=t;return!Dn(i)||!Dn(o)?[]:r(i,o,n)}};var Voe=(e,t,n)=>{let[r,i]=e,[o,a]=t,s,l;return r<i?(s=Fd(r,i),l=n(o,a)):(s=Fd(i,r),l=n(a,o)),Jc(l,s)},Hoe=(e,t,n)=>{let r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=e[0]>e[r],s=a?[...e].reverse():e,l=a?[...t].reverse():t;for(let c=0;c<r;c+=1)i[c]=Fd(s[c],s[c+1]),o[c]=n(l[c],l[c+1]);return c=>{let u=Bd(e,c,1,r)-1,f=i[u],p=o[u];return Jc(p,f)(c)}},xz=(e,t,n,r)=>(Math.min(e.length,t.length)>2?Hoe:Voe)(e,t,r?dk:n),Qc=class extends Pl{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:uc,tickCount:5}}map(t){return dp(t)?this.output(t):this.options.unknown}invert(t){return dp(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;let[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){let{tickMethod:t}=this.options,[n,r,i,...o]=this.getTickMethodOptions();return t(n,r,i,...o)}getTickMethodOptions(){let{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return Tv}rescale(){this.nice();let[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){let{clamp:n,range:r}=this.options,i=this.options.domain.map(t),o=Math.min(i.length,r.length);return n?J6(i[0],i[o-1]):Vs}composeOutput(t,n){let{domain:r,range:i,round:o,interpolate:a}=this.options,s=xz(r.map(t),i,a,o);this.output=Jc(s,n,t)}composeInput(t,n,r){let{domain:i,range:o}=this.options,a=xz(o,i.map(t),uc);this.input=Jc(n,r,a)}};var ai=class e extends Qc{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Tl,tickMethod:$s,tickCount:5}}chooseTransforms(){return[Vs,Vs]}clone(){return new e(this.options)}};var zv=class e extends ds{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:M0,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new e(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}};var Woe=e=>t=>t<0?-((-t)**e):t**e,qoe=e=>t=>t<0?-((-t)**(1/e)):t**(1/e),Uoe=e=>e<0?-Math.sqrt(-e):Math.sqrt(e),Ud=class e extends Qc{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:Tl,tickMethod:$s,tickCount:5}}constructor(t){super(t)}chooseTransforms(){let{exponent:t}=this.options;if(t===1)return[Vs,Vs];let n=t===.5?Uoe:Woe(t),r=qoe(t);return[n,r]}clone(){return new e(this.options)}};var Rv=class e extends Ud{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Tl,tickMethod:$s,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new e(this.options)}};var fc=class e extends Pl{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!dp(t))return this.options.unknown;let n=Bd(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){let{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new e(this.options)}rescale(){let{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}};var bz=(e,t,n,r=10)=>{let i=e<0,o=Hd(r,i),a=Vd(r,i),s=t<e,l=s?t:e,c=s?e:t,u=a(l),f=a(c),p=[];if(!(r%1)&&f-u<n){if(u=Math.floor(u),f=Math.ceil(f),i)for(;u<=f;u+=1){let d=o(u);for(let h=r-1;h>=1;h-=1){let m=d*h;if(m>c)break;m>=l&&p.push(m)}}else for(;u<=f;u+=1){let d=o(u);for(let h=1;h<r;h+=1){let m=d*h;if(m>c)break;m>=l&&p.push(m)}}p.length*2<n&&(p=$s(l,c,n))}else{let d=n===-1?f-u:Math.min(f-u,n);p=$s(u,f,d).map(o)}return s?p.reverse():p};var Fv=class e extends Qc{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:Tl,tickMethod:bz,tickCount:5}}chooseNice(){return tz}getTickMethodOptions(){let{domain:t,tickCount:n,base:r}=this.options,i=t[0],o=t[t.length-1];return[i,o,n,r]}chooseTransforms(){let{base:t,domain:n}=this.options,r=n[0]<0;return[Vd(t,r),Hd(t,r)]}clone(){return new e(this.options)}};var Gd=class e extends fc{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:E0}}constructor(t){super(t)}nice(){let{nice:t}=this.options;if(t){let[n,r,i]=this.getTickMethodOptions();this.options.domain=Tv(n,r,i)}}getTicks(){let{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){let{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();let{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let o=0;o<this.n;o+=1)this.thresholds[o]=((o+1)*i-(o-this.n)*r)/(this.n+1)}invert(t){let[n,r]=super.invert(t),[i,o]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||o]}getThresholds(){return this.thresholds}clone(){return new e(this.options)}};function Goe(e,t){let n=e.length;if(!n)return;if(n<2)return e[n-1];let r=(n-1)*t,i=Math.floor(r),o=e[i],a=e[i+1];return o+(a-o)*(r-i)}function _z(e,t,n=!1){let r=e;n||r.sort((o,a)=>o-a);let i=[];for(let o=1;o<t;o+=1)i.push(Goe(r,o/t));return i}var $d=class e extends fc{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:E0}}constructor(t){super(t)}rescale(){let{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=_z(t,this.n+1,!1)}invert(t){let[n,r]=super.invert(t),{domain:i}=this.options,o=i[0],a=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||o,r||a]}getThresholds(){return this.thresholds}clone(){return new e(this.options)}getTicks(){let{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,o=n[0],a=n[i];return r(o,a,t)}};var $oe=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,gp="\\d\\d?",mp="\\d\\d",Yoe="\\d{3}",Xoe="\\d{4}",Bv="[^\\s]+",Koe=/\[([^]*?)\]/gm;function Az(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var wz=function(e){return function(t,n){var r=n[e].map(function(o){return o.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function mk(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)e[a]=o[a]}return e}var Tz=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Pz=["January","February","March","April","May","June","July","August","September","October","November","December"],Zoe=Az(Pz,3),Joe=Az(Tz,3),Qoe={dayNamesShort:Joe,dayNames:Tz,monthNamesShort:Zoe,monthNames:Pz,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},eae=mk({},Qoe);var hs=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},tae={D:function(e){return String(e.getDate())},DD:function(e){return hs(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return hs(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return hs(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return hs(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return hs(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return hs(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return hs(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return hs(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return hs(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return hs(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return hs(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+hs(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+hs(Math.floor(Math.abs(t)/60),2)+":"+hs(Math.abs(t)%60,2)}},Sz=function(e){return+e-1},Cz=[null,gp],Oz=[null,Bv],Mz=["isPm",Bv,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],kz=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],cze={D:["day",gp],DD:["day",mp],Do:["day",gp+Bv,function(e){return parseInt(e,10)}],M:["month",gp,Sz],MM:["month",mp,Sz],YY:["year",mp,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",gp,void 0,"isPm"],hh:["hour",mp,void 0,"isPm"],H:["hour",gp],HH:["hour",mp],m:["minute",gp],mm:["minute",mp],s:["second",gp],ss:["second",mp],YYYY:["year",Xoe],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",mp,function(e){return+e*10}],SSS:["millisecond",Yoe],d:Cz,dd:Cz,ddd:Oz,dddd:Oz,MMM:["month",Bv,wz("monthNamesShort")],MMMM:["month",Bv,wz("monthNames")],a:Mz,A:Mz,ZZ:kz,Z:kz},Ez={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};var Nz=function(e,t,n){if(t===void 0&&(t=Ez.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=Ez[t]||t;var r=[];t=t.replace(Koe,function(o,a){return r.push(a),"@@@"});var i=mk(mk({},eae),n);return t=t.replace($oe,function(o){return tae[o](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};var Lz=(e,t,n,r,i)=>{let o=e>t,a=o?t:e,s=o?e:t,[l,c]=Lv(a,s,n,r,i),u=l.range(a,new Date(+s+1),c,!0);return o?u.reverse():u};function nae(e){let t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}var jv=class e extends Qc{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:Lz,interpolate:uc,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return lk}getTickMethodOptions(){let{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,o=t[0],a=t[t.length-1];return[o,a,n,r,i]}getFormatter(){let{mask:t,utc:n}=this.options,r=n?Nv:Pv,i=n?nae:Vs;return o=>Nz(i(o),t||hk(o,r))}clone(){return new e(this.options)}};var rae=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},gk;function iae(e){return[e(0),e(1)]}var oae=e=>{let[t,n]=e;return Jc(uc(0,1),Fd(t,n))},Vv=gk=class extends ai{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Vs,tickMethod:$s,tickCount:5}}constructor(t){super(t)}clone(){return new gk(this.options)}};Vv=gk=rae([ck(iae,oae)],Vv);function A0(e,t,n){if(e===null)return[-.5,.5];let r=b5(e,t),o=new ds({domain:r,range:[0,1],padding:n}).getBandWidth();return[-o/2,o/2]}function T0(e,t,n){return t*(1-e)+n*e}var B5=(e={})=>{let{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(o,a)=>{let{encode:s,scale:l}=a,{x:c,y:u}=l,[f]=sn(s,"x"),[p]=sn(s,"y"),d=A0(f,c,n),h=A0(p,u,r),m=o.map(()=>T0(i(),...h)),g=o.map(()=>T0(i(),...d));return[o,_e({scale:{x:{padding:.5},y:{padding:.5}}},a,{encode:{dy:Mn(m),dx:Mn(g)}})]}};B5.props={};var j5=(e={})=>{let{padding:t=0,random:n=Math.random}=e;return(r,i)=>{let{encode:o,scale:a}=i,{x:s}=a,[l]=sn(o,"x"),c=A0(l,s,t),u=r.map(()=>T0(n(),...c));return[r,_e({scale:{x:{padding:.5}}},i,{encode:{dx:Mn(u)}})]}};j5.props={};var V5=(e={})=>{let{padding:t=0,random:n=Math.random}=e;return(r,i)=>{let{encode:o,scale:a}=i,{y:s}=a,[l]=sn(o,"y"),c=A0(l,s,t),u=r.map(()=>T0(n(),...c));return[r,_e({scale:{y:{padding:.5}}},i,{encode:{dy:Mn(u)}})]}};V5.props={};var aae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},H5=(e={})=>{let{groupBy:t="x"}=e;return(n,r)=>{let{encode:i}=r,{x:o}=i,a=aae(i,["x"]),s=Object.entries(a).filter(([p])=>p.startsWith("y")).map(([p])=>[p,sn(i,p)[0]]),l=s.map(([p])=>[p,new Array(n.length)]),c=sa(t,n,r),u=new Array(c.length);for(let p=0;p<c.length;p++){let h=c[p].flatMap(v=>s.map(([,y])=>+y[v])),[m,g]=_o(h);u[p]=(m+g)/2}let f=Math.max(...u);for(let p=0;p<c.length;p++){let d=f-u[p],h=c[p];for(let m of h)for(let g=0;g<s.length;g++){let[,v]=s[g],[,y]=l[g];y[m]=+v[m]+d}}return[n,_e({},r,{encode:Object.fromEntries(l.map(([p,d])=>[p,Mn(d,sn(i,p)[1])]))})]}};H5.props={};var W5=(e={})=>{let{groupBy:t="x",series:n=!0}=e;return(r,i)=>{let{encode:o}=i,[a]=sn(o,"y"),[s,l]=sn(o,"y1"),[c]=n?Xu(o,"series","color"):sn(o,"color"),u=sa(t,r,i),f=new Array(r.length);for(let p of u){let d=p.map(h=>+a[h]);for(let h=0;h<p.length;h++){let m=p[h],g=Math.max(...d.filter((v,y)=>y!==h));f[m]=+a[m]>g?g:a[m]}}return[r,_e({},i,{encode:{y1:Mn(f,l)}})]}};W5.props={};function Iz(e,t){return[e[0]]}function sae(e,t){let n=e.length-1;return[e[n]]}function lae(e,t){let n=fs(e,r=>t[r]);return[e[n]]}function cae(e,t){let n=sc(e,r=>t[r]);return[e[n]]}function uae(e){return typeof e=="function"?e:{first:Iz,last:sae,max:lae,min:cae}[e]||Iz}var vp=(e={})=>{let{groupBy:t="series",channel:n,selector:r}=e;return(i,o)=>{let{encode:a}=o,s=sa(t,i,o),[l]=sn(a,n),c=uae(r);return[s.flatMap(u=>c(u,l)),o]}};vp.props={};var fae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},q5=(e={})=>{let{selector:t}=e,n=fae(e,["selector"]);return vp(Object.assign({channel:"x",selector:t},n))};q5.props={};var pae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},U5=(e={})=>{let{selector:t}=e,n=pae(e,["selector"]);return vp(Object.assign({channel:"y",selector:t},n))};U5.props={};var dae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yp(e){return t=>t===null?e:`${e} of ${t}`}function hae(e){if(typeof e=="function")return[e,null];let n={mean:mae,max:vae,count:xae,first:_ae,last:wae,sum:bae,min:yae,median:gae}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function mae(){let e=(n,r)=>lc(n,i=>+r[i]),t=yp("mean");return[e,t]}function gae(){let e=(n,r)=>cp(n,i=>+r[i]),t=yp("median");return[e,t]}function vae(){let e=(n,r)=>kn(n,i=>+r[i]),t=yp("max");return[e,t]}function yae(){let e=(n,r)=>ni(n,i=>+r[i]),t=yp("min");return[e,t]}function xae(){let e=(n,r)=>n.length,t=yp("count");return[e,t]}function bae(){let e=(n,r)=>Ci(n,i=>+r[i]),t=yp("sum");return[e,t]}function _ae(){let e=(n,r)=>r[n[0]],t=yp("first");return[e,t]}function wae(){let e=(n,r)=>r[n[n.length-1]],t=yp("last");return[e,t]}var Hv=(e={})=>{let{groupBy:t}=e,n=dae(e,["groupBy"]);return(r,i)=>{let{data:o,encode:a}=i,s=t(r,i);if(!s)return[r,i];let l=(d,h)=>{if(d)return d;let{from:m}=h;if(!m)return d;let[,g]=sn(a,m);return g},c=Object.entries(n).map(([d,h])=>{let[m,g]=hae(h),[v,y]=sn(a,d),x=l(y,h),_=s.map(w=>m(w,v??o));return[d,Object.assign(Object.assign({},_D(_,g?.(x)||x)),{aggregate:!0})]}),u=Object.keys(a).map(d=>{let[h,m]=sn(a,d),g=s.map(v=>h[v[0]]);return[d,Mn(g,m)]}),f=s.map(d=>o[d[0]]);return[Us(s),_e({},i,{data:f,encode:Object.fromEntries([...u,...c])})]}};Hv.props={};var Sae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},eu=(e={})=>{let{channels:t=["x","y"]}=e,n=Sae(e,["channels"]),r=(i,o)=>sa(t,i,o);return Hv(Object.assign(Object.assign({},n),{groupBy:r}))};eu.props={};var G5=(e={})=>eu(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));G5.props={};var $5=(e={})=>eu(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));$5.props={};var Y5=(e={})=>eu(Object.assign(Object.assign({},e),{channels:["color"]}));Y5.props={};var Dz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Cae(e,t,n){let{by:r=e,reducer:i="max"}=t,[o]=sn(n,r);if(typeof i=="function")return a=>i(a,o);if(i==="max")return a=>kn(a,s=>+o[s]);if(i==="min")return a=>ni(a,s=>+o[s]);if(i==="sum")return a=>Ci(a,s=>+o[s]);if(i==="median")return a=>cp(a,s=>+o[s]);if(i==="mean")return a=>lc(a,s=>+o[s]);if(i==="first")return a=>o[a[0]];if(i==="last")return a=>o[a[a.length-1]];throw new Error(`Unknown reducer: ${i}`)}function Oae(e,t,n){let{reverse:r,channel:i}=n,{encode:o}=t,[a]=sn(o,i),s=Qi(e,l=>a[l]);return r&&s.reverse(),[s,t]}function Mae(e,t,n){if(!Array.isArray(n))return e;let r=new Set(n);return e.filter(i=>r.has(t[i]))}function kae(e,t,n){var r;let{reverse:i,slice:o,channel:a}=n,s=Dz(n,["reverse","slice","channel"]),{encode:l,scale:c={}}=t,u=(r=c[a])===null||r===void 0?void 0:r.domain,[f]=sn(l,a),p=Cae(a,s,l),d=Mae(e,f,u),h=p5(d,p,v=>f[v]);i&&h.reverse();let m=typeof o=="number"?[0,o]:o,g=o?h.slice(...m):h;return[e,_e(t,{scale:{[a]:{domain:g}}})]}var Yd=(e={})=>{let{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,o=Dz(e,["reverse","slice","channel","ordinal"]);return(a,s)=>i?kae(a,s,Object.assign({reverse:t,slice:n,channel:r},o)):Oae(a,s,Object.assign({reverse:t,slice:n,channel:r},o))};Yd.props={};var X5=(e={})=>Yd(Object.assign(Object.assign({},e),{channel:"x"}));X5.props={};var K5=(e={})=>Yd(Object.assign(Object.assign({},e),{channel:"color"}));K5.props={};var Z5=(e={})=>Yd(Object.assign(Object.assign({},e),{channel:"y"}));Z5.props={};function Eae(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function Aae(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>Ci(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}var J5=(e={})=>{let{field:t,channel:n="y",reducer:r="sum"}=e;return(i,o)=>{let{data:a,encode:s}=o,[l]=sn(s,"x"),c=t?Eae(a,t):sn(s,n)[0],u=Aae(r,c),f=zd(i,u,p=>l[p]).map(p=>p[1]);return[i,_e({},o,{scale:{x:{flex:f}}})]}};J5.props={};function ur([e,t],[n,r]){return[e-n,t-r]}function Wv([e,t],[n,r]){return[e+n,t+r]}function er([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function so([e,t]){return Math.atan2(t,e)}function pc([e,t]){return so([e,t])+Math.PI/2}function Q5(e,t){let n=so(e),r=so(t);return n<r?r-n:Math.PI*2-(n-r)}function P0(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let[s,l]of e)t=Math.min(s,t),n=Math.max(s,n),r=Math.min(l,r),i=Math.max(l,i);let o=n-t,a=i-r;return[t,r,o,a]}function e_([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function Tae(e){let{padding:t=0,direction:n="col"}=e;return(r,i,o)=>{let a=r.length;if(a===0)return[];let{innerWidth:s,innerHeight:l}=o,c=l/s,u=Math.ceil(Math.sqrt(i/c)),f=s/u,p=Math.ceil(i/u),d=p*f;for(;d>l;)u=u+1,f=s/u,p=Math.ceil(i/u),d=p*f;let h=l-p*f,m=p<=1?0:h/(p-1),[g,v]=p<=1?[(s-a*f)/(a-1),(l-f)/2]:[0,0];return r.map((y,x)=>{let[_,w,S,M]=P0(y),O=n==="col"?x%u:Math.floor(x/p),E=n==="col"?Math.floor(x/u):x%p,P=O*f,k=(p-E-1)*f+h,A=(f-t)/S,N=(f-t)/M,L=P-_+g*O+1/2*t,z=k-w-m*E-v+1/2*t;return`translate(${L}, ${z}) scale(${A}, ${N})`})}}var t_=e=>(t,n)=>[t,_e({},n,{modifier:Tae(e),axis:!1})];t_.props={};var Pae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},zz="thresholds";function Nae(e){let[t,n]=_o(e);return Math.min(200,h5(e,t,n))}var N0=(e={})=>{let{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=Pae(e,["groupChannels","binChannels"]),i={},o=(a,s)=>{let{encode:l}=s,c=n.map(h=>{let[m]=sn(l,h);return m}),u=Ke(r,zz),f=a.filter(h=>c.every(m=>qn(m[h]))),p=[...t.map(h=>{let[m]=sn(l,h);return m}).filter(qn).map(h=>m=>h[m]),...n.map((h,m)=>{let g=c[m],v=u[h]||Nae(g),y=Cv().thresholds(v).value(_=>+g[_])(f),x=new Map(y.flatMap(_=>{let{x0:w,x1:S}=_,M=`${w},${S}`;return _.map(O=>[O,M])}));return i[h]=x,_=>x.get(_)})],d=h=>p.map(m=>m(h)).join("-");return Array.from(An(f,d).values())};return Hv(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([a])=>!a.startsWith(zz)))),Object.fromEntries(n.flatMap(a=>{let s=([c])=>+i[a].get(c).split(",")[0],l=([c])=>+i[a].get(c).split(",")[1];return l.from=a,[[a,s],[`${a}1`,l]]}))),{groupBy:o}))};N0.props={};var n_=(e={})=>{let{thresholds:t}=e;return N0(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};n_.props={};function Rz(e,t,n,r){let i=e.length;if(r>=i||r===0)return e;let o=d=>t[e[d]]*1,a=d=>n[e[d]]*1,s=[],l=(i-2)/(r-2),c=0,u,f,p;s.push(c);for(let d=0;d<r-2;d++){let h=0,m=0,g=Math.floor((d+1)*l)+1,v=Math.floor((d+2)*l)+1;v=Math.min(v,i);let y=v-g;for(;g<v;g++)h+=o(g),m+=a(g);h/=y,m/=y;let x=Math.floor((d+0)*l)+1,_=Math.floor((d+1)*l)+1,w=[o(c),a(c)];for(u=f=-1;x<_;x++)f=Math.abs((w[0]-h)*(o(x)-w[1])-(w[0]-a(x))*(m-w[0]))*.5,f>u&&(u=f,p=x);s.push(p),c=p}return s.push(i-1),s.map(d=>e[d])}function Lae(e){if(typeof e=="function")return e;if(e==="lttb")return Rz;let t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,o)=>[r[sc(r,a=>o[a])]],max:(r,i,o)=>[r[fs(r,a=>o[a])]],median:(r,i,o)=>[r[$6(r,a=>o[a])]]},n=t[e]||t.median;return(r,i,o,a)=>{let s=Math.max(1,Math.floor(r.length/a));return Iae(r,s).flatMap(c=>n(c,i,o))}}function Iae(e,t){let n=e.length,r=[],i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}var r_=(e={})=>{let{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=Lae(t);return(o,a)=>{let{encode:s}=a,l=sa(r,o,a),[c]=sn(s,"x"),[u]=sn(s,"y");return[l.flatMap(f=>i(f,c,u,n)),a]}};r_.props={};function Dae(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}function zae(e){var t;let{encode:n}=e,r=Object.assign(Object.assign({},e),{encode:Object.assign(Object.assign({},e.encode),{y:Object.assign(Object.assign({},e.encode.y),{value:[]})})}),i=(t=n?.color)===null||t===void 0?void 0:t.field;if(!n||!i)return r;let o;for(let[a,s]of Object.entries(n))(a==="x"||a==="y")&&s.field===i&&(o=Object.assign(Object.assign({},o),{[a]:Object.assign(Object.assign({},s),{value:[]})}));return o?Object.assign(Object.assign({},e),{encode:Object.assign(Object.assign({},e.encode),o)}):r}var i_=(e={})=>(t,n)=>{let{encode:r,data:i}=n,o=Object.entries(e).map(([u,f])=>{let[p]=sn(r,u);if(!p)return null;let[d,h=!0]=Dae(f);if(typeof d=="function")return m=>d(p[m]);if(h){let m=Array.isArray(d)?d:[d];return m.length===0?null:g=>m.includes(p[g])}else{let[m,g]=d;return v=>p[v]>=m&&p[v]<=g}}).filter(qn),a=u=>o.every(f=>f(u)),s=t.filter(a),l=s.map((u,f)=>f);if(o.length===0){let u=zae(n);return[t,u]}let c=Object.entries(r).map(([u,f])=>[u,Object.assign(Object.assign({},f),{value:l.map(p=>f.value[s[p]]).filter(p=>p!==void 0)})]);return[l,_e({},n,{encode:Object.fromEntries(c),data:s.map(u=>i[u])})]};i_.props={};function Rr(e){return function(){return e}}var vk=Math.abs,Ho=Math.atan2,xp=Math.cos,Fz=Math.max,o_=Math.min,dc=Math.sin,Xd=Math.sqrt,wo=1e-12,L0=Math.PI,qv=L0/2,Bz=2*L0;function jz(e){return e>1?0:e<-1?L0:Math.acos(e)}function yk(e){return e>=1?qv:e<=-1?-qv:Math.asin(e)}var xk=Math.PI,bk=2*xk,Kd=1e-6,Rae=bk-Kd;function Vz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Fae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Vz;let n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Zd=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Vz:Fae(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-t,c=i-n,u=a-t,f=s-n,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Kd)if(!(Math.abs(f*l-c*u)>Kd)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-a,h=i-s,m=l*l+c*c,g=d*d+h*h,v=Math.sqrt(m),y=Math.sqrt(p),x=o*Math.tan((xk-Math.acos((m+p-g)/(2*v*y)))/2),_=x/y,w=x/v;Math.abs(_-1)>Kd&&this._append`L${t+_*u},${n+_*f}`,this._append`A${o},${o},0,0,${+(f*d>u*h)},${this._x1=t+w*l},${this._y1=n+w*c}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=t+s,u=n+l,f=1^a,p=a?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Kd||Math.abs(this._y1-u)>Kd)&&this._append`L${c},${u}`,r&&(p<0&&(p=p%bk+bk),p>Rae?this._append`A${r},${r},0,1,${f},${t-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:p>Kd&&this._append`A${r},${r},0,${+(p>=xk)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function fi(){return new Zd}fi.prototype=Zd.prototype;function I0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Zd(t)}function Bae(e){return e.innerRadius}function jae(e){return e.outerRadius}function Vae(e){return e.startAngle}function Hae(e){return e.endAngle}function Wae(e){return e&&e.padAngle}function qae(e,t,n,r,i,o,a,s){var l=n-e,c=r-t,u=a-i,f=s-o,p=f*l-u*c;if(!(p*p<wo))return p=(u*(t-o)-f*(e-i))/p,[e+p*l,t+p*c]}function a_(e,t,n,r,i,o,a){var s=e-n,l=t-r,c=(a?o:-o)/Xd(s*s+l*l),u=c*l,f=-c*s,p=e+u,d=t+f,h=n+u,m=r+f,g=(p+h)/2,v=(d+m)/2,y=h-p,x=m-d,_=y*y+x*x,w=i-o,S=p*m-h*d,M=(x<0?-1:1)*Xd(Fz(0,w*w*_-S*S)),O=(S*x-y*M)/_,E=(-S*y-x*M)/_,P=(S*x+y*M)/_,k=(-S*y+x*M)/_,A=O-g,N=E-v,L=P-g,z=k-v;return A*A+N*N>L*L+z*z&&(O=P,E=k),{cx:O,cy:E,x01:-u,y01:-f,x11:O*(i/w-1),y11:E*(i/w-1)}}function Ju(){var e=Bae,t=jae,n=Rr(0),r=null,i=Vae,o=Hae,a=Wae,s=null,l=I0(c);function c(){var u,f,p=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-qv,m=o.apply(this,arguments)-qv,g=vk(m-h),v=m>h;if(s||(s=u=l()),d<p&&(f=d,d=p,p=f),!(d>wo))s.moveTo(0,0);else if(g>Bz-wo)s.moveTo(d*xp(h),d*dc(h)),s.arc(0,0,d,h,m,!v),p>wo&&(s.moveTo(p*xp(m),p*dc(m)),s.arc(0,0,p,m,h,v));else{var y=h,x=m,_=h,w=m,S=g,M=g,O=a.apply(this,arguments)/2,E=O>wo&&(r?+r.apply(this,arguments):Xd(p*p+d*d)),P=o_(vk(d-p)/2,+n.apply(this,arguments)),k=P,A=P,N,L;if(E>wo){var z=yk(E/p*dc(O)),B=yk(E/d*dc(O));(S-=z*2)>wo?(z*=v?1:-1,_+=z,w-=z):(S=0,_=w=(h+m)/2),(M-=B*2)>wo?(B*=v?1:-1,y+=B,x-=B):(M=0,y=x=(h+m)/2)}var H=d*xp(y),j=d*dc(y),W=p*xp(w),Z=p*dc(w);if(P>wo){var ie=d*xp(x),R=d*dc(x),q=p*xp(_),J=p*dc(_),te;if(g<L0)if(te=qae(H,j,q,J,ie,R,W,Z)){var ae=H-te[0],le=j-te[1],ue=ie-te[0],ye=R-te[1],Me=1/dc(jz((ae*ue+le*ye)/(Xd(ae*ae+le*le)*Xd(ue*ue+ye*ye)))/2),we=Xd(te[0]*te[0]+te[1]*te[1]);k=o_(P,(p-we)/(Me-1)),A=o_(P,(d-we)/(Me+1))}else k=A=0}M>wo?A>wo?(N=a_(q,J,H,j,d,A,v),L=a_(ie,R,W,Z,d,A,v),s.moveTo(N.cx+N.x01,N.cy+N.y01),A<P?s.arc(N.cx,N.cy,A,Ho(N.y01,N.x01),Ho(L.y01,L.x01),!v):(s.arc(N.cx,N.cy,A,Ho(N.y01,N.x01),Ho(N.y11,N.x11),!v),s.arc(0,0,d,Ho(N.cy+N.y11,N.cx+N.x11),Ho(L.cy+L.y11,L.cx+L.x11),!v),s.arc(L.cx,L.cy,A,Ho(L.y11,L.x11),Ho(L.y01,L.x01),!v))):(s.moveTo(H,j),s.arc(0,0,d,y,x,!v)):s.moveTo(H,j),!(p>wo)||!(S>wo)?s.lineTo(W,Z):k>wo?(N=a_(W,Z,ie,R,p,-k,v),L=a_(H,j,q,J,p,-k,v),s.lineTo(N.cx+N.x01,N.cy+N.y01),k<P?s.arc(N.cx,N.cy,k,Ho(N.y01,N.x01),Ho(L.y01,L.x01),!v):(s.arc(N.cx,N.cy,k,Ho(N.y01,N.x01),Ho(N.y11,N.x11),!v),s.arc(0,0,p,Ho(N.cy+N.y11,N.cx+N.x11),Ho(L.cy+L.y11,L.cx+L.x11),v),s.arc(L.cx,L.cy,k,Ho(L.y11,L.x11),Ho(L.y01,L.x01),!v))):s.arc(0,0,p,w,_,v)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-L0/2;return[xp(f)*u,dc(f)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Rr(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Rr(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Rr(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Rr(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Rr(+u),c):i},c.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Rr(+u),c):o},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Rr(+u),c):a},c.context=function(u){return arguments.length?(s=u??null,c):s},c}var mBe=Array.prototype.slice;function s_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hz(e){this._context=e}Hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function hc(e){return new Hz(e)}function l_(e){return e[0]}function c_(e){return e[1]}function Ta(e,t){var n=Rr(!0),r=null,i=hc,o=null,a=I0(s);e=typeof e=="function"?e:e===void 0?l_:Rr(e),t=typeof t=="function"?t:t===void 0?c_:Rr(t);function s(l){var c,u=(l=s_(l)).length,f,p=!1,d;for(r==null&&(o=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(f,c,l),+t(f,c,l));if(d)return o=null,d+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Rr(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Rr(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Rr(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function D0(e,t,n){var r=null,i=Rr(!0),o=null,a=hc,s=null,l=I0(c);e=typeof e=="function"?e:e===void 0?l_:Rr(+e),t=typeof t=="function"?t:t===void 0?Rr(0):Rr(+t),n=typeof n=="function"?n:n===void 0?c_:Rr(+n);function c(f){var p,d,h,m=(f=s_(f)).length,g,v=!1,y,x=new Array(m),_=new Array(m);for(o==null&&(s=a(y=l())),p=0;p<=m;++p){if(!(p<m&&i(g=f[p],p,f))===v)if(v=!v)d=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=p-1;h>=d;--h)s.point(x[h],_[h]);s.lineEnd(),s.areaEnd()}v&&(x[p]=+e(g,p,f),_[p]=+t(g,p,f),s.point(r?+r(g,p,f):x[p],n?+n(g,p,f):_[p]))}if(y)return s=null,y+""||null}function u(){return Ta().defined(i).curve(a).context(o)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:Rr(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Rr(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Rr(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:Rr(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Rr(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Rr(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Rr(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),c):o},c}var u_=z0(hc);function Wz(e){this._curve=e}Wz.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function z0(e){function t(n){return new Wz(e(n))}return t._curve=e,t}function R0(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(z0(n)):t()._curve},e}function f_(){return R0(Ta().curve(u_))}function p_(){var e=D0().curve(u_),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return R0(n())},delete e.lineX0,e.lineEndAngle=function(){return R0(r())},delete e.lineX1,e.lineInnerRadius=function(){return R0(i())},delete e.lineY0,e.lineOuterRadius=function(){return R0(o())},delete e.lineY1,e.curve=function(a){return arguments.length?t(z0(a)):t()._curve},e}function Qu(){}function d_(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function h_(e,t){this._context=e,this._k=(1-t)/6}h_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:d_(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:d_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var HBe=function e(t){function n(r){return new h_(r,t)}return n.tension=function(r){return e(+r)},n}(0);function m_(e,t){this._context=e,this._k=(1-t)/6}m_.prototype={areaStart:Qu,areaEnd:Qu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:d_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var GBe=function e(t){function n(r){return new m_(r,t)}return n.tension=function(r){return e(+r)},n}(0);function _k(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>wo){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>wo){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function qz(e,t){this._context=e,this._alpha=t}qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:_k(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var KBe=function e(t){function n(r){return t?new qz(r,t):new h_(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Uz(e,t){this._context=e,this._alpha=t}Uz.prototype={areaStart:Qu,areaEnd:Qu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_k(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Uv=function e(t){function n(r){return t?new Uz(r,t):new m_(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Gz(e){this._context=e}Gz.prototype={areaStart:Qu,areaEnd:Qu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Jd(e){return new Gz(e)}function $z(e){return e<0?-1:1}function Yz(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return($z(o)+$z(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Xz(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wk(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function g_(e){this._context=e}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wk(this,this._t0,Xz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wk(this,Xz(this,n=Yz(this,e,t)),n);break;default:wk(this,this._t0,n=Yz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Kz(e){this._context=new Zz(e)}(Kz.prototype=Object.create(g_.prototype)).point=function(e,t){g_.prototype.point.call(this,t,e)};function Zz(e){this._context=e}Zz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function Gv(e){return new g_(e)}function $v(e){return new Kz(e)}function v_(e,t){this._context=e,this._t=t}v_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Yv(e){return new v_(e,.5)}function Xv(e){return new v_(e,0)}function Kv(e){return new v_(e,1)}function Tn(e){let{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function yn(e){let{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function Qd(e){let{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function Sk(e){let{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function eh(e){let{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function y_(e){let{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function Jz(e){return eh(e)&&yn(e)}function mc(e){return Sk(e)||yn(e)}function Qz(e){return yn(e)&&Tn(e)}function eR(e){if(mc(e)){let[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function F0(e){let{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function Zv(e,t=!0){let{transformations:n}=e.getOptions(),[,r,i]=n.find(o=>o[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function tR(e,t){let{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}var iR=Ym(rR(),1);var b_=iR.default;function B0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ih(){}var bp=.7,rh=1/bp,j0="\\s*([+-]?\\d+)\\s*",e2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$ae=/^#([0-9a-f]{3,8})$/,Yae=new RegExp(`^rgb\\(${j0},${j0},${j0}\\)$`),Xae=new RegExp(`^rgb\\(${tu},${tu},${tu}\\)$`),Kae=new RegExp(`^rgba\\(${j0},${j0},${j0},${e2}\\)$`),Zae=new RegExp(`^rgba\\(${tu},${tu},${tu},${e2}\\)$`),Jae=new RegExp(`^hsl\\(${e2},${tu},${tu}\\)$`),Qae=new RegExp(`^hsla\\(${e2},${tu},${tu},${e2}\\)$`),oR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};B0(ih,oh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aR,formatHex:aR,formatHex8:ese,formatHsl:tse,formatRgb:sR,toString:sR});function aR(){return this.rgb().formatHex()}function ese(){return this.rgb().formatHex8()}function tse(){return dR(this).formatHsl()}function sR(){return this.rgb().formatRgb()}function oh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$ae.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lR(t):n===3?new Wo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?__(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?__(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yae.exec(e))?new Wo(t[1],t[2],t[3],1):(t=Xae.exec(e))?new Wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Kae.exec(e))?__(t[1],t[2],t[3],t[4]):(t=Zae.exec(e))?__(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jae.exec(e))?fR(t[1],t[2]/100,t[3]/100,1):(t=Qae.exec(e))?fR(t[1],t[2]/100,t[3]/100,t[4]):oR.hasOwnProperty(e)?lR(oR[e]):e==="transparent"?new Wo(NaN,NaN,NaN,0):null}function lR(e){return new Wo(e>>16&255,e>>8&255,e&255,1)}function __(e,t,n,r){return r<=0&&(e=t=n=NaN),new Wo(e,t,n,r)}function Mk(e){return e instanceof ih||(e=oh(e)),e?(e=e.rgb(),new Wo(e.r,e.g,e.b,e.opacity)):new Wo}function _p(e,t,n,r){return arguments.length===1?Mk(e):new Wo(e,t,n,r??1)}function Wo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}B0(Wo,_p,Qv(ih,{brighter(e){return e=e==null?rh:Math.pow(rh,e),new Wo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new Wo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wo(nh(this.r),nh(this.g),nh(this.b),S_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cR,formatHex:cR,formatHex8:nse,formatRgb:uR,toString:uR}));function cR(){return`#${th(this.r)}${th(this.g)}${th(this.b)}`}function nse(){return`#${th(this.r)}${th(this.g)}${th(this.b)}${th((isNaN(this.opacity)?1:this.opacity)*255)}`}function uR(){let e=S_(this.opacity);return`${e===1?"rgb(":"rgba("}${nh(this.r)}, ${nh(this.g)}, ${nh(this.b)}${e===1?")":`, ${e})`}`}function S_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function th(e){return e=nh(e),(e<16?"0":"")+e.toString(16)}function fR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gc(e,t,n,r)}function dR(e){if(e instanceof gc)return new gc(e.h,e.s,e.l,e.opacity);if(e instanceof ih||(e=oh(e)),!e)return new gc;if(e instanceof gc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new gc(a,s,l,e.opacity)}function hR(e,t,n,r){return arguments.length===1?dR(e):new gc(e,t,n,r??1)}function gc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}B0(gc,hR,Qv(ih,{brighter(e){return e=e==null?rh:Math.pow(rh,e),new gc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new gc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Wo(Ok(e>=240?e-240:e+120,i,r),Ok(e,i,r),Ok(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new gc(pR(this.h),w_(this.s),w_(this.l),S_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=S_(this.opacity);return`${e===1?"hsl(":"hsla("}${pR(this.h)}, ${w_(this.s)*100}%, ${w_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pR(e){return e=(e||0)%360,e<0?e+360:e}function w_(e){return Math.max(0,Math.min(1,e||0))}function Ok(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var mR=Math.PI/180,gR=180/Math.PI;var bR=-.14861,kk=1.78277,Ek=-.29227,C_=-.90649,t2=1.97294,vR=t2*C_,yR=t2*kk,xR=kk*Ek-C_*bR;function rse(e){if(e instanceof ah)return new ah(e.h,e.s,e.l,e.opacity);e instanceof Wo||(e=Mk(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(xR*r+vR*t-yR*n)/(xR+vR-yR),o=r-i,a=(t2*(n-i)-Ek*o)/C_,s=Math.sqrt(a*a+o*o)/(t2*i*(1-i)),l=s?Math.atan2(a,o)*gR-120:NaN;return new ah(l<0?l+360:l,s,i,e.opacity)}function Na(e,t,n,r){return arguments.length===1?rse(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}B0(ah,Na,Qv(ih,{brighter(e){return e=e==null?rh:Math.pow(rh,e),new ah(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new ah(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*mR,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Wo(255*(t+n*(bR*r+kk*i)),255*(t+n*(Ek*r+C_*i)),255*(t+n*(t2*r)),this.opacity)}}));function nu(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function SR(e,t){var n=Math.min.apply(Math,qe([],G(e),!1)),r=Math.min.apply(Math,qe([],G(t),!1)),i=Math.max.apply(Math,qe([],G(e),!1)),o=Math.max.apply(Math,qe([],G(t),!1));return{x:n,y:r,width:i-n,height:o-r}}function ose(e,t,n){return Math.atan(-t/e*Math.tan(n))}function ase(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function sse(e,t,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+e}function lse(e,t,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+t}function CR(e,t,n,r,i,o,a){for(var s=ose(n,r,i),l=1/0,c=-1/0,u=[o,a],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var p=s+f;o<a?o<p&&p<a&&u.push(p):a<p&&p<o&&u.push(p)}for(var f=0;f<u.length;f++){var d=sse(e,t,n,r,i,u[f]);d<l&&(l=d),d>c&&(c=d)}for(var h=ase(n,r,i),m=1/0,g=-1/0,v=[o,a],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var y=h+f;o<a?o<y&&y<a&&v.push(y):a<y&&y<o&&v.push(y)}for(var f=0;f<v.length;f++){var x=lse(e,t,n,r,i,v[f]);x<m&&(m=x),x>g&&(g=x)}return{x:l,y:m,width:c-l,height:g-m}}var cse=1e-4;function OR(e,t,n,r,i,o){var a=-1,s=1/0,l=[n,r],c=20;o&&o>200&&(c=o/10);for(var u=1/c,f=u/10,p=0;p<=c;p++){var d=p*u,h=[i.apply(void 0,qe([],G(e.concat([d])),!1)),i.apply(void 0,qe([],G(t.concat([d])),!1))],m=nu(l[0],l[1],h[0],h[1]);m<s&&(a=d,s=m)}if(a===0)return{x:e[0],y:t[0]};if(a===1){var g=e.length;return{x:e[g-1],y:t[g-1]}}s=1/0;for(var p=0;p<32&&!(f<cse);p++){var v=a-f,y=a+f,h=[i.apply(void 0,qe([],G(e.concat([v])),!1)),i.apply(void 0,qe([],G(t.concat([v])),!1))],m=nu(l[0],l[1],h[0],h[1]);if(v>=0&&m<s)a=v,s=m;else{var x=[i.apply(void 0,qe([],G(e.concat([y])),!1)),i.apply(void 0,qe([],G(t.concat([y])),!1))],_=nu(l[0],l[1],x[0],x[1]);y<=1&&_<s?(a=y,s=_):f*=.5}}return{x:i.apply(void 0,qe([],G(e.concat([a])),!1)),y:i.apply(void 0,qe([],G(t.concat([a])),!1))}}function Pk(e,t,n,r){return nu(e,t,n,r)}function Nk(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function MR(e,t,n,r,i,o){var a=[n-e,r-t];if(Yu.exactEquals(a,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));var s=[-a[1],a[0]];Yu.normalize(s,s);var l=[i-e,o-t];return Math.abs(Yu.dot(l,s))}function Ak(e,t,n,r,i){var o=1-i;return o*o*o*e+3*t*i*o*o+3*n*i*i*o+r*i*i*i}function _R(e,t,n,r){var i=-3*e+9*t-9*n+3*r,o=6*e-12*t+6*n,a=3*t-3*e,s=[],l,c,u;if($u(i,0))$u(o,0)||(l=-a/o,l>=0&&l<=1&&s.push(l));else{var f=o*o-4*i*a;$u(f,0)?s.push(-o/(2*i)):f>0&&(u=Math.sqrt(f),l=(-o+u)/(2*i),c=(-o-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function kR(e,t,n,r,i,o,a,s){for(var l=[e,a],c=[t,s],u=_R(e,n,i,a),f=_R(t,r,o,s),p=0;p<u.length;p++)l.push(Ak(e,n,i,a,u[p]));for(var p=0;p<f.length;p++)c.push(Ak(t,r,o,s,f[p]));return SR(l,c)}function use(e,t,n,r,i,o,a,s,l,c,u){return OR([e,n,i,a],[t,r,o,s],l,c,Ak,u)}function Lk(e,t,n,r,i,o,a,s,l,c,u){var f=use(e,t,n,r,i,o,a,s,l,c,u);return nu(f.x,f.y,l,c)}function fse(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=nu(r[0],r[1],i[0],i[1])}return t}function ER(e){return fse(e)}function Tk(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function wR(e,t,n){var r=e+n-2*t;if($u(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function AR(e,t,n,r,i,o){var a=wR(e,n,i)[0],s=wR(t,r,o)[0],l=[e,i],c=[t,o];return a!==void 0&&l.push(Tk(e,n,i,a)),s!==void 0&&c.push(Tk(t,r,o,s)),SR(l,c)}function pse(e,t,n,r,i,o,a,s){return OR([e,n,i],[t,r,o],a,s,Tk)}function TR(e,t,n,r,i,o,a,s){var l=pse(e,t,n,r,i,o,a,s);return nu(l.x,l.y,a,s)}var dse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aF={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(dse,function(){function n(w,S,M,O,E){r(w,S,M||0,O||w.length-1,E||o)}function r(w,S,M,O,E){for(;O>M;){if(O-M>600){var P=O-M+1,k=S-M+1,A=Math.log(P),N=.5*Math.exp(2*A/3),L=.5*Math.sqrt(A*N*(P-N)/P)*(k-P/2<0?-1:1),z=Math.max(M,Math.floor(S-k*N/P+L)),B=Math.min(O,Math.floor(S+(P-k)*N/P+L));r(w,S,z,B,E)}var H=w[S],j=M,W=O;for(i(w,M,S),E(w[O],H)>0&&i(w,M,O);j<W;){for(i(w,j,W),j++,W--;E(w[j],H)<0;)j++;for(;E(w[W],H)>0;)W--}E(w[M],H)===0?i(w,M,W):(W++,i(w,W,O)),W<=S&&(M=W+1),S<=W&&(O=W-1)}}function i(w,S,M){var O=w[S];w[S]=w[M],w[M]=O}function o(w,S){return w<S?-1:w>S?1:0}var a=function(S){S===void 0&&(S=9),this._maxEntries=Math.max(4,S),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(S){var M=this.data,O=[];if(!y(S,M))return O;for(var E=this.toBBox,P=[];M;){for(var k=0;k<M.children.length;k++){var A=M.children[k],N=M.leaf?E(A):A;y(S,N)&&(M.leaf?O.push(A):v(S,N)?this._all(A,O):P.push(A))}M=P.pop()}return O},a.prototype.collides=function(S){var M=this.data;if(!y(S,M))return!1;for(var O=[];M;){for(var E=0;E<M.children.length;E++){var P=M.children[E],k=M.leaf?this.toBBox(P):P;if(y(S,k)){if(M.leaf||v(S,k))return!0;O.push(P)}}M=O.pop()}return!1},a.prototype.load=function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var M=0;M<S.length;M++)this.insert(S[M]);return this}var O=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=O;else if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var E=this.data;this.data=O,O=E}this._insert(O,this.data.height-O.height-1,!0)}return this},a.prototype.insert=function(S){return S&&this._insert(S,this.data.height-1),this},a.prototype.clear=function(){return this.data=x([]),this},a.prototype.remove=function(S,M){if(!S)return this;for(var O=this.data,E=this.toBBox(S),P=[],k=[],A,N,L;O||P.length;){if(O||(O=P.pop(),N=P[P.length-1],A=k.pop(),L=!0),O.leaf){var z=s(S,O.children,M);if(z!==-1)return O.children.splice(z,1),P.push(O),this._condense(P),this}!L&&!O.leaf&&v(O,E)?(P.push(O),k.push(A),A=0,N=O,O=O.children[0]):N?(A++,O=N.children[A],L=!1):O=null}return this},a.prototype.toBBox=function(S){return S},a.prototype.compareMinX=function(S,M){return S.minX-M.minX},a.prototype.compareMinY=function(S,M){return S.minY-M.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(S){return this.data=S,this},a.prototype._all=function(S,M){for(var O=[];S;)S.leaf?M.push.apply(M,S.children):O.push.apply(O,S.children),S=O.pop();return M},a.prototype._build=function(S,M,O,E){var P=O-M+1,k=this._maxEntries,A;if(P<=k)return A=x(S.slice(M,O+1)),l(A,this.toBBox),A;E||(E=Math.ceil(Math.log(P)/Math.log(k)),k=Math.ceil(P/Math.pow(k,E-1))),A=x([]),A.leaf=!1,A.height=E;var N=Math.ceil(P/k),L=N*Math.ceil(Math.sqrt(k));_(S,M,O,L,this.compareMinX);for(var z=M;z<=O;z+=L){var B=Math.min(z+L-1,O);_(S,z,B,N,this.compareMinY);for(var H=z;H<=B;H+=N){var j=Math.min(H+N-1,B);A.children.push(this._build(S,H,j,E-1))}}return l(A,this.toBBox),A},a.prototype._chooseSubtree=function(S,M,O,E){for(;E.push(M),!(M.leaf||E.length-1===O);){for(var P=1/0,k=1/0,A=void 0,N=0;N<M.children.length;N++){var L=M.children[N],z=d(L),B=m(S,L)-z;B<k?(k=B,P=z<P?z:P,A=L):B===k&&z<P&&(P=z,A=L)}M=A||M.children[0]}return M},a.prototype._insert=function(S,M,O){var E=O?S:this.toBBox(S),P=[],k=this._chooseSubtree(E,this.data,M,P);for(k.children.push(S),u(k,E);M>=0&&P[M].children.length>this._maxEntries;)this._split(P,M),M--;this._adjustParentBBoxes(E,P,M)},a.prototype._split=function(S,M){var O=S[M],E=O.children.length,P=this._minEntries;this._chooseSplitAxis(O,P,E);var k=this._chooseSplitIndex(O,P,E),A=x(O.children.splice(k,O.children.length-k));A.height=O.height,A.leaf=O.leaf,l(O,this.toBBox),l(A,this.toBBox),M?S[M-1].children.push(A):this._splitRoot(O,A)},a.prototype._splitRoot=function(S,M){this.data=x([S,M]),this.data.height=S.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(S,M,O){for(var E,P=1/0,k=1/0,A=M;A<=O-M;A++){var N=c(S,0,A,this.toBBox),L=c(S,A,O,this.toBBox),z=g(N,L),B=d(N)+d(L);z<P?(P=z,E=A,k=B<k?B:k):z===P&&B<k&&(k=B,E=A)}return E||O-M},a.prototype._chooseSplitAxis=function(S,M,O){var E=S.leaf?this.compareMinX:f,P=S.leaf?this.compareMinY:p,k=this._allDistMargin(S,M,O,E),A=this._allDistMargin(S,M,O,P);k<A&&S.children.sort(E)},a.prototype._allDistMargin=function(S,M,O,E){S.children.sort(E);for(var P=this.toBBox,k=c(S,0,M,P),A=c(S,O-M,O,P),N=h(k)+h(A),L=M;L<O-M;L++){var z=S.children[L];u(k,S.leaf?P(z):z),N+=h(k)}for(var B=O-M-1;B>=M;B--){var H=S.children[B];u(A,S.leaf?P(H):H),N+=h(A)}return N},a.prototype._adjustParentBBoxes=function(S,M,O){for(var E=O;E>=0;E--)u(M[E],S)},a.prototype._condense=function(S){for(var M=S.length-1,O=void 0;M>=0;M--)S[M].children.length===0?M>0?(O=S[M-1].children,O.splice(O.indexOf(S[M]),1)):this.clear():l(S[M],this.toBBox)};function s(w,S,M){if(!M)return S.indexOf(w);for(var O=0;O<S.length;O++)if(M(w,S[O]))return O;return-1}function l(w,S){c(w,0,w.children.length,S,w)}function c(w,S,M,O,E){E||(E=x(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var P=S;P<M;P++){var k=w.children[P];u(E,w.leaf?O(k):k)}return E}function u(w,S){return w.minX=Math.min(w.minX,S.minX),w.minY=Math.min(w.minY,S.minY),w.maxX=Math.max(w.maxX,S.maxX),w.maxY=Math.max(w.maxY,S.maxY),w}function f(w,S){return w.minX-S.minX}function p(w,S){return w.minY-S.minY}function d(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function h(w){return w.maxX-w.minX+(w.maxY-w.minY)}function m(w,S){return(Math.max(S.maxX,w.maxX)-Math.min(S.minX,w.minX))*(Math.max(S.maxY,w.maxY)-Math.min(S.minY,w.minY))}function g(w,S){var M=Math.max(w.minX,S.minX),O=Math.max(w.minY,S.minY),E=Math.min(w.maxX,S.maxX),P=Math.min(w.maxY,S.maxY);return Math.max(0,E-M)*Math.max(0,P-O)}function v(w,S){return w.minX<=S.minX&&w.minY<=S.minY&&S.maxX<=w.maxX&&S.maxY<=w.maxY}function y(w,S){return S.minX<=w.maxX&&S.minY<=w.maxY&&S.maxX>=w.minX&&S.maxY>=w.minY}function x(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(w,S,M,O,E){for(var P=[S,M];P.length;)if(M=P.pop(),S=P.pop(),!(M-S<=O)){var k=S+Math.ceil((M-S)/O/2)*O;n(w,k,S,M,E),P.push(S,k,k,M)}}return a})})(aF);var hse=aF.exports,Ge=function(e){return e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh",e}(Ge||{}),o2=function(e){return e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE",e}(o2||{}),ua=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),sF=function(){function e(t){this.clipSpaceNearZ=o2.NEGATIVE_ONE,this.plugins=[],this.config=Te({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function V0(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ik(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function E_(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function PR(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function mse(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function gse(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function uh(e){return e===void 0?0:e>360||e<-360?e%360:e}function ca(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?Ne.clone(e):Dn(e)?Ne.fromValues(e,t,n):Ne.fromValues(e[0],e[1]||t,e[2]||n)}function Pr(e){return e*(Math.PI/180)}function Nl(e){return e*(180/Math.PI)}function vse(e){return 360*e}function yse(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n,s=r*r,l=i*i,c=o*o,u=a+s+l+c,f=n*o-r*i;return f>.499995*u?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):f<-.499995*u?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-o*r)),e[1]=Math.atan2(2*(n*o+r*i),1-2*(l+c)),e[2]=Math.atan2(2*(n*r+i*o),1-2*(s+l))),e}function xse(e,t){var n,r,i=Math.PI*.5,o=G(Qe.getScaling(Ne.create(),t),3),a=o[0],s=o[1],l=o[2],c=Math.asin(-t[2]/a);return c<i?c>-i?(n=Math.atan2(t[6]/s,t[10]/l),r=Math.atan2(t[1]/a,t[0]/a)):(r=0,n=-Math.atan2(t[4]/s,t[5]/s)):(r=0,n=Math.atan2(t[4]/s,t[5]/s)),e[0]=n,e[1]=c,e[2]=r,e}function Dk(e,t){return t.length===16?xse(e,t):yse(e,t)}function bse(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e);return Nd.fromValues(r*o,i*a,0,-r*a,i*o,0,t,n,1)}function _se(e,t,n,r,i,o,a,s){s===void 0&&(s=!1);var l=2*o/(n-t),c=2*o/(r-i),u=(n+t)/(n-t),f=(r+i)/(r-i),p,d;return s?(p=-a/(a-o),d=-a*o/(a-o)):(p=-(a+o)/(a-o),d=-2*a*o/(a-o)),e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=u,e[9]=f,e[10]=p,e[11]=-1,e[12]=0,e[13]=0,e[14]=d,e[15]=0,e}function NR(e){var t=e[0],n=e[1],r=e[3],i=e[4],o=Math.sqrt(t*t+n*n),a=Math.sqrt(r*r+i*i),s=t*i-n*r;s<0&&(t<i?o=-o:a=-a),o&&(t*=1/o,n*=1/o),a&&(r*=1/a,i*=1/a);var l=Math.atan2(n,t),c=Nl(l);return[e[6],e[7],o,a,c]}var ru=Qe.create(),vc=Qe.create(),n2=ti.create(),_n=[Ne.create(),Ne.create(),Ne.create()],LR=Ne.create();function wse(e,t,n,r,i,o){if(!Sse(ru,e)||(Qe.copy(vc,ru),vc[3]=0,vc[7]=0,vc[11]=0,vc[15]=1,Math.abs(Qe.determinant(vc))<1e-8))return!1;var a=ru[3],s=ru[7],l=ru[11],c=ru[12],u=ru[13],f=ru[14],p=ru[15];if(a!==0||s!==0||l!==0){n2[0]=a,n2[1]=s,n2[2]=l,n2[3]=p;var d=Qe.invert(vc,vc);if(!d)return!1;Qe.transpose(vc,vc),ti.transformMat4(i,n2,vc)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=c,t[1]=u,t[2]=f,Cse(_n,ru),n[0]=Ne.length(_n[0]),Ne.normalize(_n[0],_n[0]),r[0]=Ne.dot(_n[0],_n[1]),zk(_n[1],_n[1],_n[0],1,-r[0]),n[1]=Ne.length(_n[1]),Ne.normalize(_n[1],_n[1]),r[0]/=n[1],r[1]=Ne.dot(_n[0],_n[2]),zk(_n[2],_n[2],_n[0],1,-r[1]),r[2]=Ne.dot(_n[1],_n[2]),zk(_n[2],_n[2],_n[1],1,-r[2]),n[2]=Ne.length(_n[2]),Ne.normalize(_n[2],_n[2]),r[1]/=n[2],r[2]/=n[2],Ne.cross(LR,_n[1],_n[2]),Ne.dot(_n[0],LR)<0)for(var h=0;h<3;h++)n[h]*=-1,_n[h][0]*=-1,_n[h][1]*=-1,_n[h][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+_n[0][0]-_n[1][1]-_n[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-_n[0][0]+_n[1][1]-_n[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-_n[0][0]-_n[1][1]+_n[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+_n[0][0]+_n[1][1]+_n[2][2],0)),_n[2][1]>_n[1][2]&&(o[0]=-o[0]),_n[0][2]>_n[2][0]&&(o[1]=-o[1]),_n[1][0]>_n[0][1]&&(o[2]=-o[2]),!0}function Sse(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function Cse(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function zk(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var vi=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){V0(this.center,t),V0(this.halfExtents,n),Ik(this.min,this.center,this.halfExtents),E_(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){E_(this.center,n,t),PR(this.center,this.center,.5),Ik(this.halfExtents,n,t),PR(this.halfExtents,this.halfExtents,.5),V0(this.min,t),V0(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],o=n[2],a=this.halfExtents,s=a[0],l=a[1],c=a[2],u=r-s,f=r+s,p=i-l,d=i+l,h=o-c,m=o+c,g=t.center,v=g[0],y=g[1],x=g[2],_=t.halfExtents,w=_[0],S=_[1],M=_[2],O=v-w,E=v+w,P=y-S,k=y+S,A=x-M,N=x+M;O<u&&(u=O),E>f&&(f=E),P<p&&(p=P),k>d&&(d=k),A<h&&(h=A),N>m&&(m=N),n[0]=(u+f)*.5,n[1]=(p+d)*.5,n[2]=(h+m)*.5,a[0]=(f-u)*.5,a[1]=(d-p)*.5,a[2]=(m-h)*.5,this.min[0]=u,this.min[1]=p,this.min[2]=h,this.max[0]=f,this.max[1]=d,this.max[2]=m}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,o=t.center,a=t.halfExtents,s=n[0],l=n[4],c=n[8],u=n[1],f=n[5],p=n[9],d=n[2],h=n[6],m=n[10],g=Math.abs(s),v=Math.abs(l),y=Math.abs(c),x=Math.abs(u),_=Math.abs(f),w=Math.abs(p),S=Math.abs(d),M=Math.abs(h),O=Math.abs(m);r[0]=n[12]+s*o[0]+l*o[1]+c*o[2],r[1]=n[13]+u*o[0]+f*o[1]+p*o[2],r[2]=n[14]+d*o[0]+h*o[1]+m*o[2],i[0]=g*a[0]+v*a[1]+y*a[2],i[1]=x*a[0]+_*a[1]+w*a[2],i[2]=S*a[0]+M*a[1]+O*a[2],Ik(this.min,r,i),E_(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),o=t.getMin();return r[0]<=i[0]&&n[0]>=o[0]&&r[1]<=i[1]&&n[1]>=o[1]&&r[2]<=i[2]&&n[2]>=o[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=mse([0,0,0],this.getMin(),t.getMin()),i=gse([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?V0([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?V0([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),Ose=function(){function e(t,n){this.distance=t||0,this.normal=n||Ne.fromValues(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return Ne.dot(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/Ne.len(this.normal);Ne.scale(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),o=this.distanceToPoint(n),a=i/(i-o),s=a>=0&&a<=1;return s&&r&&Ne.lerp(r,t,n,a),s},e}(),ch=function(e){return e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE",e}(ch||{}),Mse=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new Ose)}return e.prototype.extractFromVPMatrix=function(t){var n=G(t,16),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],p=n[9],d=n[10],h=n[11],m=n[12],g=n[13],v=n[14],y=n[15];Ne.set(this.planes[0].normal,a-r,u-s,h-f),this.planes[0].distance=y-m,Ne.set(this.planes[1].normal,a+r,u+s,h+f),this.planes[1].distance=y+m,Ne.set(this.planes[2].normal,a+i,u+l,h+p),this.planes[2].distance=y+g,Ne.set(this.planes[3].normal,a-i,u-l,h-p),this.planes[3].distance=y-g,Ne.set(this.planes[4].normal,a-o,u-c,h-d),this.planes[4].distance=y-v,Ne.set(this.planes[5].normal,a+o,u+c,h+d),this.planes[5].distance=y+v,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})},e}(),So=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),U0=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.applyTransform=function(t,n){var r=ti.fromValues(t.x,t.y,0,1),i=ti.fromValues(t.x+t.width,t.y,0,1),o=ti.fromValues(t.x,t.y+t.height,0,1),a=ti.fromValues(t.x+t.width,t.y+t.height,0,1),s=ti.create(),l=ti.create(),c=ti.create(),u=ti.create();ti.transformMat4(s,r,n),ti.transformMat4(l,i,n),ti.transformMat4(c,o,n),ti.transformMat4(u,a,n);var f=Math.min(s[0],l[0],c[0],u[0]),p=Math.min(s[1],l[1],c[1],u[1]),d=Math.max(s[0],l[0],c[0],u[0]),h=Math.max(s[1],l[1],c[1],u[1]);return e.fromRect({x:f,y:p,width:d-f,height:h-p})},e.prototype.toJSON=function(){},e}(),Tr="Method not implemented.",H0="Use document.documentElement instead.",kse="Cannot append a destroyed element.",Or=function(e){return e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING",e}(Or||{}),A_=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC",e}(A_||{}),Ys=function(e){return e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE",e}(Ys||{}),lF={UPDATED:"updated"},IR=2e-4,nE=function(){function e(){this.clipSpaceNearZ=o2.NEGATIVE_ONE,this.eventEmitter=new b_,this.matrix=Qe.create(),this.right=Ne.fromValues(1,0,0),this.up=Ne.fromValues(0,1,0),this.forward=Ne.fromValues(0,0,1),this.position=Ne.fromValues(0,0,1),this.focalPoint=Ne.fromValues(0,0,0),this.distanceVector=Ne.fromValues(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Qe.create(),this.projectionMatrixInverse=Qe.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Or.EXPLORING,this.trackingMode=A_.DEFAULT,this.projectionMode=Ys.PERSPECTIVE,this.frustum=new Mse,this.orthoMatrix=Qe.create()}return e.prototype.isOrtho=function(){return this.projectionMode===Ys.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===Or.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Or.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==Or.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return Qe.invert(Qe.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=Qe.fromTranslation(Qe.create(),[t,n,0]);this.jitteredProjectionMatrix=Qe.multiply(Qe.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setProjectionMatrix=function(t){this.projectionMatrix=t},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===Ys.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===Ys.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,o,a){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.projectionMode===Ys.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Ys.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===Ys.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Ys.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,o=r.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(i,o),this.setFocalPoint(i,o),this.setZoom(t),this.rotate(0,0,a);var s=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),l=s.x,c=s.y,u=Ne.fromValues(l-i,c-o,0),f=Ne.dot(u,this.right)/Ne.length(this.right),p=Ne.dot(u,this.up)/Ne.length(this.up),d=G(this.getPosition(),2),h=d[0],m=d[1],g=G(this.getFocalPoint(),2),v=g[0],y=g[1];return this.setPosition(h-f,m-p),this.setFocalPoint(v-f,y-p),this},e.prototype.setPerspective=function(t,n,r,i){var o;this.projectionMode=Ys.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var a=this.near*Math.tan(Pr(.5*this.fov))/this.zoom,s=2*a,l=this.aspect*s,c=-.5*l;if(!((o=this.view)===null||o===void 0)&&o.enabled){var u=this.view.fullWidth,f=this.view.fullHeight;c+=this.view.offsetX*l/u,a-=this.view.offsetY*s/f,l*=this.view.width/u,s*=this.view.height/f}return _se(this.projectionMatrix,c,c+l,a-s,a,t,this.far,this.clipSpaceNearZ===o2.ZERO),Qe.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,o,a){var s;this.projectionMode=Ys.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=o,this.far=a;var l=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,p=u-l,d=u+l,h=f+c,m=f-c;if(!((s=this.view)===null||s===void 0)&&s.enabled){var g=(this.rright-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;p+=g*this.view.offsetX,d=p+g*this.view.width,h-=v*this.view.offsetY,m=h-v*this.view.height}return this.clipSpaceNearZ===o2.NEGATIVE_ONE?Qe.ortho(this.projectionMatrix,p,d,h,m,o,a):Qe.orthoZO(this.projectionMatrix,p,d,h,m,o,a),Qe.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=ca(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=Ne.fromValues(0,1,0);if(this.focalPoint=ca(t,n,r),this.trackingMode===A_.CINEMATIC){var o=Ne.subtract(Ne.create(),this.focalPoint,this.position);t=o[0],n=o[1],r=o[2];var a=Ne.length(o),s=Nl(Math.asin(n/a)),l=90+Nl(Math.atan2(r,t)),c=Qe.create();Qe.rotateY(c,c,Pr(l)),Qe.rotateX(c,c,Pr(s)),i=Ne.transformMat4(Ne.create(),[0,1,0],c)}return Qe.invert(this.matrix,Qe.lookAt(Qe.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<IR&&(this.distance=IR),this.dollyingStep=this.distance/100;var n=Ne.create();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=uh(t),this.computeMatrix(),this._getAxes(),this.type===Or.ORBITING||this.type===Or.EXPLORING?this._getPosition():this.type===Or.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=uh(t),this.computeMatrix(),this._getAxes(),this.type===Or.ORBITING||this.type===Or.EXPLORING?this._getPosition():this.type===Or.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=uh(t),this.computeMatrix(),this._getAxes(),this.type===Or.ORBITING||this.type===Or.EXPLORING?this._getPosition():this.type===Or.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=hn.setAxisAngle(hn.create(),[0,0,1],Pr(this.roll));Qe.identity(this.matrix);var n=hn.setAxisAngle(hn.create(),[1,0,0],Pr((this.rotateWorld&&this.type!==Or.TRACKING||this.type===Or.TRACKING?1:-1)*this.elevation)),r=hn.setAxisAngle(hn.create(),[0,1,0],Pr((this.rotateWorld&&this.type!==Or.TRACKING||this.type===Or.TRACKING?1:-1)*this.azimuth)),i=hn.multiply(hn.create(),r,n);i=hn.multiply(hn.create(),i,t);var o=Qe.fromQuat(Qe.create(),i);this.type===Or.ORBITING||this.type===Or.EXPLORING?(Qe.translate(this.matrix,this.matrix,this.focalPoint),Qe.multiply(this.matrix,this.matrix,o),Qe.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Or.TRACKING&&(Qe.translate(this.matrix,this.matrix,this.position),Qe.multiply(this.matrix,this.matrix,o))},e.prototype._setPosition=function(t,n,r){this.position=ca(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){Ne.copy(this.right,ca(ti.transformMat4(ti.create(),[1,0,0,0],this.matrix))),Ne.copy(this.up,ca(ti.transformMat4(ti.create(),[0,1,0,0],this.matrix))),Ne.copy(this.forward,ca(ti.transformMat4(ti.create(),[0,0,1,0],this.matrix))),Ne.normalize(this.right,this.right),Ne.normalize(this.up,this.up),Ne.normalize(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=Ne.length(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Or.TRACKING?(this.elevation=Nl(Math.asin(n/i)),this.azimuth=Nl(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=Nl(Math.asin(n/i)),this.azimuth=Nl(Math.atan2(-t,-r))):(this.elevation=-Nl(Math.asin(n/i)),this.azimuth=-Nl(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){Ne.copy(this.position,ca(ti.transformMat4(ti.create(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){Ne.transformMat3(this.distanceVector,[0,0,-this.distance],Nd.fromMat4(Nd.create(),this.matrix)),Ne.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=Ne.subtract(Ne.create(),this.focalPoint,this.position),this.distance=Ne.length(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===Ys.ORTHOGRAPHIC){var t=this.position,n=hn.setAxisAngle(hn.create(),[0,0,1],-this.roll*Math.PI/180);Qe.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,Ne.fromValues((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),Ne.fromValues(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=Qe.multiply(Qe.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(lF.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(Tr)},e.prototype.pan=function(t,n){throw new Error(Tr)},e.prototype.dolly=function(t){throw new Error(Tr)},e.prototype.createLandmark=function(t,n){throw new Error(Tr)},e.prototype.gotoLandmark=function(t,n){throw new Error(Tr)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(Tr)},e}();function qo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(qo.Cache||Map),n}qo.Cache=Map;var xt=function(e){return e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger",e}(xt||{}),Ll=function(e){return e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther",e}(Ll||{});var cF=function(e){return e[e.kYes=0]="kYes",e[e.kNo=1]="kNo",e}(cF||{}),uF=function(e){return e[e.kYes=0]="kYes",e[e.kNo=1]="kNo",e}(uF||{}),Ese=[{name:"em",unit_type:xt.kEms},{name:"px",unit_type:xt.kPixels},{name:"deg",unit_type:xt.kDegrees},{name:"rad",unit_type:xt.kRadians},{name:"grad",unit_type:xt.kGradians},{name:"ms",unit_type:xt.kMilliseconds},{name:"s",unit_type:xt.kSeconds},{name:"rem",unit_type:xt.kRems},{name:"turn",unit_type:xt.kTurns}],fh=function(e){return e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType",e}(fh||{}),Ase=function(e){return Ese.find(function(t){return t.name===e}).unit_type},Tse=function(e){return e?e==="number"?xt.kNumber:e==="percent"||e==="%"?xt.kPercentage:Ase(e):xt.kUnknown},Pse=function(e){switch(e){case xt.kNumber:case xt.kInteger:return Ll.kUNumber;case xt.kPercentage:return Ll.kUPercent;case xt.kPixels:return Ll.kULength;case xt.kMilliseconds:case xt.kSeconds:return Ll.kUTime;case xt.kDegrees:case xt.kRadians:case xt.kGradians:case xt.kTurns:return Ll.kUAngle;default:return Ll.kUOther}},Nse=function(e){switch(e){case Ll.kUNumber:return xt.kNumber;case Ll.kULength:return xt.kPixels;case Ll.kUPercent:return xt.kPercentage;case Ll.kUTime:return xt.kSeconds;case Ll.kUAngle:return xt.kDegrees;default:return xt.kUnknown}},DR=function(e){var t=1;switch(e){case xt.kPixels:case xt.kDegrees:case xt.kSeconds:break;case xt.kMilliseconds:t=.001;break;case xt.kRadians:t=180/Math.PI;break;case xt.kGradians:t=.9;break;case xt.kTurns:t=360;break}return t},Gk=function(e){switch(e){case xt.kNumber:case xt.kInteger:return"";case xt.kPercentage:return"%";case xt.kEms:return"em";case xt.kRems:return"rem";case xt.kPixels:return"px";case xt.kDegrees:return"deg";case xt.kRadians:return"rad";case xt.kGradians:return"grad";case xt.kMilliseconds:return"ms";case xt.kSeconds:return"s";case xt.kTurns:return"turn"}return""},D_=function(){function e(){}return e.isAngle=function(t){return t===xt.kDegrees||t===xt.kRadians||t===xt.kGradians||t===xt.kTurns},e.isLength=function(t){return t>=xt.kEms&&t<xt.kDegrees},e.isRelativeUnit=function(t){return t===xt.kPercentage||t===xt.kEms||t===xt.kRems},e.isTime=function(t){return t===xt.kSeconds||t===xt.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(cF.kNo,uF.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=fh.kUnitType&&this.getType()<=fh.kClampType},e}(),Lse=function(e){ut(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return fh.kColorType},t.prototype.to=function(n){return this},t}(D_),yc=function(e){return e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient",e}(yc||{}),O_=function(e){ut(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return fh.kColorType},t}(D_),vs=function(e){ut(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return fh.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(D_),Ise=qo(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),zR=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function Dse(e){if(!e)throw new Error}function q0(e){return typeof e=="function"}function zse(e){return typeof e=="symbol"}var Rse={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},$k=qo(function(e){var t=Ise(e),n=Rse[t];return t=n?.alias||t,t}),Fse=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(Dse(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},Yk=function(e){return Nse(Pse(e))},Fr=function(e){ut(t,e);function t(n,r){r===void 0&&(r=xt.kNumber);var i=e.call(this)||this,o;return typeof r=="string"?o=Tse(r):o=r,i.unit=o,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return fh.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=Yk(this.unit);if(r!==Yk(n)||r===xt.kUnknown)return null;var i=DR(this.unit)/DR(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var o;switch(this.unit){case xt.kUnknown:break;case xt.kInteger:o=Number(this.value).toFixed(0);break;case xt.kNumber:case xt.kPercentage:case xt.kEms:case xt.kRems:case xt.kPixels:case xt.kDegrees:case xt.kRadians:case xt.kGradians:case xt.kMilliseconds:case xt.kSeconds:case xt.kTurns:{var a=-999999,s=999999,l=this.value,c=Gk(this.unit);if(l<a||l>s){var u=Gk(this.unit);!Number.isFinite(l)||Number.isNaN(l)?o=Fse(l,u):o=l+(u||"")}else o="".concat(l).concat(c)}}return i+=o,i},t}(D_),Oi=new Fr(0,"px");new Fr(1,"px");var Il=new Fr(0,"deg"),rE=function(e){ut(t,e);function t(n,r,i,o,a){o===void 0&&(o=1),a===void 0&&(a=!1);var s=e.call(this,"rgb")||this;return s.r=n,s.g=r,s.b=i,s.alpha=o,s.isNone=a,s}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(Lse),ri=new vs("unset"),Bse=new vs("initial"),jse=new vs("inherit"),Rk={"":ri,unset:ri,initial:Bse,inherit:jse},Xk=function(e){return Rk[e]||(Rk[e]=new vs(e)),Rk[e]},T_=new rE(0,0,0,0,!0),fF=new rE(0,0,0,0),Vse=qo(function(e,t,n,r){return new rE(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),Ur=function(e,t){return t===void 0&&(t=xt.kNumber),new Fr(e,t)};new Fr(50,"%");var pF=function(e){return e[e.Standard=0]="Standard",e}(pF||{}),a2=function(e){return e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",e}(a2||{}),dF={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new U0(0,0,0,0)},wt=function(e){return e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>",e}(wt||{});function Hse(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var Wse=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(H){throw new Error(t+": "+H)}function r(){var H=i();return t.length>0&&n("Invalid input not EOF"),H}function i(){return x(o)}function o(){return a("linear-gradient",e.linearGradient,l)||a("repeating-linear-gradient",e.repeatingLinearGradient,l)||a("radial-gradient",e.radialGradient,f)||a("repeating-radial-gradient",e.repeatingRadialGradient,f)||a("conic-gradient",e.conicGradient,f)}function a(H,j,W){return s(j,function(Z){var ie=W();return ie&&(z(e.comma)||n("Missing comma before color stops")),{type:H,orientation:ie,colorStops:x(_)}})}function s(H,j){var W=z(H);if(W){z(e.startCall)||n("Missing (");var Z=j(W);return z(e.endCall)||n("Missing )"),Z}}function l(){return c()||u()}function c(){return L("directional",e.sideOrCorner,1)}function u(){return L("angular",e.angleValue,1)}function f(){var H,j=p(),W;return j&&(H=[],H.push(j),W=t,z(e.comma)&&(j=p(),j?H.push(j):t=W)),H}function p(){var H=d()||h();if(H)H.at=g();else{var j=m();if(j){H=j;var W=g();W&&(H.at=W)}else{var Z=v();Z&&(H={type:"default-radial",at:Z})}}return H}function d(){var H=L("shape",/^(circle)/i,0);return H&&(H.style=N()||m()),H}function h(){var H=L("shape",/^(ellipse)/i,0);return H&&(H.style=k()||m()),H}function m(){return L("extent-keyword",e.extentKeywords,1)}function g(){if(L("position",/^at/,0)){var H=v();return H||n("Missing positioning value"),H}}function v(){var H=y();if(H.x||H.y)return{type:"position",value:H}}function y(){return{x:k(),y:k()}}function x(H){var j=H(),W=[];if(j)for(W.push(j);z(e.comma);)j=H(),j?W.push(j):n("One extra comma");return W}function _(){var H=w();return H||n("Expected color definition"),H.length=k(),H}function w(){return M()||E()||O()||S()}function S(){return L("literal",e.literalColor,0)}function M(){return L("hex",e.hexColor,1)}function O(){return s(e.rgbColor,function(){return{type:"rgb",value:x(P)}})}function E(){return s(e.rgbaColor,function(){return{type:"rgba",value:x(P)}})}function P(){return z(e.number)[1]}function k(){return L("%",e.percentageValue,1)||A()||N()}function A(){return L("position-keyword",e.positionKeywords,1)}function N(){return L("px",e.pixelValue,1)||L("em",e.emValue,1)}function L(H,j,W){var Z=z(j);if(Z)return{type:H,value:Z[W]}}function z(H){var j=/^[\n\r\t\s]+/.exec(t);j&&B(j[0].length);var W=H.exec(t);return W&&B(W[0].length),W}function B(H){t=t.substring(H)}return function(H){return t=H,r()}}();function hF(e,t,n,r){var i=Pr(r.value),o=0,a=0,s=o+t/2,l=a+n/2,c=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i)),u=e[0]+s-Math.cos(i)*c/2,f=e[1]+l-Math.sin(i)*c/2,p=e[0]+s+Math.cos(i)*c/2,d=e[1]+l+Math.sin(i)*c/2;return{x1:u,y1:f,x2:p,y2:d}}function mF(e,t,n,r,i,o){var a=r.value,s=i.value;r.unit===xt.kPercentage&&(a=r.value/100*t),i.unit===xt.kPercentage&&(s=i.value/100*n);var l=Math.max(Si([0,0],[a,s]),Si([0,n],[a,s]),Si([t,n],[a,s]),Si([t,0],[a,s]));return o&&(o instanceof Fr?l=o.value:o instanceof vs&&(o.value==="closest-side"?l=Math.min(a,t-a,s,n-s):o.value==="farthest-side"?l=Math.max(a,t-a,s,n-s):o.value==="closest-corner"&&(l=Math.min(Si([0,0],[a,s]),Si([0,n],[a,s]),Si([t,n],[a,s]),Si([t,0],[a,s]))))),{x:a+e[0],y:s+e[1],r:l}}var qse=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Use=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Gse=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,gF=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function $se(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var o=0,a=Number(e[0].length.value),s=1;s<i;s++){var l=(r=e[s].length)===null||r===void 0?void 0:r.value;if(!on(l)&&!on(a)){for(var c=1;c<s-o;c++)e[o+c].length={type:"%",value:"".concat(a+(Number(l)-a)*c/(s-o))};o=s,a=Number(l)}}}var Yse={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},Xse=qo(function(e){var t;return e.type==="angular"?t=Number(e.value):t=Yse[e.value]||0,Ur(t,"deg")}),Kse=qo(function(e){var t=50,n=50,r="%",i="%";if(e?.type==="position"){var o=e.value,a=o.x,s=o.y;a?.type==="position-keyword"&&(a.value==="left"?t=0:a.value==="center"?t=50:a.value==="right"?t=100:a.value==="top"?n=0:a.value==="bottom"&&(n=100)),s?.type==="position-keyword"&&(s.value==="left"?t=0:s.value==="center"?n=50:s.value==="right"?t=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),(a?.type==="px"||a?.type==="%"||a?.type==="em")&&(r=a?.type,t=Number(a.value)),(s?.type==="px"||s?.type==="%"||s?.type==="em")&&(i=s?.type,n=Number(s.value))}return{cx:Ur(t,r),cy:Ur(n,i)}}),Zse=qo(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=Wse(e);return n.map(function(s){var l=s.type,c=s.orientation,u=s.colorStops;$se(u);var f=u.map(function(x){return{offset:Ur(Number(x.length.value),"%"),color:Hse(x)}});if(l==="linear-gradient")return new O_(yc.LinearGradient,{angle:c?Xse(c):Il,steps:f});if(l==="radial-gradient"&&(c||(c=[{type:"shape",value:"circle"}]),c[0].type==="shape"&&c[0].value==="circle")){var p=Kse(c[0].at),d=p.cx,h=p.cy,m=void 0;if(c[0].style){var g=c[0].style,v=g.type,y=g.value;v==="extent-keyword"?m=Xk(y):m=Ur(y,v)}return new O_(yc.RadialGradient,{cx:d,cy:h,size:m,steps:f})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=qse.exec(e);if(i){var o=((t=i[2].match(gF))===null||t===void 0?void 0:t.map(function(s){return s.split(":")}))||[];return[new O_(yc.LinearGradient,{angle:Ur(parseFloat(i[1]),"deg"),steps:o.map(function(s){var l=G(s,2),c=l[0],u=l[1];return{offset:Ur(Number(c)*100,"%"),color:u}})})]}}else if(r==="r"){var a=Jse(e);if(a)if(rr(a))e=a;else return[new O_(yc.RadialGradient,a)]}else if(r==="p")return Qse(e)}});function Jse(e){var t,n=Use.exec(e);if(n){var r=((t=n[4].match(gF))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:Ur(50,"%"),cy:Ur(50,"%"),steps:r.map(function(i){var o=G(i,2),a=o[0],s=o[1];return{offset:Ur(Number(a)*100,"%"),color:s}})}}return null}function Qse(e){var t=Gse.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function dh(e){return e&&!!e.image}function s2(e){return e&&!on(e.r)&&!on(e.g)&&!on(e.b)}var Dl=qo(function(e){if(dh(e))return Te({repetition:"repeat"},e);if(on(e)&&(e=""),e==="transparent")return fF;if(e==="currentColor")e="black";else if(e==="none")return T_;var t=Zse(e);if(t)return t;var n=oh(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),Vse.apply(void 0,qe([],G(r),!1))});function ele(e,t){if(!(!s2(e)||!s2(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(hr(r[i],0,255));return r[3]=hr(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function c2(e,t){if(on(t))return Ur(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return Ur(Number(t),"px");if("deg".search(e)>=0)return Ur(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return Ur(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var vF=function(e){return c2(new RegExp("px","g"),e)},tle=qo(vF),nle=function(e){return c2(new RegExp("%","g"),e)};qo(nle);var l2=function(e){return Dn(e)||isFinite(Number(e))?Ur(Number(e)||0,"px"):c2(new RegExp("px|%|em|rem","g"),e)},G0=qo(l2),iE=function(e){return c2(new RegExp("deg|rad|grad|turn","g"),e)},yF=qo(iE);function rle(e,t,n,r,i){i===void 0&&(i=0);var o="",a=e.value||0,s=t.value||0,l=Yk(e.unit),c=e.convertTo(l),u=t.convertTo(l);return c&&u?(a=c.value,s=u.value,o=Gk(e.unit)):(Fr.isLength(e.unit)||Fr.isLength(t.unit))&&(a=Xs(e,i,n),s=Xs(t,i,n),o="px"),[a,s,function(f){return r&&(f=Math.max(f,0)),f+o}]}function gs(e){var t=0;return e.unit===xt.kDegrees?t=e.value:e.unit===xt.kRadians?t=Nl(Number(e.value)):e.unit===xt.kTurns&&(t=vse(Number(e.value))),t}function RR(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):rr(e)?n=e.split(" ").map(function(r){return Number(r)}):Dn(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function xF(e){return rr(e)?e.split(" ").map(function(t){return G0(t)}):e.map(function(t){return G0(t.toString())})}function Xs(e,t,n,r){if(r===void 0&&(r=!1),e.unit===xt.kPixels)return Number(e.value);if(e.unit===xt.kPercentage&&n){var i=n.nodeName===Ge.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var ile=function(e){return c2(/deg|rad|grad|turn|px|%/g,e)},ole=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function bF(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,ole.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(o){return ile(o)||Dl(o)})}),t.lastIndex===e.length)return n}return[]}function _F(e){return e.toString()}var $0=function(e){return typeof e=="number"?Ur(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?Ur(Number(e)):Ur(0)},ph=qo($0);qo(function(e){return rr(e)?e.split(" ").map(ph):e.map(ph)});function oE(e,t){return[e,t,_F]}function aE(e,t){return function(n,r){return[n,r,function(i){return _F(hr(i,e,t))}]}}function wF(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function P_(e){return e.parsedStyle.d.totalLength===0&&(e.parsedStyle.d.totalLength=N6(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength}function ale(e){return e.parsedStyle.points.totalLength===0&&(e.parsedStyle.points.totalLength=ER(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function sle(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var o=n[0],a=[r[1],r[2]],s=void 0;o==="L"||o==="M"?s=[n[1],n[2]]:(o==="C"||o==="A"||o==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&N_(a,s)&&(e.splice(t,1),t--)}}}function lle(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],o=i[0];if(o==="C"||o==="A"||o==="Q"){t=!0;break}}return t}function cle(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var o=e[i],a=o[0];a==="M"?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):a==="Z"?r.length&&(t.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function N_(e,t){return e[0]===t[0]&&e[1]===t[1]}function ule(e,t){for(var n=[],r=[],i=[],o=0;o<e.length;o++){var a=e[o],s=a.currentPoint,l=a.params,c=a.prePoint,u=void 0;switch(a.command){case"Q":u=AR(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=kR(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=a.arcParams;u=CR(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(a.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),t&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}n=n.filter(function(v){return!Number.isNaN(v)&&v!==1/0&&v!==-1/0}),r=r.filter(function(v){return!Number.isNaN(v)&&v!==1/0&&v!==-1/0});var p=Ad(n),d=Ad(r),h=Ed(n),m=Ed(r);if(i.length===0)return{x:p,y:d,width:h-p,height:m-d};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint,g=void 0;s[0]===p?(g=M_(a,t),p=p-g.xExtra):s[0]===h&&(g=M_(a,t),h=h+g.xExtra),s[1]===d?(g=M_(a,t),d=d-g.yExtra):s[1]===m&&(g=M_(a,t),m=m+g.yExtra)}return{x:p,y:d,width:h-p,height:m-d}}function M_(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||Math.sin(l)===0||$u(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0};return f}function FR(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var BR=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,o=i*Math.acos(n/r);return o},jR=function(e,t,n,r,i,o,a,s){t=Math.abs(t),n=Math.abs(n),r=Ub(r,360);var l=Pr(r);if(e.x===a.x&&e.y===a.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(e.x-a.x)/2,u=(e.y-a.y)/2,f={x:Math.cos(l)*c+Math.sin(l)*u,y:-Math.sin(l)*c+Math.cos(l)*u},p=Math.pow(f.x,2)/Math.pow(t,2)+Math.pow(f.y,2)/Math.pow(n,2);p>1&&(t=Math.sqrt(p)*t,n=Math.sqrt(p)*n);var d=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2),h=Math.pow(t,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2),m=d/h;m=m<0?0:m;var g=(i!==o?1:-1)*Math.sqrt(m),v={x:g*(t*f.y/n),y:g*(-(n*f.x)/t)},y={x:Math.cos(l)*v.x-Math.sin(l)*v.y+(e.x+a.x)/2,y:Math.sin(l)*v.x+Math.cos(l)*v.y+(e.y+a.y)/2},x={x:(f.x-v.x)/t,y:(f.y-v.y)/n},_=BR({x:1,y:0},x),w={x:(-f.x-v.x)/t,y:(-f.y-v.y)/n},S=BR(x,w);!o&&S>0?S-=2*Math.PI:o&&S<0&&(S+=2*Math.PI),S%=2*Math.PI;var M=_+S*s,O=t*Math.cos(M),E=n*Math.sin(M),P={x:Math.cos(l)*O-Math.sin(l)*E+y.x,y:Math.sin(l)*O+Math.cos(l)*E+y.y,ellipticalArcStartAngle:_,ellipticalArcEndAngle:_+S,ellipticalArcAngle:M,ellipticalArcCenter:y,resultantRx:t,resultantRy:n};return P};function fle(e){for(var t=[],n=null,r=null,i=null,o=0,a=e.length,s=0;s<a;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[l[1],l[2]],o=s;break;case"A":var f=ple(n,l);u.arcParams=f;break}if(c==="Z")n=i,r=e[o+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&r[0]==="Z"&&(r=e[o],t[o]&&(t[o].prePoint=n)),u.currentPoint=n,t[o]&&N_(n,t[o].currentPoint)&&(t[o].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var h=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[h[0]-n[0],h[1]-n[1]],u.endTangent=[n[0]-h[0],n[1]-h[1]];else if(c==="Q"){var m=[l[1],l[2]];u.startTangent=[h[0]-m[0],h[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if(c==="T"){var g=t[s-1],m=FR(g.currentPoint,h);g.command==="Q"?(u.command="Q",u.startTangent=[h[0]-m[0],h[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[h[0]-n[0],h[1]-n[1]],u.endTangent=[n[0]-h[0],n[1]-h[1]])}else if(c==="C"){var v=[l[1],l[2]],y=[l[3],l[4]];u.startTangent=[h[0]-v[0],h[1]-v[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[v[0]-y[0],v[1]-y[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[y[0]-v[0],y[1]-v[1]])}else if(c==="S"){var g=t[s-1],v=FR(g.currentPoint,h),y=[l[1],l[2]];g.command==="C"?(u.command="C",u.startTangent=[h[0]-v[0],h[1]-v[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]]):(u.command="SQ",u.startTangent=[h[0]-y[0],h[1]-y[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]])}else if(c==="A"){var x=VR(u,0),_=x.x,w=x.y,S=VR(u,1,!1),M=S.x,O=S.y;u.startTangent=[_,w],u.endTangent=[M,O]}t.push(u)}return t}function VR(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,o=i===void 0?0:i,a=r.ry,s=a===void 0?0:a,l=r.xRotation,c=r.arcFlag,u=r.sweepFlag,f=jR({x:e.prePoint[0],y:e.prePoint[1]},o,s,l,!!c,!!u,{x:e.currentPoint[0],y:e.currentPoint[1]},t),p=jR({x:e.prePoint[0],y:e.prePoint[1]},o,s,l,!!c,!!u,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),d=p.x-f.x,h=p.y-f.y,m=Math.sqrt(d*d+h*h);return{x:-d/m,y:-h/m}}function k_(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Kk(e,t){return k_(e)*k_(t)?(e[0]*t[0]+e[1]*t[1])/(k_(e)*k_(t)):1}function HR(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Kk(e,t))}function ple(e,t){var n=t[1],r=t[2],i=Ub(Pr(t[3]),Math.PI*2),o=t[4],a=t[5],s=e[0],l=e[1],c=t[6],u=t[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var h=n*n*(p*p)+r*r*(f*f),m=h?Math.sqrt((n*n*(r*r)-h)/h):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*p/r:0,v=n?m*-r*f/n:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*v,x=(l+u)/2+Math.sin(i)*g+Math.cos(i)*v,_=[(f-g)/n,(p-v)/r],w=[(-1*f-g)/n,(-1*p-v)/r],S=HR([1,0],_),M=HR(_,w);return Kk(_,w)<=-1&&(M=Math.PI),Kk(_,w)>=1&&(M=0),a===0&&M>0&&(M=M-2*Math.PI),a===1&&M<0&&(M=M+2*Math.PI),{cx:y,cy:x,rx:N_(e,[c,u])?0:n,ry:N_(e,[c,u])?0:r,startAngle:S,endAngle:S+M,xRotation:i,arcFlag:o,sweepFlag:a}}function dle(e,t,n){return e.reduce(function(r,i){var o="";if(i[0]==="M"||i[0]==="L"){var a=Ne.fromValues(i[1],i[2],0);n&&Ne.transformMat4(a,a,n),o="".concat(i[0]).concat(a[0],",").concat(a[1])}else if(i[0]==="Z")o=i[0];else if(i[0]==="C"){var s=Ne.fromValues(i[1],i[2],0),l=Ne.fromValues(i[3],i[4],0),c=Ne.fromValues(i[5],i[6],0);n&&(Ne.transformMat4(s,s,n),Ne.transformMat4(l,l,n),Ne.transformMat4(c,c,n)),o="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(l[0],",").concat(l[1],",").concat(c[0],",").concat(c[1])}else if(i[0]==="A"){var u=Ne.fromValues(i[6],i[7],0);n&&Ne.transformMat4(u,u,n),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var s=Ne.fromValues(i[1],i[2],0),l=Ne.fromValues(i[3],i[4],0);n&&(Ne.transformMat4(s,s,n),Ne.transformMat4(l,l,n)),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=o},"")}function hle(e,t,n,r){return[["M",e,t],["L",n,r]]}function WR(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,o=e*i,a=t*i,s=n-e,l=n+e,c=r-t,u=r+t;return[["M",s,r],["C",s,r-a,n-o,c,n,c],["C",n+o,c,l,r-a,l,r],["C",l,r+a,n+o,u,n,u],["C",n-o,u,s,r+a,s,r],["Z"]]}function mle(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function gle(e,t,n,r,i){if(i){var o=G(i,4),a=o[0],s=o[1],l=o[2],c=o[3],u=e>0?1:-1,f=t>0?1:-1,p=u+f!==0?1:0;return[["M",u*a+n,r],["L",e-u*s+n,r],s?["A",s,s,0,0,p,e+n,f*s+r]:null,["L",e+n,t-f*l+r],l?["A",l,l,0,0,p,e+n-u*l,t+r]:null,["L",n+u*c,t+r],c?["A",c,c,0,0,p,n,t+r-f*c]:null,["L",n,f*a+r],a?["A",a,a,0,0,p,u*a+n,r]:null,["Z"]].filter(function(d){return d})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function z_(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case Ge.LINE:var r=e.parsedStyle,i=r.x1,o=i===void 0?0:i,a=r.y1,s=a===void 0?0:a,l=r.x2,c=l===void 0?0:l,u=r.y2,f=u===void 0?0:u;n=hle(o,s,c,f);break;case Ge.CIRCLE:{var p=e.parsedStyle,d=p.r,h=d===void 0?0:d,m=p.cx,g=m===void 0?0:m,v=p.cy,y=v===void 0?0:v;n=WR(h,h,g,y);break}case Ge.ELLIPSE:{var x=e.parsedStyle,_=x.rx,w=_===void 0?0:_,S=x.ry,M=S===void 0?0:S,O=x.cx,g=O===void 0?0:O,E=x.cy,y=E===void 0?0:E;n=WR(w,M,g,y);break}case Ge.POLYLINE:case Ge.POLYGON:var P=e.parsedStyle.points;n=mle(P.points,e.nodeName===Ge.POLYGON);break;case Ge.RECT:var k=e.parsedStyle,A=k.width,N=A===void 0?0:A,L=k.height,z=L===void 0?0:L,B=k.x,H=B===void 0?0:B,j=k.y,W=j===void 0?0:j,Z=k.radius,ie=Z&&Z.some(function(q){return q!==0});n=gle(N,z,H,W,ie&&Z.map(function(q){return hr(q,0,Math.min(Math.abs(N)/2,Math.abs(z)/2))}));break;case Ge.PATH:var R=e.parsedStyle.d.absolutePath;n=qe([],G(R),!1);break}if(n.length)return dle(n,e,t)}var SF=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=op(e)}catch{t=op(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}sle(t);var n=lle(t),r=cle(t),i=r.polygons,o=r.polylines,a=fle(t),s=ule(a,0),l=s.x,c=s.y,u=s.width,f=s.height;return{absolutePath:t,hasArc:n,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(f)?f:0}}},vle=qo(SF);function Zk(e){return rr(e)?vle(e):SF(e)}function yle(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=m0(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=m0(t.absolutePath,!1),t.curve=i);var o=[r,i];r.length!==i.length&&(o=l5(r,i));var a=s5(o[0])!==s5(o[1])?P6(o[0]):T6(o[0]);return[a,L6(o[1],a),function(s){return s}]}function CF(e,t){var n;return rr(e)?n=e.split(" ").map(function(r){var i=G(r.split(","),2),o=i[0],a=i[1];return[Number(o),Number(a)]}):n=e,{points:n,totalLength:0,segments:[]}}function xle(e,t){return[e.points,t.points,function(n){return n}]}var gi=null;function ms(e){return function(t){var n=0;return e.map(function(r){return r===gi?t[n++]:r})}}function sh(e){return e}var L_={matrix:["NNNNNN",[gi,gi,0,0,gi,gi,0,0,0,0,1,0,gi,gi,0,1],sh],matrix3d:["NNNNNNNNNNNNNNNN",sh],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",ms([gi,gi,new Fr(1)]),sh],scalex:["N",ms([gi,new Fr(1),new Fr(1)]),ms([gi,new Fr(1)])],scaley:["N",ms([new Fr(1),gi,new Fr(1)]),ms([new Fr(1),gi])],scalez:["N",ms([new Fr(1),new Fr(1),gi])],scale3d:["NNN",sh],skew:["Aa",null,sh],skewx:["A",null,ms([gi,Il])],skewy:["A",null,ms([Il,gi])],translate:["Tt",ms([gi,gi,Oi]),sh],translatex:["T",ms([gi,Oi,Oi]),ms([gi,Oi])],translatey:["T",ms([Oi,gi,Oi]),ms([Oi,gi])],translatez:["L",ms([Oi,Oi,gi])],translate3d:["TTL",sh]};function R_(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=L_[o];if(!a)return[];var s=r[2].split(","),l=a[0];if(l.length<s.length)return[];for(var c=[],u=0;u<l.length;u++){var f=s[u],p=l[u],d=void 0;if(f?d={A:function(h){return h.trim()==="0"?Il:yF(h)},N:ph,T:G0,L:tle}[p.toUpperCase()](f):d={a:Il,n:c[0],t:Oi}[p],d===void 0)return[];c.push(d)}if(n.push({t:o,d:c}),t.lastIndex===e.length)return n}return[]}function qR(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=L_[o];if(!a)return[];var s=r[2].split(","),l=a[0];if(l.length<s.length)return[];for(var c=[],u=0;u<l.length;u++){var f=s[u],p=l[u],d=void 0;if(f?d={A:function(h){return h.trim()==="0"?Il:iE(h)},N:$0,T:l2,L:vF}[p.toUpperCase()](f):d={a:Il,n:c[0],t:Oi}[p],d===void 0)return[];c.push(d)}if(n.push({t:o,d:c}),t.lastIndex===e.length)return n}return[]}function ble(e){var t,n,r,i;switch(e.t){case"rotatex":return i=Pr(gs(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Pr(gs(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Pr(gs(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=Pr(gs(e.d[3]));var o=t*t+n*n+r*r;if(o===0)t=1,n=0,r=0;else if(o!==1){var a=Math.sqrt(o);t/=a,n/=a,r/=a}var s=Math.sin(i/2),l=s*Math.cos(i/2),c=s*s;return[1-2*(n*n+r*r)*c,2*(t*n*c+r*l),2*(t*r*c-n*l),0,2*(t*n*c-r*l),1-2*(t*t+r*r)*c,2*(n*r*c+t*l),0,2*(t*r*c+n*l),2*(n*r*c-t*l),1-2*(t*t+n*n)*c,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var u=Pr(gs(e.d[0])),f=Pr(gs(e.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Pr(gs(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Pr(gs(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Xs(e.d[0],0,null)||0,n=Xs(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=Xs(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=Xs(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=Xs(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=Xs(e.d[0],0,null)||0,n=Xs(e.d[1],0,null)||0,r=Xs(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var p=Xs(e.d[0],0,null)||0,d=p?-1/p:0;return[1,0,0,0,0,1,0,0,0,0,1,d,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(h){return h.value})}}function _le(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function wle(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(ble).reduce(_le)}function UR(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return wse(wle(e),t,n,r,i,o),[[t,n,r,o,i]]}var Sle=function(){function e(r,i){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)o[a][s]+=i[a][l]*r[l][s];return o}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,o,a,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)l[c][3]=s[c];for(var c=0;c<3;c++)for(var u=0;u<3;u++)l[3][c]+=r[u]*l[u][c];var f=a[0],p=a[1],d=a[2],h=a[3],m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];m[0][0]=1-2*(p*p+d*d),m[0][1]=2*(f*p-d*h),m[0][2]=2*(f*d+p*h),m[1][0]=2*(f*p+d*h),m[1][1]=1-2*(f*f+d*d),m[1][2]=2*(p*d-f*h),m[2][0]=2*(f*d-p*h),m[2][1]=2*(p*d+f*h),m[2][2]=1-2*(f*f+p*p),l=e(l,m);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(g[2][1]=o[2],l=e(l,g)),o[1]&&(g[2][1]=0,g[2][0]=o[0],l=e(l,g)),o[0]&&(g[2][0]=0,g[1][0]=o[0],l=e(l,g));for(var c=0;c<3;c++)for(var u=0;u<3;u++)l[c][u]*=i[c];return t(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return n}();function Cle(e){return e.toFixed(6).replace(".000000","")}function Fk(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=UR(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=UR(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var o=Mle(n[0][3],r[0][3],i[5]),a=Sle(i[0],i[1],i[2],o,i[4]),s=a.map(Cle).join(",");return s}])}function Ole(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function Mle(e,t,n){var r=Ole(e,t);r=hr(r,-1,1);var i=[];if(r===1)i=e;else for(var o=Math.acos(r),a=Math.sin(n*o)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(e[s]*(Math.cos(n*o)-r*a)+t[s]*a);return i}function Bk(e){return e.replace(/[xy]/,"")}function jk(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var kle=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function Ele(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(S){var M=e[S],O=M.t,E=M.d,P=O.substring(0,5)==="scale"?1:0;t.push({t:O,d:E.map(function(k){return typeof k=="number"?Ur(P):Ur(P,k.unit)})})},o=0;o<e.length;o++)i(o)}var a=[],s=[],l=[];if(e.length!==t.length){var c=Fk(e,t);a=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]]}else for(var o=0;o<e.length;o++){var u=e[o].t,f=t[o].t,p=e[o].d,d=t[o].d,h=L_[u],m=L_[f],g=void 0;if(kle(u,f)){var c=Fk([e[o]],[t[o]]);a.push(c[0]),s.push(c[1]),l.push(["matrix",[c[2]]]);continue}else if(u===f)g=u;else if(h[2]&&m[2]&&Bk(u)===Bk(f))g=Bk(u),p=h[2](p),d=m[2](d);else if(h[1]&&m[1]&&jk(u)===jk(f))g=jk(u),p=h[1](p),d=m[1](d);else{var c=Fk(e,t);a=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]];break}for(var v=[],y=[],x=[],_=0;_<p.length;_++){var c=rle(p[_],d[_],n,!1,_);v[_]=c[0],y[_]=c[1],x.push(c[2])}a.push(v),s.push(y),l.push([g,x])}if(r){var w=a;a=s,s=w}return[a,s,function(S){return S.map(function(M,O){var E=M.map(function(P,k){return l[O][1][k](P)}).join(",");return l[O][0]==="matrix"&&E.split(",").length===16&&(l[O][0]="matrix3d"),l[O][0]==="matrix3d"&&E.split(",").length===6&&(l[O][0]="matrix"),l[O][0]+"("+E+")"}).join(" ")}]}var OF=qo(function(e){if(rr(e)){if(e==="text-anchor")return[Ur(0,"px"),Ur(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[G0(I_(t[0])),G0(I_(t[1]))]}else return[Ur(e[0]||0,"px"),Ur(e[1]||0,"px")]}),Ale=function(e){if(rr(e)){if(e==="text-anchor")return[Ur(0,"px"),Ur(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[l2(I_(t[0])),l2(I_(t[1]))]}else return[Ur(e[0]||0,"px"),Ur(e[1]||0,"px")]};function I_(e){return e==="center"?"50%":e==="left"||e==="top"?"0%":e==="right"||e==="bottom"?"100%":e}var sE=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:wt.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:wt.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:wt.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:wt.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:wt.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:wt.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:wt.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:wt.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:wt.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:wt.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:wt.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:wt.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:wt.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:wt.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:wt.FILTER},{n:"clipPath",syntax:wt.DEFINED_PATH},{n:"textPath",syntax:wt.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:wt.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:wt.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:wt.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:wt.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:wt.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:wt.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:wt.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:wt.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:wt.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:wt.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:wt.COORDINATE},{n:"y1",int:!0,l:!0,syntax:wt.COORDINATE},{n:"z1",int:!0,l:!0,syntax:wt.COORDINATE},{n:"x2",int:!0,l:!0,syntax:wt.COORDINATE},{n:"y2",int:!0,l:!0,syntax:wt.COORDINATE},{n:"z2",int:!0,l:!0,syntax:wt.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:wt.PATH,p:50},{n:"points",int:!0,l:!0,syntax:wt.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:wt.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:wt.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:wt.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:wt.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:wt.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:wt.NUMBER,d:function(e){return e===Ge.PATH||e===Ge.POLYGON||e===Ge.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:wt.MARKER},{n:"markerEnd",syntax:wt.MARKER},{n:"markerMid",syntax:wt.MARKER},{n:"markerStartOffset",syntax:wt.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:wt.LENGTH,l:!0,int:!0,d:"0"}],GR=sE.filter(function(e){return!!e.l}).map(function(e){return e.n}),tf={},W0=new WeakMap,Tle=function(e,t){var n=W0.get(e);return!n||n.length===0?!0:n.includes(t)},Ple=function(){function e(t){var n=this;this.runtime=t,sE.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){qe([t.n],G(t.a||[]),!1).forEach(function(n){tf[n]=t})},e.prototype.unregisterMetadata=function(t){delete tf[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var u=r.skipUpdateAttribute,f=r.skipParse,p=r.forceUpdateGeometry,d=r.usedAttributes,h=r.memoize,m=p,g=Object.keys(n);g.forEach(function(v){var y;u||(t.attributes[v]=n[v]),!m&&(!((y=tf[v])===null||y===void 0)&&y.l)&&(m=!0)}),f||g.forEach(function(v){t.computedStyle[v]=i.parseProperty(v,t.attributes[v],t,h)}),d?.length&&(g=Array.from(new Set(g.concat(d)))),g.forEach(function(v){v in t.computedStyle&&(t.parsedStyle[v]=i.computeProperty(v,t.computedStyle[v],t,h))}),m&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t)),g.forEach(function(v){v in t.parsedStyle&&i.postProcessProperty(v,t,g)}),this.runtime.enableCSSParsing&&t.children.length&&g.forEach(function(v){v in t.parsedStyle&&i.isPropertyInheritable(v)&&t.children.forEach(function(y){y.internalSetAttribute(v,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(t.attributes,n);var o=Object.keys(n),a=t.parsedStyle.clipPath,s=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var l=!!r.forceUpdateGeometry;if(!l){for(var c=0;c<GR.length;c++)if(GR[c]in n){l=!0;break}}n.fill&&(t.parsedStyle.fill=Dl(n.fill)),n.stroke&&(t.parsedStyle.stroke=Dl(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=Dl(n.shadowColor)),n.filter&&(t.parsedStyle.filter=bF(n.filter)),on(n.radius)||(t.parsedStyle.radius=RR(n.radius,4)),on(n.lineDash)||(t.parsedStyle.lineDash=RR(n.lineDash,2)),n.points&&(t.parsedStyle.points=CF(n.points)),n.d===""&&(t.parsedStyle.d=Te({},dF)),n.d&&(t.parsedStyle.d=Zk(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),mr(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",a,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,n.offsetPath,t,this.runtime),n.transform&&(t.parsedStyle.transform=R_(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=OF(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),on(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,o),on(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,o),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,o),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(t,o),l&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},e.prototype.parseProperty=function(t,n,r,i){var o=tf[t],a=n;if((n===""||on(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")a=Xk(n);else if(o){var s=o.k,l=o.syntax,c=l&&this.getPropertySyntax(l);s&&s.indexOf(n)>-1?a=Xk(n):c&&(!i&&c.parserUnmemoize?a=c.parserUnmemoize(n,r):c.parser&&(a=c.parser(n,r)))}return a},e.prototype.computeProperty=function(t,n,r,i){var o=tf[t],a=r.id==="g-root",s=n;if(o){var l=o.syntax,c=o.inh,u=o.d;if(n instanceof vs){var f=n.value;if(f==="unset"&&(c&&!a?f="inherit":f="initial"),f==="initial")on(u)||(n=this.parseProperty(t,q0(u)?u(r.nodeName):u,r,i));else if(f==="inherit"){var p=this.tryToResolveProperty(r,t,{inherited:!0});if(on(p)){this.addUnresolveProperty(r,t);return}else return p}}var d=l&&this.getPropertySyntax(l);if(d&&d.calculator){var h=r.parsedStyle[t];s=d.calculator(t,h,n,r,this.runtime)}else n instanceof vs?s=n.value:s=n}return s},e.prototype.postProcessProperty=function(t,n,r){var i=tf[t];if(i&&i.syntax){var o=i.syntax&&this.getPropertySyntax(i.syntax),a=o;a&&a.postProcessor&&a.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=W0.get(t);r||(W0.set(t,[]),r=W0.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&Tle(t.parentElement,n)){var o=t.parentElement.parsedStyle[n];return o==="unset"||o==="initial"||o==="inherit"?void 0:o}},e.prototype.recalc=function(t){var n=W0.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),W0.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new vi),i.renderBounds||(i.renderBounds=new vi);var o=t.parsedStyle,a=r.update(o,t),s=a.cx,l=s===void 0?0:s,c=a.cy,u=c===void 0?0:c,f=a.cz,p=f===void 0?0:f,d=a.hwidth,h=d===void 0?0:d,m=a.hheight,g=m===void 0?0:m,v=a.hdepth,y=v===void 0?0:v,x=[Math.abs(h),Math.abs(g),y],_=o,w=_.stroke,S=_.lineWidth,M=S===void 0?1:S,O=_.increasedLineWidthForHitTesting,E=O===void 0?0:O,P=_.shadowType,k=P===void 0?"outer":P,A=_.shadowColor,N=_.filter,L=N===void 0?[]:N,z=_.transformOrigin,B=[l,u,p];i.contentBounds.update(B,x);var H=n===Ge.POLYLINE||n===Ge.POLYGON||n===Ge.PATH?Math.SQRT2:.5,j=w&&!w.isNone;if(j){var W=((M||0)+(E||0))*H;x[0]+=W,x[1]+=W}if(i.renderBounds.update(B,x),A&&k&&k!=="inner"){var Z=i.renderBounds,ie=Z.min,R=Z.max,q=o,J=q.shadowBlur,te=q.shadowOffsetX,ae=q.shadowOffsetY,le=J||0,ue=te||0,ye=ae||0,Me=ie[0]-le+ue,we=R[0]+le+ue,De=ie[1]-le+ye,Ve=R[1]+le+ye;ie[0]=Math.min(ie[0],Me),R[0]=Math.max(R[0],we),ie[1]=Math.min(ie[1],De),R[1]=Math.max(R[1],Ve),i.renderBounds.setMinMax(ie,R)}L.forEach(function(nt){var $e=nt.name,at=nt.params;if($e==="blur"){var mt=at[0].value;i.renderBounds.update(i.renderBounds.center,E_(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[mt,mt,0]))}else if($e==="drop-shadow"){var lt=at[0].value,Et=at[1].value,Rt=at[2].value,Qt=i.renderBounds,It=Qt.min,Kt=Qt.max,Sn=It[0]-Rt+lt,Dt=Kt[0]+Rt+lt,ot=It[1]-Rt+Et,We=Kt[1]+Rt+Et;It[0]=Math.min(It[0],Sn),Kt[0]=Math.max(Kt[0],Dt),It[1]=Math.min(It[1],ot),Kt[1]=Math.max(Kt[1],We),i.renderBounds.setMinMax(It,Kt)}}),t.geometry.dirty=!1;var Ze=h<0,Ae=g<0,pe=(Ze?-1:1)*(z?Xs(z[0],0,t,!0):0),ft=(Ae?-1:1)*(z?Xs(z[1],1,t,!0):0);(pe||ft)&&t.setOrigin(pe,ft)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===Ge.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===Ge.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=tf[t];return n?n.inh:!1},e}(),Nle=function(){function e(){this.parser=yF,this.parserUnmemoize=iE,this.parserWithCSSDisabled=null,this.mixer=oE}return e.prototype.calculator=function(t,n,r,i){return gs(r)},e}(),Lle=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,o){return r instanceof vs&&(r=null),o.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(a){a.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(a)}),r},e}(),Ile=function(){function e(){this.parser=Dl,this.parserWithCSSDisabled=Dl,this.mixer=ele}return e.prototype.calculator=function(t,n,r,i){return r instanceof vs?r.value==="none"?T_:fF:r},e}(),Dle=function(){function e(){this.parser=bF}return e.prototype.calculator=function(t,n,r){return r instanceof vs?[]:r},e}();function $R(e){var t=e.parsedStyle.fontSize;return on(t)?null:t}var Jk=function(){function e(){this.parser=G0,this.parserUnmemoize=l2,this.parserWithCSSDisabled=null,this.mixer=oE}return e.prototype.calculator=function(t,n,r,i,o){var a;if(Dn(r))return r;if(Fr.isRelativeUnit(r.unit)){var s=o.styleValueRegistry;if(r.unit===xt.kPercentage)return 0;if(r.unit===xt.kEms){if(i.parentNode){var l=$R(i.parentNode);if(l)return l*=r.value,l;s.addUnresolveProperty(i,t)}else s.addUnresolveProperty(i,t);return 0}else if(r.unit===xt.kRems){if(!((a=i?.ownerDocument)===null||a===void 0)&&a.documentElement){var l=$R(i.ownerDocument.documentElement);if(l)return l*=r.value,l;s.addUnresolveProperty(i,t)}else s.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),zle=function(){function e(){this.mixer=wF}return e.prototype.parser=function(t){var n=xF(Dn(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),Rle=function(){function e(){this.mixer=wF}return e.prototype.parser=function(t){var n=xF(Dn(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),Fle=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof vs&&(r=null);var o=r?.cloneNode(!0);return o&&(o.style.isMarker=!0),o},e}(),Ble=function(){function e(){this.mixer=oE,this.parser=ph,this.parserUnmemoize=$0,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),jle=function(){function e(){this.parser=ph,this.parserUnmemoize=$0,this.parserWithCSSDisabled=null,this.mixer=aE(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var o=r.nodeName;if(o===Ge.LINE||o===Ge.PATH||o===Ge.POLYLINE){var a=r.getPoint(i);a&&t.setLocalPosition(a.x,a.y)}}},e}(),Vle=function(){function e(){this.parser=ph,this.parserUnmemoize=$0,this.parserWithCSSDisabled=null,this.mixer=aE(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),Hle=function(){function e(){this.parser=Zk,this.parserWithCSSDisabled=Zk,this.mixer=yle}return e.prototype.calculator=function(t,n,r){return r instanceof vs&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new U0(0,0,0,0)}:r},e}(),Wle=function(){function e(){this.parser=CF,this.mixer=xle}return e}(),qle=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.mixer=aE(0,1/0),n}return t}(Jk),Ule=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof vs?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),Gle=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var o=i.getAttribute("text");if(o){var a=o;r.value==="capitalize"?a=o.charAt(0).toUpperCase()+o.slice(1):r.value==="lowercase"?a=o.toLowerCase():r.value==="uppercase"&&(a=o.toUpperCase()),i.parsedStyle.text=a}return r.value},e}(),Vk={},$le=0;function Yle(e,t){if(e){var n=typeof e=="string"?e:e.id||$le++;Vk[n]&&Vk[n].destroy(),Vk[n]=t}}var hh=typeof window<"u"&&typeof window.document<"u";function Xle(e){return!!e.getAttribute}function Kle(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;MF(e[i],t)<0?n=i+1:r=i}return n}function MF(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(e)-o.indexOf(t)}}return n-r}function lE(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var YR="px";function kF(e,t,n){hh&&e.style&&(e.style.width=t+YR,e.style.height=n+YR)}function EF(e,t){if(hh)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function Zle(e){var t=EF(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function Jle(e){var t=EF(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var Qle=1,ece={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Qk=typeof performance=="object"&&performance.now?performance:Date;function wp(e,t,n){e===void 0&&(e="auto");var r=!1,i=!1,o=!!t&&!t.isNone,a=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=o,i=a):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var tce=1,nce=function(){return tce++},iu=typeof self=="object"&&self.self==self?self:typeof global=="object"&&global.global==global?global:{},rce=Date.now(),ice=function(){return iu.performance&&typeof iu.performance.now=="function"?iu.performance.now():Date.now()-rce},i2={},XR=Date.now(),oce=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-XR,r=n>16?0:16-n,i=nce();return i2[i]=e,Object.keys(i2).length>1||setTimeout(function(){XR=t;var o=i2;i2={},Object.keys(o).forEach(function(a){return o[a](ice())})},r),i},ace=function(e){delete i2[e]},sce=["","webkit","moz","ms","o"],AF=function(e){return typeof e!="string"?oce:e===""?iu.requestAnimationFrame:iu[e+"RequestAnimationFrame"]},lce=function(e){return typeof e!="string"?ace:e===""?iu.cancelAnimationFrame:iu[e+"CancelAnimationFrame"]||iu[e+"CancelRequestAnimationFrame"]},cce=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},TF=cce(sce,function(e){return!!AF(e)}),cE=AF(TF),PF=lce(TF);iu.requestAnimationFrame=cE;iu.cancelAnimationFrame=PF;var uce=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,qe([],G(t),!1))}))},e}(),fce=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Bc(this,void 0,void 0,function(){var r,i,o,a;return jc(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(a=this.callbacks)[0].apply(a,qe([],G(t),!1))]:[3,6];case 1:r=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(o=this.callbacks[i],[4,o(r)]):[3,5];case 3:r=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),La=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),Hk=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),pce=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],dce=/([\"\'])[^\'\"]+\1/;function hce(e){for(var t=e.fontSize,n=t===void 0?16:t,r=e.fontFamily,i=r===void 0?"sans-serif":r,o=e.fontStyle,a=o===void 0?"normal":o,s=e.fontVariant,l=s===void 0?"normal":s,c=e.fontWeight,u=c===void 0?"normal":c,f=Dn(n)&&"".concat(n,"px")||"16px",p=i.split(","),d=p.length-1;d>=0;d--){var h=p[d].trim();!dce.test(h)&&pce.indexOf(h)<0&&(h='"'.concat(h,'"')),p[d]=h}return"".concat(a," ").concat(l," ").concat(u," ").concat(f," ").concat(p.join(","))}function Wk(e,t,n){return Qe.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var r2=1e-5,mce=Qe.create(),zi=Qe.create();function uE(e,t){if(e.length){var n=Qe.identity(mce);e.forEach(function(r){var i=r.t,o=r.d;if(i==="scale"){var a=o?.map(function(v){return Math.max(v.value,r2)})||[1,1];Qe.fromScaling(zi,[a[0],a[1],1])}else if(i==="scalex"){var a=o?.map(function(y){return Math.max(y.value,r2)})||[1];Qe.fromScaling(zi,[a[0],1,1])}else if(i==="scaley"){var a=o?.map(function(y){return Math.max(y.value,r2)})||[1];Qe.fromScaling(zi,[1,a[0],1])}else if(i==="scalez"){var a=o?.map(function(y){return Math.max(y.value,r2)})||[1];Qe.fromScaling(zi,[1,1,a[0]])}else if(i==="scale3d"){var a=o?.map(function(y){return Math.max(y.value,r2)})||[1,1,1];Qe.fromScaling(zi,[a[0],a[1],a[2]])}else if(i==="translate"){var s=o||[Oi,Oi];Qe.fromTranslation(zi,[s[0].value,s[1].value,0])}else if(i==="translatex"){var s=o||[Oi];Qe.fromTranslation(zi,[s[0].value,0,0])}else if(i==="translatey"){var s=o||[Oi];Qe.fromTranslation(zi,[0,s[0].value,0])}else if(i==="translatez"){var s=o||[Oi];Qe.fromTranslation(zi,[0,0,s[0].value])}else if(i==="translate3d"){var s=o||[Oi,Oi,Oi];Qe.fromTranslation(zi,[s[0].value,s[1].value,s[2].value])}else if(i==="rotate"){var l=o||[Il];Qe.fromZRotation(zi,Pr(gs(l[0])))}else if(i==="rotatex"){var l=o||[Il];Qe.fromXRotation(zi,Pr(gs(l[0])))}else if(i==="rotatey"){var l=o||[Il];Qe.fromYRotation(zi,Pr(gs(l[0])))}else if(i==="rotatez"){var l=o||[Il];Qe.fromZRotation(zi,Pr(gs(l[0])))}else if(i==="rotate3d"){var l=o||[Oi,Oi,Oi,Il];Qe.fromRotation(zi,Pr(gs(l[3])),[l[0].value,l[1].value,l[2].value])}else if(i==="skew"){var c=o?.map(function(v){return v.value})||[0,0];Wk(zi,Pr(c[0]),Pr(c[1]))}else if(i==="skewx"){var c=o?.map(function(y){return y.value})||[0];Wk(zi,Pr(c[0]),0)}else if(i==="skewy"){var c=o?.map(function(y){return y.value})||[0];Wk(zi,0,Pr(c[0]))}else if(i==="matrix"){var u=G(o.map(function(v){return v.value}),6),f=u[0],p=u[1],d=u[2],h=u[3],m=u[4],g=u[5];Qe.set(zi,f,p,0,0,d,h,0,0,0,0,1,0,m,g,0,1)}else i==="matrix3d"&&Qe.set.apply(Qe,qe([zi],G(o.map(function(v){return v.value})),!1));Qe.mul(n,n,zi)}),t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var gce=function(){function e(){this.parser=R_,this.parserUnmemoize=qR,this.parserWithCSSDisabled=qR,this.mixer=Ele}return e.prototype.calculator=function(t,n,r,i){return r instanceof vs?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;uE(n,t)},e}(),vce=function(){function e(){this.parser=OF,this.parserUnmemoize=Ale}return e.prototype.postProcessor=function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===xt.kPixels&&n[1].unit===xt.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()},e}(),yce=function(){function e(){this.parser=ph,this.parserUnmemoize=$0}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=a2.Z_INDEX_CHANGED)}},e}(),xce=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,o=t.cy,a=o===void 0?0:o,s=t.r,l=s===void 0?0:s;return{cx:i,cy:a,hwidth:l,hheight:l}},e}(),bce=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,o=t.cy,a=o===void 0?0:o,s=t.rx,l=s===void 0?0:s,c=t.ry,u=c===void 0?0:c;return{cx:i,cy:a,hwidth:l,hheight:u}},e}(),_ce=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=Math.min(n,i),s=Math.max(n,i),l=Math.min(r,o),c=Math.max(r,o),u=s-a,f=c-l,p=u/2,d=f/2;return{cx:a+p,cy:l+d,hwidth:p,hheight:d}},e}(),wce=function(){function e(){}return e.prototype.update=function(t){var n=t.d,r=n.rect,i=r.x,o=r.y,a=r.width,s=r.height,l=a/2,c=s/2;return{cx:i+l,cy:o+c,hwidth:l,hheight:c}},e}(),Sce=function(){function e(){}return e.prototype.update=function(t){if(t.points&&nr(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,qe([],G(n.map(function(f){return f[0]})),!1)),i=Math.max.apply(Math,qe([],G(n.map(function(f){return f[0]})),!1)),o=Math.min.apply(Math,qe([],G(n.map(function(f){return f[1]})),!1)),a=Math.max.apply(Math,qe([],G(n.map(function(f){return f[1]})),!1)),s=i-r,l=a-o,c=s/2,u=l/2;return{cx:r+c,cy:o+u,hwidth:c,hheight:u}}return{cx:0,cy:0,hwidth:0,hheight:0}},e}(),Cce=function(){function e(){}return e.prototype.update=function(t,n){var r=t.x,i=r===void 0?0:r,o=t.y,a=o===void 0?0:o,s=t.src,l=t.width,c=l===void 0?0:l,u=t.height,f=u===void 0?0:u,p=c,d=f;return s&&!rr(s)&&(p||(p=s.width,t.width=p),d||(d=s.height,t.height=d)),{cx:i+p/2,cy:a+d/2,hwidth:p/2,hheight:d/2}},e}(),Oce=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,o=t.textBaseline,a=t.fontSize,s=t.fontStyle,l=t.fontWeight,c=t.fontVariant,u=t.lineWidth;return He.enableCSSParsing?r&&a&&s&&l&&c&&i&&o&&!on(u):r},e.prototype.update=function(t,n){var r,i,o=t.text,a=t.textAlign,s=a===void 0?"start":a,l=t.lineWidth,c=l===void 0?1:l,u=t.textBaseline,f=u===void 0?"alphabetic":u,p=t.dx,d=p===void 0?0:p,h=t.dy,m=h===void 0?0:h,g=t.x,v=g===void 0?0:g,y=t.y,x=y===void 0?0:y;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var _=(((i=(r=n?.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,w=this.globalRuntime.textService.measureText(o,t,_);t.metrics=w;var S=w.width,M=w.height,O=w.lineHeight,E=w.fontProperties,P=S/2,k=M/2,A=v+P;s==="center"||s==="middle"?A+=c/2-P:(s==="right"||s==="end")&&(A+=c-P*2);var N=x-k;return f==="middle"?N+=k:f==="top"||f==="hanging"?N+=k*2:f==="alphabetic"?N+=this.globalRuntime.enableCSSParsing?O-E.ascent:0:(f==="bottom"||f==="ideographic")&&(N+=0),d&&(A+=d),m&&(N+=m),{cx:A,cy:N,hwidth:P,hheight:k}},e}(),Mce=function(){function e(){}return e.prototype.update=function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}},e}(),kce=function(){function e(){}return e.prototype.update=function(t,n){var r=t.x,i=r===void 0?0:r,o=t.y,a=o===void 0?0:o,s=t.width,l=s===void 0?0:s,c=t.height,u=c===void 0?0:c;return{cx:i+l/2,cy:a+u/2,hwidth:l/2,hheight:u/2}},e}();function Ece(e){return!!e.type}var u2=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new So,this.page=new So,this.canvas=new So,this.viewport=new So,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(Tr)},e}(),NF=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.client=new So,n.movement=new So,n.offset=new So,n.global=new So,n.screen=new So,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(Tr)},t}(u2),eE=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(NF),tE=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(NF),or=function(e){ut(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(u2),KR=":",LF=function(){function e(){this.emitter=new b_}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=$b(r)&&r||Al(r)&&r.capture,o=Al(r)&&r.once,a=q0(n)?void 0:n,s=!1,l="";if(t.indexOf(KR)>-1){var c=G(t.split(KR),2),u=c[0],f=c[1];t=f,l=u,s=!0}if(t=i?"".concat(t,"capture"):t,n=q0(n)?n:n.handleEvent,s){var p=n;n=function(){for(var d,h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];((d=h[0].target)===null||d===void 0?void 0:d.name)===l&&p.apply(void 0,qe([],G(h),!1))}}return o?this.emitter.once(t,n,a):this.emitter.on(t,n,a),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=$b(r)&&r||Al(r)&&r.capture,o=q0(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=q0(n)?n:n?.handleEvent,this.emitter.off(t,n,o),this},e.prototype.emit=function(t,n){this.dispatchEvent(new or(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!Ece(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var o;if(this.document?o=this:this.defaultView?o=this.defaultView:o=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,o){if(t.manager=o.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),lo=function(e){ut(t,e);function t(){var n=e.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===Ge.TEXT&&(i+=this.style.text);try{for(var o=$i(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.nodeName===Ge.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===Ge.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(Tr)},t.prototype.lookupNamespaceURI=function(n){throw new Error(Tr)},t.prototype.lookupPrefix=function(n){throw new Error(Tr)},t.prototype.normalize=function(){throw new Error(Tr)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,o=this,a=[i],s=[o];(r=i.parentNode)!==null&&r!==void 0?r:o.parentNode;)i=i.parentNode?(a.push(i.parentNode),i.parentNode):i,o=o.parentNode?(s.push(o.parentNode),o.parentNode):o;if(i!==o)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var l=a.length>s.length?a:s,c=l===a?s:a;if(l[l.length-c.length]===c[0])return l===a?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var u=l.length-c.length,f=c.length-1;f>=0;f--){var p=c[f],d=l[u+f];if(d!==p){var h=p.parentNode.childNodes;return h.indexOf(p)<h.indexOf(d)?c===a?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:l===a?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(LF),Ace=2048,Tce=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new b_,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Qe.create(),this.tmpVec3=Ne.create(),this.onPointerDown=function(i){var o=r.createPointerEvent(i);if(r.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")r.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;r.dispatchEvent(o,a?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=o.composedPath(),r.freeEvent(o)},this.onPointerUp=function(i){var o,a=Qk.now(),s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(s,"pointerup"),s.pointerType==="touch")r.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightup":"mouseup")}var c=r.trackingData(i.pointerId),u=r.findMountedTarget(c.pressTargetsByButton[i.button]),f=u;if(u&&!s.composedPath().includes(u)){for(var p=u;p&&!s.composedPath().includes(p);){if(s.currentTarget=p,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")r.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}lo.isNode(p)&&(p=p.parentNode)}delete c.pressTargetsByButton[i.button],f=p}if(f){var d=r.clonePointerEvent(s,"click");d.target=f,d.path=[],c.clicksByButton[i.button]||(c.clicksByButton[i.button]={clickCount:0,target:d.target,timeStamp:a});var h=r.context.renderingContext.root.ownerDocument.defaultView,m=c.clicksByButton[i.button];m.target===d.target&&a-m.timeStamp<h.dblClickSpeed?++m.clickCount:m.clickCount=1,m.target=d.target,m.timeStamp=a,d.detail=m.clickCount,!((o=s.detail)===null||o===void 0)&&o.preventClick||(!r.context.config.useNativeClickEvent&&(d.pointerType==="mouse"||d.pointerType==="touch")&&r.dispatchEvent(d,"click"),r.dispatchEvent(d,"pointertap")),r.freeEvent(d)}r.freeEvent(s)},this.onPointerMove=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),a=o.pointerType==="mouse"||o.pointerType==="pen",s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.overTargets);if(s.overTargets&&l!==o.target){var c=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,c,l||void 0);if(r.dispatchEvent(u,"pointerout"),a&&r.dispatchEvent(u,"mouseout"),!o.composedPath().includes(l)){var f=r.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),a&&r.notifyTarget(f,"mouseleave"),lo.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(l!==o.target){var p=i.type==="mousemove"?"mouseover":"pointerover",d=r.clonePointerEvent(o,p);r.dispatchEvent(d,"pointerover"),a&&r.dispatchEvent(d,"mouseover");for(var h=l&&lo.isNode(l)&&l.parentNode;h&&h!==(lo.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&h!==o.target;)h=h.parentNode;var m=!h||h===(lo.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(m){var g=r.clonePointerEvent(o,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==(lo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)g.currentTarget=g.target,r.notifyTarget(g),a&&r.notifyTarget(g,"mouseenter"),lo.isNode(g.target)&&(g.target=g.target.parentNode);r.freeEvent(g)}r.freeEvent(d)}r.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&r.dispatchEvent(o,"touchmove"),a&&(r.dispatchEvent(o,"mousemove"),r.cursor=r.getCursor(o.target)),s.overTargets=o.composedPath(),r.freeEvent(o)},this.onPointerOut=function(i){var o=r.trackingData(i.pointerId);if(o.overTargets){var a=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(o.overTargets),l=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(l),a&&r.dispatchEvent(l,"mouseout");var c=r.createPointerEvent(i,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(lo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),a&&r.notifyTarget(c,"mouseleave"),lo.isNode(c.target)&&(c.target=c.target.parentNode);o.overTargets=null,r.freeEvent(l),r.freeEvent(c)}r.cursor=null},this.onPointerOver=function(i){var o=r.trackingData(i.pointerId),a=r.createPointerEvent(i),s=a.pointerType==="mouse"||a.pointerType==="pen";r.dispatchEvent(a,"pointerover"),s&&r.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(r.cursor=r.getCursor(a.target));var l=r.clonePointerEvent(a,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(lo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),s&&r.notifyTarget(l,"mouseenter"),lo.isNode(l.target)&&(l.target=l.target.parentNode);o.overTargets=a.composedPath(),r.freeEvent(a),r.freeEvent(l)},this.onPointerUpOutside=function(i){var o=r.trackingData(i.pointerId),a=r.findMountedTarget(o.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(a){for(var l=a;l;)s.currentTarget=l,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),lo.isNode(l)&&(l=l.parentNode);delete o.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var o=r.createWheelEvent(i);r.dispatchEvent(o),r.freeEvent(o)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var o=r.createPointerEvent(i);r.dispatchEvent(o),r.freeEvent(o)}},this.onPointerCancel=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(o),r.freeEvent(o)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.getScale=function(){var t=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&t){var o=i.offsetWidth,a=i.offsetHeight;o&&a&&(n=t.width/o,r=t.height/a)}return{scaleX:n,scaleY:r,bbox:t}},e.prototype.client2Viewport=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new So((t.x-(o?.left||0))/r,(t.y-(o?.top||0))/i)},e.prototype.viewport2Client=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new So((t.x+(o?.left||0))*r,(t.y+(o?.top||0))*i)},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,o=i.getCamera(),a=this.context.config,s=a.width,l=a.height,c=o.getPerspectiveInverse(),u=o.getWorldTransform(),f=Qe.multiply(this.tmpMatrix,u,c),p=Ne.set(this.tmpVec3,n/s*2-1,(1-r/l)*2-1,0);return Ne.transformMat4(p,p,f),new So(p[0],p[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),o=r.getViewTransform(),a=Qe.multiply(this.tmpMatrix,i,o),s=Ne.set(this.tmpVec3,t.x,t.y,0);Ne.transformMat4(this.tmpVec3,this.tmpVec3,a);var l=this.context.config,c=l.width,u=l.height;return new So((s[0]+1)/2*c,(1-(s[1]+1)/2)*u)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var o=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=o+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<Ace&&t!==this.rootTarget;i++)lo.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,o=i.width,a=i.height,s=i.disableHitTesting;return n<0||r<0||n>o||r>a?null:!s&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t,n){var r=n?.target;if(r?.shadowRoot&&(r=n.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return n?.composedPath?n.composedPath().indexOf(t)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=$i(t.nativeEvent.composedPath()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.nativeHTMLMap.get(a);if(s)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var o=this.allocateEvent(eE);this.copyPointerData(t,o),this.copyMouseData(t,o),this.copyData(t,o),o.nativeEvent=t.nativeEvent,o.originalEvent=t;var a=this.getExistedHTML(o),s=this.context.contextService.getDomElement();return o.target=r??(a||this.isNativeEventFromCanvas(s,o.nativeEvent)&&this.pickTarget(o)||i),typeof n=="string"&&(o.type=n),o},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(tE);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(tE);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(eE);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n??r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=Qk.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n??t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var o=0;o<i.length&&!t.propagationImmediatelyStopped;o++)i[o].once&&r.removeListener(n,i[o].fn,void 0,!0),i[o].fn.call(t.currentTarget||i[o].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||lo.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=Xle(n)&&n.getAttribute("cursor");if(r)return r;n=lo.isNode(n)&&n.parentNode}},e}(),Pce=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||He.offscreenCanvas)this.canvas=t||He.offscreenCanvas,this.context=this.canvas.getContext("2d",Te({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",Te({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",Te({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),nf=function(e){return e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE",e}(nf||{}),Nce=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new La,initAsync:new uce,dirtycheck:new Hk,cull:new Hk,beginFrame:new La,beforeRender:new La,render:new La,afterRender:new La,endFrame:new La,destroy:new La,pick:new fce,pickSync:new Hk,pointerDown:new La,pointerUp:new La,pointerMove:new La,pointerOut:new La,pointerOver:new La,pointerWheel:new La,pointerCancel:new La,click:new La}}return e.prototype.init=function(t){var n=this,r=Te(Te({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(nf.CAMERA_CHANGED)},e.prototype.render=function(t,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=o.renderReasons.size===1&&o.renderReasons.has(nf.CAMERA_CHANGED),s=!t.disableRenderHooks||!(t.disableRenderHooks&&a);s&&this.renderDisplayObject(o.root,t,o),this.hooks.beginFrame.call(n),s&&o.renderListCurrentFrame.forEach(function(l){i.hooks.beforeRender.call(l),i.hooks.render.call(l),i.hooks.afterRender.call(l)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),r()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,o=n.renderer.getConfig(),a=o.enableDirtyCheck,s=o.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var l=t.renderable,c=a?l.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(c){var u=s?this.hooks.cull.call(c,this.context.camera):c;u&&(this.stats.rendered++,r.renderListCurrentFrame.push(u))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=t.sortable;f.dirty&&(this.sort(t,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||t.childNodes).forEach(function(p){i.renderDisplayObject(p,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==a2.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var o=n.sorted.indexOf(r);o>=0&&n.sorted.splice(o,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var a=Kle(n.sorted,r);n.sorted.splice(a,0,r)}}):n.sorted=t.childNodes.slice().sort(MF)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(nf.DISPLAY_OBJECT_CHANGED)},e}(),Lce=/\[\s*(.*)=(.*)\s*\]/,Ice=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(s){return(s?.classList||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(s){return s.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),o=i.name,a=i.value;return o?n.find(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):null}else return n.find(function(s){return n!==s&&s.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(s){return n!==s&&(s?.classList||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(s){return n!==s&&s.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),o=i.name,a=i.value;return o?n.findAll(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):[]}else return n.findAll(function(s){return n!==s&&s.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i==="name"?n.name===o:this.attributeToString(n,i)===o}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(Lce),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return on(r)?"":r.toString?r.toString():""},e}(),rf=function(e){ut(t,e);function t(n,r,i,o,a,s,l,c){var u=e.call(this,null)||this;return u.relatedNode=r,u.prevValue=i,u.newValue=o,u.attrName=a,u.attrChange=s,u.prevParsedValue=l,u.newParsedValue=c,u.type=n,u}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(u2),nn=function(e){return e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled",e}(nn||{});function ZR(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var Dce=new rf(nn.REPARENT,null,"","","",0,"",""),zce=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new or(nn.BOUNDS_CHANGED),this.rotate=function(){var r=hn.create();return function(i,o,a,s,l){a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=!0),typeof o=="number"&&(o=Ne.fromValues(o,a,s));var c=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,o);else{var u=hn.create();hn.fromEuler(u,o[0],o[1],o[2]);var f=n.getRotation(i),p=n.getRotation(i.parentNode);hn.copy(r,p),hn.invert(r,r),hn.multiply(u,r,u),hn.multiply(c.localRotation,u,f),hn.normalize(c.localRotation,c.localRotation),l&&n.dirtifyLocal(i,c)}}}(),this.rotateLocal=function(){var r=hn.create();return function(i,o,a,s,l){a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=!0),typeof o=="number"&&(o=Ne.fromValues(o,a,s));var c=i.transformable;hn.fromEuler(r,o[0],o[1],o[2]),hn.mul(c.localRotation,c.localRotation,r),l&&n.dirtifyLocal(i,c)}}(),this.setEulerAngles=function(){var r=hn.create();return function(i,o,a,s,l){a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=!0),typeof o=="number"&&(o=Ne.fromValues(o,a,s));var c=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,o);else{hn.fromEuler(c.localRotation,o[0],o[1],o[2]);var u=n.getRotation(i.parentNode);hn.copy(r,hn.invert(hn.create(),u)),hn.mul(c.localRotation,c.localRotation,r),l&&n.dirtifyLocal(i,c)}}}(),this.translateLocal=function(){return function(r,i,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=!0),typeof i=="number"&&(i=Ne.fromValues(i,o,a));var l=r.transformable;Ne.equals(i,Ne.create())||(Ne.transformQuat(i,i,l.localRotation),Ne.add(l.localPosition,l.localPosition,i),s&&n.dirtifyLocal(r,l))}}(),this.setPosition=function(){var r=Qe.create(),i=Ne.create();return function(o,a,s){s===void 0&&(s=!0);var l=o.transformable;if(i[0]=a[0],i[1]=a[1],i[2]=a[2]||0,!Ne.equals(n.getPosition(o),i)){if(Ne.copy(l.position,i),o.parentNode===null||!o.parentNode.transformable)Ne.copy(l.localPosition,i);else{var c=o.parentNode.transformable;Qe.copy(r,c.worldTransform),Qe.invert(r,r),Ne.transformMat4(l.localPosition,i,r)}s&&n.dirtifyLocal(o,l)}}}(),this.setLocalPosition=function(){var r=Ne.create();return function(i,o,a){a===void 0&&(a=!0);var s=i.transformable;r[0]=o[0],r[1]=o[1],r[2]=o[2]||0,!Ne.equals(s.localPosition,r)&&(Ne.copy(s.localPosition,r),a&&n.dirtifyLocal(i,s))}}(),this.translate=function(){var r=Ne.create(),i=Ne.create(),o=Ne.create();return function(a,s,l,c,u){l===void 0&&(l=0),c===void 0&&(c=0),u===void 0&&(u=!0),typeof s=="number"&&(s=Ne.set(i,s,l,c)),!Ne.equals(s,r)&&(Ne.add(o,n.getPosition(a),s),n.setPosition(a,o,u))}}(),this.setRotation=function(){var r=hn.create();return function(i,o,a,s,l,c){c===void 0&&(c=!0);var u=i.transformable;if(typeof o=="number"&&(o=hn.fromValues(o,a,s,l)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,o);else{var f=n.getRotation(i.parentNode);hn.copy(r,f),hn.invert(r,r),hn.multiply(u.localRotation,r,o),hn.normalize(u.localRotation,u.localRotation),c&&n.dirtifyLocal(i,u)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=Qe.create(),i=Ne.create(),o=hn.fromValues(0,0,0,1);return function(a){var s=a.localSkew[0]!==0||a.localSkew[1]!==0;if(s){if(Qe.fromRotationTranslationScaleOrigin(a.localTransform,a.localRotation,a.localPosition,Ne.fromValues(1,1,1),a.origin),a.localSkew[0]!==0||a.localSkew[1]!==0){var l=Qe.identity(r);l[4]=Math.tan(a.localSkew[0]),l[1]=Math.tan(a.localSkew[1]),Qe.multiply(a.localTransform,a.localTransform,l)}var c=Qe.fromRotationTranslationScaleOrigin(r,o,i,a.localScale,a.origin);Qe.multiply(a.localTransform,a.localTransform,c)}else Qe.fromRotationTranslationScaleOrigin(a.localTransform,a.localRotation,a.localPosition,a.localScale,a.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,o=!1;t.parentNode&&(o=t.parentNode!==n,this.detach(t)),t.parentNode=n,on(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var a=n.sortable;(!((i=a?.sorted)===null||i===void 0)&&i.length||t.parsedStyle.zIndex)&&(a.dirtyChildren.indexOf(t)===-1&&a.dirtyChildren.push(t),a.dirty=!0,a.dirtyReason=a2.ADDED);var s=t.transformable;s&&this.dirtifyWorld(t,s),s.frozen&&this.unfreezeParentToRoot(t),o&&t.dispatchEvent(Dce)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,o=t.parentNode.sortable;(!((n=o?.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(o.dirtyChildren.indexOf(t)===-1&&o.dirtyChildren.push(t),o.dirty=!0,o.dirtyReason=a2.REMOVED);var a=t.parentNode.childNodes.indexOf(t);a>-1&&t.parentNode.childNodes.splice(a,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.getGeometryBounds(),t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var o=t.transformable;if(!(n[0]===o.origin[0]&&n[1]===o.origin[1]&&n[2]===o.origin[2])){var a=o.origin;a[0]=n[0],a[1]=n[1],a[2]=n[2]||0,this.dirtifyLocal(t,o)}},e.prototype.setLocalEulerAngles=function(t,n,r,i,o){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=!0),typeof n=="number"&&(n=Ne.fromValues(n,r,i));var a=t.transformable;hn.fromEuler(a.localRotation,n[0],n[1],n[2]),o&&this.dirtifyLocal(t,a)},e.prototype.scaleLocal=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable;Ne.multiply(i.localScale,i.localScale,Ne.fromValues(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(t,i)},e.prototype.setLocalScale=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable,o=Ne.fromValues(n[0],n[1],n[2]||i.localScale[2]);Ne.equals(o,i.localScale)||(Ne.copy(i.localScale,o),r&&this.dirtifyLocal(t,i))},e.prototype.setLocalRotation=function(t,n,r,i,o,a){a===void 0&&(a=!0),typeof n=="number"&&(n=hn.fromValues(n,r,i,o));var s=t.transformable;hn.copy(s.localRotation,n),a&&this.dirtifyLocal(t,s)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=Yu.fromValues(n,r));var i=t.transformable;Yu.copy(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,o){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=o,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var o=G(i,2),a=o[0],s=o[1];s.affectChildren?a.forEach(function(l){r(l,s)}):r(a,s)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)ZR(r),r=r.parentNode;n&&t.forEach(function(i){ZR(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var o=this.displayObjectDependencyMap.get(n);if(o&&o[t]){var a=o[t].indexOf(i);o[t].splice(a,1)}}if(r){var s=this.displayObjectDependencyMap.get(r);s||(this.displayObjectDependencyMap.set(r,{}),s=this.displayObjectDependencyMap.get(r)),s[t]||(s[t]=[]),s[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(o){n.dirtifyToRoot(o,!0),o.dispatchEvent(new rf(nn.ATTR_MODIFIED,o,n,n,i,rf.MODIFICATION,n,n)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return Qe.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return Qe.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return Qe.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=Qe.getTranslation(Ne.create(),n),i=Qe.getRotation(hn.create(),n),o=Qe.getScaling(Ne.create(),n);this.setLocalScale(t,o,!1),this.setLocalPosition(t,r,!1),this.setLocalRotation(t,i,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(vi.isEmpty(i))return null;var o=r||new vi;return o.setFromTransformedAABB(i,this.getWorldTransform(t)),o},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry;r.dirty&&He.styleValueRegistry.updateGeometry(t);var i=n?r.renderBounds:r.contentBounds||null;return i||new vi},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var o=n?i.renderBounds:i.bounds,a=this.getTransformedGeometryBounds(t,n,o),s=t.childNodes;if(s.forEach(function(u){var f=r.getBounds(u,n);f&&(a?a.add(f):(a=o||new vi,a.update(f.center,f.halfExtents)))}),a||(a=new vi),n){var l=lE(t);if(l){var c=l.parsedStyle.clipPath.getBounds(n);a?c&&(a=c.intersection(a)):a.update(c.center,c.halfExtents)}}return n?(i.renderBounds=a,i.renderBoundsDirty=!1):(i.bounds=a,i.boundsDirty=!1),a},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=Qe.create();t.parentNode.transformable&&(n=Qe.invert(Qe.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!vi.isEmpty(r)){var i=new vi;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,o=this.getGeometryBounds(t);vi.isEmpty(o)||(i=new vi,i.setFromTransformedAABB(o,this.getWorldTransform(t)));var a=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=G(i.getMin(),2),l=s[0],c=s[1],u=G(i.getMax(),2),f=u[0],p=u[1];return new U0(l+(a?.left||0),c+(a?.top||0),f-l,p-c)}return new U0(a?.left||0,a?.top||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(o){var a=o.transformable;a.dirtyFlag||r.dirtifyWorldInternal(o,a)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?Qe.copy(n.worldTransform,n.localTransform):Qe.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),lh={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},JR=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Rce=/[!%),.:;?\]}'""]/,Fce=/[$('"]/,Bce=/[!),.:;?\]}'""]/,jce=/[([{'"]/,Vce=/[)\]'"?!:;,.]/,Hce=/[(['"...]/,Wce=/[!%),.:;?\]}'"]/,qce=/[$([{'"#]/,Uce=new RegExp("".concat(Rce.source,"|").concat(Bce.source,"|").concat(Vce.source,"|").concat(Wce.source)),Gce=new RegExp("".concat(Fce.source,"|").concat(jce.source,"|").concat(Hce.source,"|").concat(qce.source)),$ce=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(Gce.exec(i)||Uce.exec(r)))},this.trimByKinsokuShorui=function(r){var i=qe([],G(r),!1),o=i[i.length-2];if(!o)return r;var a=o[o.length-1];return i[i.length-2]=o.slice(0,-1),i[i.length-1]=a+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});o.font=t;var a=lh.MetricsString+lh.BaselineSymbol,s=Math.ceil(o.measureText(a).width),l=Math.ceil(o.measureText(lh.BaselineSymbol).width),c=lh.HeightMultiplier*l;l=l*lh.BaselineMultiplier|0,i.width=s,i.height=c,o.fillStyle="#f00",o.fillRect(0,0,s,c),o.font=t,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,l);var u=o.getImageData(0,0,s||1,c||1).data,f=u.length,p=s*4,d=0,h=0,m=!1;for(d=0;d<l;++d){for(var g=0;g<p;g+=4)if(u[h+g]!==255){m=!0;break}if(!m)h+=p;else break}for(r.ascent=l-d,h=f-p,m=!1,d=c;d>l;--d){for(var g=0;g<p;g+=4)if(u[h+g]!==255){m=!0;break}if(!m)h-=p;else break}return r.descent=d-l,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,o=i===void 0?16:i,a=n.wordWrap,s=a===void 0?!1:a,l=n.lineHeight,c=n.lineWidth,u=c===void 0?1:c,f=n.textBaseline,p=f===void 0?"alphabetic":f,d=n.textAlign,h=d===void 0?"start":d,m=n.letterSpacing,g=m===void 0?0:m,v=n.textPath;n.textPathSide,n.textPathStartOffset;var y=n.leading,x=y===void 0?0:y,_=hce(n),w=this.measureFont(_,r);w.fontSize===0&&(w.fontSize=o,w.ascent=o);var S=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);S.font=_,n.isOverflowing=!1;var M=s?this.wordWrap(t,n,r):t,O=M.split(/(?:\r\n|\r|\n)/),E=new Array(O.length),P=0;if(v){v.getTotalLength();for(var k=0;k<O.length;k++)var A=S.measureText(O[k]).width+(O[k].length-1)*g}else{for(var k=0;k<O.length;k++){var N=S.measureText(O[k]).width+(O[k].length-1)*g;E[k]=N,P=Math.max(P,N)}var A=P+u,L=l||w.fontSize+u,z=Math.max(L,w.fontSize+u)+(O.length-1)*(L+x);L+=x;var B=0;return p==="middle"?B=-z/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?B=-z:(p==="top"||p==="hanging")&&(B=0),{font:_,width:A,height:z,lines:O,lineWidths:E,lineHeight:L,maxLineWidth:P,fontProperties:w,lineMetrics:E.map(function(j,W){var Z=0;return h==="center"||h==="middle"?Z-=j/2:(h==="right"||h==="end")&&(Z-=j),new U0(Z-u/2,B+W*L,j+u,L)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,o=n.wordWrapWidth,a=o===void 0?0:o,s=n.letterSpacing,l=s===void 0?0:s,c=n.maxLines,u=c===void 0?1/0:c,f=n.textOverflow,p=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),d=a+l,h="";f==="ellipsis"?h="...":f&&f!=="clip"&&(h=f);for(var m=[],g=0,v=0,y={},x=function(B){return i.getFromCache(B,l,y,p)},_=Array.from(h).reduce(function(B,H){return B+x(H)},0),w=Array.from(t),S=0;S<w.length;S++){var M=w[S],O=t[S-1],E=t[S+1],P=x(M);if(this.isNewline(M)){if(g++,g>=u){n.isOverflowing=!0;break}v=0,m[g]="";continue}if(v>0&&v+P>d){if(g+1>=u){if(n.isOverflowing=!0,_>0&&_<=d){for(var k=m[g].length,A=0,N=k,L=0;L<k;L++){var z=x(m[g][L]);if(A+z+_>d){N=L;break}A+=z}m[g]=(m[g]||"").slice(0,N)+h}break}if(g++,v=0,m[g]="",this.isBreakingSpace(M))continue;this.canBreakInLastChar(M)||(m=this.trimToBreakable(m),v=this.sumTextWidthByCache(m[g]||"",y)),this.shouldBreakByKinsokuShorui(M,E)&&(m=this.trimByKinsokuShorui(m),v+=x(O||""))}v+=P,m[g]=(m[g]||"")+M}return m.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:lh.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:lh.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=qe([],G(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var o=r.slice(i,i+1),a=this.isBreakingSpace(o),s=i+1,l=i+(a?0:1);return n[n.length-1]+=r.slice(s,r.length),n[n.length-2]=r.slice(0,l),n},e.prototype.canBreakInLastChar=function(t){return!(t&&JR.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!JR.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var o=r[t];if(typeof o!="number"){var a=t.length*n;o=i.measureText(t).width+a,r[t]=o}return o},e}(),He={},Yce=function(){var e,t=new Cce,n=new Sce;return e={},e[Ge.CIRCLE]=new xce,e[Ge.ELLIPSE]=new bce,e[Ge.RECT]=t,e[Ge.IMAGE]=t,e[Ge.GROUP]=new Mce,e[Ge.LINE]=new _ce,e[Ge.TEXT]=new Oce(He),e[Ge.POLYLINE]=n,e[Ge.POLYGON]=n,e[Ge.PATH]=new wce,e[Ge.HTML]=new kce,e[Ge.MESH]=null,e}(),Xce=function(){var e,t=new Ile,n=new Jk;return e={},e[wt.PERCENTAGE]=null,e[wt.NUMBER]=new Ble,e[wt.ANGLE]=new Nle,e[wt.DEFINED_PATH]=new Lle,e[wt.PAINT]=t,e[wt.COLOR]=t,e[wt.FILTER]=new Dle,e[wt.LENGTH]=n,e[wt.LENGTH_PERCENTAGE]=n,e[wt.LENGTH_PERCENTAGE_12]=new zle,e[wt.LENGTH_PERCENTAGE_14]=new Rle,e[wt.COORDINATE]=new Jk,e[wt.OFFSET_DISTANCE]=new jle,e[wt.OPACITY_VALUE]=new Vle,e[wt.PATH]=new Hle,e[wt.LIST_OF_POINTS]=new Wle,e[wt.SHADOW_BLUR]=new qle,e[wt.TEXT]=new Ule,e[wt.TEXT_TRANSFORM]=new Gle,e[wt.TRANSFORM]=new gce,e[wt.TRANSFORM_ORIGIN]=new vce,e[wt.Z_INDEX]=new yce,e[wt.MARKER]=new Fle,e}(),Kce=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};He.CameraContribution=nE;He.AnimationTimeline=null;He.EasingFunction=null;He.offscreenCanvasCreator=new Pce;He.sceneGraphSelector=new Ice;He.sceneGraphService=new zce(He);He.textService=new $ce(He);He.geometryUpdaterFactory=Yce;He.CSSPropertySyntaxFactory=Xce;He.styleValueRegistry=new Ple(He);He.layoutRegistry=null;He.globalThis=Kce();He.enableCSSParsing=!1;He.enableDataset=!1;He.enableStyleSyntax=!0;He.enableAttributeDashCased=!1;He.enableSizeAttenuation=!1;var Zce=0;var QR=new rf(nn.INSERTED,null,"","","",0,"",""),eF=new rf(nn.REMOVED,null,"","","",0,"",""),Jce=new or(nn.DESTROY),Qce=function(e){ut(t,e);function t(){var n=e.call(this)||this;return n.entity=Zce++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:pF.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=He.enableCSSParsing?{opacity:ri,fillOpacity:ri,strokeOpacity:ri,fill:ri,stroke:ri,transform:ri,transformOrigin:ri,visibility:ri,pointerEvents:ri,lineWidth:ri,lineCap:ri,lineJoin:ri,increasedLineWidthForHitTesting:ri,fontSize:ri,fontFamily:ri,fontStyle:ri,fontWeight:ri,fontVariant:ri,textAlign:ri,textBaseline:ri,textTransform:ri,zIndex:ri,filter:ri,shadowType:ri}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(Tr)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(kse);return He.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(QR.relatedNode=this,n.dispatchEvent(QR)),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return eF.relatedNode=this,n.dispatchEvent(eF),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),He.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return He.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return He.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return He.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return He.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return He.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return He.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return He.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(He.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(o){return o!==r&&n(o)?(i=o,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(o){o!==r&&n(o)&&i.push(o)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this);r.forEach(function(a,s){var l;return(l=n.parentNode)===null||l===void 0?void 0:l.appendChild(a,o+s+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this),a=G(r),s=a[0],l=a.slice(1);this.parentNode.appendChild(s,o),(n=s).after.apply(n,qe([],G(l),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,qe([],G(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o){return n.appendChild(o)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o,a){return n.appendChild(o,a)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,qe([],G(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(Jce),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return He.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return He.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return He.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return He.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return He.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(zse(n))return He.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(He.enableAttributeDashCased){var i=$k(n);r=this.attributes[i]}return He.enableCSSParsing&&on(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i,o){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(Tr)},t.prototype.getAttributeNode=function(n){throw new Error(Tr)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(Tr)},t.prototype.hasAttributeNS=function(n,r){throw new Error(Tr)},t.prototype.removeAttributeNS=function(n,r){throw new Error(Tr)},t.prototype.removeAttributeNode=function(n){throw new Error(Tr)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(Tr)},t.prototype.setAttributeNode=function(n){throw new Error(Tr)},t.prototype.setAttributeNodeNS=function(n){throw new Error(Tr)},t.prototype.toggleAttribute=function(n,r){throw new Error(Tr)},t}(lo);function ir(e){return!!e?.nodeName}var tF=He.globalThis.Proxy?He.globalThis.Proxy:function(){},ef=new rf(nn.ATTR_MODIFIED,null,null,null,null,rf.MODIFICATION,null,null),eue={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},tue={fill:T_,stroke:T_,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},nue=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],rue=qe(qe([],G(nue),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),nF="data-",Ri=function(e){ut(t,e);function t(n){var r=e.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||Ge.GROUP,He.enableCSSParsing?(Object.assign(r.attributes,eue),Object.assign(r.parsedStyle,tue,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),He.enableDataset&&(r.dataset=new tF({},{get:function(i,o){var a="".concat(nF).concat(zR(o));return i[a]!==void 0?i[a]:r.getAttribute(a)},set:function(i,o,a){return r.setAttribute("".concat(nF).concat(zR(o)),a),!0}})),He.enableStyleSyntax&&(r.style=new tF({setProperty:function(i,o){r.setAttribute(i,o)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,o){return i[o]!==void 0?i[o]:r.getAttribute(o)},set:function(i,o,a){return r.setAttribute(o,a),!0}})),r}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=Te({},this.attributes);for(var o in i){var a=i[o];ir(a)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(i[o]=a.cloneNode(n)),r&&(i[o]=r(o,a))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(l){if(!l.style.isMarker){var c=l.cloneNode(n);s.appendChild(c)}}),s},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};He.enableCSSParsing&&(i.usedAttributes=rue);var o=n;if(He.enableAttributeDashCased){o={};for(var a in n){var s=$k(a);o[s]=n[a]}}He.styleValueRegistry.processProperties(this,o,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0),He.enableAttributeDashCased&&(n=$k(n)),!mr(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:o}),e.prototype.setAttribute.call(this,n,r))},t.prototype.internalSetAttribute=function(n,r,i){var o;i===void 0&&(i={});var a=this.renderable,s=this.attributes[n],l=this.parsedStyle[n];He.styleValueRegistry.processProperties(this,(o={},o[n]=r,o),i),a.dirty=!0;var c=this.parsedStyle[n];this.isConnected&&(ef.relatedNode=this,ef.prevValue=s,ef.newValue=r,ef.attrName=n,ef.prevParsedValue=l,ef.newParsedValue=c,this.isMutationObserved?this.dispatchEvent(ef):(ef.target=this,this.ownerDocument.defaultView.dispatchEvent(ef,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,s,r,l,c)},t.prototype.getBBox=function(){var n=this.getBounds(),r=G(n.getMin(),2),i=r[0],o=r[1],a=G(n.getMax(),2),s=a[0],l=a[1];return new U0(i,o,s-i,l-o)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),He.sceneGraphService.setOrigin(this,ca(n,r,i)),this},t.prototype.getOrigin=function(){return He.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),He.sceneGraphService.setPosition(this,ca(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),He.sceneGraphService.setLocalPosition(this,ca(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),He.sceneGraphService.translate(this,ca(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),He.sceneGraphService.translateLocal(this,ca(n,r,i)),this},t.prototype.getPosition=function(){return He.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return He.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=ca(n,r,i)),He.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=ca(n,r,i)),He.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return He.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return He.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=G(Dk(Ne.create(),He.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Nl(r)},t.prototype.getLocalEulerAngles=function(){var n=G(Dk(Ne.create(),He.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Nl(r)},t.prototype.setEulerAngles=function(n){return He.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return He.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return on(r)&&on(i)?He.sceneGraphService.rotateLocal(this,0,0,n):He.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return on(r)&&on(i)?He.sceneGraphService.rotate(this,0,0,n):He.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,o){return He.sceneGraphService.setRotation(this,n,r,i,o),this},t.prototype.setLocalRotation=function(n,r,i,o){return He.sceneGraphService.setLocalRotation(this,n,r,i,o),this},t.prototype.setLocalSkew=function(n,r){return He.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return He.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return He.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return He.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return He.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return He.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return He.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){He.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,o=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return o?o.play(this,n,r):null},t.prototype.isVisible=function(){var n,r;return He.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,qe([],G(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,qe([],G(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=G(r,2),a=o[0],s=o[1];return a?Al(a)?(Object.keys(a).forEach(function(l){n.setAttribute(l,a[l])}),this):r.length===2?(this.setAttribute(a,s),this):this.attributes[a]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=G(Qe.getTranslation(Ne.create(),r),2),o=i[0],a=i[1],s=G(Qe.getScaling(Ne.create(),r),2),l=s[0],c=s[1],u=Qe.getRotation(hn.create(),r),f=G(Dk(Ne.create(),u),3),p=f[0],d=f[2];return bse(p||d,o,a,l,c)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=G(NR(n),5),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4];this.setEulerAngles(l).setPosition(i,o).setLocalScale(a,s)},t.prototype.setLocalMatrix=function(n){var r=G(NR(n),5),i=r[0],o=r[1],a=r[2],s=r[3],l=r[4];this.setLocalEulerAngles(l).setLocalPosition(i,o).setLocalScale(a,s)},t.prototype.show=function(){He.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){He.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}(Qce),ys=function(e){ut(t,e);function t(n){return n===void 0&&(n={}),e.call(this,Te({type:Ge.CIRCLE},n))||this}return t}(Ri),mh=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,o=Wn(n,["style"]);return r=e.call(this,Te({style:He.enableCSSParsing?Te({},i):Te({},i)},o))||this,r.isCustomElement=!0,r}return t}(Ri),Y0=function(e){ut(t,e);function t(n){return n===void 0&&(n={}),e.call(this,Te({type:Ge.ELLIPSE},n))||this}return t}(Ri),vr=function(e){ut(t,e);function t(n){return n===void 0&&(n={}),e.call(this,Te({type:Ge.GROUP},n))||this}return t}(Ri),Sp=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,o=Wn(n,["style"]);return r=e.call(this,Te({type:Ge.HTML,style:He.enableCSSParsing?Te({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):Te({},i)},o))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=Qe.invert(Qe.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!vi.isEmpty(r)){var i=new vi;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(Ri),X0=function(e){ut(t,e);function t(n){return n===void 0&&(n={}),e.call(this,Te({type:Ge.IMAGE},n))||this}return t}(Ri),xc=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,o=Wn(n,["style"]);r=e.call(this,Te({type:Ge.LINE,style:Te({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},o))||this,r.markerStartAngle=0,r.markerEndAngle=0;var a=r.parsedStyle,s=a.markerStart,l=a.markerEnd;return s&&ir(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&ir(l)&&(r.markerEndAngle=l.getLocalEulerAngles(),r.appendChild(l)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&ir(o)&&(this.markerStartAngle=0,o.remove()),a&&ir(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"&&(o&&ir(o)&&(this.markerEndAngle=0,o.remove()),a&&ir(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,l=r.x1,c=r.x2,u=r.y1,f=r.y2,p=n?i:o;if(!(!p||!ir(p))){var d=0,h,m,g,v,y,x;n?(g=l,v=u,h=c-l,m=f-u,y=a||0,x=this.markerStartAngle):(g=c,v=f,h=l-c,m=u-f,y=s||0,x=this.markerEndAngle),d=Math.atan2(m,h),p.setLocalEulerAngles(d*180/Math.PI+x),p.setLocalPosition(g+Math.cos(d)*y,v+Math.sin(d)*y)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,o=i.x1,a=i.y1,s=i.x2,l=i.y2,c=Nk(o,a,s,l,n),u=c.x,f=c.y,p=Ne.transformMat4(Ne.create(),Ne.fromValues(u,f,0),r?this.getWorldTransform():this.getLocalTransform());return new So(p[0],p[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,o=n.x2,a=n.y2;return Pk(r,i,o,a)},t}(Ri),Gr=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,o=Wn(n,["style"]);r=e.call(this,Te({type:Ge.PATH,style:He.enableCSSParsing?Te({d:"",miterLimit:""},i):Te({},i),initialParsedStyle:He.enableCSSParsing?null:{miterLimit:4,d:Te({},dF)}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,l=a.markerEnd,c=a.markerMid;return s&&ir(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&ir(c)&&r.placeMarkerMid(c),l&&ir(l)&&(r.markerEndAngle=l.getLocalEulerAngles(),r.appendChild(l)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&ir(o)&&(this.markerStartAngle=0,o.remove()),a&&ir(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&ir(o)&&(this.markerEndAngle=0,o.remove()),a&&ir(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,l=n?i:o;if(!(!l||!ir(l))){var c=0,u,f,p,d,h,m;if(n){var g=G(this.getStartTangent(),2),v=g[0],y=g[1];p=y[0],d=y[1],u=v[0]-y[0],f=v[1]-y[1],h=a||0,m=this.markerStartAngle}else{var x=G(this.getEndTangent(),2),v=x[0],y=x[1];p=y[0],d=y[1],u=v[0]-y[0],f=v[1]-y[1],h=s||0,m=this.markerEndAngle}c=Math.atan2(f,u),l.setLocalEulerAngles(c*180/Math.PI+m),l.setLocalPosition(p+Math.cos(c)*h,d+Math.sin(c)*h)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(c){c.remove()}),n&&ir(n))for(var i=1;i<r.length-1;i++){var o=G(r[i].currentPoint,2),a=o[0],s=o[1],l=i===1?n:n.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(a,s)}},t.prototype.getTotalLength=function(){return P_(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,o=I6(i,n),a=o.x,s=o.y,l=Ne.transformMat4(Ne.create(),Ne.fromValues(a,s,0),r?this.getWorldTransform():this.getLocalTransform());return new So(l[0],l[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*P_(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,o=n[1].currentPoint,a=n[1].startTangent;r=[],a?(r.push([i[0]-a[0],i[1]-a[1]]),r.push([i[0],i[1]])):(r.push([o[0],o[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var o=n[r-2].currentPoint,a=n[r-1].currentPoint,s=n[r-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},t}(Ri),gh=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,o=Wn(n,["style"]);r=e.call(this,Te({type:Ge.POLYGON,style:He.enableCSSParsing?Te({points:"",miterLimit:"",isClosed:!0},i):Te({},i),initialParsedStyle:He.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,l=a.markerEnd,c=a.markerMid;return s&&ir(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&ir(c)&&r.placeMarkerMid(c),l&&ir(l)&&(r.markerEndAngle=l.getLocalEulerAngles(),r.appendChild(l)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&ir(o)&&(this.markerStartAngle=0,o.remove()),a&&ir(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&ir(o)&&(this.markerEndAngle=0,o.remove()),a&&ir(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,l=r.points,c=(l||{}).points,u=n?i:o;if(!(!u||!ir(u)||!c)){var f=0,p,d,h,m,g,v;if(h=c[0][0],m=c[0][1],n)p=c[1][0]-c[0][0],d=c[1][1]-c[0][1],g=a||0,v=this.markerStartAngle;else{var y=c.length;this.parsedStyle.isClosed?(p=c[y-1][0]-c[0][0],d=c[y-1][1]-c[0][1]):(h=c[y-1][0],m=c[y-1][1],p=c[y-2][0]-c[y-1][0],d=c[y-2][1]-c[y-1][1]),g=s||0,v=this.markerEndAngle}f=Math.atan2(d,p),u.setLocalEulerAngles(f*180/Math.PI+v),u.setLocalPosition(h+Math.cos(f)*g,m+Math.sin(f)*g)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(c){c.remove()}),this.markerMidList=[],n&&ir(n)&&i)for(var o=1;o<(this.parsedStyle.isClosed?i.length:i.length-1);o++){var a=i[o][0],s=i[o][1],l=o===1?n:n.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(a,s)}},t}(Ri),K0=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Wn(n,["style"]);return e.call(this,Te({type:Ge.POLYLINE,style:He.enableCSSParsing?Te({points:"",miterLimit:"",isClosed:!1},r):Te({},r),initialParsedStyle:He.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return ale(this)},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],a=0,s,l,c=this.getTotalLength();i.forEach(function(g,v){i[v+1]&&(s=[0,0],s[0]=a/c,l=Pk(g[0],g[1],i[v+1][0],i[v+1][1]),a+=l,s[1]=a/c,o.push(s))}),this.parsedStyle.points.segments=o}var u=0,f=0;this.parsedStyle.points.segments.forEach(function(g,v){n>=g[0]&&n<=g[1]&&(u=(n-g[0])/(g[1]-g[0]),f=v)});var p=Nk(i[f][0],i[f][1],i[f+1][0],i[f+1][1],u),d=p.x,h=p.y,m=Ne.transformMat4(Ne.create(),Ne.fromValues(d,h,0),r?this.getWorldTransform():this.getLocalTransform());return new So(m[0],m[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(gh),Ks=function(e){ut(t,e);function t(n){return n===void 0&&(n={}),e.call(this,Te({type:Ge.RECT},n))||this}return t}(Ri),Uo=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Wn(n,["style"]);return e.call(this,Te({type:Ge.TEXT,style:He.enableCSSParsing?Te({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):Te({fill:"black"},r)},i))||this}return t.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},t}(Ri),iue=function(){function e(){this.registry={},this.define(Ge.CIRCLE,ys),this.define(Ge.ELLIPSE,Y0),this.define(Ge.RECT,Ks),this.define(Ge.IMAGE,X0),this.define(Ge.LINE,xc),this.define(Ge.GROUP,vr),this.define(Ge.PATH,Gr),this.define(Ge.POLYGON,gh),this.define(Ge.POLYLINE,K0),this.define(Ge.TEXT,Uo),this.define(Ge.HTML,Sp)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),F_={number:function(e){return new Fr(e)},percent:function(e){return new Fr(e,"%")},px:function(e){return new Fr(e,"px")},em:function(e){return new Fr(e,"em")},rem:function(e){return new Fr(e,"rem")},deg:function(e){return new Fr(e,"deg")},grad:function(e){return new Fr(e,"grad")},rad:function(e){return new Fr(e,"rad")},turn:function(e){return new Fr(e,"turn")},s:function(e){return new Fr(e,"s")},ms:function(e){return new Fr(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,o=e.syntax;He.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:o})},registerLayout:function(e,t){He.layoutRegistry.registerLayout(e,t)}},oue=function(e){ut(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new He.AnimationTimeline(n)}catch{}var r={};return sE.forEach(function(i){var o=i.n,a=i.inh,s=i.d;a&&s&&(r[o]=q0(s)?s(Ge.GROUP):s)}),n.documentElement=new vr({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?Uo:vr);var o=new i(r);return o.ownerDocument=this,o},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(Tr)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}},t.prototype.elementsFromBBox=function(n,r,i,o){var a=this.defaultView.context.rBushRoot,s=a.search({minX:n,minY:r,maxX:i,maxY:o}),l=[];return s.forEach(function(c){var u=c.displayObject,f=u.parsedStyle.pointerEvents,p=f===void 0?"auto":f,d=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(p);(!d||d&&u.isVisible())&&!u.isCulled()&&u.isInteractive()&&l.push(u)}),l.sort(function(c,u){return u.sortable.renderOrder-c.sortable.renderOrder}),l},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height;if(o<0||a<0||o>l||a>c)return null;var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,p=u.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]}).picked;return d&&d[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return Bc(this,void 0,void 0,function(){var i,o,a,s,l,c,u,f,p,d;return jc(this,function(h){switch(h.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height,o<0||a<0||o>l||a>c?[2,null]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,p=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]})]);case 1:return d=h.sent().picked,[2,d&&d[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height;if(o<0||a<0||o>l||a>c)return[];var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,p=u.y,d=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]}).picked;return d[d.length-1]!==this.documentElement&&d.push(this.documentElement),d},t.prototype.elementsFromPoint=function(n,r){return Bc(this,void 0,void 0,function(){var i,o,a,s,l,c,u,f,p,d;return jc(this,function(h){switch(h.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,c=s.height,o<0||a<0||o>l||a>c?[2,[]]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,p=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:p},picked:[]})]);case 1:return d=h.sent().picked,d[d.length-1]!==this.documentElement&&d.push(this.documentElement),[2,d]}})})},t.prototype.appendChild=function(n,r){throw new Error(H0)},t.prototype.insertBefore=function(n,r){throw new Error(H0)},t.prototype.removeChild=function(n,r){throw new Error(H0)},t.prototype.replaceChild=function(n,r,i){throw new Error(H0)},t.prototype.append=function(){throw new Error(H0)},t.prototype.prepend=function(){throw new Error(H0)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(lo),aue=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,o=this.strategies;r.hooks.cull.tap(e.tag,function(a){if(a){var s=a.cullable;return o.length===0?s.visible=i.unculledEntities.indexOf(a.entity)>-1:s.visible=o.every(function(l){return l.isVisible(n,a)}),!a.isCulled()&&a.isVisible()?a:(a.dispatchEvent(new or(nn.CULLED)),null)}return a}),r.hooks.afterRender.tap(e.tag,function(a){a.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),sue=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new eE(null),this.rootWheelEvent=new tE(null),this.onPointerMove=function(n){var r,i,o,a,s=(a=(o=t.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView;if(!(s.supportsTouchEvents&&n.pointerType==="touch")){var l=t.normalizeToPointerEvent(n,s);try{for(var c=$i(l),u=c.next();!u.done;u=c.next()){var f=u.value,p=t.bootstrapEvent(t.rootPointerEvent,f,s,n);t.context.eventService.mapEvent(p)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,o,a,s=(a=(o=t.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView,l=t.normalizeToPointerEvent(n,s);try{for(var c=$i(l),u=c.next();!u.done;u=c.next()){var f=u.value,p=t.bootstrapEvent(t.rootPointerEvent,f,s,n);t.context.eventService.mapEvent(p)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var a=n.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}).picked;return a[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(o){var a=n.normalizeWheelEvent(o);n.context.eventService.mapEvent(a)}),r.hooks.pointerDown.tap(e.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var l=n.normalizeToPointerEvent(o,i);if(n.autoPreventDefault&&l[0].isNormalized){var c=o.cancelable||!("cancelable"in o);c&&o.preventDefault()}try{for(var u=$i(l),f=u.next();!f.done;f=u.next()){var p=f.value,d=n.bootstrapEvent(n.rootPointerEvent,p,i,o);n.context.eventService.mapEvent(d)}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var l=n.context.contextService.getDomElement(),c=n.context.eventService.isNativeEventFromCanvas(l,o),u=c?"":"outside",f=n.normalizeToPointerEvent(o,i);try{for(var p=$i(f),d=p.next();!d.done;d=p.next()){var h=d.value,m=n.bootstrapEvent(n.rootPointerEvent,h,i,o);m.type+=u,n.context.eventService.mapEvent(m)}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(o){var a,s,l=n.normalizeToPointerEvent(o,i);try{for(var c=$i(l),u=c.next();!u.done;u=c.next()){var f=u.value,p=n.bootstrapEvent(n.rootPointerEvent,f,i,o);n.context.eventService.mapEvent(p)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var o=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=o.x,s=o.y;t.viewport.x=a,t.viewport.y=s;var l=this.context.eventService.viewport2Canvas(t.viewport),c=l.x,u=l.y;return t.canvas.x=c,t.canvas.y=u,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=ece[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),i=r.x,o=r.y;n.viewport.x=i,n.viewport.y=o;var a=this.context.eventService.viewport2Canvas(n.viewport),s=a.x,l=a.y;return n.canvas.x=s,n.canvas.y=l,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=Qk.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i];mr(o.button)&&(o.button=0),mr(o.buttons)&&(o.buttons=1),mr(o.isPrimary)&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),mr(o.width)&&(o.width=o.radiusX||1),mr(o.height)&&(o.height=o.radiusY||1),mr(o.tiltX)&&(o.tiltX=0),mr(o.tiltY)&&(o.tiltY=0),mr(o.pointerType)&&(o.pointerType="touch"),mr(o.pointerId)&&(o.pointerId=o.identifier||0),mr(o.pressure)&&(o.pressure=o.force||.5),mr(o.twist)&&(o.twist=0),mr(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=t.type,r.push(o)}else if(n.isMouseEvent(t)){var a=t;mr(a.isPrimary)&&(a.isPrimary=!0),mr(a.width)&&(a.width=1),mr(a.height)&&(a.height=1),mr(a.tiltX)&&(a.tiltX=0),mr(a.tiltY)&&(a.tiltY=0),mr(a.pointerType)&&(a.pointerType="mouse"),mr(a.pointerId)&&(a.pointerId=Qle),mr(a.pressure)&&(a.pressure=.5),mr(a.twist)&&(a.twist=0),mr(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(t);return r},e.tag="Event",e}(),lue=[Ge.CIRCLE,Ge.ELLIPSE,Ge.IMAGE,Ge.RECT,Ge.LINE,Ge.POLYLINE,Ge.POLYGON,Ge.TEXT,Ge.PATH,Ge.HTML],cue=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,o=n.cullable;if(!o.enable)return!0;var a=n.getRenderBounds();if(vi.isEmpty(a))return!1;var s=t.getFrustum(),l=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,a,l||ch.INDETERMINATE,s.planes),o.visible=o.visibilityPlaneMask!==ch.OUTSIDE,o.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===ch.OUTSIDE||r===ch.INSIDE)return r;for(var o=ch.INSIDE,a=lue.indexOf(t.nodeName)>-1,s=0,l=i.length;s<l;++s){var c=1<<s;if(r&c&&!(a&&(s===4||s===5))){var u=i[s],f=u.normal,p=u.distance;if(Ne.dot(f,n.getPositiveFarPoint(i[s]))+p<0)return ch.OUTSIDE;Ne.dot(f,n.getNegativeFarPoint(i[s]))+p<0&&(o|=c)}}return o},e}(),uue=function(){function e(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return e.prototype.apply=function(t){var n=this,r,i=t.renderingService,o=t.renderingContext,a=t.rBushRoot,s=o.root.ownerDocument.defaultView;this.rBush=a;var l=function(d){var h=d.target;h.renderable.dirty=!0,i.dirtify()},c=function(d){var h=d.detail.affectChildren,m=d.target;h&&m.forEach(function(v){n.toSync.add(v)});for(var g=m;g;)g.renderable&&n.toSync.add(g),g=g.parentElement;i.dirtify()},u=function(d){var h=d.target;He.enableSizeAttenuation&&He.styleValueRegistry.updateSizeAttenuation(h,s.getCamera().getZoom()),He.enableCSSParsing&&He.styleValueRegistry.recalc(h),He.sceneGraphService.dirtifyToRoot(h),i.dirtify()},f=function(d){var h=d.target,m=h.rBushNode;m.aabb&&n.rBush.remove(m.aabb),n.toSync.delete(h),He.sceneGraphService.dirtifyToRoot(h),i.dirtify()};i.hooks.init.tap(e.tag,function(){s.addEventListener(nn.MOUNTED,u),s.addEventListener(nn.UNMOUNTED,f),s.addEventListener(nn.ATTR_MODIFIED,l),s.addEventListener(nn.BOUNDS_CHANGED,c)}),i.hooks.destroy.tap(e.tag,function(){s.removeEventListener(nn.MOUNTED,u),s.removeEventListener(nn.UNMOUNTED,f),s.removeEventListener(nn.ATTR_MODIFIED,l),s.removeEventListener(nn.BOUNDS_CHANGED,c),n.toSync.clear()});var p=(r=He.globalThis.requestIdleCallback)!==null&&r!==void 0?r:cE.bind(He.globalThis);i.hooks.endFrame.tap(e.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,p(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},e.prototype.syncRTree=function(t){var n=this;if(t===void 0&&(t=!1),!(!t&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var o=i.rBushNode;o&&o.aabb&&n.rBush.remove(o.aabb);var a=i.getRenderBounds();if(a){var s=i.renderable;t&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new vi),s.dirtyRenderBounds.update(a.center,a.halfExtents));var l=G(a.getMin(),2),c=l[0],u=l[1],f=G(a.getMax(),2),p=f[0],d=f[1];o.aabb||(o.aabb={}),o.aabb.displayObject=i,o.aabb.minX=c,o.aabb.minY=u,o.aabb.maxX=p,o.aabb.maxY=d}o.aabb&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.minX)&&!isNaN(o.aabb.minY)&&r.push(o.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},e.tag="Prepare",e}();var Ia=function(e){return e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged",e}(Ia||{}),rF=500,fue=.1,pue=1e3,qk=new or(nn.MOUNTED),Uk=new or(nn.UNMOUNTED),iF=new or(Ia.BEFORE_RENDER),due=new or(Ia.RERENDER),oF=new or(Ia.AFTER_RENDER),B_=function(e){ut(t,e);function t(n){var r=e.call(this)||this;r.Element=Ri,r.inited=!1,r.context={},r.document=new oue,r.document.defaultView=r,r.customElements=new iue;var i=n.container,o=n.canvas,a=n.offscreenCanvas,s=n.width,l=n.height,c=n.devicePixelRatio,u=n.renderer,f=n.background,p=n.cursor,d=n.document,h=n.requestAnimationFrame,m=n.cancelAnimationFrame,g=n.createImage,v=n.supportsPointerEvents,y=n.supportsTouchEvents,x=n.supportsCSSTransform,_=n.supportsMutipleCanvasesInOneContainer,w=n.useNativeClickEvent,S=n.alwaysTriggerPointerEventOnCanvas,M=n.isTouchEvent,O=n.isMouseEvent,E=n.dblClickSpeed;_||Yle(i,r);var P=s,k=l,A=c;return o&&(A=c||hh&&window.devicePixelRatio||1,A=A>=1?Math.ceil(A):1,P=s||Zle(o)||o.width/A,k=l||Jle(o)||o.height/A),a&&(He.offscreenCanvas=a),r.devicePixelRatio=A,r.requestAnimationFrame=h??cE.bind(He.globalThis),r.cancelAnimationFrame=m??PF.bind(He.globalThis),r.supportsTouchEvents=y??"ontouchstart"in He.globalThis,r.supportsPointerEvents=v??!!He.globalThis.PointerEvent,r.isTouchEvent=M??function(N){return r.supportsTouchEvents&&N instanceof He.globalThis.TouchEvent},r.isMouseEvent=O??function(N){return!He.globalThis.MouseEvent||N instanceof He.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(N instanceof He.globalThis.PointerEvent))},r.dblClickSpeed=E??200,r.initRenderingContext({container:i,canvas:o,width:P,height:k,renderer:u,offscreenCanvas:a,devicePixelRatio:A,cursor:p||"default",background:f||"transparent",createImage:g,document:d,supportsCSSTransform:x,useNativeClickEvent:w,alwaysTriggerPointerEventOnCanvas:S}),r.initDefaultCamera(P,k,u.clipSpaceNearZ),r.initRenderer(u,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var o=this,a=new He.CameraContribution;a.clipSpaceNearZ=i,a.setType(Or.EXPLORING,A_.DEFAULT).setPosition(n/2,r/2,rF).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,fue,pue),a.canvas=this,a.eventEmitter.on(lF.UPDATED,function(){o.context.renderingContext.renderReasons.add(nf.CAMERA_CHANGED),He.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=a},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){He.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new or(Ia.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var o=this.getRoot();this.unmountChildren(o),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new or(Ia.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var o=this.context.camera,a=o.getProjectionMode();o.setPosition(n/2,r/2,rF).setFocalPoint(n/2,r/2,0),a===Ys.ORTHOGRAPHIC?o.setOrthographic(n/-2,n/2,r/2,r/-2,o.getNear(),o.getFar()):o.setAspect(n/r),this.dispatchEvent(new or(Ia.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(n){var r=this;n&&(iF.detail=n,oF.detail=n),this.dispatchEvent(iF);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(due)}),this.dispatchEvent(oF)},t.prototype.run=function(){var n=this,r=function(i,o){n.render(o),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new hse,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new sue,new uue,new aue([new cue])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(Te(Te({},He),this.context)),this.context.renderingService=new Nce(He,this.context),this.context.eventService=new Tce(He,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var o=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){o.inited=!0,r?i?o.requestAnimationFrame(function(){o.dispatchEvent(new or(Ia.READY))}):o.dispatchEvent(new or(Ia.READY)):o.dispatchEvent(new or(Ia.RENDERER_CHANGED)),o.readyPromise&&o.resolveReadyPromise(),r||o.getRoot().forEach(function(a){var s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),o.mountChildren(o.getRoot()),n.getConfig().enableAutoRendering&&o.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(o){o.context=r.context,o.init(He)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),qe([],G(i?.getPlugins()),!1).reverse().forEach(function(o){o.destroy(He)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(Uk):(Uk.target=n,this.dispatchEvent(Uk,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(qk):(qk.target=n,this.dispatchEvent(qk,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(LF);var hue=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=uh(r),this.relAzimuth=uh(n),this.relRoll=uh(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Or.EXPLORING){var o=hn.setAxisAngle(hn.create(),[1,0,0],Pr((this.rotateWorld?1:-1)*this.relElevation)),a=hn.setAxisAngle(hn.create(),[0,1,0],Pr((this.rotateWorld?1:-1)*this.relAzimuth)),s=hn.setAxisAngle(hn.create(),[0,0,1],Pr(this.relRoll)),l=hn.multiply(hn.create(),a,o);l=hn.multiply(hn.create(),l,s);var c=Qe.fromQuat(Qe.create(),l);Qe.translate(this.matrix,this.matrix,[0,0,-this.distance]),Qe.multiply(this.matrix,this.matrix,c),Qe.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Or.ORBITING||this.type===Or.EXPLORING?this._getPosition():this.type===Or.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=ca(n,r,0),o=Ne.clone(this.position);return Ne.add(o,o,Ne.scale(Ne.create(),this.right,i[0])),Ne.add(o,o,Ne.scale(Ne.create(),this.up,i[1])),this._setPosition(o),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=Ne.clone(this.position),o=n*this.dollyingStep,a=this.distance+n*this.dollyingStep;return o=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,i[0]+=o*r[0],i[1]+=o*r[1],i[2]+=o*r[2],this._setPosition(i),this.type===Or.ORBITING||this.type===Or.EXPLORING?this._getDistance():this.type===Or.TRACKING&&Ne.add(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,o,a,s;r===void 0&&(r={});var l=r.position,c=l===void 0?this.position:l,u=r.focalPoint,f=u===void 0?this.focalPoint:u,p=r.roll,d=r.zoom,h=new He.CameraContribution;h.setType(this.type,void 0),h.setPosition(c[0],(i=c[1])!==null&&i!==void 0?i:this.position[1],(o=c[2])!==null&&o!==void 0?o:this.position[2]),h.setFocalPoint(f[0],(a=f[1])!==null&&a!==void 0?a:this.focalPoint[1],(s=f[2])!==null&&s!==void 0?s:this.focalPoint[2]),h.setRoll(p??this.roll),h.setZoom(d??this.zoom);var m={name:n,matrix:Qe.clone(h.getWorldTransform()),right:Ne.clone(h.right),up:Ne.clone(h.up),forward:Ne.clone(h.forward),position:Ne.clone(h.getPosition()),focalPoint:Ne.clone(h.getFocalPoint()),distanceVector:Ne.clone(h.getDistanceVector()),distance:h.getDistance(),dollyingStep:h.getDollyingStep(),azimuth:h.getAzimuth(),elevation:h.getElevation(),roll:h.getRoll(),relAzimuth:h.relAzimuth,relElevation:h.relElevation,relRoll:h.relRoll,zoom:h.getZoom()};return this.landmarks.push(m),m},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var o=rr(n)?this.landmarks.find(function(P){return P.name===n}):n;if(o){var a=Dn(r)?{duration:r}:r,s=a.easing,l=s===void 0?"linear":s,c=a.duration,u=c===void 0?100:c,f=a.easingFunction,p=f===void 0?void 0:f,d=a.onfinish,h=d===void 0?void 0:d,m=a.onframe,g=m===void 0?void 0:m,v=.01;this.cancelLandmarkAnimation();var y=o.position,x=o.focalPoint,_=o.zoom,w=o.roll,S=p||He.EasingFunction(l),M,O=function(){i.setFocalPoint(x),i.setPosition(y),i.setRoll(w),i.setZoom(_),i.computeMatrix(),i.triggerUpdate(),h?.()};if(u===0)return O();var E=function(P){M===void 0&&(M=P);var k=P-M;if(k>=u){O();return}var A=S(k/u),N=Ne.create(),L=Ne.create(),z=1,B=0;Ne.lerp(N,i.focalPoint,x,A),Ne.lerp(L,i.position,y,A),B=i.roll*(1-A)+w*A,z=i.zoom*(1-A)+_*A,i.setFocalPoint(N),i.setPosition(L),i.setRoll(B),i.setZoom(z);var H=Ne.dist(N,x)+Ne.dist(L,y);if(H<=v&&_==null&&w==null)return O();i.computeMatrix(),i.triggerUpdate(),k<u&&(g?.(A),i.landmarkAnimationID=i.canvas.requestAnimationFrame(E))};this.canvas.requestAnimationFrame(E)}},t}(nE);He.CameraContribution=hue;var zF=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),mue=0,Z0=new WeakMap,gue=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],o=bue(i,t);if(o){n[r-1]=o;return}}else wue(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(nn.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(nn.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(nn.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(nn.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(nn.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(nn.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=Z0.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case nn.ATTR_MODIFIED:var i=t.attrName,o=t.relatedNode.namespaceURI;r=t.target,n=IF("attributes",r),n.attributeName=i,n.attributeNamespace=o;var a=t.attrChange===rf.ADDITION?null:t.prevValue;DF(r,function(p){if(p.attributes&&!(p.attributeFilter&&p.attributeFilter.length&&p.attributeFilter.indexOf(i)===-1&&p.attributeFilter.indexOf(o)===-1))return p.attributeOldValue?vue(a):n});break;case nn.REMOVED:case nn.INSERTED:r=t.relatedNode;var s=t.target,l=void 0,c=void 0;t.type===nn.INSERTED?(l=[s],c=[]):(l=[],c=[s]);var u=s.previousSibling,f=s.nextSibling;n=IF("childList",r),n.addedNodes=l,n.removedNodes=c,n.previousSibling=u,n.nextSibling=f,DF(r,function(p){if(p.childList)return n})}yue()},e}(),Gje=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=mue++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=Z0.get(t);r||Z0.set(t,r=[]);for(var i,o=0;o<r.length;o++)if(r[o].observer===this){i=r[o],i.removeListeners(),i.options=n;break}i||(i=new gue(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=Z0.get(n),i=0;i<r.length;i++){var o=r[i];if(o.observer===t){o.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),j_,of;function IF(e,t){return j_=new zF(e,t)}function vue(e){return of||(of=zF.copy(j_),of.oldValue=e,of)}function yue(){j_=of=void 0}function xue(e){return e===of||e===j_}function bue(e,t){return e===t?e:of&&xue(e)?of:null}function _ue(e){e.nodes.forEach(function(t){var n=Z0.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function DF(e,t){for(var n=e;n;n=n.parentNode){var r=Z0.get(n);if(r)for(var i=0;i<r.length;i++){var o=r[i],a=o.options;if(!(n!==e&&!a.subtree)){var s=t(a);s&&o.enqueue(s)}}}}var fE=!1,pE=[];function wue(e){pE.push(e),fE||(fE=!0,typeof He.globalThis<"u"?He.globalThis.setTimeout(dE):dE())}function dE(){fE=!1;var e=pE;pE=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();_ue(n),r.length&&(n.callback(r,n),t=!0)}),t&&dE()}var hE=function(e){ut(t,e);function t(n,r,i,o){var a=e.call(this,n)||this;return a.currentTime=i,a.timelineTime=o,a.target=r,a.type="finish",a.bubbles=!1,a.currentTarget=r,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=i,a.timelineTime=o,a}return t}(u2),Sue=0,Cue=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(Sue++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new hE(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(Tr)},e.prototype.addEventListener=function(t,n,r){throw new Error(Tr)},e.prototype.removeEventListener=function(t,n,r){throw new Error(Tr)},e.prototype.dispatchEvent=function(t){throw new Error(Tr)},e.prototype.commitStyles=function(){throw new Error(Tr)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new hE(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new hE(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),Oue=4,Mue=.001,kue=1e-7,Eue=10,p2=11,V_=1/(p2-1),Aue=typeof Float32Array=="function",qF=function(e,t){return 1-3*t+3*e},UF=function(e,t){return 3*t-6*e},GF=function(e){return 3*e},ew=function(e,t,n){return((qF(t,n)*e+UF(t,n))*e+GF(t))*e},$F=function(e,t,n){return 3*qF(t,n)*e*e+2*UF(t,n)*e+GF(t)},Tue=function(e,t,n,r,i){var o,a,s=0;do a=t+(n-t)/2,o=ew(a,r,i)-e,o>0?n=a:t=a;while(Math.abs(o)>kue&&++s<Eue);return a},Pue=function(e,t,n,r){for(var i=0;i<Oue;++i){var o=$F(t,n,r);if(o===0)return t;var a=ew(t,n,r)-e;t-=a/o}return t},gE=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(s){return s};for(var i=Aue?new Float32Array(p2):new Array(p2),o=0;o<p2;++o)i[o]=ew(o*V_,e,n);var a=function(s){for(var l=0,c=1,u=p2-1;c!==u&&i[c]<=s;++c)l+=V_;--c;var f=(s-i[c])/(i[c+1]-i[c]),p=l+f*V_,d=$F(p,e,n);return d>=Mue?Pue(s,p,e,n):d===0?p:Tue(s,l,l+V_,e,n)};return function(s){return s===0||s===1?s:ew(a(s),t,r)}},Nue=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},H_=function(e){return Math.pow(e,2)},W_=function(e){return Math.pow(e,3)},q_=function(e){return Math.pow(e,4)},U_=function(e){return Math.pow(e,5)},G_=function(e){return Math.pow(e,6)},$_=function(e){return 1-Math.cos(e*Math.PI/2)},Y_=function(e){return 1-Math.sqrt(1-e*e)},X_=function(e){return e*e*(3*e-2)},K_=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},Z_=function(e,t){t===void 0&&(t=[]);var n=G(t,2),r=n[0],i=r===void 0?1:r,o=n[1],a=o===void 0?.5:o,s=hr(Number(i),1,10),l=hr(Number(a),.1,2);return e===0||e===1?e:-s*Math.pow(2,10*(e-1))*Math.sin((e-1-l/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/l)},f2=function(e,t,n){t===void 0&&(t=[]);var r=G(t,4),i=r[0],o=i===void 0?1:i,a=r[1],s=a===void 0?100:a,l=r[2],c=l===void 0?10:l,u=r[3],f=u===void 0?0:u;o=hr(o,.1,1e3),s=hr(s,.1,1e3),c=hr(c,.1,1e3),f=hr(f,.1,1e3);var p=Math.sqrt(s/o),d=c/(2*Math.sqrt(s*o)),h=d<1?p*Math.sqrt(1-d*d):0,m=1,g=d<1?(d*p+-f)/h:-f+p,v=n?n*e/1e3:e;return d<1?v=Math.exp(-v*d*p)*(m*Math.cos(h*v)+g*Math.sin(h*v)):v=(m+g*v)*Math.exp(-v*p),e===0||e===1?e:1-v},mE=function(e,t){t===void 0&&(t=[]);var n=G(t,2),r=n[0],i=r===void 0?10:r,o=n[1],a=o=="start"?Math.ceil:Math.floor;return a(hr(e,0,1)*i)/i},RF=function(e,t){t===void 0&&(t=[]);var n=G(t,4),r=n[0],i=n[1],o=n[2],a=n[3];return gE(r,i,o,a)(e)},J_=gE(.42,0,1,1),zl=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},Rl=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},Fl=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},FF={steps:mE,"step-start":function(e){return mE(e,[1,"start"])},"step-end":function(e){return mE(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":RF,ease:function(e){return RF(e,[.25,.1,.25,1])},in:J_,out:zl(J_),"in-out":Rl(J_),"out-in":Fl(J_),"in-quad":H_,"out-quad":zl(H_),"in-out-quad":Rl(H_),"out-in-quad":Fl(H_),"in-cubic":W_,"out-cubic":zl(W_),"in-out-cubic":Rl(W_),"out-in-cubic":Fl(W_),"in-quart":q_,"out-quart":zl(q_),"in-out-quart":Rl(q_),"out-in-quart":Fl(q_),"in-quint":U_,"out-quint":zl(U_),"in-out-quint":Rl(U_),"out-in-quint":Fl(U_),"in-expo":G_,"out-expo":zl(G_),"in-out-expo":Rl(G_),"out-in-expo":Fl(G_),"in-sine":$_,"out-sine":zl($_),"in-out-sine":Rl($_),"out-in-sine":Fl($_),"in-circ":Y_,"out-circ":zl(Y_),"in-out-circ":Rl(Y_),"out-in-circ":Fl(Y_),"in-back":X_,"out-back":zl(X_),"in-out-back":Rl(X_),"out-in-back":Fl(X_),"in-bounce":K_,"out-bounce":zl(K_),"in-out-bounce":Rl(K_),"out-in-bounce":Fl(K_),"in-elastic":Z_,"out-elastic":zl(Z_),"in-out-elastic":Rl(Z_),"out-in-elastic":Fl(Z_),spring:f2,"spring-in":f2,"spring-out":zl(f2),"spring-in-out":Rl(f2),"spring-out-in":Fl(f2)},Lue=function(e){return Nue(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},Iue=function(e){return FF[Lue(e)]||FF.linear},Due=function(e){return e},zue=1,Rue=.5,BF=0;function jF(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var Q_="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Fue=new RegExp("cubic-bezier\\("+Q_+","+Q_+","+Q_+","+Q_+"\\)"),Bue=/steps\(\s*(\d+)\s*\)/,jue=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function vE(e){var t=Fue.exec(e);if(t)return gE.apply(void 0,qe([],G(t.slice(1).map(Number)),!1));var n=Bue.exec(e);if(n)return jF(Number(n[1]),BF);var r=jue.exec(e);return r?jF(Number(r[1]),{start:zue,middle:Rue,end:BF}[r[2]]):Iue(e)}function Vue(e){return Math.abs(Hue(e)/(e.playbackRate||1))}function Hue(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var YF=0,yE=1,tw=2,XF=3;function Wue(e,t,n){if(t===null)return YF;var r=n.endTime;return t<Math.min(n.delay,r)?yE:t>=Math.min(n.delay+e+n.endDelay,r)?tw:XF}function que(e,t,n,r,i){switch(r){case yE:return t==="backwards"||t==="both"?0:null;case XF:return n-i;case tw:return t==="forwards"||t==="both"?e:null;case YF:return null}}function Uue(e,t,n,r,i){var o=i;return e===0?t!==yE&&(o+=n):o+=r/e,o}function Gue(e,t,n,r,i,o){var a=e===1/0?t%1:e%1;return a===0&&n===tw&&r!==0&&(i!==0||o===0)&&(a=1),a}function $ue(e,t,n,r){return e===tw&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function Yue(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function Xue(e,t,n){var r=Wue(e,t,n),i=que(e,n.fill,t,r,n.delay);if(i===null)return null;var o=n.duration==="auto"?0:n.duration,a=Uue(o,r,n.iterations,i,n.iterationStart),s=Gue(a,n.iterationStart,r,n.iterations,i,o),l=$ue(r,n.iterations,s,a),c=Yue(n.direction,l,s);return n.currentIteration=l,n.progress=c,n.easingFunction(c)}function Kue(e,t,n){var r=Zue(e,t),i=Jue(r,n);return function(o,a){if(a!==null)i.filter(function(l){return a>=l.applyFrom&&a<l.applyTo}).forEach(function(l){var c=a-l.startOffset,u=l.endOffset-l.startOffset,f=u===0?0:c/u;o.setAttribute(l.property,l.interpolation(f),!1,!1)});else for(var s in r)KF(s)&&o.setAttribute(s,null)}}function KF(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function Zue(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(KF(i)){var o={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:vE(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(o)}return n}function Jue(e,t){var n=[];for(var r in e)for(var i=e[r],o=0;o<i.length-1;o++){var a=o,s=o+1,l=i[a].computedOffset,c=i[s].computedOffset,u=l,f=c;o===0&&(u=-1/0,c===0&&(s=a)),o===i.length-2&&(f=1/0,l===1&&(a=s)),n.push({applyFrom:u,applyTo:f,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:r,interpolation:Que(r,i[a].value,i[s].value,t)})}return n.sort(function(p,d){return p.startOffset-d.startOffset}),n}var VF=function(e,t,n){return function(r){var i=ZF(e,t,r);return!He.enableCSSParsing&&Dn(i)?i:n(i)}};function Que(e,t,n,r){var i=tf[e];if(i&&i.syntax&&i.int){var o=He.styleValueRegistry.getPropertySyntax(i.syntax);if(o){var a=void 0,s=void 0;if(He.enableCSSParsing){var l=He.styleValueRegistry.parseProperty(e,t,r,!1),c=He.styleValueRegistry.parseProperty(e,n,r,!1);a=He.styleValueRegistry.computeProperty(e,l,r,!1),s=He.styleValueRegistry.computeProperty(e,c,r,!1)}else{var u=o.parserWithCSSDisabled;a=u?u(t,r):t,s=u?u(n,r):n}var f=o.mixer(a,s,r);if(f){var p=VF.apply(void 0,qe([],G(f),!1));return function(d){return d===0?t:d===1?n:p(d)}}}}return VF(!1,!0,function(d){return d?n:t})}function ZF(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,o=Math.max(r,i),a=[],s=0;s<o;s++)a.push(ZF(e[s<r?s:r-1],t[s<i?s:i-1],n));return a}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var efe=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Due,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=vE(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function tfe(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,o=0;o<i;o++){if(!t[o]){var a={};"offset"in e&&(a.offset=Number(e.offset)),"easing"in e&&(a.easing=e.easing),"composite"in e&&(a.composite=e.composite),t[o]=a}r[o]!==void 0&&r[o]!==null&&(t[o][n]=r[o])}}return t.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),t}function HF(e,t){if(e===null)return[];Array.isArray(e)||(e=tfe(e));for(var n=e.map(function(l){var c={};t?.composite&&(c.composite="auto");for(var u in l){var f=l[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));c[u]=f}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=t?.easing||"linear"),c.composite===void 0&&(c.composite="auto"),c}),r=!0,i=-1/0,o=0;o<n.length;o++){var a=n[o].offset;if(on(a))r=!1;else{if(a<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=a}}n=n.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c,u=n.length;n[u-1].computedOffset=Number((l=n[u-1].offset)!==null&&l!==void 0?l:1),u>1&&(n[0].computedOffset=Number((c=n[0].offset)!==null&&c!==void 0?c:0));for(var f=0,p=Number(n[0].computedOffset),d=1;d<u;d++){var h=n[d].computedOffset;if(!on(h)&&!on(p)){for(var m=1;m<d-f;m++)n[f+m].computedOffset=p+(Number(h)-p)*m/(d-f);f=d,p=Number(h)}}}return r||s(),n}var nfe="backwards|forwards|both|none".split("|"),rfe="reverse|alternate|alternate-reverse".split("|");function ife(e,t){var n=new efe;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&nfe.indexOf(e[r])===-1||r==="direction"&&rfe.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function ofe(e,t){return e=afe(e??{duration:"auto"}),ife(e,t)}function afe(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var sfe=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=ofe(r,!1),this.timing.effect=this,this.timing.activeDuration=Vue(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=HF(n,this.timing),this.interpolations=Kue(this.normalizedKeyframes,this.timing,this.target);var o=He.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(a,s){return s==="duration"?a.duration==="auto"?0:a.duration:s==="fill"?a.fill==="auto"?"none":a.fill:s==="localTime"?i.animation&&i.animation.currentTime||null:s==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:a.currentIteration||0:s==="progress"?!i.animation||i.animation.playState!=="running"?null:a.progress||0:a[s]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=Xue(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=HF(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function WF(e,t){return Number(e.id)-Number(t.id)}var lfe=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(WF),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(o){o[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new sfe(t,n,r),o=new Cue(i,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(WF);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(o){var a=n.animations.indexOf(o);a!==-1&&n.animations.splice(a,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t?.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,o,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var s=[],l=[],c=[],u=[];return r.forEach(function(f){f.tick(t,n),f._inEffect?(l.push(f.effect),f.markTarget()):(s.push(f.effect),f.unmarkTarget()),f._needsTick&&(a.ticking=!0);var p=f._inEffect||f._needsTick;f._inTimeline=p,p?c.push(f):u.push(f)}),(i=this.pendingEffects).push.apply(i,qe([],G(s),!1)),(o=this.pendingEffects).push.apply(o,qe([],G(l),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,u]},e}();He.EasingFunction=vE;He.AnimationTimeline=lfe;function bt(e){return new nw([e],null,e,e.ownerDocument)}var nw=(()=>{class e{constructor(n=null,r=null,i=null,o=null,a=[null,null,null,null,null],s=[],l=[]){this._elements=Array.from(n),this._data=r,this._parent=i,this._document=o,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=s,this._facetElements=l}selectAll(n){let r=typeof n=="string"?this._parent.querySelectorAll(n):n;return new e(r,null,this._elements[0],this._document)}selectFacetAll(n){let r=typeof n=="string"?this._parent.querySelectorAll(n):n;return new e(this._elements,null,this._parent,this._document,void 0,void 0,r)}select(n){let r=typeof n=="string"?this._parent.querySelectorAll(n)[0]||null:n;return new e([r],null,r,this._document)}append(n){let r=typeof n=="function"?n:()=>this.createElement(n),i=[];if(this._data!==null){for(let o=0;o<this._data.length;o++){let a=this._data[o],[s,l]=Array.isArray(a)?a:[a,null],c=r(s,o);c.__data__=s,l!==null&&(c.__fromElements__=l),this._parent.appendChild(c),i.push(c)}return new e(i,null,this._parent,this._document)}else{for(let o=0;o<this._elements.length;o++){let a=this._elements[o],s=a.__data__,l=r(s,o);a.appendChild(l),i.push(l)}return new e(i,null,i[0],this._document)}}maybeAppend(n,r,i){let o=this._elements[0],a=o.getElementById(n);if(a)return new e([a],null,this._parent,this._document);let s=typeof r=="string"?this.createElement(r):r();return s.id=n,i&&(s.className=i),o.appendChild(s),new e([s],null,this._parent,this._document)}data(n,r=o=>o,i=()=>null){let o=[],a=[],s=new Set(this._elements),l=[],c=new Set,u=new Map(this._elements.map((h,m)=>[r(h.__data__,m),h])),f=new Map(this._facetElements.map((h,m)=>[r(h.__data__,m),h])),p=An(this._elements,h=>i(h.__data__));for(let h=0;h<n.length;h++){let m=n[h],g=r(m,h),v=i(m,h);if(u.has(g)){let y=u.get(g);y.__data__=m,y.__facet__=!1,a.push(y),s.delete(y),u.delete(g)}else if(f.has(g)){let y=f.get(g);y.__data__=m,y.__facet__=!0,a.push(y),f.delete(g)}else if(p.has(g)){let y=p.get(g);l.push([m,y]);for(let x of y)s.delete(x);p.delete(g)}else if(u.has(v)){let y=u.get(v);y.__toData__?y.__toData__.push(m):y.__toData__=[m],c.add(y),s.delete(y)}else o.push(m)}let d=[new e([],o,this._parent,this._document),new e(a,null,this._parent,this._document),new e(s,null,this._parent,this._document),new e([],l,this._parent,this._document),new e(c,null,this._parent,this._document)];return new e(this._elements,null,this._parent,this._document,d)}merge(n){let r=[...this._elements,...n._elements],i=[...this._transitions,...n._transitions];return new e(r,null,this._parent,this._document,void 0,i)}createElement(n){if(this._document)return this._document.createElement(n,{});let r=e.registry[n];return r?new r:Kc(`Unknown node type: ${n}`)}join(n=s=>s,r=s=>s,i=s=>s.remove(),o=s=>s,a=s=>s.remove()){let s=n(this._enter),l=r(this._update),c=i(this._exit),u=o(this._merge),f=a(this._split);return l.merge(s).merge(c).merge(u).merge(f)}remove(){for(let n=0;n<this._elements.length;n++){let r=this._transitions[n];if(r){let i=Array.isArray(r)?r:[r];Promise.all(i.map(o=>o.finished)).then(()=>{this._elements[n].remove()})}else this._elements[n].remove()}return new e([],null,this._parent,this._document,void 0,this._transitions)}each(n){for(let r=0;r<this._elements.length;r++){let i=this._elements[r],o=i.__data__;n(o,r,i)}return this}attr(n,r){let i=typeof r!="function"?()=>r:r;return this.each(function(o,a,s){r!==void 0&&(s[n]=i(o,a,s))})}style(n,r){let i=typeof r!="function"?()=>r:r;return this.each(function(o,a,s){r!==void 0&&(s.style[n]=i(o,a,s))})}transition(n){let r=typeof n!="function"?()=>n:n,{_transitions:i}=this;return this.each(function(o,a,s){i[a]=r(o,a,s)})}on(n,r){return this.each(function(i,o,a){a.addEventListener(n,r)}),this}call(n,...r){return n(this,...r),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}return e.registry={g:vr,rect:Ks,circle:ys,path:Gr,text:Uo,ellipse:Y0,image:X0,line:xc,polygon:gh,polyline:K0,html:Sp},e})();function d2(e,t,n){return Math.max(t,Math.min(e,n))}function vh(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}function gt(e,t){for(let[n,r]of Object.entries(t))e.style(n,r)}function JF(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function QF(e,t,n){let{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*er(e,t):r,o=Math.PI/6,a=Math.atan2(t[1]-e[1],t[0]-e[0]),s=Math.PI/2-a-o,l=[t[0]-i*Math.sin(s),t[1]-i*Math.cos(s)],c=a-o,u=[t[0]-i*Math.cos(c),t[1]-i*Math.sin(c)];return[l,u]}function af(e,t,n,r,i){let o=so(ur(r,t))+Math.PI,a=so(ur(r,n))+Math.PI;return e.arc(r[0],r[1],i,o,a,a-o<0),e}function rw(e,t,n,r="y",i="between",o=!1){let a=(g,v)=>g==="y"||g===!0?v?180:90:v?90:0,s=r==="y"||r===!0?n:t,l=a(r,o),c=Us(s),[u,f]=_o(c,g=>s[g]),p=new ai({domain:[u,f],range:[0,100]}),d=g=>Dn(s[g])&&!Number.isNaN(s[g])?p.map(s[g]):0,h={between:g=>`${e[g]} ${d(g)}%`,start:g=>g===0?`${e[g]} ${d(g)}%`:`${e[g-1]} ${d(g)}%, ${e[g]} ${d(g)}%`,end:g=>g===e.length-1?`${e[g]} ${d(g)}%`:`${e[g]} ${d(g)}%, ${e[g+1]} ${d(g)}%`},m=c.sort((g,v)=>d(g)-d(v)).map(h[i]||h.between).join(",");return`linear-gradient(${l}deg, ${m})`}function yh(e){let[t,n,r,i]=e;return[i,t,n,r]}function Bl(e,t,n){let[r,i,,o]=Tn(e)?yh(t):t,[a,s]=n,l=e.getCenter(),c=pc(ur(r,l)),u=pc(ur(i,l)),f=u===c&&a!==s?u+Math.PI*2:u;return{startAngle:c,endAngle:f-c>=0?f:Math.PI*2+f,innerRadius:er(o,l),outerRadius:er(r,l)}}function J0(e){let{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function iw(e,t){if(!yn(e))return"";let n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function Q0(e){if(e.length===1)return e[0];let[[t,n,r=0],[i,o,a=0]]=e;return[(t+i)/2,(n+o)/2,(r+a)/2]}var ow=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function xE(e,t,n,r,i={}){let{inset:o=0,radius:a=0,insetLeft:s=o,insetTop:l=o,insetRight:c=o,insetBottom:u=o,radiusBottomLeft:f=a,radiusBottomRight:p=a,radiusTopLeft:d=a,radiusTopRight:h=a,minWidth:m=-1/0,maxWidth:g=1/0,minHeight:v=-1/0}=i,y=ow(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!yn(r)&&!Sk(r)){let O=!!Tn(r),[E,,P]=O?yh(t):t,[k,A]=E,[N,L]=ur(P,E),z=N>0?k:k+N,B=L>0?A:A+L,H=Math.abs(N),j=Math.abs(L),W=z+s,Z=B+l,ie=H-(s+c),R=j-(l+u),q=O?d2(ie,v,1/0):d2(ie,m,g),J=O?d2(R,m,g):d2(R,v,1/0),te=O?W:W-(q-ie)/2,ae=O?Z-(J-R)/2:Z-(J-R);return bt(e.createElement("rect",{})).style("x",te).style("y",ae).style("width",q).style("height",J).style("radius",[d,h,p,f]).call(gt,y).node()}let{y:x,y1:_}=n,w=r.getCenter(),S=Bl(r,t,[x,_]),M=Ju().cornerRadius(a).padAngle(o*Math.PI/180);return bt(e.createElement("path",{})).style("d",M(S)).style("transform",`translate(${w[0]}, ${w[1]})`).style("radius",a).style("inset",o).call(gt,y).node()}var xh=(e,t)=>{let{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:o=!0}=e,a=ow(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=t;return(c,u,f)=>{let{color:p,radius:d=0}=f,h=ow(f,["color","radius"]),m=h.lineWidth||1,{stroke:g,radius:v=d,radiusTopLeft:y=v,radiusTopRight:x=v,radiusBottomRight:_=v,radiusBottomLeft:w=v,innerRadius:S=0,innerRadiusTopLeft:M=S,innerRadiusTopRight:O=S,innerRadiusBottomRight:E=S,innerRadiusBottomLeft:P=S,lineWidth:k=n==="stroke"||g?m:0,inset:A=0,insetLeft:N=A,insetRight:L=A,insetBottom:z=A,insetTop:B=A,minWidth:H,maxWidth:j,minHeight:W}=a,Z=ow(a,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:ie=p,opacity:R}=u,q=[i?y:M,i?x:O,o?_:E,o?w:P],J=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Tn(s)&&J.push(J.shift());let te=Object.assign(Object.assign({radius:v},Object.fromEntries(J.map((ae,le)=>[ae,q[le]]))),{inset:A,insetLeft:N,insetRight:L,insetBottom:z,insetTop:B,minWidth:H,maxWidth:j,minHeight:W});return bt(xE(l,c,u,s,te)).call(gt,h).style("fill","transparent").style(n,ie).style(J0(e),R).style("lineWidth",k).style("stroke",g===void 0?ie:g).call(gt,Z).node()}};xh.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Go=(e,t)=>xh(Object.assign({colorAttribute:"fill"},e),t);Go.props=Object.assign(Object.assign({},xh.props),{defaultMarker:"square"});var ou=(e,t)=>xh(Object.assign({colorAttribute:"stroke"},e),t);ou.props=Object.assign(Object.assign({},xh.props),{defaultMarker:"hollowSquare"});var eB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cfe(e,t,n){let[r,i,o,a]=e;if(Tn(n)){let c=[t?t[0][0]:i[0],i[1]],u=[t?t[3][0]:o[0],o[1]];return[r,c,u,a]}let s=[i[0],t?t[0][1]:i[1]],l=[o[0],t?t[3][1]:o[1]];return[r,s,l,a]}var e1=(e,t)=>{let{adjustPoints:n=cfe}=e,r=eB(e,["adjustPoints"]),{coordinate:i,document:o}=t;return(a,s,l,c)=>{let{index:u}=s,{color:f}=l,p=eB(l,["color"]),d=c[u+1],h=n(a,d,i),m=!!Tn(i),[g,v,y,x]=m?yh(h):h,{color:_=f,opacity:w}=s,S=Ta().curve(Jd)([g,v,y,x]);return bt(o.createElement("path",{})).call(gt,p).style("d",S).style("fill",_).style("fillOpacity",w).call(gt,r).node()}};e1.props={defaultMarker:"square"};function ufe(e,t,n){let[r,i,o,a]=e;if(Tn(n)){let c=[t?t[0][0]:(i[0]+o[0])/2,i[1]],u=[t?t[3][0]:(i[0]+o[0])/2,o[1]];return[r,c,u,a]}let s=[i[0],t?t[0][1]:(i[1]+o[1])/2],l=[o[0],t?t[3][1]:(i[1]+o[1])/2];return[r,s,l,a]}var aw=(e,t)=>e1(Object.assign({adjustPoints:ufe},e),t);aw.props={defaultMarker:"square"};function bc(e){let t=typeof e=="function"?e:e.render;return class extends mh{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var tB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},ffe=bc(e=>{let{d1:t,d2:n,style1:r,style2:i}=e.attributes,o=e.ownerDocument;bt(e).maybeAppend("line",()=>o.createElement("path",{})).style("d",t).call(gt,r),bt(e).maybeAppend("line1",()=>o.createElement("path",{})).style("d",n).call(gt,i)});function pfe(e,t){let n=[],r=[],i=!1,o=null;for(let a of e)!t(a[0])||!t(a[1])?i=!0:(n.push(a),i&&(i=!1,r.push([o,a])),o=a);return[n,r]}var Co=(e,t)=>{let{curve:n,gradient:r=!1,gradientColor:i="between",defined:o=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:a=!1}=e,s=tB(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:c}=t;return(u,f,p)=>{let{color:d,lineWidth:h}=p,m=tB(p,["color","lineWidth"]),{color:g=d,size:v=h,seriesColor:y,seriesX:x,seriesY:_}=f,w=iw(l,f),S=Tn(l),M=r&&y?rw(y,x,_,r,i,S):g,O=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m),M&&{stroke:M}),v&&{lineWidth:v}),w&&{transform:w}),s),E;if(yn(l)){let z=l.getCenter();E=B=>f_().angle((H,j)=>pc(ur(B[j],z))).radius((H,j)=>er(B[j],z)).defined(([H,j])=>o(H)&&o(j)).curve(n)(B)}else E=Ta().x(z=>z[0]).y(z=>z[1]).defined(([z,B])=>o(z)&&o(B)).curve(n);let[P,k]=pfe(u,o),A=Ke(O,"connect"),N=!!k.length;if(!N||a&&!Object.keys(A).length)return bt(c.createElement("path",{})).style("d",E(P)||[]).call(gt,O).node();if(N&&!a)return bt(c.createElement("path",{})).style("d",E(u)).call(gt,O).node();let L=z=>z.map(E).join(",");return bt(new ffe).style("style1",Object.assign(Object.assign({},O),A)).style("style2",O).style("d1",L(k)).style("d2",E(u)).node()}};Co.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var sw=(e,t)=>{let{coordinate:n}=t;return(...r)=>{let i=yn(n)?Jd:hc;return Co(Object.assign({curve:i},e),t)(...r)}};sw.props=Object.assign(Object.assign({},Co.props),{defaultMarker:"line"});var dfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},lw=(e,t)=>{let n=dfe(e,[]),{coordinate:r}=t;return(...i)=>{let o=yn(r)?Uv:Tn(r)?$v:Gv;return Co(Object.assign({curve:o},n),t)(...i)}};lw.props=Object.assign(Object.assign({},Co.props),{defaultMarker:"smooth"});var cw=(e,t)=>Co(Object.assign({curve:Kv},e),t);cw.props=Object.assign(Object.assign({},Co.props),{defaultMarker:"hv"});var uw=(e,t)=>Co(Object.assign({curve:Xv},e),t);uw.props=Object.assign(Object.assign({},Co.props),{defaultMarker:"vh"});var fw=(e,t)=>Co(Object.assign({curve:Yv},e),t);fw.props=Object.assign(Object.assign({},Co.props),{defaultMarker:"hvh"});var hfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mfe(e,t,n,r,i){let o=ur(n,t),a=so(o),s=a+Math.PI/2,l=[r/2*Math.cos(s),r/2*Math.sin(s)],c=[i/2*Math.cos(s),i/2*Math.sin(s)],u=[i/2*Math.cos(a),i/2*Math.sin(a)],f=[r/2*Math.cos(a),r/2*Math.sin(a)],p=Wv(t,l),d=Wv(n,c),h=Wv(d,u),m=Wv(n,u),g=ur(m,c),v=ur(n,c),y=ur(t,l),x=ur(y,f),_=ur(t,f),w=ur(p,f);e.moveTo(...p),e.lineTo(...d),e.arcTo(...h,...m,i/2),e.arcTo(...g,...v,i/2),e.lineTo(...y),e.arcTo(...x,..._,r/2),e.arcTo(...w,...p,r/2),e.closePath()}var pw=(e,t)=>{let{document:n}=t;return(r,i,o)=>{let{seriesSize:a,color:s}=i,{color:l}=o,c=hfe(o,["color"]),u=fi();for(let f=0;f<r.length-1;f++){let p=r[f],d=r[f+1],h=a[f],m=a[f+1];[...p,...d].every(qn)&&mfe(u,p,d,h,m)}return bt(n.createElement("path",{})).call(gt,c).style("fill",s||l).style("d",u.toString()).call(gt,e).node()}};pw.props=Object.assign(Object.assign({},Co.props),{defaultMarker:"line"});var gfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},bE=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];bE.style=["fill"];var nB=bE.bind(void 0);nB.style=["stroke","lineWidth"];var dw=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];dw.style=["fill"];var rB=dw.bind(void 0);rB.style=["fill"];var iB=dw.bind(void 0);iB.style=["stroke","lineWidth"];var _E=(e,t,n)=>{let r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};_E.style=["fill"];var oB=_E.bind(void 0);oB.style=["stroke","lineWidth"];var wE=(e,t,n)=>{let r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};wE.style=["fill"];var aB=wE.bind(void 0);aB.style=["stroke","lineWidth"];var SE=(e,t,n)=>{let r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};SE.style=["fill"];var sB=SE.bind(void 0);sB.style=["stroke","lineWidth"];var CE=(e,t,n)=>{let r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};CE.style=["fill"];var lB=CE.bind(void 0);lB.style=["stroke","lineWidth"];var OE=(e,t,n)=>{let r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};OE.style=["fill"];var cB=OE.bind(void 0);cB.style=["stroke","lineWidth"];var uB=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];uB.style=["stroke","lineWidth"];var fB=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];fB.style=["stroke","lineWidth"];var pB=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];pB.style=["stroke","lineWidth"];var dB=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];dB.style=["stroke","lineWidth"];var hB=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];hB.style=["stroke","lineWidth"];var ME=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];ME.style=["stroke","lineWidth"];var mB=ME.bind(void 0);mB.style=["stroke","lineWidth"];var gB=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];gB.style=["stroke","lineWidth"];var vB=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];vB.style=["stroke","lineWidth"];var yB=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];yB.style=["stroke","lineWidth"];var xB=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];xB.style=["stroke","lineWidth"];var bB=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];bB.style=["stroke","lineWidth"];var h2=new Map([["bowtie",OE],["cross",fB],["dash",mB],["diamond",_E],["dot",ME],["hexagon",CE],["hollowBowtie",cB],["hollowDiamond",oB],["hollowHexagon",lB],["hollowPoint",nB],["hollowSquare",iB],["hollowTriangle",aB],["hollowTriangleDown",sB],["hv",vB],["hvh",xB],["hyphen",hB],["line",uB],["plus",dB],["point",bE],["rect",rB],["smooth",gB],["square",dw],["tick",pB],["triangleDown",SE],["triangle",wE],["vh",yB],["vhv",bB]]);function _B(e,t){var{d:n,fill:r,lineWidth:i,path:o,stroke:a,color:s}=t,l=gfe(t,["d","fill","lineWidth","path","stroke","color"]);let c=h2.get(e)||h2.get("point");return(...u)=>new Gr({style:Object.assign(Object.assign({},l),{d:c(...u),stroke:c.style.includes("stroke")?s||a:"",fill:c.style.includes("fill")?s||r:"",lineWidth:c.style.includes("lineWidth")?i||i||2:0})})}var vfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function kE(e,t,n,r){if(t.length===1)return;let{size:i}=n;if(e==="fixed")return i;if(e==="normal"||y_(r)){let[[o,a],[s,l]]=t,c=Math.abs((s-o)/2),u=Math.abs((l-a)/2);return Math.max(0,(c+u)/2)}return i}var ln=(e,t)=>{let{colorAttribute:n,symbol:r,mode:i="auto"}=e,o=vfe(e,["colorAttribute","symbol","mode"]),a=h2.get(r)||h2.get("point"),{coordinate:s,document:l}=t;return(c,u,f)=>{let{lineWidth:p,color:d}=f,h=o.stroke?p||1:p,{color:m=d,transform:g,opacity:v}=u,[y,x]=Q0(c),w=kE(i,c,u,s)||o.r||f.r;return bt(l.createElement("path",{})).call(gt,f).style("fill","transparent").style("d",a(y,x,w)).style("lineWidth",h).style("transform",g).style("transformOrigin",`${y-w} ${x-w}`).style("stroke",m).style(J0(e),v).style(n,m).call(gt,o).node()}};ln.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var hw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);hw.props=Object.assign({defaultMarker:"hollowBowtie"},ln.props);var mw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);mw.props=Object.assign({defaultMarker:"hollowDiamond"},ln.props);var gw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);gw.props=Object.assign({defaultMarker:"hollowHexagon"},ln.props);var vw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);vw.props=Object.assign({defaultMarker:"hollowPoint"},ln.props);var yw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);yw.props=Object.assign({defaultMarker:"hollowSquare"},ln.props);var xw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);xw.props=Object.assign({defaultMarker:"hollowTriangle"},ln.props);var bw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);bw.props=Object.assign({defaultMarker:"hollowTriangleDown"},ln.props);var yfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},EE=(e,t)=>{let{colorAttribute:n,mode:r="auto"}=e,i=yfe(e,["colorAttribute","mode"]),{coordinate:o,document:a}=t;return(s,l,c)=>{let{lineWidth:u,color:f}=c,p=i.stroke?u||1:u,{color:d=f,transform:h,opacity:m}=l,[g,v]=Q0(s),x=kE(r,s,l,o)||i.r||c.r;return bt(a.createElement("circle",{})).call(gt,c).style("fill","transparent").style("cx",g).style("cy",v).style("r",x).style("lineWidth",p).style("transform",h).style("transformOrigin",`${g} ${v}`).style("stroke",d).style(J0(e),m).style(n,d).call(gt,i).node()}},t1=(e,t)=>EE(Object.assign({colorAttribute:"fill"},e),t);t1.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};var _w=(e,t)=>EE(Object.assign({colorAttribute:"stroke"},e),t);_w.props=Object.assign({defaultMarker:"hollowPoint"},t1.props);var ww=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);ww.props=Object.assign({defaultMarker:"bowtie"},ln.props);var Sw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);Sw.props=Object.assign({defaultMarker:"cross"},ln.props);var Cw=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);Cw.props=Object.assign({defaultMarker:"diamond"},ln.props);var Ow=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);Ow.props=Object.assign({defaultMarker:"hexagon"},ln.props);var Mw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);Mw.props=Object.assign({defaultMarker:"hyphen"},ln.props);var kw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);kw.props=Object.assign({defaultMarker:"line"},ln.props);var Ew=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);Ew.props=Object.assign({defaultMarker:"plus"},ln.props);var Aw=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);Aw.props=Object.assign({defaultMarker:"point"},ln.props);var Tw=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);Tw.props=Object.assign({defaultMarker:"square"},ln.props);var Pw=(e,t)=>ln(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);Pw.props=Object.assign({defaultMarker:"tick"},ln.props);var Nw=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);Nw.props=Object.assign({defaultMarker:"triangle"},ln.props);var Lw=(e,t)=>ln(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);Lw.props=Object.assign({defaultMarker:"triangleDown"},ln.props);var wB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},n1=(e,t)=>{let{arrow:n=!0,arrowSize:r="40%"}=e,i=wB(e,["arrow","arrowSize"]),{document:o}=t;return(a,s,l)=>{let{defaultColor:c}=l,u=wB(l,["defaultColor"]),{color:f=c,transform:p}=s,[d,h]=a,m=fi();if(m.moveTo(...d),m.lineTo(...h),n){let[g,v]=QF(d,h,{arrowSize:r});m.moveTo(...g),m.lineTo(...h),m.lineTo(...v)}return bt(o.createElement("path",{})).call(gt,u).style("d",m.toString()).style("stroke",f).style("transform",p).call(gt,i).node()}};n1.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function AE(e,t){t(e),e.children&&e.children.forEach(function(n){n&&AE(n,t)})}function au(e){r1(e,!0)}function Da(e){r1(e,!1)}function r1(e,t){var n=t?"visible":"hidden";AE(e,function(r){r.attr("visibility",n)})}var xfe=function(e){ut(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,qe([],G(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(nn.INSERTED,function(){Da(i)}),i}return t}(vr);function Iw(e){var t=e.appendChild(new xfe({class:"offscreen"}));return Da(t),t}function SB(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}var i1=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Wn(n,["style"]);return e.call(this,Te({style:Te({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Iw(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(Uo);function su(e){return e*Math.PI/180}function TE(e){return Number((e*180/Math.PI).toPrecision(5))}var fr=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function Oo(e,t){return Sr(e)?e.apply(void 0,qe([],G(t),!1)):e}var pi=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var o=G(i,2),a=o[0],s=o[1],l=n(s);return[a,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(r,{prefix:n}),r};var bfe=5,CB=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=bfe),Object.entries(t).forEach(function(i){var o=G(i,2),a=o[0],s=o[1],l=e;Object.prototype.hasOwnProperty.call(t,a)&&(s?oa(s)?(oa(e[a])||(l[a]={}),n<r?CB(e[a],s,n+1,r):l[a]=t[a]):nr(s)?(l[a]=[],l[a]=l[a].concat(s)):l[a]=s:l[a]=s)})},za=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)CB(e,t[r]);return e};var Dw=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};var zw,OB;var MB=l6(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,o=t.fontStyle,a=t.fontVariant;return OB?OB(e,n):(zw||(zw=He.offscreenCanvasCreator.getOrCreateContext(void 0)),zw.font=[o,a,i,"".concat(n,"px"),r].join(" "),zw.measureText(e).width)},function(e,t){return[e,Object.values(t||PE(e)).join()].join("")},4096),PE=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,o=e.style.fontSize;return o=typeof o=="object"?o.value:o,{fontSize:o,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function NE(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function Rw(e,t){var n=NE(e);n&&n.attr(t)}function m2(e,t,n){n===void 0&&(n="..."),Rw(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function kB(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),Rw(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function bh(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var o=t.x,a=t.y;return[o,a]}if(n){var s=n[0],l=s.clientX,c=s.clientY;return[l,c]}return r&&i?[r,i]:[0,0]}function jl(e){return typeof e=="function"?e():rr(e)||Dn(e)?new i1({style:{text:String(e)}}):e}function EB(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function Mi(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(o){o.node().removeChildren()}),e?n(t):(r&&i(t),null)}function Mo(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}var _fe=function(e,t){return function(n){return e*(1-n)+t*n}};function wfe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var o=new Array(r),a=new Array(n),s=0;for(s=0;s<r;++s)o[s]=Fw(e[s],t[s]);for(;s<n;++s)a[s]=t[s];for(s=0;s<r;++s)a[s]=o[s](i);return a}}function Sfe(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var o=G(i,2),a=o[0],s=o[1];a in e?n[a]=Fw(e[a],s):r[a]=s}),function(i){return Object.entries(n).forEach(function(o){var a=G(o,2),s=a[0],l=a[1];return r[s]=l(i)}),r}}function Fw(e,t){return typeof e=="number"&&typeof t=="number"?_fe(e,t):Array.isArray(e)&&Array.isArray(t)?wfe(e,t):typeof e=="object"&&typeof t=="object"?Sfe(e,t):function(n){return e}}function AB(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,o=i===void 0?0:i,a=Fw(t,n),s=Math.ceil(+o/16),l=new Array(s).fill(0).map(function(c,u,f){return{__keyframe_data__:a(u/(f.length-1))}});return e.animate(l,Te({fill:"both"},r))}function Bw(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o],s=a.x,l=a.y,c=a.width,u=a.height,f=G([s+c,l+u],2),p=f[0],d=f[1];s<t&&(t=s),l<n&&(n=l),p>r&&(r=p),d>i&&(i=d)}return new fr(t,n,r-t,i-n)}var TB=function(e,t,n){var r=e.width,i=e.height,o=n.flexDirection,a=o===void 0?"row":o,s=n.flexWrap,l=s===void 0?"nowrap":s,c=n.justifyContent,u=c===void 0?"flex-start":c,f=n.alignContent,p=f===void 0?"flex-start":f,d=n.alignItems,h=d===void 0?"flex-start":d,m=a==="row",g=a==="row"||a==="column",v=m?g?[1,0]:[-1,0]:g?[0,1]:[0,-1],y=G([0,0],2),x=y[0],_=y[1],w=t.map(function(N){var L,z=N.width,B=N.height,H=G([x,_],2),j=H[0],W=H[1];return L=G([x+z*v[0],_+B*v[1]],2),x=L[0],_=L[1],new fr(j,W,z,B)}),S=Bw(w),M={"flex-start":0,"flex-end":m?r-S.width:i-S.height,center:m?(r-S.width)/2:(i-S.height)/2},O=w.map(function(N){var L=N.x,z=N.y,B=fr.fromRect(N);return B.x=m?L+M[u]:L,B.y=m?z:z+M[u],B}),E=Bw(O),P=function(N){var L=G(m?["height",i]:["width",r],2),z=L[0],B=L[1];switch(h){case"flex-start":return 0;case"flex-end":return B-N[z];case"center":return B/2-N[z]/2;default:return 0}},k=O.map(function(N){var L=N.x,z=N.y,B=fr.fromRect(N);return B.x=m?L:L+P(B),B.y=m?z+P(B):z,B}),A=k.map(function(N){var L,z,B=fr.fromRect(N);return B.x+=(L=e.x)!==null&&L!==void 0?L:0,B.y+=(z=e.y)!==null&&z!==void 0?z:0,B});return A};var PB=function(e,t,n){return[]};var LE=function(e,t,n){if(t.length===0)return[];var r={flex:TB,grid:PB},i=n.display in r?r[n.display]:null;return i?.call(null,e,t,n)||[]};function xs(e,t){return[e[0]*t,e[1]*t]}function _h(e,t){return[e[0]+t[0],e[1]+t[1]]}function jw(e,t){return[e[0]-t[0],e[1]-t[1]]}function Cp(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function Op(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function wh(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Vw(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function NB(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function g2(e,t){return+e.toPrecision(t)}function IE(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function Cfe(e,t,n,r){var i,o=[],a=!!r,s,l,c=[1/0,1/0],u=[-1/0,-1/0],f,p,d;if(a){i=G(r,2),c=i[0],u=i[1];for(var h=0,m=e.length;h<m;h+=1){var g=e[h];c=Cp(c,g),u=Op(u,g)}}for(var h=0,v=e.length;h<v;h+=1){var g=e[h];if(h===0&&!n)d=g;else if(h===v-1&&!n)p=g,o.push(d),o.push(p);else{var y=[h?h-1:v-1,h-1][n?0:1];s=e[y],l=e[n?(h+1)%v:h+1];var x=[0,0];x=jw(l,s),x=xs(x,t);var _=wh(g,s),w=wh(g,l),S=_+w;S!==0&&(_/=S,w/=S);var M=xs(x,-_),O=xs(x,w);p=_h(g,M),f=_h(g,O),f=Cp(f,Op(l,g)),f=Op(f,Cp(l,g)),M=jw(f,g),M=xs(M,-_/w),p=_h(g,M),p=Cp(p,Op(s,g)),p=Op(p,Cp(s,g)),O=jw(g,p),O=xs(O,w/_),f=_h(g,O),a&&(p=Op(p,c),p=Cp(p,u),f=Op(f,c),f=Cp(f,u)),o.push(d),o.push(p),d=f}}return n&&o.push(o.shift()),o}function LB(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,o=[],a=0,s=e.length;a<s;a+=2)o.push([e[a],e[a+1]]);for(var l=Cfe(o,.4,i,n),c=o.length,u=[],f,p,d,a=0;a<c-1;a+=1)f=l[a*2],p=l[a*2+1],d=o[a+1],u.push(["C",f[0],f[1],p[0],p[1],d[0],d[1]]);return i&&(f=l[c],p=l[c+1],r=G(o,1),d=r[0],u.push(["C",f[0],f[1],p[0],p[1],d[0],d[1]])),u}var Ofe=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function Mfe(e){return Ofe.includes(e)}function DE(e){var t={};for(var n in e)Mfe(n)&&(t[n]=e[n]);return t}function IB(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}function o1(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,o=r.height,a=t/Math.max(i,o);return n&&(e.style.transform="scale(".concat(a,")")),a}function DB(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function kfe(e){throw new Error(e)}var Efe=function(){function e(i,o,a,s,l,c,u){i===void 0&&(i=null),o===void 0&&(o=null),a===void 0&&(a=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),c===void 0&&(c=[]),u===void 0&&(u=[]),t.add(this),this._elements=Array.from(i),this._data=o,this._parent=a,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=c,this._facetElements=u}e.prototype.selectAll=function(i){var o=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(o,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var o=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,o)},e.prototype.select=function(i){var o=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([o],null,o,this._document)},e.prototype.append=function(i){var o=this,a=typeof i=="function"?i:function(){return o.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var c=this._data[l],u=G(Array.isArray(c)?c:[c,null],2),f=u[0],p=u[1],d=a(f,l);d.__data__=f,p!==null&&(d.__fromElements__=p),this._parent.appendChild(d),s.push(d)}return new n(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var h=this._elements[l],f=h.__data__,d=a(f,l);h.appendChild(d),s.push(d)}return new n(s,null,s[0],this._document)},e.prototype.maybeAppend=function(i,o){var a=fb(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),o);return a.attr("id",i),a},e.prototype.maybeAppendByClassName=function(i,o){var a=i.toString(),s=fb(this,t,"m",r).call(this,a[0]==="."?a:".".concat(a),o);return s.attr("className",a),s},e.prototype.maybeAppendByName=function(i,o){var a=fb(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),o);return a.attr("name",i),a},e.prototype.data=function(i,o,a){var s,l;o===void 0&&(o=function(P){return P}),a===void 0&&(a=function(){return null});for(var c=[],u=[],f=new Set(this._elements),p=[],d=new Set,h=new Map(this._elements.map(function(P,k){return[o(P.__data__,k),P]})),m=new Map(this._facetElements.map(function(P,k){return[o(P.__data__,k),P]})),g=DB(this._elements,function(P){return a(P.__data__)}),v=0;v<i.length;v++){var y=i[v],x=o(y,v),_=a(y,v);if(h.has(x)){var w=h.get(x);w.__data__=y,w.__facet__=!1,u.push(w),f.delete(w),h.delete(x)}else if(m.has(x)){var w=m.get(x);w.__data__=y,w.__facet__=!0,u.push(w),m.delete(x)}else if(g.has(x)){var S=g.get(x);p.push([y,S]);try{for(var M=(s=void 0,$i(S)),O=M.next();!O.done;O=M.next()){var w=O.value;f.delete(w)}}catch(P){s={error:P}}finally{try{O&&!O.done&&(l=M.return)&&l.call(M)}finally{if(s)throw s.error}}g.delete(x)}else if(h.has(_)){var w=h.get(_);w.__toData__?w.__toData__.push(y):w.__toData__=[y],d.add(w),f.delete(w)}else c.push(y)}var E=[new n([],c,this._parent,this._document),new n(u,null,this._parent,this._document),new n(f,null,this._parent,this._document),new n([],p,this._parent,this._document),new n(d,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,E)},e.prototype.merge=function(i){var o=qe(qe([],G(this._elements),!1),G(i._elements),!1),a=qe(qe([],G(this._transitions),!1),G(i._transitions),!1);return new n(o,null,this._parent,this._document,void 0,a)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var o=n.registry[i];return o?new o:kfe("Unknown node type: ".concat(i))},e.prototype.join=function(i,o,a,s,l){i===void 0&&(i=function(h){return h}),o===void 0&&(o=function(h){return h}),a===void 0&&(a=function(h){return h.remove()}),s===void 0&&(s=function(h){return h}),l===void 0&&(l=function(h){return h.remove()});var c=i(this._enter),u=o(this._update),f=a(this._exit),p=s(this._merge),d=l(this._split);return u.merge(c).merge(f).merge(p).merge(d)},e.prototype.remove=function(){for(var i=function(s){var l=o._elements[s],c=o._transitions[s];c?c.then(function(){return l.remove()}):l.remove()},o=this,a=0;a<this._elements.length;a++)i(a);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var o=0;o<this._elements.length;o++){var a=this._elements[o],s=a.__data__;i.call(a,s,o)}return this},e.prototype.attr=function(i,o){var a=typeof o!="function"?function(){return o}:o;return this.each(function(s,l){o!==void 0&&(this[i]=a.call(this,s,l))})},e.prototype.style=function(i,o,a){a===void 0&&(a=!0);var s=typeof o!="function"||!a?function(){return o}:o;return this.each(function(l,c){o!==void 0&&(this.style[i]=s.call(this,l,c))})},e.prototype.styles=function(i,o){return i===void 0&&(i={}),o===void 0&&(o=!0),this.each(function(a,s){var l=this;Object.entries(i).forEach(function(c){var u=G(c,2),f=u[0],p=u[1],d=typeof p!="function"||!o?function(){return p}:p;p!==void 0&&l.attr(f,d.call(l,a,s))})})},e.prototype.update=function(i,o){o===void 0&&(o=!0);var a=typeof i!="function"||!o?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(a.call(this,s,l))})},e.prototype.maybeUpdate=function(i,o){o===void 0&&(o=!0);var a=typeof i!="function"||!o?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(a.call(this,s,l))})},e.prototype.transition=function(i){var o=this._transitions;return this.each(function(a,s){o[s]=i.call(this,a,s)})},e.prototype.on=function(i,o){return this.each(function(){this.addEventListener(i,o)}),this},e.prototype.call=function(i){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return i.call.apply(i,qe([this._parent,this],G(o),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(o,a){var s=this._elements[0],l=s.querySelector(o);if(l)return new n([l],null,this._parent,this._document);var c=typeof a=="string"?this.createElement(a):a();return s.appendChild(c),new n([c],null,this._parent,this._document)},e.registry={g:vr,rect:Ks,circle:ys,path:Gr,text:i1,ellipse:Y0,image:X0,line:xc,polygon:gh,polyline:K0,html:Sp},e}();function Vt(e){return new Efe([e],null,e,e.ownerDocument)}function zB(e,t,n){return e.querySelector(t)?Vt(e).select(t):Vt(e).append(n)}function ii(e){if(Dn(e))return[e,e,e,e];if(nr(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}function zE(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=G([n,r],2),o=G(i[0],2),a=o[0],s=o[1],l=G(i[1],2),c=l[0],u=l[1];return{x:a,y:s,width:c-a,height:u-s,left:a,bottom:u,top:s,right:c}}function RB(e,t){var n=G(e,2),r=n[0],i=n[1],o=G(t,2),a=o[0],s=o[1];return r!==a&&i===s}function FB(e,t){var n,r,i=t.attributes;try{for(var o=$i(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=G(a.value,2),l=s[0],c=s[1];l!=="id"&&l!=="className"&&e.attr(l,c)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Hw(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function Afe(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function BB(e,t){return"".concat(t).concat(Hw(e))}function RE(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",o=e.replace(new RegExp("^(".concat(i,")")),"");return n?Afe(o):o}function jB(e,t){Object.entries(t).forEach(function(n){var r=G(n,2),i=r[0],o=r[1];qe([e],G(e.querySelectorAll(i)),!1).filter(function(a){return a.matches(i)}).forEach(function(a){if(a){var s=a;s.style.cssText+=Object.entries(o).reduce(function(l,c){return"".concat(l).concat(c.join(":"),";")},"")}})})}var Ww=function(e,t){if(!e?.startsWith(t))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function cn(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var o=G(i,2),a=o[0],s=o[1];if(!(a==="className"||a==="class")){if(Ww(a,"show")&&Ww(RE(a,"show"),t)!==n)a===BB(t,"show")?r[a]=s:r[a.replace(new RegExp(Hw(t)),"")]=s;else if(!Ww(a,"show")&&Ww(a,t)!==n){var l=RE(a,t);l==="filter"&&typeof s=="function"||(r[l]=s)}}}),r}function bs(e,t){return Object.entries(e).reduce(function(n,r){var i=G(r,2),o=i[0],a=i[1];return o.startsWith("show")?n["show".concat(t).concat(o.slice(4))]=a:n["".concat(t).concat(Hw(o))]=a,n},{})}function $o(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(o){var a=G(o,2),s=a[0],l=a[1];t.includes(s)||(n.indexOf(s)!==-1?i[s]=l:r[s]=l)}),[r,i]}function Tfe(e,t,n){var r=e.getBBox(),i=r.width,o=r.height,a=G([t,n].map(function(c,u){var f;return c.includes("%")?parseFloat(((f=c.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(u===0?i:o):c}),2),s=a[0],l=a[1];return[s,l]}function qw(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,o,a){return"translate(".concat(Tfe(e,o,a),")")});e.attr("transform",r)}catch{}}function VB(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var FE=function(e,t){if(t==null){e.innerHTML="";return}e.replaceChildren?Array.isArray(t)?e.replaceChildren.apply(e,qe([],G(t),!1)):e.replaceChildren(t):(e.innerHTML="",Array.isArray(t)?t.forEach(function(n){return e.appendChild(n)}):e.appendChild(t))};function Pfe(){r1(this,this.attributes.visibility!=="hidden")}var tr=function(e){ut(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,za({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Iw(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&Pfe.call(this)},t.prototype.update=function(n,r){var i;return this.attr(za({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t.prototype.getSubShapeStyle=function(n){var r=n.x,i=n.y,o=n.transform,a=n.transformOrigin,s=n.class,l=n.className,c=n.zIndex,u=Wn(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return u},t}(mh);var BE=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},HB=BE,WB=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},qB=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},UB=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},GB=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},$B=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},YB=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},jE=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},XB=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},KB=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},ZB=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},JB=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},VE=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},QB=VE,ej=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},tj=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},nj=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},rj=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function ij(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var oj=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function aj(e){var t="default";if(Al(e)&&e instanceof Image)t="image";else if(Sr(e))t="symbol";else if(rr(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function Nfe(e){var t=aj(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var Un=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,o=i===void 0?0:i,a=n.y,s=a===void 0?0:a,l=this.getSubShapeStyle(n),c=l.symbol,u=l.size,f=u===void 0?16:u,p=Wn(l,["symbol","size"]),d=Nfe(c);Mi(!!d,Vt(r),function(h){h.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call(function(m){if(d==="image"){var g=f*2;m.styles({img:c,width:g,height:g,x:o-f,y:s-f})}else{var g=f/2,v=Sr(c)?c:t.getSymbol(c);m.styles(Te({d:v?.(o,s,g)},p))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(tr);Un.registerSymbol("cross",XB);Un.registerSymbol("hyphen",JB);Un.registerSymbol("line",jE);Un.registerSymbol("plus",ZB);Un.registerSymbol("tick",KB);Un.registerSymbol("circle",BE);Un.registerSymbol("point",HB);Un.registerSymbol("bowtie",YB);Un.registerSymbol("hexagon",$B);Un.registerSymbol("square",WB);Un.registerSymbol("diamond",qB);Un.registerSymbol("triangle",UB);Un.registerSymbol("triangle-down",GB);Un.registerSymbol("line",jE);Un.registerSymbol("dot",VE);Un.registerSymbol("dash",QB);Un.registerSymbol("smooth",ej);Un.registerSymbol("hv",tj);Un.registerSymbol("vh",nj);Un.registerSymbol("hvh",rj);Un.registerSymbol("vhv",ij);var sj=function(e){ut(t,e);function t(n){var r=this,i=n.style,o=Wn(n,["style"]);return r=e.call(this,_e({},{type:"column"},Te({style:i},o)))||this,r.columnsGroup=new vr({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,o=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(o,")"),Vt(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(a){return a.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(a){return a.each(function(s){this.attr(s)})},function(a){return a.remove()})},t.prototype.update=function(n){this.attr(za({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(Ri);var lj=function(e){ut(t,e);function t(n){var r=this,i=n.style,o=Wn(n,["style"]);return r=e.call(this,_e({},{type:"lines"},Te({style:i},o)))||this,r.linesGroup=r.appendChild(new vr),r.areasGroup=r.appendChild(new vr),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,o=n.x,a=n.y;this.style.transform="translate(".concat(o,", ").concat(a,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(za({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){Vt(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){Vt(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(Ri);function cj(e,t){var n,r=t.x,i=t.y,o=G(i.getOptions().range||[0,0],2),a=o[0],s=o[1];return s>a&&(n=G([a,s],2),s=n[0],a=n[1]),e.map(function(l){var c=l.map(function(u,f){return[r.map(f),hr(i.map(u),s,a)]});return c})}function a1(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,o){return qe([o===n?"M":"L"],G(i),!1)});return t?r.reverse():r}function v2(e,t){if(t===void 0&&(t=!1),e.length<=2)return a1(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var o=t?e[r-i-1]:e[i];gv(o,n.slice(-2))||n.push.apply(n,qe([],G(o),!1))}var a=LB(n,!1);return t?a.unshift(qe(["M"],G(e[r-1]),!1)):a.unshift(qe(["M"],G(e[0]),!1)),a}function HE(e,t,n){var r=Td(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function uj(e,t,n,r){return e.map(function(i){return HE(t?v2(i):a1(i),n,r)})}function fj(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var o=e[i],a=a1(o),s=void 0;if(i===0)s=HE(a,t,n);else{var l=e[i-1],c=a1(l,!0);c[0][0]="L",s=qe(qe(qe([],G(a),!1),G(c),!1),[["Z"]],!1)}r.push(s)}return r}function pj(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var o=e[i],a=v2(o),s=void 0;if(i===0)s=HE(a,t,n);else{var l=e[i-1],c=v2(l,!0),u=o[0];c[0][0]="L",s=qe(qe(qe([],G(a),!1),G(c),!1),[qe(["M"],G(u),!1),["Z"]],!1)}r.push(s)}return r}function WE(e){return e.length===0?[0,0]:[Ad(i6(e,function(t){return Ad(t)||0})),Ed(r6(e,function(t){return Ed(t)||0}))]}function qE(e){for(var t=Td(e),n=t[0].length,r=G([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],o=r[1],a=0;a<t.length;a+=1)for(var s=t[a],l=0;l<n;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=o[l],o[l]=s[l]);return t}var dj=function(e){ut(t,e);function t(n){return e.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||n?.length===0)return[[]];var r=Td(n);return Dn(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?qE(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=G(n.getOptions().domain||[0,0],2),i=r[0],o=r[1];return o<0?n.map(o):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,o=r.isStack,a=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=cn(this.attributes,"area"),l=cn(this.attributes,"line"),c=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var f=this.scales,p=f.x,d=f.y,h=cj(u,{type:"line",x:p,y:d}),m=[];if(s){var g=this.baseline;o?m=a?pj(h,c,g):fj(h,c,g):m=uj(h,a,c,g)}return{lines:h.map(function(v,y){return Te({stroke:n.getColor(y),d:a?v2(v):a1(v)},l)}),areas:m.map(function(v,y){return Te({d:v,fill:n.getColor(y)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=cn(this.attributes,"column"),i=this.attributes,o=i.isStack,a=i.type,s=i.scale;if(a!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};o&&(c=qE(c));var u=this.createScales(c),f=u.x,p=u.y,d=G(WE(c),2),h=d[0],m=d[1],g=new ai({domain:[0,m-(h>0?0:h)],range:[0,l*s]}),v=f.getBandWidth(),y=this.rawData;return{columns:c.map(function(x,_){return x.map(function(w,S){var M=v/c.length,O=function(){return{x:f.map(S)+M*_,y:w>=0?p.map(w):p.map(0),width:M,height:g.map(Math.abs(w))}},E=function(){return{x:f.map(S),y:p.map(w),width:v,height:g.map(y[_][S])}};return Te(Te({fill:n.getColor(_)},r),o?E():O())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){zB(r,".container","rect").attr("className","container").node();var i=n.type,o=n.x,a=n.y,s="spark".concat(i),l=Te({x:o,y:a},i==="line"?this.linesStyle:this.columnsStyle);Vt(r).selectAll(".spark").data([i]).join(function(c){return c.append(function(u){return u==="line"?new lj({className:s,style:l}):new sj({className:s,style:l})}).attr("className","spark ".concat(s))},function(c){return c.update(l)},function(c){return c.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return nr(r)?r[n%r.length]:Sr(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,o=this.attributes,a=o.type,s=o.scale,l=o.range,c=l===void 0?[]:l,u=o.spacing,f=this.containerShape,p=f.width,d=f.height,h=G(WE(n),2),m=h[0],g=h[1],v=new ai({domain:[(r=c[0])!==null&&r!==void 0?r:m,(i=c[1])!==null&&i!==void 0?i:g],range:[d,d*(1-s)]});return a==="line"?{type:a,x:new ai({domain:[0,n[0].length-1],range:[0,p]}),y:v}:{type:a,x:new ds({domain:n[0].map(function(y,x){return x}),range:[0,p],paddingInner:u,paddingOuter:u/2,align:.5}),y:v}},t.tag="sparkline",t}(tr);function Lfe(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function UE(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=G(r,1),o=i[0];return!t.includes(o)}));return Object.fromEntries(t.map(function(r){return Lfe(e)?e[r]===!1?[r,!1]:[r,Te(Te({},e[r]),n)]:[r,n]}))}function lu(e,t){e?e.finished.then(t):t()}function hj(e,t){e.length===0?t():Promise.all(e.map(function(n){return n?.finished})).then(t)}function mj(e,t){"update"in e?e.update(t):e.attr(t)}function GE(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return mj(e,{style:r}),null}return e.animate(t,n)}function Ife(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function gj(e,t,n,r){if(r===void 0&&(r="destroy"),Ife(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&Da(e),t.isVisible()&&au(t)};if(!n)return i(),[null];var o=n.duration,a=o===void 0?0:o,s=n.delay,l=s===void 0?0:s,c=Math.ceil(+a/2),u=+a/4,f=G(e.getGeometryBounds().center,2),p=f[0],d=f[1],h=G(t.getGeometryBounds().center,2),m=h[0],g=h[1],v=G([(p+m)/2-p,(d+g)/2-d],2),y=v[0],x=v[1],_=e.style.opacity,w=_===void 0?1:_,S=t.style.opacity,M=S===void 0?1:S,O=e.style.transform||"",E=t.style.transform||"",P=e.animate([{opacity:w,transform:"translate(0, 0) ".concat(O)},{opacity:0,transform:"translate(".concat(y,", ").concat(x,") ").concat(O)}],Te(Te({fill:"both"},n),{duration:l+c+u})),k=t.animate([{opacity:0,transform:"translate(".concat(-y,", ").concat(-x,") ").concat(E),offset:.01},{opacity:M,transform:"translate(0, 0) ".concat(E)}],Te(Te({fill:"both"},n),{duration:c+u,delay:l+c-u}));return lu(k,i),[P,k]}function ko(e,t,n){var r={},i={};return Object.entries(t).forEach(function(o){var a=G(o,2),s=a[0],l=a[1];if(!on(l)){var c=e.style[s]||e.parsedStyle[s]||0;c!==l&&(r[s]=c,i[s]=l)}}),n?GE(e,[r,i],Te({fill:"both"},n)):(mj(e,i),null)}function Mp(e,t){return e.style.opacity||(e.style.opacity=1),ko(e,{opacity:0},t)}var Uw={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},Gw={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},$w={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},_c=pi({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider");var kp=pi({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),Dfe=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,o=n.y,a=n.size,s=a===void 0?10:a,l=n.radius,c=l===void 0?s/4:l,u=n.orientation,f=Wn(n,["x","y","size","radius","orientation"]),p=s,d=p*2.4,h=Vt(r).maybeAppendByClassName(kp.iconRect,"rect").styles(Te(Te({},f),{width:p,height:d,radius:c,x:i-p/2,y:o-d/2,transformOrigin:"center"})),m=i+1/3*p-p/2,g=i+2/3*p-p/2,v=o+1/4*d-d/2,y=o+3/4*d-d/2;h.maybeAppendByClassName("".concat(kp.iconLine,"-1"),"line").styles(Te({x1:m,x2:m,y1:v,y2:y},f)),h.maybeAppendByClassName("".concat(kp.iconLine,"-2"),"line").styles(Te({x1:g,x2:g,y1:v,y2:y},f)),u==="vertical"&&(h.node().style.transform="rotate(90)")},t}(tr),Yw=function(e){ut(t,e);function t(n){return e.call(this,n,$w)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes,o=i.x,a=i.y,s=i.showLabel,l=cn(this.attributes,"label"),c=l.x,u=c===void 0?0:c,f=l.y,p=f===void 0?0:f,d=l.transform,h=l.transformOrigin,m=Wn(l,["x","y","transform","transformOrigin"]),g=G($o(m,[]),2),v=g[0],y=g[1],x=Vt(n).maybeAppendByClassName(kp.labelGroup,"g").styles(y),_=Te(Te({},Gw),v),w=_.text,S=Wn(_,["text"]);Mi(!!s,x,function(M){r.label=M.maybeAppendByClassName(kp.label,"text").styles(Te(Te({},S),{x:o+u,y:a+p,transform:d,transformOrigin:h,text:"".concat(w)})),r.label.on("mousedown",function(O){O.stopPropagation()}),r.label.on("touchstart",function(O){O.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.orientation,s=r.type,l=Te(Te({x:i,y:o,orientation:a},Uw),cn(this.attributes,"icon")),c=this.attributes.iconShape,u=c===void 0?function(){return new Dfe({style:l})}:c,f=Vt(n).maybeAppendByClassName(kp.iconGroup,"g");f.selectAll(kp.icon.class).data([u]).join(function(p){return p.append(typeof u=="string"?u:function(){return u(s)}).attr("className",kp.icon.name)},function(p){return p.update(l)},function(p){return p.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(tr);var y2=function(e){ut(t,e);function t(n){var r=e.call(this,n,Te(Te(Te({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},bs($w,"handle")),bs(Uw,"handleIcon")),bs(Gw,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(o){o.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(bh(o));var a=r.availableSpace,s=a.x,l=a.y,c=r.getBBox(),u=c.x,f=c.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([s,l])-r.getOrientVal([+u,+f])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var o=r.attributes,a=o.slidable,s=o.brushable,l=o.type;i.stopPropagation();var c=r.getOrientVal(bh(i)),u=c-r.prevPos;if(u){var f=r.getRatio(u);switch(r.target){case"start":a&&r.setValuesOffset(f);break;case"end":a&&r.setValuesOffset(0,f);break;case"selection":a&&r.setValuesOffset(f,f);break;case"track":if(!s)return;r.selectionWidth+=f,l==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=c}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var o=r.attributes,a=o.onChange,s=o.type,l=s==="range"?i:i[1],c=s==="range"?r.getValues():r.getValues()[1],u=new or("valuechange",{detail:{oldValue:l,value:c}});r.dispatchEvent(u),a?.(c)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=cn(this.attributes,"sparkline");return Te(Te({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,o=G(this.getOrientVal([[r,i],[i,r]]),2),a=o[0],s=o[1];return{width:a,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,i=n.y,o=n.padding,a=G(ii(o),4),s=a[0],l=a[1],c=a[2],u=a[3],f=this.shape,p=f.width,d=f.height;return{x:u,y:s,width:p-(u+l),height:d-(s+c)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(_c.selection.class).each(function(i,o){ko(this,r[o],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&ko(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&ko(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,o=this.clampValues(n);this.attributes.values=o,this.setValues(o),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,o=r.y,a=cn(this.attributes,"track");this.trackShape=Vt(n).maybeAppendByClassName(_c.track,"rect").styles(Te(Te({x:i,y:o},this.shape),a))},t.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.brushable;this.brushArea=Vt(n).maybeAppendByClassName(_c.brushArea,"rect").styles(Te({x:i,y:o,fill:"transparent",cursor:a?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes,o=i.x,a=i.y,s=i.orientation,l=Vt(n).maybeAppendByClassName(_c.sparklineGroup,"g");Mi(s==="horizontal",l,function(c){var u=Te(Te({},r.sparklineStyle),{x:o,y:a});c.maybeAppendByClassName(_c.sparkline,function(){return new dj({style:u})}).update(u)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,o=i.showHandle,a=i.type,s=a==="range"?["start","end"]:["end"],l=o?s:[],c=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(_c.handle.class).data(l.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(f){var p=f.type;return new Yw({style:n.getHandleStyle(p)})}).each(function(f){var p=f.type;this.attr("class","".concat(_c.handle.name," ").concat(p,"-handle"));var d="".concat(p,"Handle");c[d]=this,this.addEventListener("pointerdown",c.onDragStart(p))})},function(u){return u.each(function(f){var p=f.type;this.update(c.getHandleStyle(p))})},function(u){return u.each(function(f){var p=f.type,d="".concat(p,"Handle");c[d]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.type,s=r.selectionType;this.foregroundGroup=Vt(n).maybeAppendByClassName(_c.foreground,"g");var l=cn(this.attributes,"selection"),c=function(f){return f.style("visibility",function(p){return p.show?"visible":"hidden"}).style("cursor",function(p){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(Te(Te({},l),{transform:"translate(".concat(i,", ").concat(o,")")}))},u=this;this.foregroundGroup.selectAll(_c.selection.class).data(a==="value"?[]:this.calcSelectionArea().map(function(f,p){return{style:Te({},f),index:p,show:s==="select"?p===1:p!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",_c.selection.name).call(c).each(function(p,d){var h=this;d===1?(u.selectionShape=Vt(this),this.on("pointerdown",function(m){h.attr("cursor","grabbing"),u.onDragStart("selection")(m)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){h.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){h.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){h.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(f){return f.call(c)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var o=G(this.range,2),a=o[0],s=o[1],l=G(this.getValues().map(function(g){return g2(g,r)}),2),c=l[0],u=l[1],f=Array.isArray(n)?n:[c,n??u],p=G((f||[c,u]).map(function(g){return g2(g,r)}),2),d=p[0],h=p[1];if(this.attributes.type==="value")return[0,hr(h,a,s)];d>h&&(i=G([h,d],2),d=i[0],h=i[1]);var m=h-d;return m>s-a?[a,s]:d<a?c===a&&u===h?[a,h]:[a,m+a]:h>s?u===s&&c===d?[d,s]:[s-m,s]:[d,h]},t.prototype.calcSelectionArea=function(n){var r=G(this.clampValues(n),2),i=r[0],o=r[1],a=this.availableSpace,s=a.x,l=a.y,c=a.width,u=a.height;return this.getOrientVal([[{y:l,height:u,x:s,width:i*c},{y:l,height:u,x:i*c+s,width:(o-i)*c},{y:l,height:u,x:o*c,width:(1-o)*c}],[{x:s,width:c,y:l,height:i*u},{x:s,width:c,y:i*u+l,height:(o-i)*u},{x:s,width:c,y:o*u,height:(1-o)*u}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,o=i.x,a=i.y,s=i.width,l=i.height,c=G(this.clampValues(),2),u=c[0],f=c[1],p=n==="start"?-r:r,d=(n==="start"?u:f)*this.getOrientVal([s,l])+p;return{x:o+this.getOrientVal([d,s/2]),y:a+this.getOrientVal([l/2,d])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,o=i.type,a=i.orientation,s=i.formatter,l=i.autoFitLabel,c=cn(this.attributes,"handle"),u=cn(c,"label"),f=c.spacing,p=this.getHandleSize(),d=this.clampValues(),h=n==="start"?d[0]:d[1],m=s(h),g=new i1({style:Te(Te(Te({},u),this.inferTextStyle(n)),{text:m})}),v=g.getBBox(),y=v.width,x=v.height;if(g.destroy(),!l){if(o==="value")return{text:m,x:0,y:-x-f};var _=f+p+(a==="horizontal"?y/2:0);return r={text:m},r[a==="horizontal"?"x":"y"]=n==="start"?-_:_,r}var w=0,S=0,M=this.availableSpace,O=M.width,E=M.height,P=this.calcSelectionArea()[1],k=P.x,A=P.y,N=P.width,L=P.height,z=f+p;if(a==="horizontal"){var B=z+y/2;if(n==="start"){var H=k-z-y;w=H>0?-B:B}else{var j=O-k-N-z>y;w=j?B:-B}}else{var W=z,Z=x+z;n==="start"?S=A-p>x?-Z:W:S=E-(A+L)-p>x?Z:-W}return{x:w,y:S,text:m}},t.prototype.getHandleLabelStyle=function(n){var r=cn(this.attributes,"handleLabel");return Te(Te(Te({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=cn(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),o=this.getHandleSize();return Te({cursor:i,shape:n,size:o},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.showLabel,s=r.showLabelOnInteraction,l=r.orientation,c=this.calcHandlePosition(n),u=c.x,f=c.y,p=this.calcHandleText(n),d=a;return!a&&s&&(this.target?d=!0:d=!1),Te(Te(Te({},bs(this.getHandleIconStyle(),"icon")),bs(Te(Te({},this.getHandleLabelStyle(n)),p),"label")),{transform:"translate(".concat(u+i,", ").concat(f+o,")"),orientation:l,showLabel:d,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,o=n.height;return r||Math.floor((this.getOrientVal([+o,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=G(n,2),i=r[0],o=r[1],a=this.attributes.orientation;return a==="horizontal"?i:o},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=this.attributes.type,a=G(this.getValues(),2),s=a[0],l=a[1],c=o==="range"?n:0,u=[s+c,l+r].sort();i?this.setValues(u):this.innerSetValues(u,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,o=r.height;return n/this.getOrientVal([i,o])},t.prototype.dispatchCustomEvent=function(n,r,i){var o=this;n.on(r,function(a){a.stopPropagation(),o.dispatchEvent(new or(i,{detail:a}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,o=n.deltaY,a=o||i,s=this.getRatio(a);this.setValuesOffset(s,s,!0)}},t.tag="slider",t}(tr);var $E=function(e){ut(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var o=r.attributes.value;if(i!==o){var a={detail:{oldValue:i,value:o}};r.dispatchEvent(new or("scroll",a)),r.dispatchEvent(new or("valuechange",a))}},r.onTrackClick=function(i){var o=r.attributes.slidable;if(o){var a=G(r.getLocalPosition(),2),s=a[0],l=a[1],c=G(r.padding,4),u=c[0],f=c[3],p=r.getOrientVal([s+f,l+u]),d=r.getOrientVal(bh(i)),h=(d-p)/r.trackLength;r.setValue(h,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new or("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new or("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new or("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new or("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return ii(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=G(this.range,2),i=r[0],o=r[1];return hr(n,i,o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,o=i===void 0?r:i;return o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=G(this.padding,4),o=i[0],a=i[1],s=i[2],l=i[3],c=G(this.getOrientVal([[r,n],[n,r]]),2),u=c[0],f=c[1];return{x:l,y:o,width:+u-(l+a),height:+f-(o+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var o=this.availableSpace,a=o.width,s=o.height;return i||this.getOrientVal([s,a])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,o=r.contentLength,a=i/o,s=G(this.range,2),l=s[0],c=s[1],u=n*(c-l-a);return[u,u+a]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.orientation,s=r.trackSize,l=r.padding,c=r.slidable,u=cn(this.attributes,"track"),f=cn(this.attributes,"thumb"),p=Te(Te({x:i,y:o,brushable:!1,orientation:a,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},bs(u,"track")),bs(f,"selection"));this.slider=Vt(n).maybeAppendByClassName("scrollbar",function(){return new y2({style:p})}).update(p).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,o=G(this.range,2),a=o[0],s=o[1];this.slider.setValues(this.getValues(hr(n,a,s)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(tr);var Xw={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new Gr({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},GGe=_e({},Xw,{style:{type:"arc"}}),$Ge=_e({},Xw,{style:{}}),Jn=pi({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis");var s1=pi({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function vj(e){return e.reduce(function(t,n,r){return t.push(qe([r===0?"M":"L"],G(n),!1)),t},[])}function zfe(e,t,n){var r=t.connect,i=r===void 0?"line":r,o=t.center;if(i==="line")return vj(e);if(!o)return[];var a=wh(e[0],o),s=n?0:1;return e.reduce(function(l,c,u){return u===0?l.push(qe(["M"],G(c),!1)):l.push(qe(["A",a,a,0,0,s],G(c),!1)),l},[])}function YE(e,t,n){return t.type==="surround"?zfe(e,t,n):vj(e)}function Rfe(e,t,n){var r=n.type,i=n.connect,o=n.center,a=n.closed,s=a?[["Z"]]:[],l=G([YE(e,n),YE(t.slice().reverse(),n,!0)],2),c=l[0],u=l[1],f=G([e[0],t.slice(-1)[0]],2),p=f[0],d=f[1],h=function(y,x){return[c,y,u,x,s].flat()};if(i==="line"||r==="surround")return h([qe(["L"],G(d),!1)],[qe(["L"],G(p),!1)]);if(!o)throw new Error("Arc grid need to specified center");var m=G([wh(d,o),wh(p,o)],2),g=m[0],v=m[1];return h([qe(["A",g,g,0,0,1],G(d),!1),qe(["L"],G(d),!1)],[qe(["A",v,v,0,0,0],G(p),!1),qe(["L"],G(p),!1)])}function Ffe(e,t,n,r){var i=n.animate,o=n.isBillboard,a=t.map(function(s,l){return{id:s.id||"grid-line-".concat(l),d:YE(s.points,n)}});return e.selectAll(s1.line.class).data(a,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,c){var u=Oo(DE(Te({d:l.d},r)),[l,c,a]);this.attr(Te({class:s1.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:o},u))})},function(s){return s.transition(function(l,c){var u=Oo(DE(Te({d:l.d},r)),[l,c,a]);return ko(this,u,i.update)})},function(s){return s.transition(function(){var l=this,c=Mp(this,i.exit);return lu(c,function(){return l.remove()}),c})}).transitions()}function Bfe(e,t,n){var r=n.animate,i=n.connect,o=n.areaFill;if(t.length<2||!o||!i)return[];for(var a=Array.isArray(o)?o:[o,"transparent"],s=function(h){return a[h%a.length]},l=[],c=0;c<t.length-1;c++){var u=G([t[c].points,t[c+1].points],2),f=u[0],p=u[1],d=Rfe(f,p,n);l.push({d,fill:s(c)})}return e.selectAll(s1.region.class).data(l,function(h,m){return m}).join(function(h){return h.append("path").each(function(m,g){var v=Oo(m,[m,g,l]);this.attr(v)}).attr("className",s1.region.name)},function(h){return h.transition(function(m,g){var v=Oo(m,[m,g,l]);return ko(this,v,r.update)})},function(h){return h.transition(function(){var m=this,g=Mp(this,r.exit);return lu(g,function(){return m.remove()}),g})}).transitions()}function jfe(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var o=i.points,a=G(o,1),s=a[0];return Te(Te({},i),{points:qe(qe([],G(o),!1),[s],!1)})}):n}var yj=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,o=n.center,a=n.areaFill,s=n.closed,l=Wn(n,["type","center","areaFill","closed"]),c=jfe(n),u=Vt(r).maybeAppendByClassName(s1.lineGroup,"g"),f=Vt(r).maybeAppendByClassName(s1.regionGroup,"g"),p=Ffe(u,c,n,l),d=Bfe(f,c,n);return qe(qe([],G(p),!1),G(d),!1)},t}(tr);function Kw(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=G(n,2),i=r[0],o=r[1];return[i,Oo(o,t)]}))}function l1(e,t){return t&&Sr(t)?e.filter(t):e}function XE(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function c1(e,t){if(t.type==="linear"){var n=G(t.startPos,2),r=n[0],i=n[1],o=G(t.endPos,2),a=o[0],s=o[1],l=G([a-r,s-i],2),c=l[0],u=l[1];return Vw([c,u])}var f=su(XE(e,t));return[-Math.sin(f),Math.cos(f)]}function x2(e,t,n){var r=c1(e,n);return NB(r,t!=="positive")}function Sh(e,t){return x2(e,t.labelDirection,t)}function Vfe(e,t){var n=G(t.startPos,2),r=n[0],i=n[1],o=G(t.endPos,2),a=o[0],s=o[1],l=G([a-r,s-i],2),c=l[0],u=l[1];return[r+c*e,i+u*e]}function Hfe(e,t){var n=t.radius,r=G(t.center,2),i=r[0],o=r[1],a=su(XE(e,t));return[i+n*Math.cos(a),o+n*Math.sin(a)]}function Ch(e,t){return t.type==="linear"?Vfe(e,t):Hfe(e,t)}function Zw(e){return c1(0,e)[1]===0}function Jw(e){return c1(0,e)[0]===0}function _j(e,t){return t-e===360}function xj(e,t,n,r,i){var o=t-e,a=G([i,i],2),s=a[0],l=a[1],c=G([su(e),su(t)],2),u=c[0],f=c[1],p=function(P){return[n+i*Math.cos(P),r+i*Math.sin(P)]},d=G(p(u),2),h=d[0],m=d[1],g=G(p(f),2),v=g[0],y=g[1];if(_j(e,t)){var x=(f+u)/2,_=G(p(x),2),w=_[0],S=_[1];return[["M",h,m],["A",s,l,0,1,0,w,S],["A",s,l,0,1,0,v,y]]}var M=o>180?1:0,O=e>t?0:1,E=!1;return E?"M".concat(n,",").concat(r,",L").concat(h,",").concat(m,",A").concat(s,",").concat(l,",0,").concat(M,",").concat(O,",").concat(v,",").concat(y,",L").concat(n,",").concat(r):"M".concat(h,",").concat(m,",A").concat(s,",").concat(l,",0,").concat(M,",").concat(O,",").concat(v,",").concat(y)}function Wfe(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,o=t.radius;return qe(qe([n,r],G(i),!1),[o],!1)}function qfe(e,t,n,r){var i=t.startAngle,o=t.endAngle,a=t.center,s=t.radius;return e.selectAll(Jn.line.class).data([{d:xj.apply(void 0,qe(qe([i,o],G(a),!1),[s],!1))}],function(l,c){return c}).join(function(l){return l.append("path").attr("className",Jn.line.name).styles(t).styles({d:function(c){return c.d}})},function(l){return l.transition(function(){var c=this,u=AB(this,Wfe(this),qe(qe([i,o],G(a),!1),[s],!1),r.update);if(u){var f=function(){var p=Cr(c.attributes,"__keyframe_data__");c.style.d=xj.apply(void 0,qe([],G(p),!1))};u.onframe=f,u.onfinish=f}return u}).styles(t)},function(l){return l.remove()}).styles(n).transitions()}function Ufe(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function Gfe(e,t,n){n===void 0&&(n=[0,0]);var r=G([e,t,n],3),i=G(r[0],2),o=i[0],a=i[1],s=G(r[1],2),l=s[0],c=s[1],u=G(r[2],2),f=u[0],p=u[1],d=G([l-o,c-a],2),h=d[0],m=d[1],g=Math.sqrt(Math.pow(h,2)+Math.pow(m,2)),v=G([-f/g,p/g],2),y=v[0],x=v[1];return[y*h,y*m,x*h,x*m]}function bj(e){var t=G(e,2),n=G(t[0],2),r=n[0],i=n[1],o=G(t[1],2),a=o[0],s=o[1];return{x1:r,y1:i,x2:a,y2:s}}function $fe(e,t,n,r){var i=t.showTrunc,o=t.startPos,a=t.endPos,s=t.truncRange,l=t.lineExtension,c=G([o,a],2),u=G(c[0],2),f=u[0],p=u[1],d=G(c[1],2),h=d[0],m=d[1],g=G(l?Gfe(o,a,l):new Array(4).fill(0),4),v=g[0],y=g[1],x=g[2],_=g[3],w=function(j){return e.selectAll(Jn.line.class).data(j,function(W,Z){return Z}).join(function(W){return W.append("line").attr("className",function(Z){return"".concat(Jn.line.name," ").concat(Z.className)}).styles(n).transition(function(Z){return ko(this,bj(Z.line),!1)})},function(W){return W.styles(n).transition(function(Z){var ie=Z.line;return ko(this,bj(ie),r.update)})},function(W){return W.remove()}).transitions()};if(!i||!s)return w([{line:[[f+v,p+y],[h+x,m+_]],className:Jn.line.name}]);var S=G(s,2),M=S[0],O=S[1],E=h-f,P=m-p,k=G([f+E*M,p+P*M],2),A=k[0],N=k[1],L=G([f+E*O,p+P*O],2),z=L[0],B=L[1],H=w([{line:[[f+v,p+y],[A,N]],className:Jn.lineFirst.name},{line:[[z,B],[h+x,m+_]],className:Jn.lineSecond.name}]);return Ufe(e,t),H}function Yfe(e,t,n,r){var i=n.showArrow,o=n.showTrunc,a=n.lineArrow,s=n.lineArrowOffset,l=n.lineArrowSize,c;if(t==="arc"?c=e.select(Jn.line.class):o?c=e.select(Jn.lineSecond.class):c=e.select(Jn.line.class),!i||!a||n.type==="arc"&&_j(n.startAngle,n.endAngle)){var u=c.node();u&&(u.style.markerEnd=void 0);return}var f=jl(a);f.attr(r),o1(f,l,!0),c.style("markerEnd",f).style("markerEndOffset",-s)}function wj(e,t,n){var r=t.type,i,o=cn(t,"line");return r==="linear"?i=$fe(e,t,IE(o,"arrow"),n):i=qfe(e,t,IE(o,"arrow"),n),Yfe(e,r,t,o),i}function Xfe(e,t){return x2(e,t.gridDirection,t)}function Sj(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function Kfe(e,t){var n=t.gridLength;return e.map(function(r,i){var o=r.value,a=G(Ch(o,t),2),s=a[0],l=a[1],c=G(xs(Xfe(o,t),n),2),u=c[0],f=c[1];return{id:i,points:[[s,l],[s+u,l+f]]}})}function Zfe(e,t){var n=t.gridControlAngles,r=Sj(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=G(r,2),o=i[0],a=i[1];return e.map(function(s,l){var c=s.value,u=G(Ch(c,t),2),f=u[0],p=u[1],d=G([f-o,p-a],2),h=d[0],m=d[1],g=[];return n.forEach(function(v){var y=su(v),x=G([Math.cos(y),Math.sin(y)],2),_=x[0],w=x[1],S=h*_-m*w+o,M=h*w+m*_+a;g.push([S,M])}),{points:g,id:l}})}function Cj(e,t,n,r){var i=cn(n,"grid"),o=i.type,a=i.areaFill,s=Sj(n),l=l1(t,n.gridFilter),c=o==="segment"?Kfe(l,n):Zfe(l,n),u=Te(Te({},i),{center:s,areaFill:Sr(a)?l.map(function(f,p){return Oo(a,[f,p,l])}):a,animate:r,data:c});return e.selectAll(Jn.grid.class).data([1]).join(function(f){return f.append(function(){return new yj({style:u})}).attr("className",Jn.grid.name)},function(f){return f.transition(function(){return this.update(u)})},function(f){return f.remove()}).transitions()}var Qw=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,o=i.x1,a=i.y1,s=i.x2,l=i.y2,c=Math.cos(t),u=Math.sin(t),f=n-n*c+r*u,p=r-n*u-r*c,d=[[c*o-u*l+f,u*o+c*l+p],[c*s-u*l+f,u*s+c*l+p],[c*o-u*a+f,u*o+c*a+p],[c*s-u*a+f,u*s+c*a+p]];return d},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function b2(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=G(r.min,2),o=i[0],a=i[1],s=G(r.max,2),l=s[0],c=s[1],u=e.getBBox(),f=u.width,p=u.height,d=p,h=0,m=0,g=o,v=a,y=NE(e);if(y){d-=1.5;var x=y.style.textAlign,_=y.style.textBaseline;x==="center"?g=(o+l)/2:(x==="right"||x==="end")&&(g=l),_==="middle"?v=(a+c)/2:_==="bottom"&&(v=c)}var w=G(ii(t),4),S=w[0],M=S===void 0?0:S,O=w[1],E=O===void 0?0:O,P=w[2],k=P===void 0?M:P,A=w[3],N=A===void 0?E:A,L=new Qw((h+=o)-N,(m+=a)-M,h+f+E,m+d+k);return e.setEulerAngles(n),L.rotatedPoints(su(n),g,v)}function _2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function w2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function Jfe(e,t){var n=w2(e[0],e[1],t[0]),r=w2(e[0],e[1],t[1]),i=w2(t[0],t[1],e[0]),o=w2(t[0],t[1],e[1]);return!!(n!==r&&i!==o||n===0&&_2(e,t[0])||r===0&&_2(e,t[1])||i===0&&_2(t,e[0])||o===0&&_2(t,e[1]))}function Qfe(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,o=0;do{var a=[e[o],e[(o+1)%n]];if(Jfe(a,r)){if(w2(a[0],t,a[1])===0)return _2(a,t);i++}o=(o+1)%n}while(o!==0);return!!(i&1)}function epe(e,t){return t.every(function(n){return Qfe(e,n)})}function Oj(e,t,n){var r=e.x1,i=e.x2,o=e.y1,a=e.y2,s=[[r,o],[i,o],[i,a],[r,a]],l=b2(t,n);return epe(s,l)}function tpe(e,t){var n=G(e,4),r=n[0],i=n[1],o=n[2],a=n[3],s=G(t,4),l=s[0],c=s[1],u=s[2],f=s[3],p=o-r,d=a-i,h=u-l,m=f-c,g=p*m-h*d;if(g===0)return!1;var v=g>0,y=r-l,x=i-c,_=p*x-d*y;if(_<0===v)return!1;var w=h*x-m*y;return!(w<0===v||_>g===v||w>g===v)}function npe(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return tpe(t,r)})}function Mj(e,t,n){var r,i,o=b2(e,n).flat(1),a=b2(t,n).flat(1),s=[[o[0],o[1],o[2],o[3]],[o[0],o[1],o[4],o[5]],[o[4],o[5],o[6],o[7]],[o[2],o[3],o[6],o[7]]];try{for(var l=$i(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(npe(a,u))return!0}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return!1}function rpe(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var o=e.center,a=e.radius,s=G(o,2),l=s[0],c=s[1],u=r==="negative"?0:i,f=-a-u,p=a+u,d=G(ii(t),4),h=d[0],m=d[1],g=d[2],v=d[3];return new Qw(l+f-v,c+f-h,l+p+m,c+p+g)}var y=G(e.startPos,2),x=y[0],_=y[1],w=G(e.endPos,2),S=w[0],M=w[1],O=G(Jw(e)?[-t,0,t,0]:[0,t,0,-t],4),E=O[0],P=O[1],k=O[2],A=O[3],N=Sh(0,e),L=xs(N,i),z=new Qw(x,_,S,M);return z.x1+=A,z.y1+=E,z.x2+=P+L[0],z.y2+=k+L[1],z}function Ep(e,t,n){var r,i,o=t.crossPadding,a=new Set,s=null,l=rpe(t,o),c=function(h){return l?Oj(l,h):!0},u=function(h,m){return!h||!h.firstChild?!0:!Mj(h.firstChild,m.firstChild,ii(n))};try{for(var f=$i(e),p=f.next();!p.done;p=f.next()){var d=p.value;c(d)?!s||u(s,d)?s=d:(a.add(s),a.add(d)):a.add(d)}}catch(h){r={error:h}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return Array.from(a)}function KE(e,t){return t===void 0&&(t={}),on(e)?0:typeof e=="number"?e:Math.floor(MB(e,t))}function ZE(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,o=i===void 0?"...":i,a=t.minLength,s=t.maxLength,l=s===void 0?1/0:s,c=t.step,u=c===void 0?" ":c,f=t.margin,p=f===void 0?[0,0,0,0]:f,d=PE(r.getTextShape(e[0])),h=KE(u,d),m=a?KE(a,d):h,g=KE(l,d);(on(g)||g===1/0)&&(g=Math.max.apply(null,e.map(function(L){return L.getBBox().width})));for(var v=e.slice(),y=G(p,4),x=y[0],_=x===void 0?0:x,w=y[1],S=w===void 0?0:w,M=y[2],O=M===void 0?_:M,E=y[3],P=E===void 0?S:E,k=function(L){if(v.forEach(function(z){r.ellipsis(r.getTextShape(z),L,o)}),v=Ep(e,n,p),v.length<1)return{value:void 0}},A=g;A>m+h;A-=h){var N=k(A);if(typeof N=="object")return N.value}}}var ipe={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,o){return o%r?(Da(i),!1):!0})}},ope=function(e){return e.filter(Dw)};function JE(e,t,n,r){var i=e.length,o=t.keepHeader,a=t.keepTail;if(!(i<=1||i===2&&o&&a)){var s=ipe.parity,l=function(x){return x.forEach(r.show),x},c=2,u=e.slice(),f=e.slice(),p=Math.min.apply(Math,qe([1],G(e.map(function(x){return x.getBBox().width})),!1));if(n.type==="linear"&&(Zw(n)||Jw(n))){var d=zE(e[0]).left,h=zE(e[i-1]).right,m=Math.abs(h-d)||1;c=Math.max(Math.floor(i*p/m),c)}var g,v;for(o&&(g=u.splice(0,1)[0]),a&&(v=u.splice(-1,1)[0],u.reverse()),l(u);c<e.length&&Ep(ope(v?qe(qe([v],G(f),!1),[g],!1):qe([g],G(f),!1)),n,t?.margin).length;){if(v&&!g&&c%2===0){var y=u.splice(0,1);y.forEach(r.hide)}else if(v&&g){var y=u.splice(0,1);y.forEach(r.hide)}f=s(l(u),{seq:c}),c++}}}function QE(e,t,n,r){var i,o,a=t.optionalAngles,s=a===void 0?[0,45,90]:a,l=t.margin,c=t.recoverWhenFailed,u=c===void 0?!0:c,f=e.map(function(v){return v.getLocalEulerAngles()}),p=function(){return Ep(e,n,l).length<1},d=function(v){return e.forEach(function(y,x){var _=Array.isArray(v)?v[x]:v;r.rotate(y,+_)})};try{for(var h=$i(s),m=h.next();!m.done;m=h.next()){var g=m.value;if(d(g),p())return}}catch(v){i={error:v}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}u&&d(f)}function ape(e){var t=e.type,n=e.labelDirection;return t==="linear"&&Zw(e)?n==="negative"?"bottom":"top":"middle"}function e8(e,t,n,r){var i=t.wordWrapWidth,o=i===void 0?50:i,a=t.maxLines,s=a===void 0?3:a,l=t.recoverWhenFailed,c=l===void 0?!0:l,u=t.margin,f=u===void 0?[0,0,0,0]:u,p=e.map(function(y){return y.attr("maxLines")||1}),d=Math.min.apply(Math,qe([],G(p),!1)),h=function(){return Ep(e,n,f).length<1},m=ape(n),g=function(y){return e.forEach(function(x,_){var w=Array.isArray(y)?y[_]:y;r.wrap(x,o,w,m)})};if(!(d>s)){for(var v=d;v<=s;v++)if(g(v),h())return;c&&g(p)}}var spe=new Map([["hide",JE],["rotate",QE],["ellipsis",ZE],["wrap",e8]]);function lpe(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!SB(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function kj(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(o){var a=o.type,s=spe.get(a);lpe(e,t,a)&&s?.(e,o,t,n)})}function Ej(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function Aj(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function t8(e,t){var n=G(e,2),r=n[0],i=n[1],o=G(t,2),a=o[0],s=o[1],l=G([r*a+i*s,r*s-i*a],2),c=l[0],u=l[1];return Math.atan2(u,c)}function cpe(e){var t=(e+360)%180;return Mo(t,-90,90)||(t+=180),t}function upe(e,t,n){var r,i=n.labelAlign,o=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(o)return t.getLocalEulerAngles();var a=0,s=Sh(e.value,n),l=c1(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?a=t8([1,0],s):a=t8([l[0]<0?-1:1,0],l),cpe(TE(a)))}function Lj(e,t,n){var r=n.type,i=n.labelAlign,o=Sh(e,n),a=Aj(t),s=Aj(TE(t8([1,0],o))),l="center",c="middle";return r==="linear"?[90,270].includes(s)&&a===0?(l="center",c=o[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(a)?l="center":s===0?(Mo(a,0,90,!1,!0)||Mo(a,0,90)||Mo(a,270,360))&&(l="start"):s===90?Mo(a,0,90,!1,!0)?l="start":(Mo(a,90,180)||Mo(a,270,360))&&(l="end"):s===270?Mo(a,0,90,!1,!0)?l="end":(Mo(a,90,180)||Mo(a,270,360))&&(l="start"):s===180&&(a===90?l="start":(Mo(a,0,90)||Mo(a,270,360))&&(l="end")):i==="parallel"?Mo(s,0,180,!0)?c="top":c="bottom":i==="horizontal"?Mo(s,90,270,!1)?l="end":(Mo(s,270,360,!1)||Mo(s,0,90))&&(l="start"):i==="perpendicular"&&(Mo(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:c}}function fpe(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=Lj(r,e,n),o=t.querySelector(Jn.labelItem.class);o&&Ij(o,i)}function Tj(e,t,n){var r=n.showTick,i=n.tickLength,o=n.tickDirection,a=n.labelDirection,s=n.labelSpacing,l=t.indexOf(e),c=Oo(s,[e,l,t]),u=G([Sh(e.value,n),Ej(a,o)],2),f=u[0],p=u[1],d=p===1?Oo(r?i:0,[e,l,t]):0,h=G(_h(xs(f,c+d),Ch(e.value,n)),2),m=h[0],g=h[1];return{x:m,y:g}}function ppe(e,t,n,r){var i=r.labelFormatter,o=Sr(i)?function(){return jl(Oo(i,[e,t,n,Sh(e.value,r)]))}:function(){return jl(e.label||"")};return o}function Ij(e,t){e.nodeName==="text"&&e.attr(t)}function Pj(e){kj(this.node().childNodes,e,{hide:Da,show:au,rotate:function(t,n){fpe(+n,t,e)},ellipsis:function(t,n,r){t&&m2(t,n||1/0,r)},wrap:function(t,n,r){t&&kB(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function Nj(e,t,n,r,i){var o=n.indexOf(t),a=Vt(e).append(ppe(t,o,n,i)).attr("className",Jn.labelItem.name).node(),s=G($o(Kw(r,[t,o,n])),2),l=s[0],c=s[1],u=c.transform,f=Wn(c,["transform"]);qw(a,u);var p=upe(t,a,i);return a.getLocalEulerAngles()||a.setLocalEulerAngles(p),Ij(a,Te(Te({},Lj(t.value,p,i)),l)),e.attr(f),a}function Dj(e,t,n,r){var i=l1(t,n.labelFilter),o=cn(n,"label");return e.selectAll(Jn.label.class).data(i,function(a,s){return s}).join(function(a){return a.append("g").attr("className",Jn.label.name).transition(function(s){Nj(this,s,t,o,n);var l=Tj(s,t,n),c=l.x,u=l.y;return this.style.transform="translate(".concat(c,", ").concat(u,")"),null}).call(function(){Pj.call(e,n)})},function(a){return a.transition(function(s){var l=this.querySelector(Jn.labelItem.class),c=Nj(this,s,t,o,n),u=gj(l,c,r.update),f=Tj(s,t,n),p=f.x,d=f.y,h=ko(this,{transform:"translate(".concat(p,", ").concat(d,")")},r.update);return qe(qe([],G(u),!1),[h],!1)}).call(function(s){var l=Cr(s,"_transitions").flat().filter(Dw);hj(l,function(){Pj.call(e,n)})})},function(a){return a.transition(function(){var s=this,l=Mp(this.childNodes[0],r.exit);return lu(l,function(){return Vt(s).remove()}),l})}).transitions()}function Rj(e,t){return x2(e,t.tickDirection,t)}function dpe(e,t){var n=G(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function hpe(e,t,n,r,i){var o=i.tickLength,a=G(dpe(r,Oo(o,[e,t,n])),2),s=G(a[0],2),l=s[0],c=s[1],u=G(a[1],2),f=u[0],p=u[1];return{x1:l,x2:f,y1:c,y2:p}}function mpe(e,t,n,r,i){var o=i.tickFormatter,a=Rj(t.value,i),s="line";return Sr(o)&&(s=function(){return Oo(o,[t,n,r,a])}),e.append(s).attr("className",Jn.tickItem.name)}function gpe(e,t,n,r,i,o,a){var s=Rj(e.value,o),l=hpe(e,t,n,s,o),c=l.x1,u=l.x2,f=l.y1,p=l.y2,d=G($o(Kw(a,[e,t,n,s])),2),h=d[0],m=d[1];r.node().nodeName==="line"&&r.styles(Te({x1:c,x2:u,y1:f,y2:p},h)),i.attr(m),r.styles(h)}function zj(e,t,n,r,i,o){var a=mpe(Vt(this),e,t,n,r);gpe(e,t,n,a,this,r,i);var s=G(Ch(e.value,r),2),l=s[0],c=s[1];return ko(this,{transform:"translate(".concat(l,", ").concat(c,")")},o)}function Fj(e,t,n,r){var i=l1(t,n.tickFilter),o=cn(n,"tick");return e.selectAll(Jn.tick.class).data(i,function(a){return a.id||a.label}).join(function(a){return a.append("g").attr("className",Jn.tick.name).transition(function(s,l){return zj.call(this,s,l,i,n,o,!1)})},function(a){return a.transition(function(s,l){return this.removeChildren(),zj.call(this,s,l,i,n,o,r.update)})},function(a){return a.transition(function(){var s=this,l=Mp(this.childNodes[0],r.exit);return lu(l,function(){return s.remove()}),l})}).transitions()}var Bj=pi({text:"text"},"title");function S2(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function jj(e,t){var n=e.attributes,r=n.position,i=n.spacing,o=n.inset,a=n.text,s=e.getBBox(),l=t.getBBox(),c=S2(r),u=G(ii(a?i:0),4),f=u[0],p=u[1],d=u[2],h=u[3],m=G(ii(o),4),g=m[0],v=m[1],y=m[2],x=m[3],_=G([h+p,f+d],2),w=_[0],S=_[1],M=G([x+v,g+y],2),O=M[0],E=M[1];if(c[0]==="l")return new fr(s.x,s.y,l.width+s.width+w+O,Math.max(l.height+E,s.height));if(c[0]==="t")return new fr(s.x,s.y,Math.max(l.width+O,s.width),l.height+s.height+S+E);var P=G([t.attributes.width||l.width,t.attributes.height||l.height],2),k=P[0],A=P[1];return new fr(l.x,l.y,k+s.width+w+O,A+s.height+S+E)}function vpe(e,t){var n=Object.entries(t).reduce(function(r,i){var o=G(i,2),a=o[0],s=o[1],l=e.node().attr(a);return l||(r[a]=s),r},{});e.styles(n)}function ype(e){var t,n,r,i,o=e,a=o.width,s=o.height,l=o.position,c=G([+a/2,+s/2],2),u=c[0],f=c[1],p=G([+u,+f,"center","middle"],4),d=p[0],h=p[1],m=p[2],g=p[3],v=S2(l);return v.includes("l")&&(t=G([0,"start"],2),d=t[0],m=t[1]),v.includes("r")&&(n=G([+a,"end"],2),d=n[0],m=n[1]),v.includes("t")&&(r=G([0,"top"],2),h=r[0],g=r[1]),v.includes("b")&&(i=G([+s,"bottom"],2),h=i[0],g=i[1]),{x:d,y:h,textAlign:m,textBaseline:g}}var e3=function(e){ut(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,o=r.height,a=r.position,s=r.spacing,l=r.inset,c=n.querySelector(Bj.text.class);if(!c)return new fr(0,0,+i,+o);var u=c.getBBox(),f=u.width,p=u.height,d=G(ii(s),4),h=d[0],m=d[1],g=d[2],v=d[3],y=G([0,0,+i,+o],4),x=y[0],_=y[1],w=y[2],S=y[3],M=S2(a);if(M.includes("i"))return new fr(x,_,w,S);M.forEach(function(B,H){var j,W,Z,ie;B==="t"&&(j=G(H===0?[p+g,+o-p-g]:[0,+o],2),_=j[0],S=j[1]),B==="r"&&(W=G([+i-f-v],1),w=W[0]),B==="b"&&(Z=G([+o-p-h],1),S=Z[0]),B==="l"&&(ie=G(H===0?[f+m,+i-f-m]:[0,+i],2),x=ie[0],w=ie[1])});var O=G(ii(l),4),E=O[0],P=O[1],k=O[2],A=O[3],N=G([A+P,E+k],2),L=N[0],z=N[1];return new fr(x+A,_+E,w-L,S-z)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new fr(0,0,0,0)},t.prototype.render=function(n,r){var i=this,o=n.width,a=n.height,s=n.position,l=n.spacing,c=Wn(n,["width","height","position","spacing"]),u=G($o(c),1),f=u[0],p=ype(n),d=p.x,h=p.y,m=p.textAlign,g=p.textBaseline;Mi(!!c.text,Vt(r),function(v){i.title=v.maybeAppendByClassName(Bj.text,"text").styles(f).call(vpe,{x:d,y:h,textAlign:m,textBaseline:g}).node()})},t}(tr);function xpe(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,o=n.titleSpacing,a=S2(i),s=e.node().getLocalBounds(),l=G(s.min,2),c=l[0],u=l[1],f=G(s.halfExtents,2),p=f[0],d=f[1],h=G(t.node().getLocalBounds().halfExtents,2),m=h[0],g=h[1],v=G([c+p,u+d],2),y=v[0],x=v[1],_=G(ii(o),4),w=_[0],S=_[1],M=_[2],O=_[3];if(["start","end"].includes(i)&&n.type==="linear"){var E=n.startPos,P=n.endPos,k=G(i==="start"?[E,P]:[P,E],2),A=k[0],N=k[1],L=Vw([-N[0]+A[0],-N[1]+A[1]]),z=G(xs(L,w),2),B=z[0],H=z[1];return{x:A[0]+B,y:A[1]+H}}return a.includes("t")&&(x-=d+g+w),a.includes("r")&&(y+=p+m+S),a.includes("l")&&(y-=p+m+O),a.includes("b")&&(x+=d+g+M),{x:y,y:x}}function bpe(e,t,n){var r=e.getGeometryBounds().halfExtents,i=r[1]*2;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function Vj(e,t,n,r,i){var o=cn(r,"title"),a=G($o(o),2),s=a[0],l=a[1],c=l.transform,u=l.transformOrigin,f=Wn(l,["transform","transformOrigin"]);t.styles(f);var p=c||bpe(e.node(),s.direction,s.position);e.styles(Te(Te({},s),{transformOrigin:u})),qw(e.node(),p);var d=xpe(Vt(n._offscreen||n.querySelector(Jn.mainGroup.class)),t,r),h=d.x,m=d.y,g=ko(t.node(),{transform:"translate(".concat(h,", ").concat(m,")")},i);return g}function Hj(e,t,n,r){var i=n.titleText;return e.selectAll(Jn.title.class).data([{title:i}].filter(function(o){return!!o.title}),function(o,a){return o.title}).join(function(o){return o.append(function(){return jl(i)}).attr("className",Jn.title.name).transition(function(){return Vj(Vt(this),e,t,n,r.enter)})},function(o){return o.transition(function(){return Vj(Vt(this),e,t,n,r.update)})},function(o){return o.remove()}).transitions()}function Wj(e,t,n,r){var i=e.showLine,o=e.showTick,a=e.showLabel,s=t.maybeAppendByClassName(Jn.lineGroup,"g"),l=Mi(i,s,function(d){return wj(d,e,r)})||[],c=t.maybeAppendByClassName(Jn.tickGroup,"g"),u=Mi(o,c,function(d){return Fj(d,n,e,r)})||[],f=t.maybeAppendByClassName(Jn.labelGroup,"g"),p=Mi(a,f,function(d){return Dj(d,n,e,r)})||[];return qe(qe(qe([],G(l),!1),G(u),!1),G(p),!1).filter(function(d){return!!d})}var Oh=function(e){ut(t,e);function t(n){return e.call(this,n,Xw)||this}return t.prototype.render=function(n,r,i){var o=this,a=n.titleText,s=n.data,l=n.animate,c=n.showTitle,u=n.showGrid,f=n.dataThreshold,p=n.truncRange,d=IB(s,f).filter(function(w){var S=w.value;return!(p&&S>p[0]&&S<p[1])}),h=UE(i===void 0?l:i),m=Vt(r).maybeAppendByClassName(Jn.gridGroup,"g"),g=Mi(u,m,function(w){return Cj(w,d,n,h)})||[],v=Vt(r).maybeAppendByClassName(Jn.mainGroup,"g");a&&(!this.initialized&&h.enter||this.initialized&&h.update)&&Wj(n,Vt(this.offscreenGroup),d,UE(!1));var y=Wj(n,Vt(v.node()),d,h),x=Vt(r).maybeAppendByClassName(Jn.titleGroup,"g"),_=Mi(c,x,function(w){return Hj(w,o,n,h)})||[];return qe(qe(qe([],G(g),!1),G(y),!1),G(_),!1).flat().filter(function(w){return!!w})},t}(tr);var Vl=pi({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),qj=function(e){ut(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:oj(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,o){return"".concat(i,"/").concat(o)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new vr({class:Vl.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new vr({class:Vl.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return hr(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=G(VB(n.map(function(f){var p=f.getBBox(),d=p.width,h=p.height;return[d,h]})).map(function(f){return Math.max.apply(Math,qe([],G(f),!1))}),2),i=r[0],o=r[1],a=this.attributes,s=a.pageWidth,l=s===void 0?i:s,c=a.pageHeight,u=c===void 0?o:c;return{pageWidth:l,pageHeight:u}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,o=this.controllerShape,a=this.pageShape,s=a.pageWidth,l=a.pageHeight;return new fr(r,i,s+o.width,l)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,o=this,a=o.currPage,s=o.playState,l=o.playWindow,c=o.pageViews;if(s!=="idle"||n<0||c.length<=0||n>=c.length)return null;c[a].setLocalPosition(0,0),this.prepareFollowingPage(n);var u=G(this.getFollowingPageDiff(n),2),f=u[0],p=u[1];this.playState="running";var d=GE(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-p,")")}],i);return lu(d,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),d},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var o=n?(i-1+r)%r:hr(i-1,0,r);return this.goTo(o)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var o=n?(i+1)%r:hr(i+1,0,r);return this.goTo(o)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,o=r.pageHeight;if(!i||!o){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Vl.clipPath,"rect").styles({width:i,height:o}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?au(r):Da(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,o=n.pageInfoGroup,a=this.attributes,s=a.orientation,l=a.controllerPadding,c=o.getBBox(),u=c.width,f=c.height,p=G(s==="horizontal"?[-180,0]:[-90,90],2),d=p[0],h=p[1];r.setLocalEulerAngles(d),i.setLocalEulerAngles(h);var m=r.getBBox(),g=m.width,v=m.height,y=i.getBBox(),x=y.width,_=y.height,w=Math.max(g,u,x),S=s==="horizontal"?{offset:[[0,0],[g/2+l,0],[g+u+l*2,0]],textAlign:"start"}:{offset:[[w/2,-v-l],[w/2,0],[w/2,_+l]],textAlign:"center"},M=G(S.offset,3),O=G(M[0],2),E=O[0],P=O[1],k=G(M[1],2),A=k[0],N=k[1],L=G(M[2],2),z=L[0],B=L[1],H=S.textAlign,j=o.querySelector("text");j&&(j.style.textAlign=H),r.setLocalPosition(E,P),o.setLocalPosition(A,N),i.setLocalPosition(z,B)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,o=r.pageViews,a=r.attributes.formatter;o.length<2||((n=this.pageInfoGroup.querySelector(Vl.pageInfo.class))===null||n===void 0||n.attr("text",a(i+1,o.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,o=this.pageShape,a=o.pageWidth,s=o.pageHeight,l=n<r?-1:1;return i==="horizontal"?[l*a,0]:[0,l*s]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,o=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var a=G(this.getFollowingPageDiff(n),2),s=a[0],l=a[1];o[n].setLocalPosition(s,l)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,o=this.pageShape,a=o.pageWidth,s=o.pageHeight,l=this.pageViews.length>=2,c=n.maybeAppendByClassName(Vl.controller,"g");if(r1(c.node(),l),!!l){var u=cn(this.attributes,"button"),f=cn(this.attributes,"pageNum"),p=G($o(u),2),d=p[0],h=p[1],m=d.size,g=Wn(d,["size"]),v=!c.select(Vl.prevBtnGroup.class).node(),y=c.maybeAppendByClassName(Vl.prevBtnGroup,"g").styles(h);this.prevBtnGroup=y.node();var x=y.maybeAppendByClassName(Vl.prevBtn,"path"),_=c.maybeAppendByClassName(Vl.nextBtnGroup,"g").styles(h);this.nextBtnGroup=_.node();var w=_.maybeAppendByClassName(Vl.nextBtn,"path");[x,w].forEach(function(M){M.styles(Te(Te({},g),{transformOrigin:"center"})),o1(M.node(),m,!0)});var S=c.maybeAppendByClassName(Vl.pageInfoGroup,"g");this.pageInfoGroup=S.node(),S.maybeAppendByClassName(Vl.pageInfo,"text").styles(f),this.updatePageInfo(),c.node().setLocalPosition(a+i,s/2),v&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=n.x,o=i===void 0?0:i,a=n.y,s=a===void 0?0:a;this.attr("transform","translate(".concat(o,", ").concat(s,")"));var l=Vt(r);this.renderClipPath(l),this.renderController(l),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=mv(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(nn.INSERTED,r),this.playWindow.addEventListener(nn.REMOVED,r)},t}(tr);function Uj(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function _pe(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var Gj=1.4,$j=.4;function wpe(e,t,n){var r=n,i=r*Gj,o=r/2,a=r/6,s=e+i*$j;return[["M",e,t],["L",s,t+o],["L",e+i,t+o],["L",e+i,t-o],["L",s,t-o],["Z"],["M",s,t+a],["L",e+i-2,t+a],["M",s,t-a],["L",e+i-2,t-a]]}function Spe(e,t,n){var r=n,i=r*Gj,o=r/2,a=r/6,s=t+i*$j;return[["M",e,t],["L",e-o,s],["L",e-o,t+i],["L",e+o,t+i],["L",e+o,s],["Z"],["M",e-a,s],["L",e-a,t+i-2],["M",e+a,s],["L",e+a,t+i-2]]}Un.registerSymbol("hiddenHandle",_pe);Un.registerSymbol("verticalHandle",wpe);Un.registerSymbol("horizontalHandle",Spe);function Yj(e,t,n,r){var i;r===void 0&&(r=4);var o=G(e,2),a=o[0],s=o[1],l=G(t,2),c=l[0],u=l[1],f=G(n,2),p=f[0],d=f[1],h=G([c,u],2),m=h[0],g=h[1],v=g-m;return m>g&&(i=G([g,m],2),m=i[0],g=i[1]),v>s-a?[a,s]:m<a?p===a&&d===g?[a,g]:[a,v+a]:g>s?d===s&&p===m?[m,s]:[s-v,s]:[m,g]}function _s(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var Zs=pi({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function Cpe(e){var t=e.querySelector(Zs.marker.class);return t?t.style:{}}var Xj=function(e){ut(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new ys({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,o=n.node().getBBox(),a=o.width,s=o.height,l=r.node().getBBox(),c=l.width,u=l.height;return{markerWidth:i,labelWidth:a,valueWidth:c,height:Math.max(i,s,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=G(ii(n),2),i=r[0],o=r[1],a=this.showValue?o:0,s=i+a;return[i/s,a/s]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,o=r.width,a=this.actualSpace,s=a.markerWidth,l=a.height,c=this.actualSpace,u=c.labelWidth,f=c.valueWidth,p=G(this.spacing,2),d=p[0],h=p[1];if(o){var m=o-i-d-h,g=G(this.span,2),v=g[0],y=g[1];n=G([v*m,y*m],2),u=n[0],f=n[1]}var x=s+u+f+d+h;return{width:x,height:l,markerWidth:s,labelWidth:u,valueWidth:f}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=G(ii(n),2),i=r[0],o=r[1];return this.showValue?[i,o]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,o=n.valueWidth,a=n.width,s=n.height,l=G(this.spacing,2),c=l[0],u=l[1];return{height:s,width:a,markerWidth:r,labelWidth:i,valueWidth:o,position:[r/2,r+c,r+i+c+u]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=Cpe(this.markerGroup.node()),r=this.attributes,i=r.markerSize,o=r.markerStrokeWidth,a=o===void 0?n.strokeWidth:o,s=r.markerLineWidth,l=s===void 0?n.lineWidth:s,c=r.markerStroke,u=c===void 0?n.stroke:c,f=+(a||l||(u?1:0))*Math.sqrt(2),p=this.markerGroup.node().getBBox(),d=p.width,h=p.height;return(1-f/Math.max(d,h))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,o=cn(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(Zs.markerGroup,"g").style("zIndex",0),Mi(!!i,this.markerGroup,function(){var a,s=r.markerGroup.node(),l=(a=s.childNodes)===null||a===void 0?void 0:a[0],c=typeof i=="string"?new Un({style:{symbol:i},className:Zs.marker.name}):i();l?c.nodeName===l.nodeName?l instanceof Un?l.update(Te(Te({},o),{symbol:i})):(FB(l,c),Vt(l).styles(o)):(l.remove(),Vt(c).attr("className",Zs.marker.name).styles(o),s.appendChild(c)):(c instanceof Un||Vt(c).attr("className",Zs.marker.name).styles(o),s.appendChild(c)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var u=o1(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(u,")")})},t.prototype.renderLabel=function(n){var r=cn(this.attributes,"label"),i=r.text,o=Wn(r,["text"]);this.labelGroup=n.maybeAppendByClassName(Zs.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Zs.label,function(){return jl(i)}).styles(o)},t.prototype.renderValue=function(n){var r=this,i=cn(this.attributes,"value"),o=i.text,a=Wn(i,["text"]);this.valueGroup=n.maybeAppendByClassName(Zs.valueGroup,"g").style("zIndex",0),Mi(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(Zs.value,function(){return jl(o)}).styles(a)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,o=r.height,a=cn(this.attributes,"background");this.background=n.maybeAppendByClassName(Zs.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Zs.background,"rect").styles(Te({width:i,height:o},a))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,o=n.height,a=G(n.position,3),s=a[0],l=a[1],c=a[2],u=o/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),m2(this.labelGroup.select(Zs.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(c,", ").concat(u,")")}),m2(this.valueGroup.select(Zs.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=Vt(r),o=n.x,a=o===void 0?0:o,s=n.y,l=s===void 0?0:s;i.styles({transform:"translate(".concat(a,", ").concat(l,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(tr);var Mh=pi({page:"item-page",navigator:"navigator",item:"item"},"items"),Kj=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},Zj=function(e){ut(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:vv,mouseenter:vv,mouseleave:vv})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,o=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,o.length]:[o.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,o=cn(this.attributes,"item"),a=r.map(function(s,l){var c=s.id,u=c===void 0?l:c,f=s.label,p=s.value;return{id:"".concat(u),index:l,style:Te({layout:i,labelText:f,valueText:p},Object.fromEntries(Object.entries(o).map(function(d){var h=G(d,2),m=h[0],g=h[1];return[m,Oo(g,[s,l,r])]})))}});return a},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,o=r.width,a=r.rowPadding,s=r.colPadding,l=G(this.navigatorShape,1),c=l[0],u=G(this.grid,2),f=u[0],p=u[1],d=p*f,h=0;return this.pageViews.children.map(function(m,g){var v,y,x=Math.floor(g/d),_=g%d,w=n.ifHorizontal(p,f),S=[Math.floor(_/w),_%w];i==="vertical"&&S.reverse();var M=G(S,2),O=M[0],E=M[1],P=(o-c-(p-1)*s)/p,k=m.getBBox().height,A=G([0,0],2),N=A[0],L=A[1];return i==="horizontal"?(v=G([h,O*(k+a)],2),N=v[0],L=v[1],h=E===p-1?0:h+P+s):(y=G([E*(P+s),h],2),N=y[0],L=y[1],h=O===f-1?0:h+k+a),{page:x,index:g,row:O,col:E,pageIndex:_,width:P,height:k,x:N,y:L}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,o=n.rowPadding,a=n.colPadding,s=G(this.navigatorShape,1),l=s[0],c=G(this.grid,2),u=c[0],f=c[1],p=G([r-l,i],2),d=p[0],h=p[1],m=G([0,0,0,0,0,0,0,0],8),g=m[0],v=m[1],y=m[2],x=m[3],_=m[4],w=m[5],S=m[6],M=m[7];return this.pageViews.children.map(function(O,E){var P,k,A,N,L=O.getBBox(),z=L.width,B=L.height,H=S===0?0:a,j=S+H+z;if(j<=d&&Kj(_,function(Z){return Z<f}))return P=G([S+H,M,j],3),g=P[0],v=P[1],S=P[2],{width:z,height:B,x:g,y:v,page:y,index:E,pageIndex:x++,row:w,col:_++};k=G([w+1,0,0,M+B+o],4),w=k[0],_=k[1],S=k[2],M=k[3];var W=M+B;return W<=h&&Kj(w,function(Z){return Z<u})?(A=G([S,M,z],3),g=A[0],v=A[1],S=A[2],{width:z,height:B,x:g,y:v,page:y,index:E,pageIndex:x++,row:w,col:_++}):(N=G([0,0,z,0,y+1,0,0,0],8),g=N[0],v=N[1],S=N[2],M=N[3],y=N[4],x=N[5],w=N[6],_=N[7],{width:z,height:B,x:g,y:v,page:y,index:E,pageIndex:x++,row:w,col:_++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return _s(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(Mh.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(Mh.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,o=r.mouseenter,a=r.mouseleave;this.flattenPage(n);var s=this.dispatchCustomEvent.bind(this);Vt(n).selectAll(Mh.item.class).data(this.renderData,function(l){return l.id}).join(function(l){return l.append(function(c){var u=c.style;return new Xj({style:u})}).attr("className",Mh.item.name).on("click",function(){i?.(this),s("itemClick",{item:this})}).on("pointerenter",function(){o?.(this),s("itemMouseenter",{item:this})}).on("pointerleave",function(){a?.(this),s("itemMouseleave",{item:this})})},function(l){return l.each(function(c){var u=c.style;this.update(u)})},function(l){return l.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,o=r.width,a=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,s=G(this.navigatorShape,2),l=s[0],c=s[1];this.navigator.update(i==="grid"?{pageWidth:o-l,pageHeight:a-c}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(EB(this.itemsLayout,"page")).map(function(o){var a=G(o,2),s=a[0],l=a[1];return{page:s,layouts:l}}),i=qe([],G(this.navigator.getContainer().children),!1);r.forEach(function(o){var a=o.layouts,s=n.pageViews.appendChild(new vr({className:Mh.page.name}));a.forEach(function(l){var c=l.x,u=l.y,f=l.index,p=l.width,d=l.height,h=i[f];s.appendChild(h),u6(h,"__layout__",l),h.update({x:c,y:u,width:p,height:d})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=cn(this.attributes,"nav"),o=za({orientation:r},i),a=this;return n.selectAll(Mh.navigator.class).data(["nav"]).join(function(s){return s.append(function(){return new qj({style:o})}).attr("className",Mh.navigator.name).each(function(){a.navigator=this})},function(s){return s.each(function(){this.update(o)})},function(s){return s.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var o=this.renderNavigator(Vt(r));this.renderItems(o.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new or(n,{detail:r});this.dispatchEvent(i)},t}(tr);var C2=pi({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),n8={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},Jj=function(e){ut(t,e);function t(n){return e.call(this,n,n8)||this}return t.prototype.render=function(n,r){var i=Vt(r).maybeAppendByClassName(C2.markerGroup,"g");this.renderMarker(i);var o=Vt(r).maybeAppendByClassName(C2.labelGroup,"g");this.renderLabel(o)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,o=i.orientation,a=i.markerSymbol,s=a===void 0?_s(o,"horizontalHandle","verticalHandle"):a;Mi(!!s,n,function(l){var c=cn(r.attributes,"marker"),u=Te({symbol:s},c);r.marker=l.maybeAppendByClassName(C2.marker,function(){return new Un({style:u})}).update(u)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,o=i.showLabel,a=i.orientation,s=i.spacing,l=s===void 0?0:s,c=i.formatter;Mi(o,n,function(u){var f,p=cn(r.attributes,"label"),d=p.text,h=Wn(p,["text"]),m=((f=u.select(C2.marker.class))===null||f===void 0?void 0:f.node().getBBox())||{},g=m.width,v=g===void 0?0:g,y=m.height,x=y===void 0?0:y,_=G(_s(a,[0,x+l,"center","top"],[v+l,0,"start","middle"]),4),w=_[0],S=_[1],M=_[2],O=_[3];u.maybeAppendByClassName(C2.label,"text").styles(Te(Te({},h),{x:w,y:S,text:c(d).toString(),textAlign:M,textBaseline:O}))})},t}(tr);var Qj={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},eV=za({},Qj,{}),tV=za({},Qj,bs(n8,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),nV=.01;var co=pi({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");var t3=function(e){ut(t,e);function t(n){return e.call(this,n,eV)||this}return t.prototype.renderTitle=function(n,r,i){var o=this.attributes,a=o.showTitle,s=o.titleText,l=cn(this.attributes,"title"),c=G($o(l),2),u=c[0],f=c[1];this.titleGroup=n.maybeAppendByClassName(co.titleGroup,"g").styles(f);var p=Te(Te({width:r,height:i},u),{text:a?s:""});this.title=this.titleGroup.maybeAppendByClassName(co.title,function(){return new e3({style:p})}).update(p)},t.prototype.renderItems=function(n,r){var i=r.x,o=r.y,a=r.width,s=r.height,l=cn(this.attributes,"title",!0),c=G($o(l),2),u=c[0],f=c[1],p=Te(Te({},u),{width:a,height:s,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(co.itemsGroup,"g").styles(Te(Te({},f),{transform:"translate(".concat(i,", ").concat(o,")")}));var d=this;this.itemsGroup.selectAll(co.items.class).data(["items"]).join(function(h){return h.append(function(){return new Zj({style:p})}).attr("className",co.items.name).each(function(){d.items=Vt(this)})},function(h){return h.update(p)},function(h){return h.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,o=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(o,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,o=n.height;return r?this.title.node().getAvailableSpace():new fr(0,0,i,o)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),o=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!o?e.prototype.getBBox.call(this):jj(i,o)},t.prototype.render=function(n,r){var i=this.attributes,o=i.width,a=i.height,s=i.x,l=s===void 0?0:s,c=i.y,u=c===void 0?0:c,f=Vt(r);r.style.transform="translate(".concat(l,", ").concat(u,")"),this.renderTitle(f,o,a),this.renderItems(f,this.availableSpace),this.adjustLayout()},t}(tr);var rV={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999};var r8=pi({background:"background",labelGroup:"label-group",label:"label"},"indicator"),iV=function(e){ut(t,e);function t(n){var r=e.call(this,n,rV)||this;return r.point=[0,0],r.group=r.appendChild(new vr({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,o=G(ii(i),4),a=o[0],s=o[1],l=o[2],c=o[3],u=this.label.node().getLocalBounds(),f=u.min,p=u.max,d=new fr(f[0]-c,f[1]-a,p[0]+s-f[0]+c,p[1]+l-f[1]+a),h=this.getPath(r,d),m=cn(this.attributes,"background");this.background=Vt(this.group).maybeAppendByClassName(r8.background,"path").styles(Te(Te({},m),{d:h})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,o=cn(this.attributes,"label"),a=G($o(o),2),s=a[0],l=a[1],c=s.text,u=Wn(s,["text"]);if(this.label=Vt(this.group).maybeAppendByClassName(r8.labelGroup,"g").styles(l),!!i){var f=this.label.maybeAppendByClassName(r8.label,function(){return jl(r(i))}).style("text",r(i).toString());f.selectAll("text").styles(u)}},t.prototype.adjustLayout=function(){var n=G(this.point,2),r=n[0],i=n[1],o=this.attributes,a=o.x,s=o.y;this.group.attr("transform","translate(".concat(a-r,", ").concat(s-i,")"))},t.prototype.getPath=function(n,r){var i=this.attributes.radius,o=r.x,a=r.y,s=r.width,l=r.height,c=[["M",o+i,a],["L",o+s-i,a],["A",i,i,0,0,1,o+s,a+i],["L",o+s,a+l-i],["A",i,i,0,0,1,o+s-i,a+l],["L",o+i,a+l],["A",i,i,0,0,1,o,a+l-i],["L",o,a+i],["A",i,i,0,0,1,o+i,a],["Z"]],u={top:4,right:6,bottom:0,left:2},f=u[n],p=this.createCorner([c[f].slice(-2),c[f+1].slice(-2)]);return c.splice.apply(c,qe([f+1,1],G(p),!1)),c[0][0]="M",c},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,o=RB.apply(void 0,qe([],G(n),!1)),a=G(n,2),s=G(a[0],2),l=s[0],c=s[1],u=G(a[1],2),f=u[0],p=u[1],d=G(o?[f-l,[l,f]]:[p-c,[c,p]],2),h=d[0],m=G(d[1],2),g=m[0],v=m[1],y=h/2,x=h/Math.abs(h),_=r*x,w=_/2,S=_*Math.sqrt(3)/2*i,M=G([g,g+y-w,g+y,g+y+w,v],5),O=M[0],E=M[1],P=M[2],k=M[3],A=M[4];return o?(this.point=[P,c-S],[["L",O,c],["L",E,c],["L",P,c-S],["L",k,c],["L",A,c]]):(this.point=[l+S,P],[["L",l,O],["L",l,E],["L",l+S,P],["L",l,k],["L",l,A]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Da(this):au(this)},t.prototype.bindEvents=function(){this.label.on(nn.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(tr);function Ope(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function oV(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(o,a,s){var l=r[s%r.length];return o+=" ".concat(e[s],":").concat(l).concat(s<i-1?" ".concat(e[s+1],":").concat(l):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function i8(e,t){var n=G(Ope(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var O2=pi({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function aV(e){var t=e.orientation,n=e.size,r=e.length;return _s(t,[r,n],[n,r])}function sV(e){var t=e.type,n=G(aV(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function Mpe(e){return sV(e)}function kpe(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,o;if(Sr(n)){var a=20;o=new Array(a).fill(0).map(function(c,u,f){return n(u/(f.length-1))})}else o=n;var s=o.length,l=o.map(function(c){return Dl(c).toString()});return s?s===1?l[0]:r?oV(i,l,t):l.reduce(function(c,u,f){return c+=" ".concat(f/(s-1),":").concat(u)},"l(".concat(_s(t,"0","270"),")")):""}function Epe(e){var t=e.orientation,n=e.range;if(!n)return[];var r=G(aV(e),2),i=r[0],o=r[1],a=G(n,2),s=a[0],l=a[1],c=_s(t,s*i,0),u=_s(t,0,s*o),f=_s(t,l*i,i),p=_s(t,o,l*o);return[["M",c,u],["L",c,p],["L",f,p],["L",f,u],["Z"]]}function Ape(e,t){var n=cn(t,"track");e.maybeAppendByClassName(O2.track,"path").styles(Te({d:sV(t)},n))}function Tpe(e,t){var n=cn(t,"selection"),r=kpe(t),i=e.maybeAppendByClassName(O2.selection,"path").styles(Te({d:Mpe(t),fill:r},n)),o=i.maybeAppendByClassName(O2.clipPath,"path").styles({d:Epe(t)}).node();i.style("clipPath",o)}var lV=function(e){ut(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=Vt(r).maybeAppendByClassName(O2.trackGroup,"g");Ape(i,n);var o=Vt(r).maybeAppendByClassName(O2.selectionGroup,"g");Tpe(o,n)},t}(tr);function Ppe(e){return{min:Math.min.apply(Math,qe([],G(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,qe([],G(e.map(function(t){return t.value})),!1))}}var n3=function(e){ut(t,e);function t(n){var r=e.call(this,n,tV)||this;return r.eventToOffsetScale=new ai({}),r.innerRibbonScale=new ai({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var o=r.attributes,a=o.data,s=o.block;i.stopPropagation();var l=r.getValueByCanvasPoint(i);if(s){var c=i8(a.map(function(p){var d=p.value;return d}),l).range,u=r.getRealSelection(c);r.showIndicator((c[0]+c[1])/2,"".concat(u[0],"-").concat(u[1])),r.dispatchIndicated(l,c)}else{var f=r.getTickValue(l);r.showIndicator(f,"".concat(r.getRealValue(f))),r.dispatchIndicated(f)}},r.onDragStart=function(i){return function(o){o.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(o)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var o=r.target;r.updateMouse();var a=G(r.selection,2),s=a[0],l=a[1],c=r.getTickValue(r.getValueByCanvasPoint(i)),u=c-r.prevValue;o==="start"?s!==c&&r.updateSelection(c,l):o==="end"?l!==c&&r.updateSelection(s,c):o==="ribbon"&&u!==0&&(r.prevValue=c,r.updateSelection(u,u,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new fr(0,0,r,i)},t.prototype.render=function(n,r){var i=this,o=n.showLabel;this.renderTitle(Vt(r));var a=this.availableSpace,s=a.x,l=a.y,c=Vt(r).maybeAppendByClassName(co.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(l,")")}),u=c.maybeAppendByClassName(co.labelGroup,"g").styles({zIndex:1});Mi(!!o,u,function(p){i.renderLabel(p)});var f=c.maybeAppendByClassName(co.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=c.maybeAppendByClassName(co.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(c),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:Ppe(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=G(this.selection,2),r=n[0],i=n[1],o=this.ribbonScale;return[o.map(r),o.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,o=this.attributes.defaultValue,a=o===void 0?[r,i]:o,s=G(a,2),l=s[0],c=s[1];return[l,c]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return _s(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,o=r.titleText,a=r.width,s=r.height,l=cn(this.attributes,"title"),c=Te(Te({},l),{width:a,height:s,text:o}),u=this;n.selectAll(co.title.class).data(i?[o]:[]).join(function(f){return f.append(function(){return new e3({style:c})}).attr("className",co.title.name).each(function(){u.title=this})},function(f){return f.update(c)},function(f){return f.each(function(){u.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new fr(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,o={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return o[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new fr(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(Jn.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),o=i.width,a=i.height;return this.cacheLabelBBox=new fr(0,0,o,a),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,o=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var a=this.labelBBox,s=a.width,l=a.height,c=this.ifHorizontal(l,s)+o+this.labelFixedSpacing,u=this.ifHorizontal(s,l);return{width:s,height:l,size:c,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,o=this.availableSpace,a=o.width,s=o.height,l=this.labelShape,c=l.size,u=l.length,f=G(this.ifHorizontal([s,a],[a,s]),2),p=f[0],d=f[1],h=r?this.handleShape:{size:0,length:0},m=h.size,g=h.length,v=this.handleOffsetRatio,y=0,x=this.labelPosition;i?y=i:["bottom","right"].includes(x)?y=Math.min(p-c,(p-m)/v):p*(1-v)>m?y=Math.max(p-c,0):y=Math.max((p-c-m)/v,0);var _=Math.max(g,u),w=d-_,S=G(this.ifHorizontal([w,y],[y,w]),2),M=S[0],O=S[1],E=["top","left"].includes(x)?c:0,P=G(this.ifHorizontal([_/2,E],[E,_/2]),2),k=P[0],A=P[1];return new fr(k,A,M,O)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,o=r.type,a=r.orientation,s=r.color,l=r.block,c=cn(this.attributes,"ribbon"),u=this.range,f=u.min,p=u.max,d=this.ribbonBBox,h=d.x,m=d.y,g=this.ribbonShape,v=g.length,y=g.size,x=za({transform:"translate(".concat(h,", ").concat(m,")"),length:v,size:y,type:o,orientation:a,color:s,block:l,partition:i.map(function(_){return(_.value-f)/(p-f)}),range:this.ribbonRange},c);this.ribbon=n.maybeAppendByClassName(co.ribbon,function(){return new lV({style:x})}).update(x)},t.prototype.getHandleClassName=function(n){return"".concat(co.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,o=cn(this.attributes,"handle"),a=G(this.selection,2),s=a[0],l=a[1],c=Te(Te({},o),{orientation:i}),u=o.shape,f=u===void 0?"slider":u,p=f==="basic"?Jj:Yw,d=this;this.handlesGroup.selectAll(co.handle.class).data(r?[{value:s,type:"start"},{value:l,type:"end"}]:[],function(h){return h.type}).join(function(h){return h.append(function(){return new p({style:c})}).attr("className",function(m){var g=m.type;return"".concat(co.handle," ").concat(d.getHandleClassName(g))}).each(function(m){var g=m.type,v=m.value;this.update({labelText:v});var y="".concat(g,"Handle");d[y]=this,this.addEventListener("pointerdown",d.onDragStart(g))})},function(h){return h.update(c).each(function(m){var g=m.value;this.update({labelText:g})})},function(h){return h.each(function(m){var g=m.type,v="".concat(g,"Handle");d[v]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=G(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new fr(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,o=this.endHandle.getBBox(),a=o.width,s=o.height,l=G([Math.max(r,a),Math.max(i,s)],2),c=l[0],u=l[1];return this.cacheHandleBBox=new fr(0,0,c,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,o=G(this.ifHorizontal([i,r],[r,i]),2),a=o[0],s=o[1];return{width:r,height:i,size:a,length:s}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,o=this.ribbonBBox,a=o.x,s=o.y,l=this.ribbonShape.size,c=this.getOffset(r),u=G(this.ifHorizontal([a+c,s+l*this.handleOffsetRatio],[a+l*this.handleOffsetRatio,s+c]),2),f=u[0],p=u[1],d=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();d?.update({transform:"translate(".concat(f,", ").concat(p,")"),formatter:i})},t.prototype.renderIndicator=function(n){var r=cn(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(co.indicator,function(){return new iV({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,o,a,s){var l,c,u=(l=o?.id)!==null&&l!==void 0?l:a.toString();if(i.push(Te(Te({},o),{id:u,index:a,type:"value",label:(c=o?.label)!==null&&c!==void 0?c:o.value.toString(),value:n.ribbonScale.map(o.value)})),a<s.length-1){var f=s[a+1],p=G([o.value,f.value],2),d=p[0],h=p[1],m=(d+h)/2;i.push(Te(Te({},o),{id:u,index:a,type:"range",range:[d,h],label:[d,h].join("~"),value:n.ribbonScale.map(m)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=G(["center","middle"],2),r=n[0],i=n[1],o=this.labelPosition;return o==="top"?i="bottom":o==="bottom"?i="top":o==="left"?r="end":o==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,o=i===void 0?!1:i,a=r.labelFilter,s=r.labelFormatter,l=cn(this.attributes,"tick"),c=cn(this.attributes,"label"),u=c.align,f=za(Te({showLine:!1,showGrid:!1,showTick:o,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),bs(l,"tick"),bs(c,"label"),{data:this.labelData}),p={tickFilter:function(h,m,g){return h?.type!=="value"?!1:a?a(h,h.index,g.filter(function(v){return v.type!=="value"})):!0},labelFilter:function(h,m,g){return h?.type!==u?!1:a?a(h,h.index,g.filter(function(v){return v.type===u})):!0},labelFormatter:s},d=Te(Te(Te({},f),p),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(co.label,function(){return new Oh({style:d})}).node(),this.label.update(d,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,o=n.labelSpacing,a=n.tickLength,s=this.ribbonShape.size,l=this.labelPosition,c=this.labelFixedSpacing,u=G([0,0,0],3),f=u[0],p=u[1],d=u[2],h=a??s;return r?(d=h,p=c,i==="positive"?l==="right"?(f=h,d=h):l==="bottom"&&(f=d):i==="negative"&&(l==="top"||l==="left")&&(f=s)):i==="positive"?l==="right"?p=h:l==="bottom"&&(f=s+c,p=o):i==="negative"&&(l==="left"||l==="top")&&(p=o),{offset:f,spacing:p,tickLength:d}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,o=r.y,a=r.width,s=r.height,l=this.labelAxisStyle,c=l.offset,u=l.spacing,f=l.tickLength,p=G(this.ifHorizontal([[i,o+c],[i+a,o+c]],[[i+c,o+s],[i+c,o]]),2),d=p[0],h=p[1];this.label.update({startPos:d,endPos:h,tickLength:f,labelSpacing:u},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var o=this.range,a=o.min,s=o.max,l=this.ribbonBBox,c=l.x,u=l.y,f=hr(n,a,s),p=this.getOffset(f),d=this.ifHorizontal([p+c,u],[c,p+u]);this.indicator.update({x:d[0],y:d[1],position:this.ifHorizontal("top","left"),labelText:r}),au(this.indicator.node())},t.prototype.hideIndicator=function(){Da(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var o;i===void 0&&(i=!1);var a=G(this.selection,2),s=a[0],l=a[1],c=G([n,r],2),u=c[0],f=c[1];i&&(u+=s,f+=l);var p=this.range,d=p.min,h=p.max;o=G(Yj([d,h],[u,f],this.selection),2),u=o[0],f=o[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,o=i.min,a=i.max;return mr(r)?g2((a-o)*nV,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,o=r.block,a=this.range.min;return o?i8(i.map(function(s){var l=s.value;return l}),n).tick:Uj(n,this.step,a)},t.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,o=r.max,a=G(this.ribbon.node().getPosition(),2),s=a[0],l=a[1],c=this.ifHorizontal(s,l),u=this.ifHorizontal.apply(this,qe([],G(bh(n)),!1)),f=u-c,p=hr(this.getOffset(f,!0),i,o);return p},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,o=i.min,a=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[o,a],range:[0,s]}),r?l.invert(n):l.map(n)},t.prototype.getRealSelection=function(n){var r=this.range.max,i=G(n,2),o=i[0],a=i[1];return this.ifHorizontal([o,a],[r-a,r-o])},t.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},t.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new or("valuechange",{detail:{value:n}});this.dispatchEvent(r)},t.prototype.dispatchIndicated=function(n,r){var i=this,o=this.range.max,a=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:o-n,range:r?i.getRealSelection(r):void 0}}),s=new or("indicate",{detail:a});this.dispatchEvent(s)},t}(tr);function r3(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var cV={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function uV(e){var t;e===void 0&&(e="");var n=r3(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=Te({flex:1},cV),t[".".concat(n.VALUE)]=Te({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},cV),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var o8=function(e){ut(t,e);function t(n){var r=this,i,o,a=(o=(i=n.style)===null||i===void 0?void 0:i.template)===null||o===void 0?void 0:o.prefixCls,s=r3(a);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:uV(a)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(o,a){var s=o.name,l=s===void 0?"":s,c=o.color,u=c===void 0?"black":c,f=o.index,p=Wn(o,["name","color","index"]),d=Te({name:l,color:u,index:f??a},p);return c5(o6(i.item,d))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var o=this.element.style.visibility==="hidden",a=function(){i.attributes.x=n??i.attributes.x,i.attributes.y=r??i.attributes.y,i.updatePosition()};o?this.closeTransition(a):a()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=c5(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:FE(this.element,n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,o=i.template,a=i.title,s=i.enterable,l=i.style,c=i.content,u=r3(o.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",c)this.renderCustomContent();else{a?(f.innerHTML=o.title,f.getElementsByClassName(u.TITLE)[0].innerHTML=a):(r=(n=f.getElementsByClassName(u.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var p=this.HTMLTooltipItemsElements,d=document.createElement("ul");d.className=u.LIST,FE(d,p);var h=this.element.querySelector(".".concat(u.LIST));h?h.replaceWith(d):f.appendChild(d)}jB(f,l)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,o=r.offset,a=n||i,s=a.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},c=this.elementSize,u=c.width,f=c.height,p=[-u/2,-f/2];return s.forEach(function(d){var h=G(p,2),m=h[0],g=h[1],v=G(l[d],2),y=v[0],x=v[1];p=[m+(u/2+o[0])*y,g+(f/2+o[1])*x]}),p},t.prototype.setOffsetPosition=function(n){var r=G(n,2),i=r[0],o=r[1],a=this.attributes,s=a.x,l=s===void 0?0:s,c=a.y,u=c===void 0?0:c,f=a.container,p=f.x,d=f.y;this.element.style.left="".concat(+l+p+i,"px"),this.element.style.top="".concat(+u+d+o,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=G(n,2),i=r[0],o=r[1],a=this.attributes,s=a.x,l=a.y,c=a.bounding,u=a.position;if(!c)return[i,o];var f=this.element,p=f.offsetWidth,d=f.offsetHeight,h=G([+s+i,+l+o],2),m=h[0],g=h[1],v={left:"right",right:"left",top:"bottom",bottom:"top"},y=c.x,x=c.y,_=c.width,w=c.height,S={left:m<y,right:m+p>y+_,top:g<x,bottom:g+d>x+w},M=[];u.split("-").forEach(function(E){S[E]?M.push(v[E]):M.push(E)});var O=M.join("-");return this.getRelativeOffsetFromCursor(O)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),o=i.x,a=i.y,s=i.width,l=i.height;return new fr(o,a,s,l).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(tr);var i3=function(e){ut(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[nn.BOUNDS_CHANGED,nn.INSERTED,nn.REMOVED],r.$margin=ii(0),r.$padding=ii(0);var i=n.style||{},o=i.margin,a=o===void 0?0:o,s=i.padding,l=s===void 0?0:s;return r.margin=a,r.padding=l,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=ii(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=ii(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,o=n.y,a=o===void 0?0:o,s=n.width,l=n.height,c=G(this.$margin,4),u=c[0],f=c[1],p=c[2],d=c[3];return new fr(i-d,a-u,s+d+f,l+u+p)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,o=G(this.$padding,4),a=o[0],s=o[1],l=o[2],c=o[3],u=G(this.$margin,4),f=u[0],p=u[3];return new fr(c+p,a+f,r-c-s,i-a-l)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(a){return!a.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var o=LE(this.getAvailableSpace(),this.children.map(function(a){return a.getBBox()}),this.attributes);this.children.forEach(function(a,s){var l=o[s],c=l.x,u=l.y;a.style.transform="translate(".concat(c,", ").concat(u,")")})}catch{}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}(vr);var a8=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Npe(e){let{min:[t,n],max:[r,i]}=e.getLocalBounds(),o=0,a=0;return t>0&&(o=t),r<0&&(o=r),n>0&&(a=n),i<0&&(a=i),[o,a]}function Lpe(e,t=[]){let[n=0,r=0,i=n,o=r]=t,a=e.parentNode,s=a.getEulerAngles();a.setEulerAngles(0);let{min:l,halfExtents:c}=e.getLocalBounds(),[u,f]=l,[p,d]=c;return a.setEulerAngles(s),{x:u-o,y:f-n,width:p*2+o+r,height:d*2+n+i}}function Ipe(e,t,n,r,i=!0,o=!0){let a=f=>Ta()(f);if(!t[0]&&!t[1])return a([Npe(e),t]);if(!n.length)return a([[0,0],t]);let[s,l]=n,c=[...l],u=[...s];if(l[0]!==s[0]){let f=i?-4:4;c[1]=l[1],o&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!o&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!o&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f))),o&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f)))}return a([l,c,u,s,t])}var o3=bc(e=>{let t=e.attributes,{className:n,class:r,transform:i,rotate:o,labelTransform:a,labelTransformOrigin:s,x:l,y:c,x0:u=l,y0:f=c,text:p,background:d,connector:h,startMarker:m,endMarker:g,coordCenter:v,innerHTML:y}=t,x=a8(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(e.style.transform=`translate(${l}, ${c})`,[l,c,u,f].some(j=>!Dn(j))){e.children.forEach(j=>j.remove());return}let _=Ke(x,"background"),{padding:w}=_,S=a8(_,["padding"]),M=Ke(x,"connector"),{points:O=[]}=M,E=a8(M,["points"]),P;y?P=bt(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",y).call(gt,Object.assign({transform:a,transformOrigin:s},x)).node():P=bt(e).maybeAppend("text","text").style("zIndex",0).style("text",p).call(gt,Object.assign({textBaseline:"middle",transform:a,transformOrigin:s},x)).node();let k=bt(e).maybeAppend("background","rect").style("zIndex",-1).call(gt,Lpe(P,w)).call(gt,d?S:{}).node(),A=+u<v[0],N=+f<v[1],L=[+u-+l,+f-+c],z=Ipe(k,L,O,v,A,N),B=m&&new Un({id:"startMarker",style:Object.assign({x:0,y:0},Ke(x,"startMarker"))}),H=g&&new Un({id:"endMarker",style:Object.assign({x:0,y:0},Ke(x,"endMarker"))});bt(e).maybeAppend("connector","path").style("zIndex",0).style("d",z).style("markerStart",B).style("markerEnd",H).call(gt,h?E:{})});var a3=(e,t)=>{let{coordinate:n}=t;return(r,i,o)=>{let{color:a,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:a,fill:a,fontSize:l},[[p,d]]=r;return bt(new o3).style("x",p).style("y",d).call(gt,o).style("transform",`${u}rotate(${+c})`).style("coordCenter",n.getCenter()).call(gt,f).call(gt,e).node()}};a3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var s8=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Dpe(e){let t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[o,a]=[0,0],[s,l]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,s,l],["L",o,a],["Z"]]}function zpe(e){let{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}var Rpe=bc(e=>{let t=e.attributes,{class:n,x:r,y:i,transform:o}=t,a=s8(t,["class","x","y","transform"]),s=Ke(a,"marker"),{size:l=24}=s,c=()=>Dpe(l/2),u=bt(e).maybeAppend("marker",()=>new Un({})).call(d=>d.node().update(Object.assign({symbol:c},s))).node(),[f,p]=zpe(u);bt(e).maybeAppend("text","text").style("x",f).style("y",p).call(gt,a)}),s3=(e,t)=>{let n=s8(e,[]);return(r,i,o)=>{let{color:a}=o,s=s8(o,["color"]),{color:l=a,text:c=""}=i,u={text:String(c),stroke:l,fill:l},[[f,p]]=r;return bt(new Rpe).call(gt,s).style("transform",`translate(${f},${p})`).call(gt,u).call(gt,n).node()}};s3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var l3=(e,t)=>{let{coordinate:n}=t;return(r,i,o)=>{let{color:a,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:a,fill:a,fontSize:l,textAlign:"center",textBaseline:"middle"},[[p,d]]=r;return bt(new Uo).style("x",p).style("y",d).call(gt,o).style("transformOrigin","center center").style("transform",`${u}rotate(${c}deg)`).style("coordCenter",n.getCenter()).call(gt,f).call(gt,e).node()}};l3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Fpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Bpe(e,t){let n=[],r=[],i=[],o=!1,a=null,s=e.length/2;for(let l=0;l<s;l++){let c=e[l],u=e[l+s];if([...c,...u].some(f=>!t(f)))o=!0;else{if(n.push(c),r.push(u),o&&a){o=!1;let[f,p]=a;i.push([f,c,p,u])}a=[c,u]}}return[n.concat(r),i]}var fV=bc(e=>{let{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,o=e.ownerDocument;bt(e).maybeAppend("connect-path",()=>o.createElement("path",{})).style("d",n).call(gt,i),bt(e).maybeAppend("area-path",()=>o.createElement("path",{})).style("d",t).call(gt,r)}),fa=(e,t)=>{let{curve:n,gradient:r=!1,defined:i=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:o=!1}=e,a=Fpe(e,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=t;return(c,u,f)=>{let{color:p}=f,{color:d=p,seriesColor:h,seriesX:m,seriesY:g}=u,v=Tn(s),y=iw(s,u),x=r&&h?rw(h,m,g,r,void 0,v):d,_=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:x,fill:x}),y&&{transform:y}),a),[w,S]=Bpe(c,i),M=Ke(_,"connect"),O=!!S.length,E=P=>bt(l.createElement("path",{})).style("d",P||"").call(gt,_).node();if(yn(s)){let P=k=>{let A=s.getCenter(),N=k.slice(0,k.length/2),L=k.slice(k.length/2);return p_().angle((z,B)=>pc(ur(N[B],A))).outerRadius((z,B)=>er(N[B],A)).innerRadius((z,B)=>er(L[B],A)).defined((z,B)=>[...N[B],...L[B]].every(i)).curve(n)(L)};return!O||o&&!Object.keys(M).length?E(P(w)):O&&!o?E(P(c)):bt(new fV).style("areaStyle",_).style("connectStyle",Object.assign(Object.assign({},M),a)).style("areaPath",P(c)).style("connectPath",S.map(P).join("")).node()}else{let P=k=>{let A=k.slice(0,k.length/2),N=k.slice(k.length/2);return v?D0().y((L,z)=>A[z][1]).x1((L,z)=>A[z][0]).x0((L,z)=>N[z][0]).defined((L,z)=>[...A[z],...N[z]].every(i)).curve(n)(A):D0().x((L,z)=>A[z][0]).y1((L,z)=>A[z][1]).y0((L,z)=>N[z][1]).defined((L,z)=>[...A[z],...N[z]].every(i)).curve(n)(A)};return!O||o&&!Object.keys(M).length?E(P(w)):O&&!o?E(P(c)):bt(new fV).style("areaStyle",_).style("connectStyle",Object.assign(Object.assign({},M),a)).style("areaPath",P(c)).style("connectPath",S.map(P).join("")).node()}}};fa.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var c3=(e,t)=>{let{coordinate:n}=t;return(...r)=>{let i=yn(n)?Jd:hc;return fa(Object.assign({curve:i},e),t)(...r)}};c3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"square"});var jpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},u3=(e,t)=>{let n=jpe(e,[]),{coordinate:r}=t;return(...i)=>{let o=yn(r)?Uv:Tn(r)?$v:Gv;return fa(Object.assign({curve:o},n),t)(...i)}};u3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"smooth"});var f3=(e,t)=>(...n)=>fa(Object.assign({curve:Yv},e),t)(...n);f3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"hvh"});var p3=(e,t)=>(...n)=>fa(Object.assign({curve:Xv},e),t)(...n);p3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"vh"});var d3=(e,t)=>(...n)=>fa(Object.assign({curve:Kv},e),t)(...n);d3.props=Object.assign(Object.assign({},fa.props),{defaultMarker:"hv"});var h3=(e,t)=>{let{arrow:n=!1}=e;return(...r)=>n1(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};h3.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var pV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},m3=(e,t)=>{let n=pV(e,[]),{document:r}=t;return(i,o,a)=>{let{color:s}=a,l=pV(a,["color"]),{color:c=s,transform:u}=o,[f,p]=i,d=fi();return d.moveTo(f[0],f[1]),d.bezierCurveTo(f[0]/2+p[0]/2,f[1],f[0]/2+p[0]/2,p[1],p[0],p[1]),bt(r.createElement("path",{})).call(gt,l).style("d",d.toString()).style("stroke",c).style("transform",u).call(gt,n).node()}};m3.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var dV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Vpe(e,t,n,r){let i=fi();if(yn(n)){let o=n.getCenter(),a=er(e,o),l=(er(t,o)-a)*r+a;return i.moveTo(e[0],e[1]),af(i,e,t,o,l),i.lineTo(t[0],t[1]),i}return Tn(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}var g3=(e,t)=>{let{cornerRatio:n=1/3}=e,r=dV(e,["cornerRatio"]),{coordinate:i,document:o}=t;return(a,s,l)=>{let{defaultColor:c}=l,u=dV(l,["defaultColor"]),{color:f=c,transform:p}=s,[d,h]=a,m=Vpe(d,h,i,n);return bt(o.createElement("path",{})).call(gt,u).style("d",m.toString()).style("stroke",f).style("transform",p).call(gt,r).node()}};g3.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var hV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},v3=(e,t)=>{let n=hV(e,[]),{coordinate:r,document:i}=t;return(o,a,s)=>{let{color:l}=s,c=hV(s,["color"]),{color:u=l,transform:f}=a,[p,d]=o,h=fi();if(h.moveTo(p[0],p[1]),yn(r)){let m=r.getCenter();h.quadraticCurveTo(m[0],m[1],d[0],d[1])}else{let m=e_(p,d),g=er(p,d)/2;af(h,p,d,m,g)}return bt(i.createElement("path",{})).call(gt,c).style("d",h.toString()).style("stroke",u).style("transform",f).call(gt,n).node()}};v3.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function mV(e={}){let{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function Nr(e={}){return[...mV(e),{name:"title",scale:"identity"}]}function pa(){return[{type:_0,channel:"color"},{type:S0,channel:["x","y"]}]}function Hl(){return[{type:_0,channel:"x"},{type:S0,channel:["y"]}]}function gV(){return[{type:_0,channel:"color"},{type:S0,channel:["position"]}]}function Wl(e={}){return mV(e)}function Fn(){return[{type:S5}]}function Hn(){return[]}function l8(e,t){return e.getBandWidth(e.invert(t))}function ws(e,t,n={}){let{x:r,y:i,series:o}=t,{x:a,y:s,series:l}=e,{style:{bandOffset:c=l?0:.5,bandOffsetX:u=c,bandOffsetY:f=c}={}}=n,p=!!a?.getBandWidth,d=!!s?.getBandWidth,h=!!l?.getBandWidth;return!p&&!d?m=>m:(m,g)=>{let v=p?l8(a,r[g]):0,y=d?l8(s,i[g]):0,_=h&&o?(l8(l,o[g])/2+ +o[g])*v:0,[w,S]=m;return[w+u*v+_,S+f*y]}}function M2(e){return parseFloat(e)/100}function u1(e,t,n,r){let{x:i,y:o}=n,{innerWidth:a,innerHeight:s}=r.getOptions(),l=Array.from(e,c=>{let u=i[c],f=o[c],p=typeof u=="string"?M2(u)*a:+u,d=typeof f=="string"?M2(f)*s:+f;return[[p,d]]});return[e,l]}function Ra(e){return typeof e=="function"?e:t=>t[e]}function c8(e,t){return Array.from(e,Ra(t))}function f1(e,t){let{source:n=u=>u.source,target:r=u=>u.target,value:i=u=>u.value}=t,{links:o,nodes:a}=e,s=c8(o,n),l=c8(o,r),c=c8(o,i);return{links:o.map((u,f)=>({target:l[f],source:s[f],value:c[f]})),nodes:a||Array.from(new Set([...s,...l]),u=>({key:u}))}}var Hpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},y3=(e,t)=>{let{coordinate:n,document:r}=t;return(i,o,a)=>{let{color:s}=a,l=Hpe(a,["color"]),{color:c=s,src:u="",size:f=32,transform:p=""}=o,{width:d=f,height:h=f}=e,[[m,g]]=i,[v,y]=n.getSize();d=typeof d=="string"?M2(d)*v:d,h=typeof h=="string"?M2(h)*y:h;let x=m-Number(d)/2,_=g-Number(h)/2;return bt(r.createElement("image",{})).call(gt,l).style("x",x).style("y",_).style("src",u).style("stroke",c).style("transform",p).call(gt,e).style("width",d).style("height",h).node()}};y3.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Wpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qpe(e,t){let n=fi();if(yn(t)){let r=t.getCenter(),i=[...e,e[0]],o=i.map(a=>er(a,r));return i.forEach((a,s)=>{if(s===0){n.moveTo(a[0],a[1]);return}let l=o[s],c=e[s-1],u=o[s-1];u!==void 0&&Math.abs(l-u)<1e-10?af(n,c,a,r,l):n.lineTo(a[0],a[1])}),n.closePath(),n}return JF(n,e)}var x3=(e,t)=>{let{coordinate:n,document:r}=t;return(i,o,a)=>{let{color:s}=a,l=Wpe(a,["color"]),{color:c=s,transform:u}=o,f=qpe(i,n);return bt(r.createElement("path",{})).call(gt,l).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",u).call(gt,e).node()}};x3.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var vV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Upe(e,t){let[n,r,i,o]=e,a=fi();if(yn(t)){let s=t.getCenter(),l=er(s,n);return a.moveTo(n[0],n[1]),a.quadraticCurveTo(s[0],s[1],i[0],i[1]),af(a,i,o,s,l),a.quadraticCurveTo(s[0],s[1],r[0],r[1]),af(a,r,n,s,l),a.closePath(),a}return a.moveTo(n[0],n[1]),a.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),a.lineTo(o[0],o[1]),a.bezierCurveTo(o[0]/2+r[0]/2,o[1],o[0]/2+r[0]/2,r[1],r[0],r[1]),a.lineTo(n[0],n[1]),a.closePath(),a}var b3=(e,t)=>{let n=vV(e,[]),{coordinate:r,document:i}=t;return(o,a,s)=>{let{color:l}=s,c=vV(s,["color"]),{color:u=l,transform:f}=a,p=Upe(o,r);return bt(i.createElement("path",{})).call(gt,c).style("d",p.toString()).style("fill",u||l).style("stroke",u||l).style("transform",f).call(gt,n).node()}};b3.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Gpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $pe(e,t){let n=fi();if(!yn(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{let r=t.getCenter(),[i,o]=r,a=so(ur(e[0],r)),s=so(ur(e[1],r)),l=er(r,e[2]),c=er(r,e[3]),u=er(r,e[8]),f=er(r,e[10]),p=er(r,e[11]);n.moveTo(...e[0]),n.arc(i,o,l,a,s),n.arc(i,o,l,s,a,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,o,c,a,s),n.lineTo(...e[6]),n.arc(i,o,f,s,a,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,o,u,a,s),n.arc(i,o,u,s,a,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,o,p,a,s),n.arc(i,o,p,s,a,!0)}return n}var _3=(e,t)=>{let{coordinate:n,document:r}=t;return(i,o,a)=>{let{color:s,transform:l}=o,{color:c,fill:u=c,stroke:f=c}=a,p=Gpe(a,["color","fill","stroke"]),d=$pe(i,n);return bt(r.createElement("path",{})).call(gt,p).style("d",d.toString()).style("stroke",f).style("fill",s||u).style("transform",l).call(gt,e).node()}};_3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Ype=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Xpe(e,t,n=4){let r=fi();if(!yn(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;let i=t.getCenter(),[o,a]=i,s=er(i,e[3]),l=er(i,e[8]),c=er(i,e[10]),u=so(ur(e[2],i)),f=Math.asin(n/l),p=u-f,d=u+f;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(p)*s+o,Math.sin(p)*s+a),r.arc(o,a,s,p,d),r.lineTo(Math.cos(d)*c+o,Math.sin(d)*c+a),r.arc(o,a,c,d,p,!0),r.lineTo(Math.cos(p)*s+o,Math.sin(p)*s+a),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);let h=(p+d)/2;return r.moveTo(Math.cos(h)*(l+n/2)+o,Math.sin(h)*(l+n/2)+a),r.arc(Math.cos(h)*l+o,Math.sin(h)*l+a,n/2,h,Math.PI*2+h),r.closePath(),r}var w3=(e,t)=>{let{coordinate:n,document:r}=t;return(i,o,a)=>{let{color:s,transform:l}=o,c=4,{color:u,fill:f=u,stroke:p=u}=a,d=Ype(a,["color","fill","stroke"]),h=Xpe(i,n,c);return bt(r.createElement("path",{})).call(gt,d).style("d",h.toString()).style("stroke",p).style("fill",s||f).style("transform",l).call(gt,e).node()}};w3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var yV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Kpe(e,t,n){return e.createElement("path",{style:Object.assign({d:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,transformOrigin:"center"},n)})}function Zpe(e,t){if(!yn(t))return Ta().x(r=>r[0]).y(r=>r[1])(e);let n=t.getCenter();return Ju()({startAngle:0,endAngle:Math.PI*2,outerRadius:er(e[0],n),innerRadius:er(e[1],n)})}function Jpe(e,t){if(!yn(e))return t;let[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}var p1=(e,t)=>{let{arrow:n,arrowSize:r=4}=e,i=yV(e,["arrow","arrowSize"]),{coordinate:o,document:a}=t;return(s,l,c)=>{let{color:u,lineWidth:f}=c,p=yV(c,["color","lineWidth"]),{color:d=u,size:h=f}=l,m=n?Kpe(a,r,Object.assign({fill:i.stroke||d,stroke:i.stroke||d},Ke(i,"arrow"))):null,g=Zpe(s,o),v=Jpe(o,l.transform);return bt(a.createElement("path",{})).call(gt,p).style("d",g).style("stroke",d).style("lineWidth",h).style("transform",v).style("markerEnd",m).call(gt,i).node()}};p1.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var xV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Qpe(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function ede(e){return Ta().x(t=>t[0]).y(t=>t[1])(e)}function tde(e,t,n,r,i=0){let[[o,a],[s,l]]=t;if(Tn(e)){let p=o+n,d=s+r,h=p+i;return[[p,a],[h,a],[h,l],[d,l]]}let c=a-n,u=l-r,f=c-i;return[[o,c],[o,f],[s,f],[s,u]]}var S3=(e,t)=>{let{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:o,endMarker:a=!0}=e,s=xV(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:l}=t;return(c,u,f)=>{let{color:p,connectLength1:d}=f,h=xV(f,["color","connectLength1"]),{color:m,transform:g}=u,v=tde(l,c,r,i,o??d),y=Ke(Object.assign(Object.assign({},s),f),"endMarker");return bt(new Gr).call(gt,h).style("d",ede(v)).style("stroke",m||p).style("transform",g).style("markerEnd",a?new Un({className:"marker",style:Object.assign(Object.assign({},y),{symbol:Qpe})}):null).call(gt,s).node()}};S3.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function C3(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function bV(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var g8={};Fc(g8,{area:()=>_V,bottom:()=>uo,bottomLeft:()=>uo,bottomRight:()=>uo,inside:()=>uo,left:()=>uo,outside:()=>SV,right:()=>uo,spider:()=>OV,surround:()=>MV,top:()=>uo,topLeft:()=>uo,topRight:()=>uo});function _V(e,t,n,r){let i=t.length/2,o=t.slice(0,i),a=t.slice(i),s=fs(o,(d,h)=>Math.abs(d[1]-a[h][1]));s=Math.max(Math.min(s,i-2),1);let l=d=>[o[d][0],(o[d][1]+a[d][1])/2],c=l(s),u=l(s-1),f=l(s+1),p=so(ur(f,u))/Math.PI*180;return{x:c[0],y:c[1],transform:`rotate(${p})`,textAlign:"center",textBaseline:"middle"}}function u8(e,t,n,r){let{bounds:i}=n,[[o,a],[s,l]]=i,c=s-o,u=l-a,f=p=>{let{x:d,y:h}=p,m=X6(n.x,c),g=X6(n.y,u);return Object.assign(Object.assign({},p),{x:(m||d)+o,y:(g||h)+a})};return f(e==="left"?{x:0,y:u/2,textAlign:"start",textBaseline:"middle"}:e==="right"?{x:c,y:u/2,textAlign:"end",textBaseline:"middle"}:e==="top"?{x:c/2,y:0,textAlign:"center",textBaseline:"top"}:e==="bottom"?{x:c/2,y:u,textAlign:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:e==="top-right"?{x:c,y:0,textAlign:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y:u,textAlign:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:c,y:u,textAlign:"end",textBaseline:"bottom"}:{x:c/2,y:u/2,textAlign:"center",textBaseline:"middle"})}function f8(e,t,n,r){let{y:i,y1:o,autoRotate:a,rotateToAlignArc:s}=n,l=r.getCenter(),c=Bl(r,t,[i,o]),{innerRadius:u,outerRadius:f,startAngle:p,endAngle:d}=c,h=e==="inside"?(p+d)/2:d,m=O3(h,a,s),g=(()=>{let[v,y]=t,x=u+(f-u)*.5,[_,w]=e==="inside"?kh(l,h,x):e_(v,y);return{x:_,y:w}})();return Object.assign(Object.assign({},g),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:m})}function kh(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function O3(e,t,n){if(!t)return 0;let r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function nde(e,t,n,r){let{y:i,y1:o,autoRotate:a,rotateToAlignArc:s,radius:l=.5,offset:c=0}=n,u=Bl(r,t,[i,o]),{startAngle:f,endAngle:p}=u,d=r.getCenter(),h=(f+p)/2,g={textAlign:"center",textBaseline:"middle",rotate:O3(h,a,s)},{innerRadius:v,outerRadius:y}=u,_=v+(y-v)*l+c,[w,S]=kh(d,h,_);return Object.assign({x:w,y:S},g)}function wV(e){return e===void 0?null:e}function p8(e,t,n,r){let{bounds:i}=n,[o]=i;return{x:wV(o[0]),y:wV(o[1])}}function uo(e,t,n,r){let{bounds:i}=n;return i.length===1?p8(e,t,n,r):(Qd(r)?f8:mc(r)?nde:u8)(e,t,n,r)}function rde(e,t,n,r,i){let[o,a]=kh(e,t,n),[s,l]=kh(e,t,r),c=Math.sin(t)>0?1:-1;return[[o,a],[s,l],[s+c*i,l]]}function d8(e,t,n){let r=Bl(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:o}=r;return i+(o-i)}function h8(e,t,n){let r=Bl(n,e,[t.y,t.y1]),{startAngle:i,endAngle:o}=r;return(i+o)/2}function k2(e,t,n,r){let{autoRotate:i,rotateToAlignArc:o,offset:a=0,connector:s=!0,connectorLength:l=a,connectorLength2:c=0,connectorDistance:u=0}=n,f=r.getCenter(),p=h8(t,n,r),d=Math.sin(p)>0?1:-1,h=O3(p,i,o),m={textAlign:d>0||Qd(r)?"start":"end",textBaseline:"middle",rotate:h},g=d8(t,n,r),v=g+(s?l:a),[[y,x],[_,w],[S,M]]=rde(f,p,g,v,s?c:0),O=s?+u*d:0,E=S+O,P=M,k={connector:s,connectorPoints:[[_-E,w-P],[S-E,M-P]]};return Object.assign(Object.assign({x0:y,y0:x,x:S+O,y:M},m),k)}function SV(e,t,n,r){let{bounds:i}=n;return i.length===1?p8(e,t,n,r):(Qd(r)?f8:mc(r)?k2:u8)(e,t,n,r)}function CV(e,t={}){let{labelHeight:n=14,height:r}=t,i=Qi(e,c=>c.y),o=i.length,a=new Array(o);for(let c=0;c<o;c++){let u=i[c],{y:f}=u;a[c]={y:f,y1:f+n,labels:[f]}}let s=!0;for(;s;){s=!1;for(let c=a.length-1;c>0;c--){let u=a[c],f=a[c-1];if(f.y1>u.y){s=!0,f.labels.push(...u.labels),a.splice(c,1),f.y1+=u.y1-u.y;let p=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,r),p),f.y=f.y1-p}}}let l=0;for(let c of a){let{y:u,labels:f}=c,p=u-n;for(let d of f){let h=i[l++],g=p+n-d;h.connectorPoints[0][1]-=g,h.y=p+n,p+=n}}}function m8(e,t){let n=Qi(e,s=>s.y),{height:r,labelHeight:i=14}=t,o=Math.ceil(r/i);if(n.length<=o)return CV(n,t);let a=[];for(let s=0;s<n.length;s++)s<n.length-o?(n[s].opacity=0,n[s].connector=!1):a.push(n[s]);CV(a,t)}var ide=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},M3=new WeakMap;function ode(e,t,n){let{connectorLength:r,connectorLength2:i,connectorDistance:o}=t,a=ide(k2("outside",e,t,n),[]),s=n.getCenter(),l=d8(e,t,n),c=h8(e,t,n),u=l+r+i,f=Math.sin(c)>0?1:-1,p=s[0]+(u+ +o)*f,{x:d}=a,h=p-d;return a.x+=h,a.connectorPoints[0][0]-=h,a}function OV(e,t,n,r,i,o){if(!mc(r))return{};if(M3.has(t))return M3.get(t);let a=o.map(p=>ode(p,n,r)),{width:s,height:l}=r.getOptions(),c=a.filter(p=>p.x<s/2),u=a.filter(p=>p.x>=s/2),f=Object.assign(Object.assign({},i),{height:l});return m8(c,f),m8(u,f),a.forEach((p,d)=>M3.set(o[d],p)),M3.get(t)}var ade=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function MV(e,t,n,r){if(!mc(r))return{};let{connectorLength:i,connectorLength2:o,connectorDistance:a}=n,s=ade(k2("outside",t,n,r),[]),{x0:l,y0:c}=s,u=r.getCenter(),p=eR(r)+i,d=pc([l-u[0],c-u[1]]),h=Math.sin(d)>0?1:-1,[m,g]=kh(u,d,p);return s.x=m+(o+a)*h,s.y=g,s}var kV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sde(e,t){return e!==void 0?e:mc(t)?"inside":Tn(t)?"right":"top"}function lde(e,t,n,r,i,o){let{position:a}=t,{render:s}=i,l=sde(a,n),u=r[s?"htmlLabel":l==="inside"?"innerLabel":"label"],f=Object.assign({},u,t),p=g8[C3(l)];if(!p)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},u),p(l,e,f,n,i,o))}var k3=(e,t)=>{let{coordinate:n,theme:r}=t,{render:i}=e;return(o,a,s,l)=>{let{text:c,x:u,y:f,transform:p="",transformOrigin:d,className:h=""}=a,m=kV(a,["text","x","y","transform","transformOrigin","className"]),g=lde(o,a,n,r,e,l),{rotate:v=0,transform:y=""}=g,x=kV(g,["rotate","transform"]);return bt(new o3).call(gt,x).style("text",`${c}`).style("className",`${h} g2-label`).style("innerHTML",i?i(c,a.datum,a.index):void 0).style("labelTransform",`${y} rotate(${+v}) ${p}`.trim()).style("labelTransformOrigin",d).style("coordCenter",n.getCenter()).call(gt,m).node()}};k3.props={defaultMarker:"point"};var EV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},E2=(e,t)=>{let{arrow:n,colorAttribute:r}=e,i=EV(e,["arrow","colorAttribute"]),{coordinate:o,document:a}=t;return(s,l,c)=>{let{color:u,stroke:f}=c,p=EV(c,["color","stroke"]),{d,color:h=u}=l,[m,g]=o.getSize();return bt(a.createElement("path",{})).call(gt,p).style("d",typeof d=="function"?d({width:m,height:g}):d).style(r,h).call(gt,i).node()}};E2.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var E3=(e,t)=>E2(Object.assign({colorAttribute:"fill"},e),t);E3.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var A3=(e,t)=>E2(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);A3.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var cde=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},T3=(e,t)=>{let{document:n}=t;return(r,i,o)=>{let{transform:a}=i,{color:s}=o,l=cde(o,["color"]),{color:c=s}=i,[u,...f]=r,p=fi();return p.moveTo(...u),f.forEach(([d,h])=>{p.lineTo(d,h)}),p.closePath(),bt(n.createElement("path",{})).call(gt,l).style("d",p.toString()).style("stroke",c||s).style("fill",c||s).style("fillOpacity",.4).style("transform",a).call(gt,e).node()}};T3.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function v8(e){var t,n,r,i=e||1;function o(s,l){++t>i&&(r=n,a(1),++t),n[s]=l}function a(s){t=0,n=Object.create(null),s||(r=Object.create(null))}return a(),{clear:a,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return o(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:o(s,l)}}}var met=v8(3);function AV(e,t=(...r)=>`${r[0]}`,n=16){let r=v8(n);return(...i)=>{let o=t(...i),a=r.get(o);return r.has(o)?r.get(o):(a=e(...i),r.set(o,a),a)}}function TV(e){return typeof e=="string"?e.split(" ").map(t=>{let[n,r]=t.split(":");return[+n,r]}):e}function P3(e,t,n){let r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}var ude=AV((e,t,n)=>{let r=P3(n,e*2,e*2),i=r.getContext("2d"),o=e,a=e;if(t===1)i.beginPath(),i.arc(o,a,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{let s=i.createRadialGradient(o,a,e*t,o,a,e);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function fde(e,t){let r=P3(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return TV(e).forEach(([o,a])=>{i.addColorStop(o,a)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function pde(e,t,n,r,i,o){let{blur:a}=i,s=r.length;for(;s--;){let{x:l,y:c,value:u,radius:f}=r[s],p=Math.min(u,n),d=l-f,h=c-f,m=ude(f,1-a,o),g=(p-t)/(n-t);e.globalAlpha=Math.max(g,.001),e.drawImage(m,d,h)}return e}function dde(e,t,n,r,i){let{minOpacity:o,opacity:a,maxOpacity:s,useGradientOpacity:l}=i,c=0,u=0,f=t,p=n,d=e.getImageData(c,u,f,p),h=d.data,m=h.length;for(let g=3;g<m;g+=4){let v=h[g],y=v*4;if(!y)continue;let x=a||Math.max(0,Math.min(s,Math.max(o,v)));h[g-3]=r[y],h[g-2]=r[y+1],h[g-1]=r[y+2],h[g]=l?r[y+3]:x}return d}function PV(e,t,n,r,i,o,a){let s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},o);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;let c=P3(a,e,t).getContext("2d"),u=fde(s.gradient,a);c.clearRect(0,0,e,t),pde(c,n,r,i,s,a);let f=dde(c,e,t,u,s),d=P3(a,e,t).getContext("2d");return d.putImageData(f,0,0),d}var hde=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mde(e,t){return Object.keys(e).reduce((n,r)=>{let i=e[r];return t(i,r)||(n[r]=i),n},{})}var N3=(e,t)=>{let{gradient:n,opacity:r,maxOpacity:i,minOpacity:o,blur:a,useGradientOpacity:s}=e,l=hde(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:c,createCanvas:u,document:f}=t;return(p,d,h)=>{let{transform:m}=d,[g,v]=c.getSize(),y=p.map(M=>({x:M[0],y:M[1],value:M[2],radius:M[3]})),x=ni(p,M=>M[2]),_=kn(p,M=>M[2]),S=g&&v?PV(g,v,x,_,y,mde({gradient:n,opacity:r,minOpacity:o,maxOpacity:i,blur:a,useGradientOpacity:s},M=>M===void 0),u):{canvas:null};return bt(f.createElement("image",{})).call(gt,h).style("x",0).style("y",0).style("width",g).style("height",v).style("src",S.canvas).style("transform",m).call(gt,l).node()}};N3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var gde=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},L3=(e,t)=>{let{render:n}=e,r=gde(e,["render"]);return i=>{let[[o,a]]=i;return n(Object.assign(Object.assign({},r),{x:o,y:a}),t)}};L3.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function NV(e,t,n){return e+(t-e)*n}function vde(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function yde(e,t,n,r,i,o,a){let s=Math.ceil(2*e/n*4)*4,l=[],c=r;for(;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*n;let u=o-e+c-e*2;l.push(["M",u,t]);let f=0;for(let p=0;p<s;++p){let d=p%4,h=vde(p*n/4,d,n,i);l.push(["C",h[0][0]+u,-h[0][1]+t,h[1][0]+u,-h[1][1]+t,h[2][0]+u,-h[2][1]+t]),p===s-1&&(f=h[2][0])}return l.push(["L",f+u,a+e]),l.push(["L",u,a+e]),l.push(["Z"]),l}function LV(e,t,n,r,i,o,a,s,l,c,u){let{fill:f,fillOpacity:p,opacity:d}=i;for(let h=0;h<r;h++){let m=r<=1?1:h/(r-1),g=yde(s,a+s*n,l,0,s/40,e,t),v=u.createElement("path",{style:{d:g,fill:f,opacity:NV(.2,.9,m)*Number(d||p)}});o.appendChild(v);try{if(c===!1)return;let y=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}, 0)`}];v.animate(y,{duration:NV(.5*5e3,5e3,m)*2,iterations:1/0})}catch{console.warn("off-screen group animate error!")}}}function xde(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function bde(e,t,n){let i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function _de(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function wde(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function Sde(e,t,n){let r=n*4/3,i=Math.max(r,n*2),o=r/2,a=e,s=o+t-i/2,l=Math.asin(o/((i-o)*.85)),c=Math.sin(l)*o,u=Math.cos(l)*o,f=a-u,p=s+c,d=e,h=s+o/Math.sin(l);return`
      M ${f} ${p}
      A ${o} ${o} 0 1 1 ${f+u*2} ${p}
      Q ${d} ${h} ${e} ${t+i/2}
      Q ${d} ${h} ${f} ${p}
      Z 
    `}var y8={pin:Sde,rect:bde,circle:xde,diamond:_de,triangle:wde};var IV=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Cde=(e="circle")=>y8[e]||y8.circle,I3=(e,t)=>{if(!t)return;let{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:o,percent:a}=r,{background:s,outline:l={},wave:c={}}=i,u=IV(i,["background","outline","wave"]),{border:f=2,distance:p=0}=l,d=IV(l,["border","distance"]),{length:h=192,count:m=3}=c;return(g,v,y)=>{let{document:x}=t.canvas,{color:_,fillOpacity:w}=y,S=Object.assign(Object.assign({fill:_},y),u),M=x.createElement("g",{}),[O,E]=n.getCenter(),P=n.getSize(),k=Math.min(...P)/2,N=(Sr(o)?o:Cde(o))(O,E,k,...P);if(Object.keys(s).length){let B=x.createElement("path",{style:Object.assign({d:N,fill:"#fff"},s)});M.appendChild(B)}if(a>0){let B=x.createElement("path",{style:{d:N}});M.appendChild(B),M.style.clipPath=B,LV(O,E,1-a,m,S,M,B.getBBox().y,k*2,h,!0,x)}let L=x.createElement("path",{style:{d:N,fill:"transparent",lineWidth:f+2*p,stroke:"#fff"}}),z=x.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:N,stroke:_,strokeOpacity:w,lineWidth:f},S),d),{fill:"transparent"})});return M.appendChild(L),M.appendChild(z),M}};I3.props={};var DV=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,x8=(e,t)=>{if(!t)return;let{coordinate:n}=t;if(!n?.getCenter)return;let r=n.getCenter();return(i,o,a)=>{let{document:s}=t.canvas,{color:l,index:c}=o,u=s.createElement("g",{}),f=DV(i[0],i[1]),p=DV(i[0],r)*2,d=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",f,f,0,1,0,...i[1]],["A",p+f*2,p+f*2,0,0,0,...i[2]],["A",f,f,0,1,c===0?0:1,...i[3]],["A",p,p,0,0,1,...i[0]],["Z"]]},a),Pd(e,["shape","last","first"])),{fill:l||a.color})});return u.appendChild(d),u}};function zV(e,t){return e.getBandWidth(e.invert(t))}var RV={rect:Go,hollow:ou,funnel:e1,pyramid:aw},D3=()=>(e,t,n,r)=>{let{x:i,y:o,y1:a,series:s,size:l}=n,c=t.x,u=t.series,[f]=r.getSize(),p=l?l.map(m=>+m/f):null,d=l?(m,g,v)=>{let y=m+g/2,x=p[v];return[y-x/2,y+x/2]}:(m,g,v)=>[m,m+g],h=Array.from(e,m=>{let g=zV(c,i[m]),v=u?zV(u,s?.[m]):1,y=g*v,x=(+s?.[m]||0)*g,_=+i[m]+x,[w,S]=d(_,y,m),M=+o[m],O=+a[m];return[[w,M],[S,M],[S,O],[w,O]].map(N=>r.map(N))});return[e,h]};D3.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:RV,channels:[...Nr({shapes:Object.keys(RV)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Fn(),{type:Xc},{type:ps}],postInference:[...Hn(),...Hl()],interaction:{shareTooltip:!0}};var FV={rect:Go,hollow:ou},z3=()=>(e,t,n,r)=>{let{x:i,x1:o,y:a,y1:s}=n,l=Array.from(e,c=>{let u=[+i[c],+a[c]],f=[+o[c],+a[c]],p=[+o[c],+s[c]],d=[+i[c],+s[c]];return[u,f,p,d].map(h=>r.map(h))});return[e,l]};z3.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:FV,channels:[...Nr({shapes:Object.keys(FV)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Fn(),{type:Xc}],postInference:[...Hn(),...Hl()],interaction:{shareTooltip:!0}};var BV={line:sw,smooth:lw,hv:cw,vh:uw,hvh:fw,trail:pw},Ode=(e,t,n,r)=>{var i,o;let{series:a,x:s,y:l}=n,{x:c,y:u}=t;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");let f=a?Array.from(An(e,g=>a[g]).values()):[e],p=f.map(g=>g[0]).filter(g=>g!==void 0),d=(((i=c?.getBandWidth)===null||i===void 0?void 0:i.call(c))||0)/2,h=(((o=u?.getBandWidth)===null||o===void 0?void 0:o.call(u))||0)/2,m=Array.from(f,g=>g.map(v=>r.map([+s[v]+d,+l[v]+h])));return[p,m,f]},Mde=(e,t,n,r)=>{let i=Object.entries(n).filter(([a])=>a.startsWith("position")).map(([,a])=>a);if(i.length===0)throw new Error("Missing encode for position channel.");let o=Array.from(e,a=>{let s=i.map(u=>+u[a]),l=r.map(s),c=[];for(let u=0;u<l.length;u+=2)c.push([l[u],l[u+1]]);return c});return[e,o]},R3=()=>(e,t,n,r)=>(eh(r)?Mde:Ode)(e,t,n,r);R3.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:BV,channels:[...Nr({shapes:Object.keys(BV)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Fn(),{type:P5},{type:w0}],postInference:[...Hn(),...Hl(),...gV()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var jV={hollow:vw,hollowDiamond:mw,hollowHexagon:gw,hollowSquare:yw,hollowTriangleDown:bw,hollowTriangle:xw,hollowBowtie:hw,hollowCircle:_w,point:Aw,plus:Ew,diamond:Cw,square:Tw,triangle:Nw,hexagon:Ow,cross:Sw,bowtie:ww,hyphen:Mw,line:kw,tick:Pw,triangleDown:Lw,circle:t1},F3=e=>(t,n,r,i)=>{let{x:o,y:a,x1:s,y1:l,size:c,dx:u,dy:f}=r,[p,d]=i.getSize(),h=ws(n,r,e),m=v=>{let y=+(u?.[v]||0),x=+(f?.[v]||0),_=s?(+o[v]+ +s[v])/2:+o[v],w=l?(+a[v]+ +l[v])/2:+a[v],S=_+y,M=w+x;return[S,M]},g=c?Array.from(t,v=>{let[y,x]=m(v),_=+c[v],w=_/p,S=_/d,M=[y-w,x-S],O=[y+w,x+S];return[i.map(h(M,v)),i.map(h(O,v))]}):Array.from(t,v=>[i.map(h(m(v),v))]);return[t,g]};F3.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:jV,channels:[...Nr({shapes:Object.keys(jV)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Fn(),{type:ps},{type:up}],postInference:[...Hn(),{type:w5},...pa()]};var VV={text:a3,badge:s3,tag:l3},B3=e=>{let{cartesian:t=!1}=e;return t?u1:(n,r,i,o)=>{let{x:a,y:s}=i,l=ws(r,i,e),c=Array.from(n,u=>{let f=[+a[u],+s[u]];return[o.map(l(f,u))]});return[n,c]}};B3.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:VV,channels:[...Nr({shapes:Object.keys(VV)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Fn(),{type:pp},{type:fp}],postInference:[...Hn(),...pa()]};var HV={cell:Go,hollow:ou},j3=()=>(e,t,n,r)=>{let{x:i,y:o}=n,a=t.x,s=t.y,l=Array.from(e,c=>{let u=a.getBandWidth(a.invert(+i[c])),f=s.getBandWidth(s.invert(+o[c])),p=+i[c],d=+o[c],h=[p,d],m=[p+u,d],g=[p+u,d+f],v=[p,d+f];return[h,m,g,v].map(y=>r.map(y))});return[e,l]};j3.props={defaultShape:"cell",defaultLabelShape:"label",shape:HV,composite:!1,channels:[...Nr({shapes:Object.keys(HV)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Fn(),{type:ps},{type:up},{type:C0}],postInference:[...Hn(),...pa()]};var WV={area:c3,smooth:u3,hvh:f3,vh:p3,hv:d3},V3=()=>(e,t,n,r)=>{var i,o;let{x:a,y:s,y1:l,series:c}=n,{x:u,y:f}=t,p=c?Array.from(An(e,v=>c[v]).values()):[e],d=p.map(v=>v[0]).filter(v=>v!==void 0),h=(((i=u?.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,m=(((o=f?.getBandWidth)===null||o===void 0?void 0:o.call(f))||0)/2,g=Array.from(p,v=>{let y=v.length,x=new Array(y*2);for(let _=0;_<v.length;_++){let w=v[_];x[_]=r.map([+a[w]+h,+s[w]+m]),x[y+_]=r.map([+a[w]+h,+l[w]+m])}return x});return[d,g,p]};V3.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:WV,channels:[...Nr({shapes:Object.keys(WV)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Fn(),{type:w0},{type:Xc},{type:C0}],postInference:[...Hn(),...Hl()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var qV={link:h3,arc:v3,smooth:m3,vhv:g3},d1=e=>(t,n,r,i)=>{let{x:o,y:a,x1:s=o,y1:l=a}=r,c=ws(n,r,e),u=t.map(f=>[i.map(c([+o[f],+a[f]],f)),i.map(c([+s[f],+l[f]],f))]);return[t,u]};d1.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:qV,channels:[...Nr({shapes:Object.keys(qV)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Fn(),{type:M5},{type:k5}],postInference:[...Hn(),...pa()]};var UV={image:y3},H3=e=>{let{cartesian:t}=e;return t?u1:(n,r,i,o)=>{let{x:a,y:s}=i,l=ws(r,i,e),c=Array.from(n,u=>{let f=[+a[u],+s[u]];return[o.map(l(f,u))]});return[n,c]}};H3.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:UV,channels:[...Nr({shapes:Object.keys(UV)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Fn(),{type:pp},{type:fp}],postInference:[...Hn(),...pa()]};var GV={polygon:x3,ribbon:b3},W3=()=>(e,t,n,r)=>{let i=Object.entries(n).filter(([s])=>s.startsWith("x")).map(([,s])=>s),o=Object.entries(n).filter(([s])=>s.startsWith("y")).map(([,s])=>s),a=e.map(s=>{let l=[];for(let c=0;c<i.length;c++){let u=i[c][s];if(u===void 0)break;let f=o[c][s];l.push(r.map([+u,+f]))}return l});return[e,a]};W3.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:GV,channels:[...Nr({shapes:Object.keys(GV)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Fn()],postInference:[...Hn(),...pa()]};var $V={box:_3,violin:w3},q3=()=>(e,t,n,r)=>{let{x:i,y:o,y1:a,y2:s,y3:l,y4:c,series:u}=n,f=t.x,p=t.series,d=Array.from(e,h=>{let m=f.getBandWidth(f.invert(+i[h])),g=p?p.getBandWidth(p.invert(+u?.[h])):1,v=m*g,y=(+u?.[h]||0)*m,x=+i[h]+y+v/2,[_,w,S,M,O]=[+o[h],+a[h],+s[h],+l[h],+c[h]];return[[x-v/2,O],[x+v/2,O],[x,O],[x,M],[x-v/2,M],[x+v/2,M],[x+v/2,w],[x-v/2,w],[x-v/2,S],[x+v/2,S],[x,w],[x,_],[x-v/2,_],[x+v/2,_]].map(P=>r.map(P))});return[e,d]};q3.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:$V,channels:[...Nr({shapes:Object.keys($V)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Fn(),{type:ps}],postInference:[...Hn(),...Hl()],interaction:{shareTooltip:!0}};var YV={vector:n1},U3=()=>(e,t,n,r)=>{let{x:i,y:o,size:a,rotate:s}=n,[l,c]=r.getSize(),u=e.map(f=>{let p=+s[f]/180*Math.PI,d=+a[f],h=d/l,m=d/c,g=h*Math.cos(p),v=-m*Math.sin(p);return[r.map([+i[f]-g/2,+o[f]-v/2]),r.map([+i[f]+g/2,+o[f]+v/2])]});return[e,u]};U3.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:YV,channels:[...Nr({shapes:Object.keys(YV)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Fn()],postInference:[...Hn(),...pa()]};var XV={line:p1},G3=e=>(t,n,r,i)=>{let{y:o}=r,a=ws(n,r,_e({style:{bandOffset:0}},e)),s=Array.from(t,l=>{let c=[0,o[l]],u=[1,o[l]];return[c,u].map(f=>i.map(a(f,l)))});return[t,s]};G3.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:XV,channels:[...Wl({shapes:Object.keys(XV)}),{name:"y",required:!0}],preInference:[...Fn(),{type:C5}],postInference:[...Hn()]};var KV={line:p1},$3=e=>(t,n,r,i)=>{let{x:o}=r,a=ws(n,r,_e({style:{bandOffset:0}},e)),s=Array.from(t,l=>{let c=[o[l],1],u=[o[l],0];return[c,u].map(f=>i.map(a(f,l)))});return[t,s]};$3.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:KV,channels:[...Wl({shapes:Object.keys(KV)}),{name:"x",required:!0}],preInference:[...Fn(),{type:O5}],postInference:[...Hn()]};var ZV={connector:S3},Y3=(...e)=>d1(...e);Y3.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:ZV,channels:[...Wl({shapes:Object.keys(ZV)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Fn()],postInference:[...Hn()]};function JV(e,t,n,r){if(t)return()=>[0,1];let{[e]:i,[`${e}1`]:o}=n;return a=>{var s;let l=((s=r.getBandWidth)===null||s===void 0?void 0:s.call(r,r.invert(+o[a])))||0;return[i[a],o[a]+l]}}function A2(e={}){let{extendX:t=!1,extendY:n=!1}=e;return(r,i,o,a)=>{let s=JV("x",t,o,i.x),l=JV("y",n,o,i.y),c=Array.from(r,u=>{let[f,p]=s(u),[d,h]=l(u);return[[f,d],[p,d],[p,h],[f,h]].map(x=>a.map(x))});return[r,c]}}var QV={range:Go},X3=()=>A2();X3.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:QV,channels:[...Wl({shapes:Object.keys(QV)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Fn()],postInference:[...Hn()]};var eH={range:Go},K3=()=>A2({extendY:!0});K3.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:eH,channels:[...Wl({shapes:Object.keys(eH)}),{name:"x",required:!0}],preInference:[...Fn(),{type:E5}],postInference:[...Hn()]};var tH={range:Go},Z3=()=>A2({extendX:!0});Z3.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:tH,channels:[...Wl({shapes:Object.keys(tH)}),{name:"y",required:!0}],preInference:[...Fn(),{type:A5}],postInference:[...Hn()]};function kde(e){return e.target.depth}function b8(e){return e.depth}function _8(e,t){return t-1-e.height}function Eh(e,t){return e.sourceLinks.length?e.depth:t-1}function w8(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?ni(e.sourceLinks,kde)-1:0}function T2(e){return function(){return e}}function nH(e,t){return J3(e.source,t.source)||e.index-t.index}function rH(e,t){return J3(e.target,t.target)||e.index-t.index}function J3(e,t){return e.y0-t.y0}function S8(e){return e.value}function Ede(e){return e.index}function Ade(e){return e.nodes}function Tde(e){return e.links}function iH(e,t){let n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function oH({nodes:e}){for(let t of e){let n=t.y0,r=n;for(let i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(let i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function C8(){let e=0,t=0,n=1,r=1,i=24,o=8,a,s=Ede,l=Eh,c,u,f,p=Ade,d=Tde,h=6;function m(B){let H={nodes:p(B),links:d(B)};return g(H),v(H),y(H),x(H),S(H),oH(H),H}m.update=function(B){return oH(B),B},m.nodeId=function(B){return arguments.length?(s=typeof B=="function"?B:T2(B),m):s},m.nodeAlign=function(B){return arguments.length?(l=typeof B=="function"?B:T2(B),m):l},m.nodeDepth=function(B){return arguments.length?(c=B,m):c},m.nodeSort=function(B){return arguments.length?(u=B,m):u},m.nodeWidth=function(B){return arguments.length?(i=+B,m):i},m.nodePadding=function(B){return arguments.length?(o=a=+B,m):o},m.nodes=function(B){return arguments.length?(p=typeof B=="function"?B:T2(B),m):p},m.links=function(B){return arguments.length?(d=typeof B=="function"?B:T2(B),m):d},m.linkSort=function(B){return arguments.length?(f=B,m):f},m.size=function(B){return arguments.length?(e=t=0,n=+B[0],r=+B[1],m):[n-e,r-t]},m.extent=function(B){return arguments.length?(e=+B[0][0],n=+B[1][0],t=+B[0][1],r=+B[1][1],m):[[e,t],[n,r]]},m.iterations=function(B){return arguments.length?(h=+B,m):h};function g({nodes:B,links:H}){B.forEach((W,Z)=>{W.index=Z,W.sourceLinks=[],W.targetLinks=[]});let j=new Map(B.map(W=>[s(W),W]));if(H.forEach((W,Z)=>{W.index=Z;let{source:ie,target:R}=W;typeof ie!="object"&&(ie=W.source=iH(j,ie)),typeof R!="object"&&(R=W.target=iH(j,R)),ie.sourceLinks.push(W),R.targetLinks.push(W)}),f!=null)for(let{sourceLinks:W,targetLinks:Z}of B)W.sort(f),Z.sort(f)}function v({nodes:B}){for(let H of B)H.value=H.fixedValue===void 0?Math.max(Ci(H.sourceLinks,S8),Ci(H.targetLinks,S8)):H.fixedValue}function y({nodes:B}){let H=B.length,j=new Set(B),W=new Set,Z=0;for(;j.size;){if(j.forEach(ie=>{ie.depth=Z;for(let{target:R}of ie.sourceLinks)W.add(R)}),++Z>H)throw new Error("circular link");j=W,W=new Set}if(c){let ie=Math.max(kn(B,q=>q.depth)+1,0),R;for(let q=0;q<B.length;q++)R=B[q],R.depth=c.call(null,R,ie)}}function x({nodes:B}){let H=B.length,j=new Set(B),W=new Set,Z=0;for(;j.size;){if(j.forEach(ie=>{ie.height=Z;for(let{source:R}of ie.targetLinks)W.add(R)}),++Z>H)throw new Error("circular link");j=W,W=new Set}}function _({nodes:B}){let H=Math.max(kn(B,Z=>Z.depth)+1,0),j=(n-e-i)/(H-1),W=new Array(H).fill(0).map(()=>[]);for(let Z of B){let ie=Math.max(0,Math.min(H-1,Math.floor(l.call(null,Z,H))));Z.layer=ie,Z.x0=e+ie*j,Z.x1=Z.x0+i,W[ie]?W[ie].push(Z):W[ie]=[Z]}if(u)for(let Z of W)Z.sort(u);return W}function w(B){let H=ni(B,j=>(r-t-(j.length-1)*a)/Ci(j,S8));for(let j of B){let W=t;for(let Z of j){Z.y0=W,Z.y1=W+Z.value*H,W=Z.y1+a;for(let ie of Z.sourceLinks)ie.width=ie.value*H}W=(r-W+a)/(j.length+1);for(let Z=0;Z<j.length;++Z){let ie=j[Z];ie.y0+=W*(Z+1),ie.y1+=W*(Z+1)}N(j)}}function S(B){let H=_(B);a=Math.min(o,(r-t)/(kn(H,j=>j.length)-1)),w(H);for(let j=0;j<h;++j){let W=Math.pow(.99,j),Z=Math.max(1-W,(j+1)/h);O(H,W,Z),M(H,W,Z)}}function M(B,H,j){for(let W=1,Z=B.length;W<Z;++W){let ie=B[W];for(let R of ie){let q=0,J=0;for(let{source:ae,value:le}of R.targetLinks){let ue=le*(R.layer-ae.layer);q+=L(ae,R)*ue,J+=ue}if(!(J>0))continue;let te=(q/J-R.y0)*H;R.y0+=te,R.y1+=te,A(R)}u===void 0&&ie.sort(J3),ie.length&&E(ie,j)}}function O(B,H,j){for(let W=B.length,Z=W-2;Z>=0;--Z){let ie=B[Z];for(let R of ie){let q=0,J=0;for(let{target:ae,value:le}of R.sourceLinks){let ue=le*(ae.layer-R.layer);q+=z(R,ae)*ue,J+=ue}if(!(J>0))continue;let te=(q/J-R.y0)*H;R.y0+=te,R.y1+=te,A(R)}u===void 0&&ie.sort(J3),ie.length&&E(ie,j)}}function E(B,H){let j=B.length>>1,W=B[j];k(B,W.y0-a,j-1,H),P(B,W.y1+a,j+1,H),k(B,r,B.length-1,H),P(B,t,0,H)}function P(B,H,j,W){for(;j<B.length;++j){let Z=B[j],ie=(H-Z.y0)*W;ie>1e-6&&(Z.y0+=ie,Z.y1+=ie),H=Z.y1+a}}function k(B,H,j,W){for(;j>=0;--j){let Z=B[j],ie=(Z.y1-H)*W;ie>1e-6&&(Z.y0-=ie,Z.y1-=ie),H=Z.y0-a}}function A({sourceLinks:B,targetLinks:H}){if(f===void 0){for(let{source:{sourceLinks:j}}of H)j.sort(rH);for(let{target:{targetLinks:j}}of B)j.sort(nH)}}function N(B){if(f===void 0)for(let{sourceLinks:H,targetLinks:j}of B)H.sort(rH),j.sort(nH)}function L(B,H){let j=B.y0-(B.sourceLinks.length-1)*a/2;for(let{target:W,width:Z}of B.sourceLinks){if(W===H)break;j+=Z+a}for(let{source:W,width:Z}of H.targetLinks){if(W===B)break;j-=Z}return j}function z(B,H){let j=H.y0-(H.targetLinks.length-1)*a/2;for(let{source:W,width:Z}of H.targetLinks){if(W===B)break;j+=Z+a}for(let{target:W,width:Z}of B.sourceLinks){if(W===H)break;j-=Z}return j}return m}var Pde={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},Nde={left:b8,right:_8,center:w8,justify:Eh};function Lde(e){let t=typeof e;return t==="string"?Nde[e]||Eh:t==="function"?e:Eh}var O8=e=>t=>{let{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:o,nodePadding:a,nodeDepth:s,nodes:l,links:c,linkSort:u,iterations:f}=Object.assign({},Pde,e),p=C8().nodeSort(r).linkSort(u).links(c).nodes(l).nodeWidth(o).nodePadding(a).nodeDepth(s).nodeAlign(Lde(i)).iterations(f).extent([[0,0],[1,1]]);typeof n=="function"&&p.nodeId(n);let d=p(t),{nodes:h,links:m}=d,g=h.map(y=>{let{x0:x,x1:_,y0:w,y1:S}=y;return Object.assign(Object.assign({},y),{x:[x,_,_,x],y:[w,w,S,S]})}),v=m.map(y=>{let{source:x,target:_}=y,w=x.x1,S=_.x0,M=y.width/2;return Object.assign(Object.assign({},y),{x:[w,w,S,S],y:[y.y0+M,y.y0-M,y.y1+M,y.y1-M]})});return{nodes:g,links:v}};O8.props={};function Fa(e,t,n={},r=!1){if(Aa(e)||Array.isArray(e)&&r)return e;let i=Ke(e,t);return _e(n,i)}function Ah(e,t={}){return Aa(e)||Array.isArray(e)||!M8(e)?e:_e(t,e)}function M8(e){if(Object.keys(e).length===0)return!0;let{title:t,items:n}=e;return t!==void 0||n!==void 0}function Ba(e,t){return typeof e=="object"?Ke(e,t):e}var Ide=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Dde={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},zde={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},Rde={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},Fde={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},Q3=e=>{let{data:t,encode:n={},scale:r,style:i={},layout:o={},nodeLabels:a=[],linkLabels:s=[],animate:l={},tooltip:c={},interaction:u}=e,{links:f,nodes:p}=f1(t,n),d=Ke(n,"node"),h=Ke(n,"link"),{key:m=P=>P.key,color:g=m}=d,{links:v,nodes:y}=O8(Object.assign(Object.assign(Object.assign({},Dde),{nodeId:Ra(m)}),o))({links:f,nodes:p}),x=Ke(i,"label"),{text:_=m,spacing:w=5}=x,S=Ide(x,["text","spacing"]),M=Ra(m),O=Fa(c,"node",{title:M,items:[{field:"value"}]},!0),E=Fa(c,"link",{title:"",items:[P=>({name:"source",value:M(P.source)}),P=>({name:"target",value:M(P.target)})]});return[_e({},zde,{data:y,encode:Object.assign(Object.assign({},d),{color:g}),scale:r,style:Ke(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},Fde),{text:_,dx:P=>P.x[0]<.5?w:-w}),S),...a],tooltip:O,animate:Ba(l,"node"),axis:!1,interaction:u}),_e({},Rde,{data:v,encode:h,labels:s,style:Object.assign({fill:h.color?void 0:"#aaa",lineWidth:0},Ke(i,"link")),tooltip:E,animate:Ba(l,"link"),interaction:u})]};Q3.props={};var k8={};Fc(k8,{frequency:()=>jde,id:()=>Vde,name:()=>Hde,weight:()=>Bde});function Bde(e,t){return t.value-e.value}function jde(e,t){return t.frequency-e.frequency}function Vde(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function Hde(e,t){return`${e.name}`.localeCompare(`${t.name}`)}var Wde={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function E8(e){let{y:t,thickness:n,weight:r,marginRatio:i,id:o,source:a,target:s,sourceWeight:l,targetWeight:c,sortBy:u}=Object.assign(Object.assign({},Wde),e);function f(g){let v=g.nodes.map(x=>Object.assign({},x)),y=g.edges.map(x=>Object.assign({},x));return p(v,y),d(v,y),h(v,y),m(v,y),{nodes:v,edges:y}}function p(g,v){v.forEach(_=>{_.source=a(_),_.target=s(_),_.sourceWeight=l(_),_.targetWeight=c(_)});let y=An(v,_=>_.source),x=An(v,_=>_.target);return g.forEach(_=>{_.id=o(_);let w=y.has(_.id)?y.get(_.id):[],S=x.has(_.id)?x.get(_.id):[];_.frequency=w.length+S.length,_.value=Ci(w,M=>M.sourceWeight)+Ci(S,M=>M.targetWeight)}),{nodes:g,edges:v}}function d(g,v){let y=typeof u=="function"?u:k8[u];y&&g.sort(y)}function h(g,v){let y=g.length;if(!y)throw Kc("Invalid nodes: it's empty!");if(!r){let w=1/y;return g.forEach((S,M)=>{S.x=(M+.5)*w,S.y=t}),{nodes:g,edges:v}}let x=i/(2*y),_=g.reduce((w,S)=>w+=S.value,0);return g.reduce((w,S)=>{S.weight=S.value/_,S.width=S.weight*(1-i),S.height=n;let M=x+w,O=M+S.width,E=t-n/2,P=E+n;return S.x=[M,O,O,M],S.y=[E,E,P,P],w+S.width+2*x},0),{nodes:g,edges:v}}function m(g,v){let y=new Map(g.map(w=>[w.id,w]));if(!r)return v.forEach(w=>{let S=a(w),M=s(w),O=y.get(S),E=y.get(M);O&&E&&(w.x=[O.x,E.x],w.y=[O.y,E.y])}),{nodes:g,edges:v};v.forEach(w=>{w.x=[0,0,0,0],w.y=[t,t,t,t]});let x=An(v,w=>w.source),_=An(v,w=>w.target);g.forEach(w=>{let{edges:S,width:M,x:O,y:E,value:P,id:k}=w,A=x.get(k)||[],N=_.get(k)||[],L=0;A.map(z=>{let B=z.sourceWeight/P*M;z.x[0]=O[0]+L,z.x[1]=O[0]+L+B,L+=B}),N.forEach(z=>{let B=z.targetWeight/P*M;z.x[3]=O[0]+L,z.x[2]=O[0]+L+B,L+=B})})}return f}var h1=e=>t=>E8(e)(t);h1.props={};var aH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},A8={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},qde={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},Ude={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},Gde={position:"outside",fontSize:10},eS=(e,t)=>{let{data:n,encode:r={},scale:i,style:o={},layout:a={},nodeLabels:s=[],linkLabels:l=[],animate:c={},tooltip:u={}}=e,{nodes:f,links:p}=f1(n,r),d=Ke(r,"node"),h=Ke(r,"link"),{key:m=z=>z.key,color:g=m}=d,{linkEncodeColor:v=z=>z.source}=h,{nodeWidthRatio:y=A8.thickness,nodePaddingRatio:x=A8.marginRatio}=a,_=aH(a,["nodeWidthRatio","nodePaddingRatio"]),{nodes:w,edges:S}=h1(Object.assign(Object.assign(Object.assign(Object.assign({},A8),{id:Ra(m),thickness:y,marginRatio:x}),_),{weight:!0}))({nodes:f,edges:p}),M=Ke(o,"label"),{text:O=m}=M,E=aH(M,["text"]),P=Fa(u,"node",{title:"",items:[z=>({name:z.key,value:z.value})]},!0),k=Fa(u,"link",{title:"",items:[z=>({name:`${z.source} -> ${z.target}`,value:z.value})]}),{height:A,width:N}=t,L=Math.min(A,N);return[_e({},Ude,{data:S,encode:Object.assign(Object.assign({},h),{color:v}),labels:l,style:Object.assign({fill:v?void 0:"#aaa"},Ke(o,"link")),tooltip:k,animate:Ba(c,"link")}),_e({},qde,{data:w,encode:Object.assign(Object.assign({},d),{color:g}),scale:i,style:Ke(o,"node"),coordinate:{type:"polar",outerRadius:(L-20)/L,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Gde),{text:O}),E),...s],tooltip:P,animate:Ba(c,"node"),axis:!1})]};eS.props={};var sH={path:E3,hollow:A3},tS=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];tS.props={defaultShape:"path",defaultLabelShape:"label",shape:sH,composite:!1,channels:[...Nr({shapes:Object.keys(sH)}),{name:"d",scale:"identity"}],preInference:[...Fn()],postInference:[...Hn()]};function $de(e,t){return e.parent===t.parent?1:2}function Yde(e){return e.reduce(Xde,0)/e.length}function Xde(e,t){return e+t.x}function Kde(e){return 1+e.reduce(Zde,0)}function Zde(e,t){return Math.max(e,t.y)}function Jde(e){for(var t;t=e.children;)e=t[0];return e}function Qde(e){for(var t;t=e.children;)e=t[t.length-1];return e}function T8(){var e=$de,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(p){var d=p.children;d?(p.x=Yde(d),p.y=Kde(d)):(p.x=a?s+=e(p,a):0,p.y=0,a=p)});var l=Jde(o),c=Qde(o),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return o.eachAfter(r?function(p){p.x=(p.x-o.x)*t,p.y=(o.y-p.y)*n}:function(p){p.x=(p.x-u)/(f-u)*t,p.y=(1-(o.y?p.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function ehe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function lH(){return this.eachAfter(ehe)}function cH(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this}function uH(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function fH(e,t){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function pH(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r}function dH(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function hH(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function mH(e){for(var t=this,n=the(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function the(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function gH(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function vH(){return Array.from(this)}function yH(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function xH(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*bH(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function cu(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=ihe)):t===void 0&&(t=rhe);for(var n=new sf(e),r,i=[n],o,a,s,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new sf(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(P8)}function nhe(){return cu(this).eachBefore(ohe)}function rhe(e){return e.children}function ihe(e){return Array.isArray(e)?e[1]:null}function ohe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function P8(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function sf(e){this.data=e,this.depth=this.height=0,this.parent=null}sf.prototype=cu.prototype={constructor:sf,count:lH,each:cH,eachAfter:fH,eachBefore:uH,find:pH,sum:dH,sort:hH,path:mH,ancestors:gH,descendants:vH,leaves:yH,links:xH,copy:nhe,[Symbol.iterator]:bH};function m1(e){return e==null?null:N8(e)}function N8(e){if(typeof e!="function")throw new Error;return e}function lf(){return 0}function Ap(e){return function(){return e}}function _H(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function wH(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function SH(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function CH(e,t){for(var n=0,r=(e=SH(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&OH(a,o)?++n:(a=she(i=ahe(i,o)),n=0);return a}function ahe(e,t){var n,r;if(L8(t,e))return[t];for(n=0;n<e.length;++n)if(nS(t,e[n])&&L8(P2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(nS(P2(e[n],e[r]),t)&&nS(P2(e[n],t),e[r])&&nS(P2(e[r],t),e[n])&&L8(MH(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function nS(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function OH(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function L8(e,t){for(var n=0;n<t.length;++n)if(!OH(e,t[n]))return!1;return!0}function she(e){switch(e.length){case 1:return lhe(e[0]);case 2:return P2(e[0],e[1]);case 3:return MH(e[0],e[1],e[2])}}function lhe(e){return{x:e.x,y:e.y,r:e.r}}function P2(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,l=o-n,c=a-r,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(n+o+l/f*u)/2,y:(r+a+c/f*u)/2,r:(f+i+s)/2}}function MH(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,c=n.x,u=n.y,f=n.r,p=r-a,d=r-c,h=i-s,m=i-u,g=l-o,v=f-o,y=r*r+i*i-o*o,x=y-a*a-s*s+l*l,_=y-c*c-u*u+f*f,w=d*h-p*m,S=(h*_-m*x)/(w*2)-r,M=(m*g-h*v)/w,O=(d*x-p*_)/(w*2)-i,E=(p*v-d*g)/w,P=M*M+E*E-1,k=2*(o+S*M+O*E),A=S*S+O*O-o*o,N=-(Math.abs(P)>1e-6?(k+Math.sqrt(k*k-4*P*A))/(2*P):A/k);return{x:r+S+M*N,y:i+O+E*N,r:N}}function kH(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,l,c=r*r+a*a;c?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(c+l-o)/(2*c),s=Math.sqrt(Math.max(0,l/c-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(c+o-l)/(2*c),s=Math.sqrt(Math.max(0,o/c-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function EH(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function AH(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function rS(e){this._=e,this.next=null,this.previous=null}function TH(e,t){if(!(o=(e=wH(e)).length))return 0;var n,r,i,o,a,s,l,c,u,f,p;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;kH(r,n,i=e[2]),n=new rS(n),r=new rS(r),i=new rS(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){kH(n._,r._,i=e[l]),i=new rS(i),c=r.next,u=n.previous,f=r._.r,p=n._.r;do if(f<=p){if(EH(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.next}else{if(EH(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue e}p+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=AH(n);(i=i.next)!==r;)(s=AH(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=CH(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function che(e){return Math.sqrt(e.value)}function D8(){var e=null,t=1,n=1,r=lf;function i(o){let a=_H();return o.x=t/2,o.y=n/2,e?o.eachBefore(PH(e)).eachAfter(I8(r,.5,a)).eachBefore(NH(1)):o.eachBefore(PH(che)).eachAfter(I8(lf,1,a)).eachAfter(I8(r,o.r/Math.min(t,n),a)).eachBefore(NH(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=m1(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Ap(+o),i):r},i}function PH(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function I8(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,l;if(s)for(o=0;o<a;++o)i[o].r+=s;if(l=TH(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=l+s}}}function NH(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function LH(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function cf(e,t,n,r,i){for(var o=e.children,a,s=-1,l=o.length,c=e.value&&(r-t)/e.value;++s<l;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}var uhe={depth:-1},IH={},z8={};function fhe(e){return e.id}function phe(e){return e.parentId}function g1(){var e=fhe,t=phe,n;function r(i){var o=Array.from(i),a=e,s=t,l,c,u,f,p,d,h,m,g=new Map;if(n!=null){let v=o.map((_,w)=>dhe(n(_,w,i))),y=v.map(DH),x=new Set(v).add("");for(let _ of y)x.has(_)||(x.add(_),v.push(_),y.push(DH(_)),o.push(z8));a=(_,w)=>v[w],s=(_,w)=>y[w]}for(u=0,l=o.length;u<l;++u)c=o[u],d=o[u]=new sf(c),(h=a(c,u,i))!=null&&(h+="")&&(m=d.id=h,g.set(m,g.has(m)?IH:d)),(h=s(c,u,i))!=null&&(h+="")&&(d.parent=h);for(u=0;u<l;++u)if(d=o[u],h=d.parent){if(p=g.get(h),!p)throw new Error("missing: "+h);if(p===IH)throw new Error("ambiguous: "+h);p.children?p.children.push(d):p.children=[d],d.parent=p}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===z8&&f.children.length===1;)f=f.children[0],--l;for(let v=o.length-1;v>=0&&(d=o[v],d.data===z8);--v)d.data=null}if(f.parent=uhe,f.eachBefore(function(v){v.depth=v.parent.depth+1,--l}).eachBefore(P8),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=m1(i),r):e},r.parentId=function(i){return arguments.length?(t=m1(i),r):t},r.path=function(i){return arguments.length?(n=m1(i),r):n},r}function dhe(e){e=`${e}`;let t=e.length;return R8(e,t-1)&&!R8(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function DH(e){let t=e.length;if(t<2)return"";for(;--t>1&&!R8(e,t););return e.slice(0,t)}function R8(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function hhe(e,t){return e.parent===t.parent?1:2}function F8(e){var t=e.children;return t?t[0]:e.t}function B8(e){var t=e.children;return t?t[t.length-1]:e.t}function mhe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ghe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function vhe(e,t,n){return e.a.parent===t.parent?e.a:n}function iS(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}iS.prototype=Object.create(sf.prototype);function yhe(e){for(var t=new iS(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new iS(o[a],a)),i.parent=n;return(t.parent=new iS(null,0)).children=[t],t}function j8(){var e=hhe,t=1,n=1,r=null;function i(c){var u=yhe(c);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)c.eachBefore(l);else{var f=c,p=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>p.x&&(p=y),y.depth>d.depth&&(d=y)});var h=f===p?1:e(f,p)/2,m=h-f.x,g=t/(p.x+h+m),v=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+m)*g,y.y=y.depth*v})}return c}function o(c){var u=c.children,f=c.parent.children,p=c.i?f[c.i-1]:null;if(u){ghe(c);var d=(u[0].z+u[u.length-1].z)/2;p?(c.z=p.z+e(c._,p._),c.m=c.z-d):c.z=d}else p&&(c.z=p.z+e(c._,p._));c.parent.A=s(c,p,c.parent.A||f[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,f){if(u){for(var p=c,d=c,h=u,m=p.parent.children[0],g=p.m,v=d.m,y=h.m,x=m.m,_;h=B8(h),p=F8(p),h&&p;)m=F8(m),d=B8(d),d.a=c,_=h.z+y-p.z-g+e(h._,p._),_>0&&(mhe(vhe(h,c,f),c,_),g+=_,v+=_),y+=h.m,g+=p.m,x+=m.m,v+=d.m;h&&!B8(d)&&(d.t=h,d.m+=y-v),p&&!F8(m)&&(m.t=p,m.m+=g-x,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}function uf(e,t,n,r,i){for(var o=e.children,a,s=-1,l=o.length,c=e.value&&(i-n)/e.value;++s<l;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var V8=(1+Math.sqrt(5))/2;function H8(e,t,n,r,i,o){for(var a=[],s=t.children,l,c,u=0,f=0,p=s.length,d,h,m=t.value,g,v,y,x,_,w,S;u<p;){d=i-n,h=o-r;do g=s[f++].value;while(!g&&f<p);for(v=y=g,w=Math.max(h/d,d/h)/(m*e),S=g*g*w,_=Math.max(y/S,S/v);f<p;++f){if(g+=c=s[f].value,c<v&&(v=c),c>y&&(y=c),S=g*g*w,x=Math.max(y/S,S/v),x>_){g-=c;break}_=x}a.push(l={value:g,dice:d<h,children:s.slice(u,f)}),l.dice?cf(l,n,r,i,m?r+=h*g/m:o):uf(l,n,r,m?n+=d*g/m:i,o),m-=g,u=f}return a}var N2=function e(t){function n(r,i,o,a,s){H8(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(V8);function W8(){var e=N2,t=!1,n=1,r=1,i=[0],o=lf,a=lf,s=lf,l=lf,c=lf;function u(p){return p.x0=p.y0=0,p.x1=n,p.y1=r,p.eachBefore(f),i=[0],t&&p.eachBefore(LH),p}function f(p){var d=i[p.depth],h=p.x0+d,m=p.y0+d,g=p.x1-d,v=p.y1-d;g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),p.x0=h,p.y0=m,p.x1=g,p.y1=v,p.children&&(d=i[p.depth+1]=o(p)/2,h+=c(p)-d,m+=a(p)-d,g-=s(p)-d,v-=l(p)-d,g<h&&(h=g=(h+g)/2),v<m&&(m=v=(m+v)/2),e(p,h,m,g,v))}return u.round=function(p){return arguments.length?(t=!!p,u):t},u.size=function(p){return arguments.length?(n=+p[0],r=+p[1],u):[n,r]},u.tile=function(p){return arguments.length?(e=N8(p),u):e},u.padding=function(p){return arguments.length?u.paddingInner(p).paddingOuter(p):u.paddingInner()},u.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:Ap(+p),u):o},u.paddingOuter=function(p){return arguments.length?u.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):u.paddingTop()},u.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:Ap(+p),u):a},u.paddingRight=function(p){return arguments.length?(s=typeof p=="function"?p:Ap(+p),u):s},u.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Ap(+p),u):l},u.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:Ap(+p),u):c},u}function q8(e,t,n,r,i){var o=e.children,a,s=o.length,l,c=new Array(s+1);for(c[0]=l=a=0;a<s;++a)c[a+1]=l+=o[a].value;u(0,s,e.value,t,n,r,i);function u(f,p,d,h,m,g,v){if(f>=p-1){var y=o[f];y.x0=h,y.y0=m,y.x1=g,y.y1=v;return}for(var x=c[f],_=d/2+x,w=f+1,S=p-1;w<S;){var M=w+S>>>1;c[M]<_?w=M+1:S=M}_-c[w-1]<c[w]-_&&f+1<w&&--w;var O=c[w]-x,E=d-O;if(g-h>v-m){var P=d?(h*E+g*O)/d:g;u(f,w,O,h,m,P,v),u(w,p,E,P,m,g,v)}else{var k=d?(m*E+v*O)/d:v;u(f,w,O,h,m,g,k),u(w,p,E,h,k,g,v)}}}function U8(e,t,n,r,i){(e.depth&1?uf:cf)(e,t,n,r,i)}var G8=function e(t){function n(r,i,o,a,s){if((l=r._squarify)&&l.ratio===t)for(var l,c,u,f,p=-1,d,h=l.length,m=r.value;++p<h;){for(c=l[p],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?cf(c,i,o,a,m?o+=(s-o)*c.value/m:s):uf(c,i,o,m?i+=(a-i)*c.value/m:a,s),m-=c.value}else r._squarify=l=H8(t,r,i,o,a,s),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(V8);function xhe(e,t){return Array.isArray(e)?typeof t=="function"?g1().path(t)(e):g1()(e):cu(e)}function zH(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],zH(n,n.path)})}function RH(e){let t=Cr(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{RH(n)})}function bhe(e,t){let n={treemapBinary:q8,treemapDice:cf,treemapSlice:uf,treemapSliceDice:U8,treemapSquarify:N2,treemapResquarify:G8},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function oS(e,t,n){let{value:r}=n,i=bhe(t.tile,t.ratio),o=xhe(e,t.path);nr(e)?RH(o):zH(o),r?o.sum(l=>t.ignoreParentValue&&l.children?0:Ra(r)(l)).sort(t.sort):o.count(),W8().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(o);let a=o.descendants().map(l=>Object.assign(l,{id:l.id.replace(/^\//,""),x:[l.x0,l.x1],y:[l.y0,l.y1]}));return[a.filter(typeof t.layer=="function"?t.layer:l=>l.height===t.layer),a]}var _he=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},whe=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),She=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),Che={fontSize:10,text:e=>$c(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},Ohe={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},Mhe={title:e=>$c(e.path),items:[{field:"value"}]},aS=(e,t)=>{let{width:n,height:r,options:i}=t,{data:o,encode:a={},scale:s,style:l={},layout:c={},labels:u=[],tooltip:f={}}=e,p=_he(e,["data","encode","scale","style","layout","labels","tooltip"]),d=Cr(i,["interaction","treemapDrillDown"]),h=_e({},whe(n,r),c,{layer:d?y=>y.depth===1:c.layer}),[m,g]=oS(o,h,a),v=Ke(l,"label");return _e({},She(n,r),Object.assign(Object.assign({data:m,scale:s,style:l,labels:[Object.assign(Object.assign({},Che),v),...u]},p),{encode:a,tooltip:Ah(f,Ohe),axis:!1}),d?{interaction:Object.assign(Object.assign({},p.interaction),{treemapDrillDown:d?Object.assign(Object.assign({},d),{originData:g,layout:h}):void 0}),encode:Object.assign({color:y=>$c(y.path)},a),tooltip:Ah(f,Mhe)}:{})};aS.props={};var khe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Ehe=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),Ahe=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),The={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},Phe={title:e=>e.data.name,items:[{field:"value"}]},Nhe=(e,t,n)=>{let{value:r}=n,i=nr(e)?g1().path(t.path)(e):cu(e);return r?i.sum(o=>Ra(r)(o)).sort(t.sort):i.count(),D8().size(t.size).padding(t.padding)(i),i.descendants()},sS=(e,t)=>{let{width:n,height:r}=t,{data:i,encode:o={},scale:a={},style:s={},layout:l={},labels:c=[],tooltip:u={}}=e,f=khe(e,["data","encode","scale","style","layout","labels","tooltip"]),p=Ahe(n,r,o),d=Nhe(i,_e({},Ehe(n,r),l),_e({},p.encode,o)),h=Ke(s,"label");return _e({},p,Object.assign(Object.assign({data:d,encode:o,scale:a,style:s,labels:[Object.assign(Object.assign({},The),h),...c]},f),{tooltip:Ah(u,Phe),axis:!1}))};sS.props={};var FH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Lhe(e,t){return ni(e,n=>t[n])}function Ihe(e,t){return kn(e,n=>t[n])}function BH(e,t){let n=$8(e,t)*2.5-Y8(e,t)*1.5;return ni(e,r=>t[r]>=n?t[r]:NaN)}function $8(e,t){return lp(e,.25,n=>t[n])}function Dhe(e,t){return lp(e,.5,n=>t[n])}function Y8(e,t){return lp(e,.75,n=>t[n])}function jH(e,t){let n=Y8(e,t)*2.5-$8(e,t)*1.5;return kn(e,r=>t[r]<=n?t[r]:NaN)}function zhe(){return(e,t)=>{let{encode:n}=t,{y:r,x:i}=n,{value:o}=r,{value:a}=i;return[Array.from(An(e,c=>a[+c]).values()).flatMap(c=>{let u=BH(c,o),f=jH(c,o);return c.filter(p=>o[p]<u||o[p]>f)}),t]}}var lS=e=>{let{data:t,encode:n,style:r={},tooltip:i={},transform:o,animate:a}=e,s=FH(e,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=r,c=FH(r,["point"]),{y:u}=n,f={y:u,y1:u,y2:u,y3:u,y4:u},p={y1:$8,y2:Dhe,y3:Y8},d=Fa(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),h=Fa(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Lhe},p),{y4:Ihe})],encode:Object.assign(Object.assign({},n),f),style:c,tooltip:d},s);let m=Ke(c,"box"),g=Ke(c,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:BH},p),{y4:jH})],encode:Object.assign(Object.assign({},n),f),style:m,tooltip:d,animate:Ba(a,"box")},s),{type:"point",data:t,transform:[{type:zhe}],encode:n,style:Object.assign({},g),tooltip:h,animate:Ba(a,"point")}]};lS.props={};var Rhe={shape:L3},cS=e=>{let{cartesian:t}=e;return t?u1:(n,r,i,o)=>{let{x:a,y:s}=i,l=ws(r,i,e),c=Array.from(n,u=>{let f=[+a[u],+s[u]];return[o.map(l(f,u))]});return[n,c]}};cS.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:Rhe,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Fn(),{type:pp},{type:fp},{type:T5}]};function X8(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,l=0,c=0;for(o=0;o<a;++o)s=n[o],l+=s.x,c+=s.y;for(l=(l/a-e)*r,c=(c/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=l,s.y-=c}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function VH(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return HH(this.cover(t,n),t,n,e)}function HH(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,l=e._y0,c=e._x1,u=e._y1,f,p,d,h,m,g,v,y;if(!o)return e._root=a,e;for(;o.length;)if((m=t>=(f=(s+c)/2))?s=f:c=f,(g=n>=(p=(l+u)/2))?l=p:u=p,i=o,!(o=o[v=g<<1|m]))return i[v]=a,e;if(d=+e._x.call(null,o.data),h=+e._y.call(null,o.data),t===d&&n===h)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(s+c)/2))?s=f:c=f,(g=n>=(p=(l+u)/2))?l=p:u=p;while((v=g<<1|m)===(y=(h>=p)<<1|d>=f));return i[y]=o,i[v]=a,e}function WH(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<l&&(l=i),i>u&&(u=i),o<c&&(c=o),o>f&&(f=o));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<r;++n)HH(this,a[n],s[n],e[n]);return this}function qH(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,l,c;n>e||e>=i||r>t||t>=o;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=s,s=l,a*=2,c){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function UH(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function GH(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Eo(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function $H(e,t,n){var r,i=this._x0,o=this._y0,a,s,l,c,u=this._x1,f=this._y1,p=[],d=this._root,h,m;for(d&&p.push(new Eo(d,i,o,u,f)),n==null?n=1/0:(i=e-n,o=t-n,u=e+n,f=t+n,n*=n);h=p.pop();)if(!(!(d=h.node)||(a=h.x0)>u||(s=h.y0)>f||(l=h.x1)<i||(c=h.y1)<o))if(d.length){var g=(a+l)/2,v=(s+c)/2;p.push(new Eo(d[3],g,v,l,c),new Eo(d[2],a,v,g,c),new Eo(d[1],g,s,l,v),new Eo(d[0],a,s,g,v)),(m=(t>=v)<<1|e>=g)&&(h=p[p.length-1],p[p.length-1]=p[p.length-1-m],p[p.length-1-m]=h)}else{var y=e-+this._x.call(null,d.data),x=t-+this._y.call(null,d.data),_=y*y+x*x;if(_<n){var w=Math.sqrt(n=_);i=e-w,o=t-w,u=e+w,f=t+w,r=d.data}}return r}function YH(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,l=this._x1,c=this._y1,u,f,p,d,h,m,g,v;if(!n)return this;if(n.length)for(;;){if((h=u>=(p=(a+l)/2))?a=p:l=p,(m=f>=(d=(s+c)/2))?s=d:c=d,t=n,!(n=n[g=m<<1|h]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function XH(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function KH(){return this._root}function ZH(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function JH(e){var t=[],n,r=this._root,i,o,a,s,l;for(r&&t.push(new Eo(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&r.length){var c=(o+s)/2,u=(a+l)/2;(i=r[3])&&t.push(new Eo(i,c,u,s,l)),(i=r[2])&&t.push(new Eo(i,o,u,c,l)),(i=r[1])&&t.push(new Eo(i,c,a,s,u)),(i=r[0])&&t.push(new Eo(i,o,a,c,u))}return this}function QH(e){var t=[],n=[],r;for(this._root&&t.push(new Eo(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,f=(s+c)/2;(o=i[0])&&t.push(new Eo(o,a,s,u,f)),(o=i[1])&&t.push(new Eo(o,u,s,l,f)),(o=i[2])&&t.push(new Eo(o,a,f,u,c)),(o=i[3])&&t.push(new Eo(o,u,f,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function eW(e){return e[0]}function tW(e){return arguments.length?(this._x=e,this):this._x}function nW(e){return e[1]}function rW(e){return arguments.length?(this._y=e,this):this._y}function L2(e,t,n){var r=new K8(t??eW,n??nW,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function K8(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function iW(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ja=L2.prototype=K8.prototype;ja.copy=function(){var e=new K8(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=iW(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=iW(r));return e};ja.add=VH;ja.addAll=WH;ja.cover=qH;ja.data=UH;ja.extent=GH;ja.find=$H;ja.remove=YH;ja.removeAll=XH;ja.root=KH;ja.size=ZH;ja.visit=JH;ja.visitAfter=QH;ja.x=tW;ja.y=rW;function Yo(e){return function(){return e}}function Tp(e){return(e()-.5)*1e-6}function Fhe(e){return e.index}function oW(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Z8(e){var t=Fhe,n=f,r,i=Yo(30),o,a,s,l,c,u=1;e==null&&(e=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function p(g){for(var v=0,y=e.length;v<u;++v)for(var x=0,_,w,S,M,O,E,P;x<y;++x)_=e[x],w=_.source,S=_.target,M=S.x+S.vx-w.x-w.vx||Tp(c),O=S.y+S.vy-w.y-w.vy||Tp(c),E=Math.sqrt(M*M+O*O),E=(E-o[x])/E*g*r[x],M*=E,O*=E,S.vx-=M*(P=l[x]),S.vy-=O*P,w.vx+=M*(P=1-P),w.vy+=O*P}function d(){if(a){var g,v=a.length,y=e.length,x=new Map(a.map((w,S)=>[t(w,S,a),w])),_;for(g=0,s=new Array(v);g<y;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=oW(x,_.source)),typeof _.target!="object"&&(_.target=oW(x,_.target)),s[_.source.index]=(s[_.source.index]||0)+1,s[_.target.index]=(s[_.target.index]||0)+1;for(g=0,l=new Array(y);g<y;++g)_=e[g],l[g]=s[_.source.index]/(s[_.source.index]+s[_.target.index]);r=new Array(y),h(),o=new Array(y),m()}}function h(){if(a)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return p.initialize=function(g,v){a=g,c=v,d()},p.links=function(g){return arguments.length?(e=g,d(),p):e},p.id=function(g){return arguments.length?(t=g,p):t},p.iterations=function(g){return arguments.length?(u=+g,p):u},p.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Yo(+g),h(),p):n},p.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Yo(+g),m(),p):i},p}var Bhe={value:()=>{}};function sW(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uS(n)}function uS(e){this._=e}function jhe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uS.prototype=sW.prototype={constructor:uS,on:function(e,t){var n=this._,r=jhe(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Vhe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=aW(n[i],e.name,t);else if(t==null)for(i in n)n[i]=aW(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uS(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Vhe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function aW(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Bhe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var J8=sW;var v1=0,D2=0,I2=0,cW=1e3,fS,z2,pS=0,Th=0,dS=0,R2=typeof performance=="object"&&performance.now?performance:Date,uW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tA(){return Th||(uW(Hhe),Th=R2.now()+dS)}function Hhe(){Th=0}function Q8(){this._call=this._time=this._next=null}Q8.prototype=hS.prototype={constructor:Q8,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?tA():+n)+(t==null?0:+t),!this._next&&z2!==this&&(z2?z2._next=this:fS=this,z2=this),this._call=e,this._time=n,eA()},stop:function(){this._call&&(this._call=null,this._time=1/0,eA())}};function hS(e,t,n){var r=new Q8;return r.restart(e,t,n),r}function fW(){tA(),++v1;for(var e=fS,t;e;)(t=Th-e._time)>=0&&e._call.call(void 0,t),e=e._next;--v1}function lW(){Th=(pS=R2.now())+dS,v1=D2=0;try{fW()}finally{v1=0,qhe(),Th=0}}function Whe(){var e=R2.now(),t=e-pS;t>cW&&(dS-=t,pS=e)}function qhe(){for(var e,t=fS,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fS=n);z2=e,eA(r)}function eA(e){if(!v1){D2&&(D2=clearTimeout(D2));var t=e-Th;t>24?(e<1/0&&(D2=setTimeout(lW,e-R2.now()-dS)),I2&&(I2=clearInterval(I2))):(I2||(pS=R2.now(),I2=setInterval(Whe,cW)),v1=1,uW(lW))}}function pW(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function dW(e){return e.x}function hW(e){return e.y}var Uhe=10,Ghe=Math.PI*(3-Math.sqrt(5));function nA(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=hS(f),c=J8("tick","end"),u=pW();e==null&&(e=[]);function f(){p(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function p(m){var g,v=e.length,y;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(o-n)*i,s.forEach(function(_){_(n)}),g=0;g<v;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function d(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=Uhe*Math.sqrt(.5+m),x=m*Ghe;v.x=y*Math.cos(x),v.y=y*Math.sin(x)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function h(m){return m.initialize&&m.initialize(e,u),m}return d(),t={tick:p,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,d(),s.forEach(h),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(a=1-m,t):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(h),t):u},force:function(m,g){return arguments.length>1?(g==null?s.delete(m):s.set(m,h(g)),t):s.get(m)},find:function(m,g,v){var y=0,x=e.length,_,w,S,M,O;for(v==null?v=1/0:v*=v,y=0;y<x;++y)M=e[y],_=m-M.x,w=g-M.y,S=_*_+w*w,S<v&&(O=M,v=S);return O},on:function(m,g){return arguments.length>1?(c.on(m,g),t):c.on(m)}}}function rA(){var e,t,n,r,i=Yo(-30),o,a=1,s=1/0,l=.81;function c(d){var h,m=e.length,g=L2(e,dW,hW).visitAfter(f);for(r=d,h=0;h<m;++h)t=e[h],g.visit(p)}function u(){if(e){var d,h=e.length,m;for(o=new Array(h),d=0;d<h;++d)m=e[d],o[m.index]=+i(m,d,e)}}function f(d){var h=0,m,g,v=0,y,x,_;if(d.length){for(y=x=_=0;_<4;++_)(m=d[_])&&(g=Math.abs(m.value))&&(h+=m.value,v+=g,y+=g*m.x,x+=g*m.y);d.x=y/v,d.y=x/v}else{m=d,m.x=m.data.x,m.y=m.data.y;do h+=o[m.data.index];while(m=m.next)}d.value=h}function p(d,h,m,g){if(!d.value)return!0;var v=d.x-t.x,y=d.y-t.y,x=g-h,_=v*v+y*y;if(x*x/l<_)return _<s&&(v===0&&(v=Tp(n),_+=v*v),y===0&&(y=Tp(n),_+=y*y),_<a&&(_=Math.sqrt(a*_)),t.vx+=v*d.value*r/_,t.vy+=y*d.value*r/_),!0;if(d.length||_>=s)return;(d.data!==t||d.next)&&(v===0&&(v=Tp(n),_+=v*v),y===0&&(y=Tp(n),_+=y*y),_<a&&(_=Math.sqrt(a*_)));do d.data!==t&&(x=o[d.data.index]*r/_,t.vx+=v*x,t.vy+=y*x);while(d=d.next)}return c.initialize=function(d,h){e=d,n=h,u()},c.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Yo(+d),u(),c):i},c.distanceMin=function(d){return arguments.length?(a=d*d,c):Math.sqrt(a)},c.distanceMax=function(d){return arguments.length?(s=d*d,c):Math.sqrt(s)},c.theta=function(d){return arguments.length?(l=d*d,c):Math.sqrt(l)},c}function iA(e){var t=Yo(.1),n,r,i;typeof e!="function"&&(e=Yo(e==null?0:+e));function o(s){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vx+=(i[l]-u.x)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Yo(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:Yo(+s),a(),o):e},o}function oA(e){var t=Yo(.1),n,r,i;typeof e!="function"&&(e=Yo(e==null?0:+e));function o(s){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vy+=(i[l]-u.y)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Yo(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Yo(+s),a(),o):e},o}var $he=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Yhe={joint:!0},Xhe={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},Khe={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},Zhe={text:""};function Jhe(e,t,n){let{nodes:r,links:i}=e,{joint:o,nodeStrength:a,linkStrength:s}=t,{nodeKey:l=h=>h.id,linkKey:c=h=>h.id}=n,u=rA(),f=Z8(i).id(Ra(c));typeof a=="function"&&u.strength(a),typeof s=="function"&&f.strength(s);let p=nA(r).force("link",f).force("charge",u);o?p.force("center",X8()):p.force("x",iA()).force("y",oA()),p.stop();let d=Math.ceil(Math.log(p.alphaMin())/Math.log(1-p.alphaDecay()));for(let h=0;h<d;h++)p.tick();return{nodesData:r,linksData:i}}var mS=e=>{let{data:t,encode:n={},scale:r,style:i={},layout:o={},nodeLabels:a=[],linkLabels:s=[],animate:l={},tooltip:c={}}=e,{nodeKey:u=S=>S.id,linkKey:f=S=>S.id}=n,p=$he(n,["nodeKey","linkKey"]),d=Object.assign({nodeKey:u,linkKey:f},p),h=Ke(d,"node"),m=Ke(d,"link"),{links:g,nodes:v}=f1(t,d),{nodesData:y,linksData:x}=Jhe({links:g,nodes:v},_e({},Yhe,o),d),_=Fa(c,"link",{items:[S=>({name:"source",value:Ra(f)(S.source)}),S=>({name:"target",value:Ra(f)(S.target)})]}),w=Fa(c,"node",{items:[S=>({name:"key",value:Ra(u)(S)})]},!0);return[_e({},Xhe,{data:x,encode:m,labels:s,style:Ke(i,"link"),tooltip:_,animate:Ba(l,"link")}),_e({},Khe,{data:y,encode:Object.assign({},h),scale:r,style:Ke(i,"node"),tooltip:w,labels:[Object.assign(Object.assign({},Zhe),Ke(i,"label")),...a],animate:Ba(l,"link")})]};mS.props={};var aA=e=>t=>n=>{let{field:r="value",nodeSize:i,separation:o,sortBy:a,as:s=["x","y"]}=t,[l,c]=s,u=cu(n,h=>h.children).sum(h=>h[r]).sort(a),f=e();f.size([1,1]),i&&f.nodeSize(i),o&&f.separation(o),f(u);let p=[];u.each(h=>{h[l]=h.x,h[c]=h.y,h.name=h.data.name,p.push(h)});let d=u.links();return d.forEach(h=>{h[l]=[h.source[l],h.target[l]],h[c]=[h.source[c],h.target[c]]}),{nodes:p,edges:d}},gS=e=>aA(T8)(e);gS.props={};var sA=e=>aA(j8)(e);sA.props={};var Qhe={sortBy:(e,t)=>t.value-e.value},eme={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},tme={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},nme={text:"",fontSize:10},vS=e=>{let{data:t,encode:n={},scale:r={},style:i={},layout:o={},nodeLabels:a=[],linkLabels:s=[],animate:l={},tooltip:c={}}=e,u=n?.value,{nodes:f,edges:p}=sA(Object.assign(Object.assign(Object.assign({},Qhe),o),{field:u}))(t),d=Fa(c,"node",{title:"name",items:["value"]},!0),h=Fa(c,"link",{title:"",items:[m=>({name:"source",value:m.source.name}),m=>({name:"target",value:m.target.name})]});return[_e({},tme,{data:p,encode:Ke(n,"link"),scale:Ke(r,"link"),labels:s,style:Object.assign({stroke:"#999"},Ke(i,"link")),tooltip:h,animate:Ba(l,"link")}),_e({},eme,{data:f,scale:Ke(r,"node"),encode:Ke(n,"node"),labels:[Object.assign(Object.assign({},nme),Ke(i,"label")),...a],style:Object.assign({},Ke(i,"node")),tooltip:d,animate:Ba(l,"node")})]};vS.props={};var rme=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},ime=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ome(e,t){let{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}var ame=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:e=>e.fontFamily}}),y1=(e,t)=>rme(void 0,void 0,void 0,function*(){let{width:n,height:r}=t,{data:i,encode:o={},scale:a,style:s={},layout:l={}}=e,c=ime(e,["data","encode","scale","style","layout"]),u=ome(i,o);return _e({},ame(),Object.assign(Object.assign({data:{value:u,transform:[Object.assign({type:"wordCloud",size:[n,r]},l)]},encode:o,scale:a,style:s},c),{axis:!1}))});y1.props={};var yS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},sme=(e,t)=>{let{shape:n,radius:r}=e,i=yS(e,["shape","radius"]),o=Ke(i,"pointer"),a=Ke(i,"pin"),{shape:s}=o,l=yS(o,["shape"]),{shape:c}=a,u=yS(a,["shape"]),{coordinate:f,theme:p}=t;return(d,h)=>{let m=d.map(L=>f.invert(L)),[g,v,y]=tR(f,"polar"),x=f.clone(),{color:_}=h,w=l0({startAngle:g,endAngle:v,innerRadius:y,outerRadius:r});w.push(["cartesian"]),x.update({transformations:w});let S=m.map(L=>x.map(L)),[M,O]=Q0(S),[E,P]=f.getCenter(),k=Object.assign(Object.assign({x1:M,y1:O,x2:E,y2:P,stroke:_},l),i),A=Object.assign(Object.assign({cx:E,cy:P,stroke:_},u),i),N=bt(new vr);return Aa(s)||(typeof s=="function"?N.append(()=>s(S,h,x,p)):N.append("line").call(gt,k).node()),Aa(c)||(typeof c=="function"?N.append(()=>c(S,h,x,p)):N.append("circle").call(gt,A).node()),N.node()}},mW={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},lme={style:{shape:sme,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},cme={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function ume(e){if(Dn(e)){let t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function fme(e,t){let{name:n="score",target:r,total:i,percent:o,thresholds:a=[]}=ume(e),s=o||r,l=o?1:i,c=Object.assign({y:{domain:[0,l]}},t);return a.length?{targetData:[{x:n,y:s,color:"target"}],totalData:a.map((u,f)=>({x:n,y:f>=1?u-a[f-1]:u,color:f})),target:s,total:l,scale:c}:{targetData:[{x:n,y:s,color:"target"}],totalData:[{x:n,y:s,color:"target"},{x:n,y:l-s,color:"total"}],target:s,total:l,scale:c}}function pme(e,{target:t,total:n}){let{content:r}=e;return r?r(t,n):t.toString()}var xS=e=>{let{data:t={},scale:n={},style:r={},animate:i={},transform:o=[]}=e,a=yS(e,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:c,total:u,scale:f}=fme(t,n),p=Ke(r,"text"),d=PD(r,["pointer","pin"]),h=Ke(r,"arc"),m=h.shape;return[_e({},mW,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:m==="round"?Object.assign(Object.assign({},h),{shape:x8}):h,animate:typeof i=="object"?Ke(i,"arc"):i},a)),_e({},mW,lme,Object.assign({type:"point",data:s,scale:f,style:d,animate:typeof i=="object"?Ke(i,"indicator"):i},a)),_e({},cme,{style:Object.assign({text:pme(p,{target:c,total:u})},p),animate:typeof i=="object"?Ke(i,"text"):i})]};xS.props={};var gW={density:T3},bS=()=>(e,t,n,r)=>{let{x:i,series:o}=n,a=Object.entries(n).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(n).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||a===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");let l=t.x,c=t.series,u=Array.from(e,f=>{let p=l.getBandWidth(l.invert(+i[f])),d=c?c.getBandWidth(c.invert(+o?.[f])):1,h=p*d,m=(+o?.[f]||0)*p,g=+i[f]+m+h/2;return[...a.map((y,x)=>[g+ +s[x][f]/e.length,+a[x][f]]),...a.map((y,x)=>[g-+s[x][f]/e.length,+a[x][f]]).reverse()].map(y=>r.map(y))});return[e,u]};bS.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:gW,channels:[...Nr({shapes:Object.keys(gW)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Fn(),{type:Xc},{type:ps}],postInference:[...Hn(),...Hl()],interaction:{shareTooltip:!0}};var vW={heatmap:N3},_S=e=>(t,n,r,i)=>{let{x:o,y:a,size:s,color:l}=r,c=Array.from(t,u=>{let f=s?+s[u]:40;return[...i.map([+o[u],+a[u]]),l[u],f]});return[[0],[c]]};_S.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:vW,channels:[...Nr({shapes:Object.keys(vW)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Fn(),{type:ps},{type:up}],postInference:[...Hn(),...pa()]};var dme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},hme={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:I3},animate:{enter:{type:"fadeIn"}}},mme={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},wS=e=>{let{data:t={},style:n={},animate:r}=e,i=dme(e,["data","style","animate"]),o=Math.max(0,Dn(t)?t:t?.percent),a=[{percent:o,type:"liquid"}],s=Object.assign(Object.assign({},Ke(n,"text")),Ke(n,"content")),l=Ke(n,"outline"),c=Ke(n,"wave"),u=Ke(n,"background");return[_e({},hme,Object.assign({type:"interval",data:a,style:{liquidOptions:{percent:o,liquidShape:n?.shape},styleOptions:Object.assign(Object.assign({},n),{outline:l,wave:c,background:u})},animate:r},i)),_e({},mme,{style:Object.assign({text:`${vh(o*100)} %`},s),animate:r})]};wS.props={};var SS=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];SS.props={};var CS=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];CS.props={};var OS=e=>new ds(e);OS.props={};var MS=e=>new ai(e);MS.props={};var kS=e=>new Wd(e);kS.props={};var ES=e=>new qd(e);ES.props={};var AS=e=>new zv(e);AS.props={};var TS=e=>new jv(e);TS.props={};var PS=e=>new Fv(e);PS.props={};var NS=e=>new Ud(e);NS.props={};var LS=e=>new fc(e);LS.props={};var IS=e=>new $d(e);IS.props={};var DS=e=>new Gd(e);DS.props={};var zS=e=>new Rv(e);zS.props={};var RS=e=>new Vv(e);RS.props={};var FS=e=>new Zu(e);FS.props={};function x1({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:o,padding2:a,padding3:s,alpha90:l,alpha65:c,alpha45:u,alpha25:f,alpha10:p,category10:d,category20:h,sizeDefault:m=1,padding:g="auto",margin:v=16}){return{padding:g,margin:v,size:m,color:e,category10:d,category20:h,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:p,labelAlign:"horizontal",labelFill:t,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:o,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:u,titleFill:t,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[o,o],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:o,colPadding:a,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:t,tickStrokeOpacity:u},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}var gme={colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},vme=x1(gme),b1=e=>_e({},vme,e);b1.props={};var BS=e=>_e({},b1(),{category10:"category10",category20:"category20"},e);BS.props={};var yme={colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25},xme=x1(yme),F2=e=>_e({},xme,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e);var jS=e=>Object.assign({},F2(),{category10:"category10",category20:"category20"},e);jS.props={};var bme={colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},_me=x1(bme),VS=e=>_e({},_me,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);VS.props={};function yW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ph(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xW(e){return e=Ph(Math.abs(e)),e?e[1]:NaN}function bW(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function _W(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var wme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function B2(e){if(!(t=wme.exec(e)))throw new Error("invalid format: "+e);var t;return new lA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}B2.prototype=lA.prototype;function lA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wW(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var cA;function SW(e,t){var n=Ph(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(cA=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ph(e,Math.max(0,t+o-1))[0]}function uA(e,t){var n=Ph(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var fA={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:yW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>uA(e*100,t),r:uA,s:SW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pA(e){return e}var CW=Array.prototype.map,OW=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function MW(e){var t=e.grouping===void 0||e.thousands===void 0?pA:bW(CW.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?pA:_W(CW.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=B2(f);var p=f.fill,d=f.align,h=f.sign,m=f.symbol,g=f.zero,v=f.width,y=f.comma,x=f.precision,_=f.trim,w=f.type;w==="n"?(y=!0,w="g"):fA[w]||(x===void 0&&(x=12),_=!0,w="g"),(g||p==="0"&&d==="=")&&(g=!0,p="0",d="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",M=m==="$"?r:/[%p]/.test(w)?a:"",O=fA[w],E=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function P(k){var A=S,N=M,L,z,B;if(w==="c")N=O(k)+N,k="";else{k=+k;var H=k<0||1/k<0;if(k=isNaN(k)?l:O(Math.abs(k),x),_&&(k=wW(k)),H&&+k==0&&h!=="+"&&(H=!1),A=(H?h==="("?h:s:h==="-"||h==="("?"":h)+A,N=(w==="s"?OW[8+cA/3]:"")+N+(H&&h==="("?")":""),E){for(L=-1,z=k.length;++L<z;)if(B=k.charCodeAt(L),48>B||B>57){N=(B===46?i+k.slice(L+1):k.slice(L))+N,k=k.slice(0,L);break}}}y&&!g&&(k=t(k,1/0));var j=A.length+k.length+N.length,W=j<v?new Array(v-j+1).join(p):"";switch(y&&g&&(k=t(W+k,W.length?v-N.length:1/0),W=""),d){case"<":k=A+k+N+W;break;case"=":k=A+W+k+N;break;case"^":k=W.slice(0,j=W.length>>1)+A+k+N+W.slice(j);break;default:k=W+A+k+N;break}return o(k)}return P.toString=function(){return f+""},P}function u(f,p){var d=c((f=B2(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(xW(p)/3)))*3,m=Math.pow(10,-h),g=OW[8+h/3];return function(v){return d(m*v)+g}}return{format:c,formatPrefix:u}}var HS,da,kW;dA({thousands:",",grouping:[3],currency:["$",""]});function dA(e){return HS=MW(e),da=HS.format,kW=HS.formatPrefix,HS}var Sme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function EW(e){return class extends mh{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(_e({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function hA(e,t,n){return e.querySelector(t)?bt(e).select(t):bt(e).append(n)}function Nh(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function qS(e,t){let n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},{flexDirection:r,justifyContent:i,alignItems:o}=n,a={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in a&&([r,i,o]=a[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:o},t)}var j2=class extends i3{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);let{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}},WS=class extends j2{update(t){var n;let{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}};function Js(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function AW(e){return e==="horizontal"||e===0}function TW(e){return e==="vertical"||e===-Math.PI/2}function US(e,t,n){let{bbox:r}=e,{position:i="top",size:o,length:a}=t,s=["top","bottom","center"].includes(i),[l,c]=s?[r.height,r.width]:[r.width,r.height],{defaultSize:u,defaultLength:f}=n.props,p=o||u||l,d=a||f||c,h=s?"horizontal":"vertical",[m,g]=s?[d,p]:[p,d];return{orientation:h,width:m,height:g,size:p,length:d}}function PW(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function Lh(e){let t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=Sme(e,["style"]),i={};return Object.entries(r).forEach(([o,a])=>{t.includes(o)?i[`show${aa(o)}`]=a:i[o]=a}),Object.assign(Object.assign({},i),n)}var NW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function GS(e,t){let{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function LW(e){let{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function Cme(e,t){let{width:n,height:r}=t.getOptions();return i=>{if(!y_(t))return i;let o=e==="bottom"?[i,1]:[0,i],a=t.map(o);if(e==="bottom"){let s=a[0];return new ai({domain:[0,n],range:[0,1]}).map(s)}else if(e==="left"){let s=a[1];return new ai({domain:[0,r],range:[0,1]}).map(s)}return i}}function Ome(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;let[r,i]=_o(t,a=>+a),{tickCount:o}=e.getOptions();return n(r,i,o)}function Mme(e,t){if(yn(t))return d=>d;let n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:o,insetBottom:a,insetLeft:s,insetRight:l}=n,[c,u,f]=e==="left"||e==="right"?[o,a,i]:[s,l,r],p=new ai({domain:[0,1],range:[c/f,1-u/f]});return d=>p.map(d)}function IW(e,t,n,r,i,o,a,s){var l;(n!==void 0||o!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),o&&{tickMethod:o}));let c=Ome(e,t,o),u=i?c.filter(i):c,f=v=>v instanceof Date?String(v):typeof v=="object"&&v?v:String(v),p=r||((l=e.getFormatter)===null||l===void 0?void 0:l.call(e))||f,d=Mme(a,s),h=Cme(a,s),m=v=>["top","bottom","center","outer"].includes(v),g=v=>["left","right"].includes(v);return yn(s)||Tn(s)?u.map((v,y,x)=>{var _,w;let S=((_=e.getBandWidth)===null||_===void 0?void 0:_.call(e,v))/2||0,M=d(e.map(v)+S);return{value:Qd(s)&&a==="center"||Tn(s)&&((w=e.getTicks)===null||w===void 0?void 0:w.call(e))&&m(a)||Tn(s)&&g(a)?1-M:M,label:f(p(vh(v),y,x)),id:String(y)}}):u.map((v,y,x)=>{var _;let w=((_=e.getBandWidth)===null||_===void 0?void 0:_.call(e,v))/2||0,S=h(d(e.map(v)+w));return{value:g(a)?1-S:S,label:f(p(vh(v),y,x)),id:String(y)}})}function kme(e,t,n="xy"){let[r,i,o]=LW(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?o:r:e.includes("bottom")||e.includes("top")?i:o}function Eme(e=[],t){if(e.length>0)return e;let{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:o}=t,a=[],s=(l,c)=>{c&&a.push(Object.assign(Object.assign({},l),c))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},o),a}function Ame(e,t,n,r,i){let{x:o,y:a,width:s,height:l}=t,c=[o+s/2,a+l/2],u=Math.min(s,l)/2,[f,p]=Zv(i),[d,h]=LW(i),m=Math.min(d,h)/2,g={center:c,radius:u,startAngle:f,endAngle:p,gridLength:(r-n)*m};if(e==="inner"){let{insetLeft:v,insetTop:y}=i.getOptions();return Object.assign(Object.assign({},g),{center:[c[0]-v,c[1]-y],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},g),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function Tme(e,t,n){return Qz(t)||eh(t)?!1:e===void 0?!!n.getTicks:e}function Pme(e){let{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function Nme(e,t,n,r,i){let{x:o,y:a,width:s,height:l}=n;if(e==="bottom")return{startPos:[o,a],endPos:[o+s,a]};if(e==="left")return{startPos:[o+s,a+l],endPos:[o+s,a]};if(e==="right")return{startPos:[o,a+l],endPos:[o,a]};if(e==="top")return{startPos:[o,a+l],endPos:[o+s,a+l]};if(e==="center"){if(t==="vertical")return{startPos:[o,a],endPos:[o,a+l]};if(t==="horizontal")return{startPos:[o,a],endPos:[o+s,a]};if(typeof t=="number"){let[c,u]=r.getCenter(),[f,p]=F0(r),[d,h]=Zv(r),m=Math.min(s,l)/2,{insetLeft:g,insetTop:v}=r.getOptions(),y=f*m,x=p*m,[_,w]=[c+o-g,u+a-v],[S,M]=[Math.cos(t),Math.sin(t)],O=[_+x*S,w+x*M],E=[_+y*S,w+y*M],P=()=>{let{domain:A}=i.getOptions();return A.length},k=yn(r)&&i?P():3;return{startPos:O,endPos:E,gridClosed:Math.abs(h-d-360)<1e-6,gridCenter:[_,w],gridControlAngles:new Array(k).fill(0).map((A,N,L)=>(h-d)/k*N)}}}return{}}var Lme=e=>{let{order:t,size:n,position:r,orientation:i,labelFormatter:o,tickFilter:a,tickCount:s,tickMethod:l,important:c={},style:u={},indexBBox:f,title:p,grid:d=!1}=e,h=NW(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[m],value:g,coordinate:v,theme:y})=>{let{bbox:x}=g,{domain:_}=m.getOptions(),w=IW(m,_,s,o,a,l,r,v),S=f?w.map((N,L)=>{let z=f.get(L);return!z||z[0]!==N.label?N:Object.assign(Object.assign({},N),{bbox:z[1]})}):w,[M,O]=F0(v),E=Ame(r,x,M,O,v),{axis:P,axisArc:k={}}=y,A=Lh(_e({},P,k,E,Object.assign(Object.assign({type:"arc",data:S,titleText:Nh(p),grid:d},h),c)));return new Oh({style:Pd(A,["transform"])})}};function Ime(e,t,n,r,i,o){let a=n.axis,s=["top","right","bottom","left"].includes(i)?n[`axis${b0(i)}`]:n.axisLinear,l=e.getOptions().name,c=n[`axis${aa(l)}`]||{};return Object.assign({},a,s,c)}function Dme(e,t,n,r,i,o){let a=Ime(e,t,n,r,i,o);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},a),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:TW(o)?10:0,tick:r==="center"?!1:void 0}):a}var zme=e=>{let{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:o,actualPosition:a,position:s,size:l,style:c={},title:u,tickCount:f,tickFilter:p,tickMethod:d,transform:h,indexBBox:m}=e,g=NW(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:v,value:y,coordinate:x,theme:_})=>{let{bbox:w}=y,[S]=v,{domain:M,xScale:O}=S.getOptions(),E=Dme(S,x,_,t,s,o),P=Object.assign(Object.assign(Object.assign({},E),c),g),k=kme(a||s,x,e.plane),A=Nme(s,o,w,x,O),N=Pme(x),L=IW(S,M,f,r,p,d,s,x),z=m?L.map((j,W)=>{let Z=m.get(W);return!Z||Z[0]!==j.label?j:Object.assign(Object.assign({},j),{bbox:Z[1]})}):L,B=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},P),{type:"linear",data:z,crossSize:l,titleText:Nh(u),labelOverlap:Eme(h,P),grid:Tme(P.grid,x,S),gridLength:k,line:!0,indexBBox:m}),P.line?null:{lineOpacity:0}),A),N),n);return B.labelOverlap.find(j=>j.type==="hide")&&(B.crossSize=!1),new Oh({className:"axis",style:Lh(B)})}},DW=e=>t=>{let{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var o;let{scales:[a]}=i,s=((o=a.getTicks)===null||o===void 0?void 0:o.call(a))||a.getOptions().domain,l=typeof n=="string"?da(n):n,c=(f,p,d)=>r(s[p],p,s),u=Object.assign(Object.assign({},t),{labelFormatter:l,labelFilter:c,scale:a});return e(u)(i)}},Qs=DW(zme),$S=DW(Lme);Qs.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};$S.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var YS=e=>(...t)=>{let n=Qs(Object.assign({},{crossPadding:50},e))(...t);return GS(n,e),n};YS.props=Object.assign(Object.assign({},Qs.props),{defaultPosition:"bottom"});var XS=e=>(...t)=>{let n=Qs(Object.assign({},{crossPadding:10},e))(...t);return GS(n,e),n};XS.props=Object.assign(Object.assign({},Qs.props),{defaultPosition:"left"});var Rme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Fme(e){let t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function Bme(e,t,n,r){let{radar:i}=e,[o]=r,a=o.getOptions().name,[s,l]=Zv(n),{axisRadar:c={}}=t;return Object.assign(Object.assign({},c),{grid:a==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((u,f)=>(l-s)/i.count*f)})}var KS=e=>{let{important:t={}}=e,n=Rme(e,["important"]);return r=>{let{theme:i,coordinate:o,scales:a}=r;return Qs(Object.assign(Object.assign(Object.assign({},n),Fme(e.orientation)),{important:Object.assign(Object.assign({},Bme(e,i,o,a)),t)}))(r)}};KS.props=Object.assign(Object.assign({},Qs.props),{defaultPosition:"center"});var jme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Vme(e,t){let n=Js(e,"shape"),r=Js(e,"color"),i=n?n.clone():null,o=[];for(let[s,l]of t){let c=s.type,f=(r?.getOptions().domain.length>0?r?.getOptions().domain:l.data).map((p,d)=>{var h;return i?i.map(p||"point"):((h=s?.style)===null||h===void 0?void 0:h.shape)||l.defaultShape||"point"});typeof c=="string"&&o.push([c,f])}if(o.length===0)return["point",["point"]];if(o.length===1||!n)return o[0];let{range:a}=n.getOptions();return o.map(([s,l])=>{let c=0;for(let u=0;u<o.length;u++){let f=a[u%a.length];l[u]===f&&c++}return[c/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function Hme(e,t){let{scales:n,library:r,markState:i}=t,[o,a]=Vme(n,i),{itemMarker:s,itemMarkerSize:l}=e,c=(p,d)=>{var h,m,g;let v=((g=(m=(h=r[`mark.${o}`])===null||h===void 0?void 0:h.props)===null||m===void 0?void 0:m.shape[p])===null||g===void 0?void 0:g.props.defaultMarker)||$c(p.split(".")),y=typeof l=="function"?l(d):l;return()=>_B(v,{color:d.color})(0,0,y)},u=p=>`${a[p]}`;return Js(n,"shape")&&!s?(p,d)=>c(u(d),p):typeof s=="function"?(p,d)=>{let h=s(p.id,d);return typeof h=="string"?c(h,p):h}:(p,d)=>c(s||u(d),p)}function Wme(e){let t=Js(e,"opacity");if(t){let{range:n}=t.getOptions();return(r,i)=>n[i]}}function qme(e,t){let n=Js(e,"size");return n instanceof qd?n.map(NaN)*2:t}function Ume(e,t){let{labelFormatter:n=p=>`${p}`}=e,{scales:r,theme:i}=t,o=i.legendCategory.itemMarkerSize,a=qme(r,o),s={itemMarker:Hme(Object.assign(Object.assign({},e),{itemMarkerSize:a}),t),itemMarkerSize:a,itemMarkerOpacity:Wme(r)},l=typeof n=="string"?da(n):n,c=Js(r,"color"),u=PW(r),f=c?p=>c.map(p):()=>t.theme.color;return Object.assign(Object.assign({},s),{data:u.map(p=>({id:p,label:l(p),color:f(p)}))})}function Gme(e,t,n){let{position:r}=t;if(r==="center"){let{bbox:a}=e,{width:s,height:l}=a;return{width:s,height:l}}let{width:i,height:o}=US(e,t,n);return{width:i,height:o}}var V2=e=>{let{labelFormatter:t,layout:n,order:r,orientation:i,position:o,size:a,title:s,cols:l,itemMarker:c}=e,u=jme(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:f}=u;return p=>{let{value:d,theme:h}=p,{bbox:m}=d,{width:g,height:v}=Gme(d,e,V2),y=qS(o,n),x=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(o)?"vertical":"horizontal",width:g,height:v,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),f!==void 0&&{gridRow:f}),{titleText:Nh(s)}),Ume(e,p)),{legendCategory:_={}}=h,w=Lh(Object.assign({},_,x,u)),S=new WS({style:Object.assign(Object.assign({x:m.x,y:m.y,width:m.width,height:m.height},y),{subOptions:w})});return S.appendChild(new t3({className:"legend-category",style:w})),S}};V2.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var $me=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Yme(e,t,n){return e.size=t,AW(n)?e.height=t:e.width=t,e}function Xme(e,t,n){let{size:r}=t,i=US(e,t,n);return Yme(i,r,i.orientation)}function Kme(e){return t=>({value:t/e,label:String(t)})}function Zme(e,t,n,r,i){let o=t.thresholds,a=Kme(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...o,r].map(a)})}function Jme(e,t,n){let i=[-1/0,...t.thresholds,1/0].map((o,a)=>({value:a,label:o}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(o,a)=>a>0&&a<i.length-1})}function mA(e){let{domain:t}=e.getOptions(),[n,r]=[t[0],v5(t)];return[n,r]}function Qme(e,t){let n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[Dl(t).toString()]})),r}function e0e(e,t,n,r,i,o){let{length:a}=e,s=n||r,l=i.color?o.legendContinuous.ribbonFill||"black":o.color,c=t||Qme(s,l),[u,f]=mA(c),[p,d]=mA([t,n,r].filter(h=>h!==void 0).find(h=>!(h instanceof Zu)));return Object.assign(Object.assign({},e),{domain:[p,d],data:c.getTicks().map(h=>({value:h})),color:new Array(Math.floor(a)).fill(0).map((h,m)=>{let g=(f-u)/(a-1)*m+u,v=c.map(g)||l,y=r?r.map(g):1;return v.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(x,_,w,S)=>`rgba(${_}, ${w}, ${S}, ${y})`)})})}function t0e(e,t,n,r,i,o){let a=Js(e,"color"),s=Xme(n,r,i);if(a instanceof fc){let{range:u}=a.getOptions(),[f,p]=mA(a);return a instanceof Gd||a instanceof $d?Zme(s,a,f,p,u):Jme(s,a,u)}let l=Js(e,"size"),c=Js(e,"opacity");return e0e(s,a,l,c,t,o)}var el=e=>{let{labelFormatter:t,layout:n,order:r,orientation:i,position:o,size:a,title:s,style:l,crossPadding:c,padding:u}=e,f=$me(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:p,value:d,theme:h,scale:m})=>{let{bbox:g}=d,{x:v,y,width:x,height:_}=g,w=qS(o,n),{legendContinuous:S={}}=h,M=Lh(Object.assign({},S,Object.assign(Object.assign({titleText:Nh(s),labelAlign:"value",labelFormatter:typeof t=="string"?E=>da(t)(E.label):t},t0e(p,m,d,e,el,h)),l),f)),O=new j2({style:Object.assign(Object.assign({x:v,y,width:x,height:_},w),{subOptions:M})});return O.appendChild(new n3({className:"legend-continuous",style:M})),O}};el.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};var ZS=e=>(...t)=>el(Object.assign({},{block:!0},e))(...t);ZS.props=Object.assign(Object.assign({},el.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var _1=e=>t=>{let{scales:n}=t,r=Js(n,"size");return el(Object.assign({},{type:"size",data:r.getTicks().map((i,o)=>({value:i,label:String(i)}))},e))(t)};_1.props=Object.assign(Object.assign({},el.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var JS=e=>_1(Object.assign({},{block:!0},e));JS.props=Object.assign(Object.assign({},el.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var n0e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zW(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}var r0e=EW({render(e,t){let{width:n,title:r,subtitle:i,spacing:o=2,align:a="left",x:s,y:l}=e,c=n0e(e,["width","title","subtitle","spacing","align","x","y"]);t.style.transform=`translate(${s}, ${l})`;let u=Ke(c,"title"),f=Ke(c,"subtitle"),d=hA(t,".title","text").attr("className","title").call(gt,Object.assign(Object.assign(Object.assign({},zW(0,0,n,a)),{fontSize:14,textBaseline:"top",text:r}),u)).node().getLocalBounds();hA(t,".sub-title","text").attr("className","sub-title").call(h=>{if(!i)return h.node().remove();h.node().attr(Object.assign(Object.assign(Object.assign({},zW(0,d.max[1]+o,n,a)),{fontSize:12,textBaseline:"top",text:i}),f))})}}),QS=e=>({value:t,theme:n})=>{let{x:r,y:i,width:o,height:a}=t.bbox;return new r0e({style:_e({},n.title,Object.assign({x:r,y:i,width:o,height:a},e))})};QS.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};function i0e(e,t,n){return Math.min(n,Math.max(t,e))}function w1(e){return!!e.getBandWidth}function ff(e,t,n){if(!w1(e))return e.invert(t);let{adjustedRange:r}=e,{domain:i}=e.getOptions(),o=n?-1:0,a=e.getStep(),s=n?r:r.map(u=>u+a),l=z6(s,t),c=i0e(l+o,0,i.length-1);return i[c]}function uu(e,t,n){if(!t)return e.getOptions().domain;if(!w1(e)){let l=Qi(t);if(!n)return l;let[c]=l,{range:u}=e.getOptions(),[f,p]=u,d=f>p?-1:1,h=e.invert(e.map(c)+d*n);return[c,h]}let{domain:r}=e.getOptions(),i=t[0],o=r.indexOf(i);if(n){let l=o+Math.round(r.length*n);return r.slice(o,l)}let a=t[t.length-1],s=r.indexOf(a);return r.slice(o,s+1)}function S1(e,t,n,r,i,o){let{x:a,y:s}=i,l=(d,h)=>{let[m,g]=o.invert(d);return[ff(a,m,h),ff(s,g,h)]},c=l([e,t],!0),u=l([n,r],!1),f=uu(a,[c[0],u[0]]),p=uu(s,[c[1],u[1]]);return[f,p]}function H2(e,t){let[n,r]=e,i=o=>o.getStep?o.getStep():0;return[t.map(n),t.map(r)+i(t)]}function RW(e,t,n){let{x:r,y:i}=t,[o,a]=e,s=H2(o,r),l=H2(a,i),c=[s[0],l[0]],u=[s[1],l[1]],[f,p]=n.map(c),[d,h]=n.map(u);return[f,p,d,h]}var o0e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function a0e(e,t,n){let{x:r,y:i,width:o,height:a}=e;if(t==="left")return[r+o-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+a-n]}var Ih=e=>{let{orientation:t,labelFormatter:n,size:r,style:i={},position:o}=e,a=o0e(e,["orientation","labelFormatter","size","style","position"]);return s=>{var l;let{scales:[c],value:u,theme:f,coordinate:p}=s,{bbox:d}=u,{width:h,height:m}=d,{slider:g={}}=f,v=((l=c.getFormatter)===null||l===void 0?void 0:l.call(c))||(O=>O+""),y=typeof n=="string"?da(n):n,x=t==="horizontal",_=Tn(p)&&x,{trackSize:w=g.trackSize}=i,[S,M]=a0e(d,o,w);return new y2({className:"slider",style:Object.assign({},g,Object.assign(Object.assign({x:S,y:M,trackLength:x?h:m,orientation:t,formatter:O=>{let E=y||v,P=_?1-O:O,k=ff(c,P,!0);return E(k)},sparklineData:l0e(e,s)},i),a))})}};function s0e(e,t){let[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").filter(([i])=>i.slider).map(([i])=>{let{encode:o,slider:a}=i;if(a?.x){let s=l=>{let c=o[l];return[l,c?c.value:void 0]};return Object.fromEntries(t.map(s))}});if(!n?.series)return n?.y;let r=n.series.reduce((i,o,a)=>(i[o]=i[o]||[],i[o].push(n.y[a]),i),{});return Object.values(r)}function l0e(e,t){let{markState:n}=t;return nr(e.sparklineData)?e.sparklineData:s0e(n,["y","series"])}Ih.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var e4=e=>Ih(Object.assign(Object.assign({},e),{orientation:"horizontal"}));e4.props=Object.assign(Object.assign({},Ih.props),{defaultPosition:"bottom"});var t4=e=>Ih(Object.assign(Object.assign({},e),{orientation:"vertical"}));t4.props=Object.assign(Object.assign({},Ih.props),{defaultPosition:"left"});var c0e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Dh=e=>{let{orientation:t,labelFormatter:n,style:r}=e,i=c0e(e,["orientation","labelFormatter","style"]);return({scales:[o],value:a,theme:s})=>{let{bbox:l}=a,{x:c,y:u,width:f,height:p}=l,{scrollbar:d={}}=s,{ratio:h,range:m}=o.getOptions(),g=t==="horizontal"?f:p,v=g/h,[y,x]=m,_=x>y?0:1;return new $E({className:"g2-scrollbar",style:Object.assign({},d,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:c,y:u,trackLength:g,value:_}),i),{orientation:t,contentLength:v,viewportLength:g}))})}};Dh.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var n4=e=>Dh(Object.assign(Object.assign({},e),{orientation:"horizontal"}));n4.props=Object.assign(Object.assign({},Dh.props),{defaultPosition:"bottom"});var r4=e=>Dh(Object.assign(Object.assign({},e),{orientation:"vertical"}));r4.props=Object.assign(Object.assign({},Dh.props),{defaultPosition:"left"});var i4=e=>()=>new vr;i4.props={};var zh=(e,t)=>{let{coordinate:r}=t;return(i,o,a)=>{let[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[p,d]=Tn(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],h=[{transform:`${l} ${d}`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${d}`.trimStart(),transformOrigin:p,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:p,fillOpacity:c,strokeOpacity:u,opacity:f}];return s.animate(h,Object.assign(Object.assign({},a),e))}};var gA=(e,t)=>{let{coordinate:r}=t;return(i,o,a)=>{let[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[p,d]=Tn(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],h=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:p},{transform:`${l} ${d}`.trimStart(),transformOrigin:p,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${d}`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(h,Object.assign(Object.assign({},a),e))}};var W2=(e,t)=>{let{coordinate:r}=t;return F_.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:wt.NUMBER}),(i,o,a)=>{let[s]=i,l=u=>{let{__data__:f,style:p}=u,{radius:d=0,inset:h=0,fillOpacity:m=1,strokeOpacity:g=1,opacity:v=1}=p,{points:y,y:x,y1:_}=f,w=Bl(r,y,[x,_]),{innerRadius:S,outerRadius:M}=w,O=Ju().cornerRadius(d).padAngle(h*Math.PI/180),E=new Gr({}),P=N=>(E.attr({d:O(N)}),z_(E)),k=[{scaleInYRadius:S+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:S+1e-4,fillOpacity:m,strokeOpacity:g,opacity:v,offset:.01},{scaleInYRadius:M,fillOpacity:m,strokeOpacity:g,opacity:v}],A=u.animate(k,Object.assign(Object.assign({},a),e));return A.onframe=function(){u.style.d=P(Object.assign(Object.assign({},w),{outerRadius:Number(u.style.scaleInYRadius)}))},A.onfinish=function(){u.style.d=P(Object.assign(Object.assign({},w),{outerRadius:M}))},A},c=u=>{let{style:f}=u,{transform:p="",fillOpacity:d=1,strokeOpacity:h=1,opacity:m=1}=f,[g,v]=Tn(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],y=[{transform:`${p} ${v}`.trimStart(),transformOrigin:g,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${p} ${v}`.trimStart(),transformOrigin:g,fillOpacity:d,strokeOpacity:h,opacity:m,offset:.01},{transform:`${p} scale(1, 1)`.trimStart(),transformOrigin:g,fillOpacity:d,strokeOpacity:h,opacity:m}];return u.animate(y,Object.assign(Object.assign({},a),e))};return yn(r)?l(s):c(s)}};var vA=(e,t)=>{let{coordinate:r}=t;return(i,o,a)=>{let[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[p,d]=Tn(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],h=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:p},{transform:`${l} ${d}`.trimStart(),transformOrigin:p,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${d}`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(h,Object.assign(Object.assign({},a),e))}};var o4=e=>(t,n,r)=>{let[i]=t,{fillOpacity:o=1,strokeOpacity:a=1,opacity:s=1}=i.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:o,strokeOpacity:a,opacity:s}];return i.animate(l,Object.assign(Object.assign({},r),e))};o4.props={};var a4=e=>(t,n,r)=>{let[i]=t,{fillOpacity:o=1,strokeOpacity:a=1,opacity:s=1}=i.style,l=[{fillOpacity:o,strokeOpacity:a,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(l,Object.assign(Object.assign({},r),e))};a4.props={};var u0e={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},FW={[Ge.CIRCLE]:["cx","cy","r"],[Ge.ELLIPSE]:["cx","cy","rx","ry"],[Ge.RECT]:["x","y","width","height"],[Ge.IMAGE]:["x","y","width","height"],[Ge.LINE]:["x1","y1","x2","y2"],[Ge.POLYLINE]:["points"],[Ge.POLYGON]:["points"]};function Rh(e,t,n=!1){let r={};for(let i of t){let o=e.style[i];o?r[i]=o:n&&(r[i]=u0e[i])}return r}var C1=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function yA(e){let{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[o,a]=n,s=a-i,l=o-r;return[r,i,l,s]}function f0e(e){let[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function p0e(e,t){let[n,r,i,o]=yA(e),a=o/i,s=Math.ceil(Math.sqrt(t/a)),l=Math.ceil(t/s),c=[],u=o/l,f=0,p=t;for(;p>0;){let d=Math.min(p,s),h=i/d;for(let m=0;m<d;m++){let g=n+m*h,v=r+f*u;c.push(f0e([g,v,h,u]))}p-=d,f+=1}return c}function d0e(e="pack"){return typeof e=="function"?e:p0e}function h0e(e,t,n){let{transform:r}=e.style,{transform:i}=t.style;VW(t,e);let o=C1;if(e.nodeName===Ge.GROUP){let[l,c,u,f]=yA(e),[p,d,h,m]=yA(t),g=l-p,v=c-d,y=u/h,x=f/m;r=`translate(${g}, ${v}) scale(${y}, ${x})`}else o=o.concat(FW[e.nodeName]||[]);let a=[Object.assign({transform:r??"none"},Rh(e,o,!0)),Object.assign({transform:i??"none"},Rh(t,o,!0))];return t.animate(a,n)}function VW(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function m0e(e,t){let{nodeName:n}=e;if(n==="path")return e;let r=new Gr({style:Object.assign(Object.assign({},Rh(e,C1)),{d:t})});return VW(r,e),r}function BW(e,t){let n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function g0e(e){return!BW(e,"m")||!BW(e,"M")}function jW(e){let t=z_(e);if(t&&!g0e(t))return t}function xA(e,t,n,r){let{nodeName:i}=t,{nodeName:o}=n,a=jW(t),s=jW(n);if(i===o&&i!=="path"||(a===void 0||s===void 0))return h0e(t,n,r);let u=m0e(e,a),f=[Object.assign({},Rh(t,C1)),Object.assign({},Rh(n,C1))];if(a!==s){f[0].d=a,f[1].d=s;let p=u.animate(f,r);return p.onfinish=()=>{let d=u.style.d;kv(u,n),u.style.d=d,u.style.transform="none"},u.style.transform="none",p}return null}function v0e(e,t,n,r){e.style.visibility="hidden";let i=r(e,t.length);return t.map((o,a)=>{let s=new Gr({style:Object.assign({d:i[a]},Rh(e,C1))});return xA(o,s,o,n)})}function y0e(e,t,n,r){let i=r(t,e.length),{fillOpacity:o=1,strokeOpacity:a=1,opacity:s=1}=t.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:o,strokeOpacity:a,opacity:s}],c=t.animate(l,n);return[...e.map((f,p)=>{let d=new Gr({style:{d:i[p],fill:t.style.fill}});return xA(f,f,d,n)}),c]}var s4=e=>(t,n,r)=>{let i=d0e(e.split),o=Object.assign(Object.assign({},r),e),{length:a}=t,{length:s}=n;if(a===1&&s===1||a>1&&s>1){let[l]=t,[c]=n;return xA(l,l,c,o)}if(a===1&&s>1){let[l]=t;return v0e(l,n,o,i)}if(a>1&&s===1){let[l]=n;return y0e(t,l,o,i)}return null};s4.props={};var l4=(e,t)=>{F_.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:wt.NUMBER});let{coordinate:r}=t;return(i,o,a)=>{let[s]=i;if(!yn(r))return zh(e,t)(i,o,a);let{__data__:l,style:c}=s,{radius:u=0,inset:f=0,fillOpacity:p=1,strokeOpacity:d=1,opacity:h=1}=c,{points:m,y:g,y1:v}=l,y=Ju().cornerRadius(u).padAngle(f*Math.PI/180),x=Bl(r,m,[g,v]),{startAngle:_,endAngle:w}=x,S=[{waveInArcAngle:_+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:_+1e-4,fillOpacity:p,strokeOpacity:d,opacity:h,offset:.01},{waveInArcAngle:w,fillOpacity:p,strokeOpacity:d,opacity:h}],M=s.animate(S,Object.assign(Object.assign({},a),e));return M.onframe=function(){s.style.d=y(Object.assign(Object.assign({},x),{endAngle:Number(s.style.waveInArcAngle)}))},M.onfinish=function(){s.style.d=y(Object.assign(Object.assign({},x),{endAngle:w}))},M}};l4.props={};var bA=e=>(n,r,i)=>{let[o]=n,{transform:a="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=o.style,u="center center",f=[{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.01},{transform:`${a} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c}];return o.animate(f,Object.assign(Object.assign({},i),e))};var _A=e=>(n,r,i)=>{let[o]=n,{transform:a="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=o.style,u="center center",f=[{transform:`${a} scale(1)`.trimStart(),transformOrigin:u},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.99},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(f,Object.assign(Object.assign({},i),e))};var c4=e=>(t,n,r)=>{var i,o;let[a]=t,s=((o=(i=a).getTotalLength)===null||o===void 0?void 0:o.call(i))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return a.animate(l,Object.assign(Object.assign({},r),e))};c4.props={};var u4=(e,t)=>(n,r,i)=>{let[o]=n,{min:[a,s],halfExtents:l}=o.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new Gr({style:{d:`M${a},${s}L${a+c},${s}L${a+c},${s+u}L${a},${s+u}Z`}});return o.appendChild(f),o.style.clipPath=f,zh(e,t)([f],r,i)};u4.props={};var f4=(e,t)=>(n,r,i)=>{let[o]=n,{min:[a,s],halfExtents:l}=o.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new Gr({style:{d:`M${a},${s}L${a+c},${s}L${a+c},${s+u}L${a},${s+u}Z`}});return o.appendChild(f),o.style.clipPath=f,W2(e,t)([f],r,i)};f4.props={};var wA="main-layer",p4="label-layer",ql="element",q2="view",Fh="plot",SA="component",U2="label",CA="area";function x0e(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,o=i===void 0?0:i,a=t.r;e.arc(r,o,a,0,Math.PI*2,!1)}function b0e(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,o=i===void 0?0:i,a=t.rx,s=t.ry;if(e.ellipse)e.ellipse(r,o,a,s,0,0,Math.PI*2,!1);else{var l=a>s?a:s,c=a>s?1:a/s,u=a>s?s/a:1;e.save(),e.scale(c,u),e.arc(r,o,l,0,Math.PI*2)}}function _0e(e,t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.markerStart,s=t.markerEnd,l=t.markerStartOffset,c=t.markerEndOffset,u=0,f=0,p=0,d=0,h=0,m,g;a&&ir(a)&&l&&(m=i-n,g=o-r,h=Math.atan2(g,m),u=Math.cos(h)*(l||0),f=Math.sin(h)*(l||0)),s&&ir(s)&&c&&(m=n-i,g=r-o,h=Math.atan2(g,m),p=Math.cos(h)*(c||0),d=Math.sin(h)*(c||0)),e.moveTo(n+u,r+f),e.lineTo(i+p,o+d)}function w0e(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,o=t.markerEndOffset,a=t.d,s=a.absolutePath,l=a.segments,c=0,u=0,f=0,p=0,d=0,h,m;if(n&&ir(n)&&i){var g=G(n.parentNode.getStartTangent(),2),v=g[0],y=g[1];h=v[0]-y[0],m=v[1]-y[1],d=Math.atan2(m,h),c=Math.cos(d)*(i||0),u=Math.sin(d)*(i||0)}if(r&&ir(r)&&o){var x=G(r.parentNode.getEndTangent(),2),v=x[0],y=x[1];h=v[0]-y[0],m=v[1]-y[1],d=Math.atan2(m,h),f=Math.cos(d)*(o||0),p=Math.sin(d)*(o||0)}for(var _=0;_<s.length;_++){var w=s[_],S=w[0],M=s[_+1],O=_===0&&(c!==0||u!==0),E=(_===s.length-1||M&&(M[0]==="M"||M[0]==="Z"))&&f!==0&&p!==0;switch(S){case"M":O?e.moveTo(w[1]+c,w[2]+u):e.moveTo(w[1],w[2]);break;case"L":E?e.lineTo(w[1]+f,w[2]+p):e.lineTo(w[1],w[2]);break;case"Q":e.quadraticCurveTo(w[1],w[2],w[3],w[4]),E&&e.lineTo(w[3]+f,w[4]+p);break;case"C":e.bezierCurveTo(w[1],w[2],w[3],w[4],w[5],w[6]),E&&e.lineTo(w[5]+f,w[6]+p);break;case"A":{var P=l[_].arcParams,k=P.cx,A=P.cy,N=P.rx,L=P.ry,z=P.startAngle,B=P.endAngle,H=P.xRotation,j=P.sweepFlag;if(e.ellipse)e.ellipse(k,A,N,L,H,z,B,!!(1-j));else{var W=N>L?N:L,Z=N>L?1:N/L,ie=N>L?L/N:1;e.translate(k,A),e.rotate(H),e.scale(Z,ie),e.arc(0,0,W,z,B,!!(1-j)),e.scale(1/Z,1/ie),e.rotate(-H),e.translate(-k,-A)}E&&e.lineTo(w[6]+f,w[7]+p);break}case"Z":e.closePath();break}}}function S0e(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,o=t.markerEndOffset,a=t.points.points,s=a.length,l=a[0][0],c=a[0][1],u=a[s-1][0],f=a[s-1][1],p=0,d=0,h=0,m=0,g=0,v,y;n&&ir(n)&&i&&(v=a[1][0]-a[0][0],y=a[1][1]-a[0][1],g=Math.atan2(y,v),p=Math.cos(g)*(i||0),d=Math.sin(g)*(i||0)),r&&ir(r)&&o&&(v=a[s-1][0]-a[0][0],y=a[s-1][1]-a[0][1],g=Math.atan2(y,v),h=Math.cos(g)*(o||0),m=Math.sin(g)*(o||0)),e.moveTo(l+(p||h),c+(d||m));for(var x=1;x<s-1;x++){var _=a[x];e.lineTo(_[0],_[1])}e.lineTo(u,f)}function C0e(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,o=t.markerEndOffset,a=t.points.points,s=a.length,l=a[0][0],c=a[0][1],u=a[s-1][0],f=a[s-1][1],p=0,d=0,h=0,m=0,g=0,v,y;n&&ir(n)&&i&&(v=a[1][0]-a[0][0],y=a[1][1]-a[0][1],g=Math.atan2(y,v),p=Math.cos(g)*(i||0),d=Math.sin(g)*(i||0)),r&&ir(r)&&o&&(v=a[s-2][0]-a[s-1][0],y=a[s-2][1]-a[s-1][1],g=Math.atan2(y,v),h=Math.cos(g)*(o||0),m=Math.sin(g)*(o||0)),e.moveTo(l+p,c+d);for(var x=1;x<s-1;x++){var _=a[x];e.lineTo(_[0],_[1])}e.lineTo(u+h,f+m)}function O0e(e,t){var n=t.x,r=n===void 0?0:n,i=t.y,o=i===void 0?0:i,a=t.radius,s=t.width,l=t.height,c=s,u=l,f=a&&a.some(function(_){return _!==0});if(!f)e.rect(r,o,c,u);else{var p=s>0?1:-1,d=l>0?1:-1,h=p+d===0,m=G(a.map(function(_){return hr(_,0,Math.min(Math.abs(c)/2,Math.abs(u)/2))}),4),g=m[0],v=m[1],y=m[2],x=m[3];e.moveTo(p*g+r,o),e.lineTo(c-p*v+r,o),v!==0&&e.arc(c-p*v+r,d*v+o,v,-d*Math.PI/2,p>0?0:Math.PI,h),e.lineTo(c+r,u-d*y+o),y!==0&&e.arc(c-p*y+r,u-d*y+o,y,p>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,h),e.lineTo(p*x+r,u+o),x!==0&&e.arc(p*x+r,u-d*x+o,x,d>0?Math.PI/2:-Math.PI/2,p>0?Math.PI:0,h),e.lineTo(r,d*g+o),g!==0&&e.arc(p*g+r,d*g+o,g,p>0?Math.PI:0,d>0?Math.PI*1.5:Math.PI/2,h)}}var HW=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[Ge.CIRCLE]=x0e,n[Ge.ELLIPSE]=b0e,n[Ge.RECT]=O0e,n[Ge.LINE]=_0e,n[Ge.POLYLINE]=C0e,n[Ge.POLYGON]=S0e,n[Ge.PATH]=w0e,n[Ge.TEXT]=void 0,n[Ge.GROUP]=void 0,n[Ge.IMAGE]=void 0,n[Ge.HTML]=void 0,n[Ge.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(ua);var k0e=Ne.create(),E0e=Ne.create(),A0e=Ne.create(),T0e=Qe.create(),P0e=function(){function e(){var t=this;this.isHit=function(n,r,i,o){var a=t.context.pointInPathPickerFactory[n.nodeName];if(a){var s=Qe.invert(T0e,i),l=Ne.transformMat4(E0e,Ne.set(A0e,r[0],r[1],0),s);if(a(n,new So(l[0],l[1]),o,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),o=t.context.pathGeneratorFactory[n.nodeName];return o&&(i.beginPath(),o(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,o=t.renderingService,a=t.renderingContext;this.context=t,this.runtime=n;var s=(i=a.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(e.tag,function(l){return Bc(r,void 0,void 0,function(){return jc(this,function(c){return[2,this.pick(s,l)]})})}),o.hooks.pickSync.tap(e.tag,function(l){return r.pick(s,l)})},e.prototype.pick=function(t,n){var r,i,o=n.topmost,a=n.position,s=a.x,l=a.y,c=Ne.set(k0e,s,l,0),u=t.elementsFromBBox(c[0],c[1],c[0],c[1]),f=[];try{for(var p=$i(u),d=p.next();!d.done;d=p.next()){var h=d.value,m=h.getWorldTransform(),g=this.isHit(h,c,m,!1);if(g){var v=lE(h);if(v){var y=v.parsedStyle.clipPath,x=this.isHit(y,c,y.getWorldTransform(),!0);if(x){if(o)return n.picked=[h],n;f.push(h)}}else{if(o)return n.picked=[h],n;f.push(h)}}}}catch(_){r={error:_}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return n.picked=f,n},e.tag="CanvasPicker",e}();function N0e(e,t,n){var r=e.parsedStyle,i=r.cx,o=i===void 0?0:i,a=r.cy,s=a===void 0?0:a,l=r.r,c=r.fill,u=r.stroke,f=r.lineWidth,p=f===void 0?1:f,d=r.increasedLineWidthForHitTesting,h=d===void 0?0:d,m=r.pointerEvents,g=m===void 0?"auto":m,v=(p+h)/2,y=nu(o,s,t.x,t.y),x=G(wp(g,c,u),2),_=x[0],w=x[1];return _&&w||n?y<=l+v:_?y<=l:w?y>=l-v&&y<=l+v:!1}function d4(e,t,n,r){return e/(n*n)+t/(r*r)}function L0e(e,t,n){var r=e.parsedStyle,i=r.cx,o=i===void 0?0:i,a=r.cy,s=a===void 0?0:a,l=r.rx,c=r.ry,u=r.fill,f=r.stroke,p=r.lineWidth,d=p===void 0?1:p,h=r.increasedLineWidthForHitTesting,m=h===void 0?0:h,g=r.pointerEvents,v=g===void 0?"auto":g,y=t.x,x=t.y,_=G(wp(v,u,f),2),w=_[0],S=_[1],M=(d+m)/2,O=(y-o)*(y-o),E=(x-s)*(x-s);return w&&S||n?d4(O,E,l+M,c+M)<=1:w?d4(O,E,l,c)<=1:S?d4(O,E,l-M,c-M)>=1&&d4(O,E,l+M,c+M)<=1:!1}function Bh(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r}function I0e(e,t,n,r,i,o,a){var s=i/2;return Bh(e-s,t-s,n,i,o,a)||Bh(e+n-s,t-s,i,r,o,a)||Bh(e+s,t+r-s,n,i,o,a)||Bh(e-s,t+s,i,r,o,a)}function h4(e,t,n,r,i,o,a,s){var l=(Math.atan2(s-t,a-e)+Math.PI*2)%(Math.PI*2),c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return nu(c.x,c.y,a,s)<=o/2}function Pp(e,t,n,r,i,o,a){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),f=i/2;return o>=s-f&&o<=l+f&&a>=c-f&&a<=u+f?MR(e,t,n,r,o,a)<=i/2:!1}function qW(e,t,n,r,i){var o=e.length;if(o<2)return!1;for(var a=0;a<o-1;a++){var s=e[a][0],l=e[a][1],c=e[a+1][0],u=e[a+1][1];if(Pp(s,l,c,u,t,n,r))return!0}if(i){var f=e[0],p=e[o-1];if(Pp(f[0],f[1],p[0],p[1],t,n,r))return!0}return!1}var D0e=1e-6;function OA(e){return Math.abs(e)<D0e?0:e<0?-1:1}function z0e(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function UW(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],s=e[(o+1)%i];if(z0e(a,s,[t,n]))return!0;OA(a[1]-n)>0!=OA(s[1]-n)>0&&OA(t-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function WW(e,t,n){for(var r=!1,i=0;i<e.length;i++){var o=e[i];if(r=UW(o,t,n),r)break}return r}function R0e(e,t,n){var r=e.parsedStyle,i=r.x1,o=r.y1,a=r.x2,s=r.y2,l=r.lineWidth,c=l===void 0?1:l,u=r.increasedLineWidthForHitTesting,f=u===void 0?0:u,p=r.pointerEvents,d=p===void 0?"auto":p,h=r.fill,m=r.stroke,g=G(wp(d,h,m),2),v=g[1];return!v&&!n||!c?!1:Pp(i,o,a,s,c+f,t.x,t.y)}function F0e(e,t,n,r,i){for(var o=!1,a=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,f=l.prePoint,p=l.box;if(!(p&&!Bh(p.x-a,p.y-a,p.width+t,p.height+t,n,r)))switch(l.command){case"L":case"Z":if(o=Pp(f[0],f[1],c[0],c[1],t,n,r),o)return!0;break;case"Q":var d=TR(f[0],f[1],u[1],u[2],u[3],u[4],n,r);if(o=d<=t/2,o)return!0;break;case"C":var h=Lk(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i);if(o=h<=t/2,o)return!0;break;case"A":l.cubicParams||(l.cubicParams=h0(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var m=l.cubicParams,g=f,v=0;v<m.length;v+=6){var y=Lk(g[0],g[1],m[v],m[v+1],m[v+2],m[v+3],m[v+4],m[v+5],n,r,i);if(g=[m[v+4],m[v+5]],o=y<=t/2,o)return!0}break}}return o}function B0e(e,t,n,r,i,o){var a=e.parsedStyle,s=a.lineWidth,l=s===void 0?1:s,c=a.increasedLineWidthForHitTesting,u=c===void 0?0:c,f=a.stroke,p=a.fill,d=a.d,h=a.pointerEvents,m=h===void 0?"auto":h,g=d.segments,v=d.hasArc,y=d.polylines,x=d.polygons,_=G(wp(m,x?.length&&p,f),2),w=_[0],S=_[1],M=P_(e),O=!1;return w||n?(v?O=r(e,t):O=WW(x,t.x,t.y)||WW(y,t.x,t.y),O):((S||n)&&(O=F0e(g,l+u,t.x,t.y,M)),O)}function j0e(e,t,n){var r=e.parsedStyle,i=r.stroke,o=r.fill,a=r.lineWidth,s=a===void 0?1:a,l=r.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=r.points,f=r.pointerEvents,p=f===void 0?"auto":f,d=G(wp(p,o,i),2),h=d[0],m=d[1],g=!1;return(m||n)&&(g=qW(u.points,s+c,t.x,t.y,!0)),!g&&(h||n)&&(g=UW(u.points,t.x,t.y)),g}function V0e(e,t,n){var r=e.parsedStyle,i=r.lineWidth,o=i===void 0?1:i,a=r.increasedLineWidthForHitTesting,s=a===void 0?0:a,l=r.points,c=r.pointerEvents,u=c===void 0?"auto":c,f=r.fill,p=r.stroke,d=G(wp(u,f,p),2),h=d[1];return!h&&!n||!o?!1:qW(l.points,o+s,t.x,t.y,!1)}function H0e(e,t,n,r,i){var o=e.parsedStyle,a=o.radius,s=o.fill,l=o.stroke,c=o.lineWidth,u=c===void 0?1:c,f=o.increasedLineWidthForHitTesting,p=f===void 0?0:f,d=o.x,h=d===void 0?0:d,m=o.y,g=m===void 0?0:m,v=o.width,y=o.height,x=o.pointerEvents,_=x===void 0?"auto":x,w=G(wp(_,s,l),2),S=w[0],M=w[1],O=a&&a.some(function(A){return A!==0}),E=u+p;if(O){var k=!1;return(M||n)&&(k=W0e(h,g,v,y,a.map(function(A){return hr(A,0,Math.min(Math.abs(v)/2,Math.abs(y)/2))}),E,t.x,t.y)),!k&&(S||n)&&(k=r(e,t)),k}else{var P=E/2;if(S&&M||n)return Bh(h-P,g-P,v+P,y+P,t.x,t.y);if(S)return Bh(h,g,v,y,t.x,t.y);if(M)return I0e(h,g,v,y,E,t.x,t.y)}return!1}function W0e(e,t,n,r,i,o,a,s){var l=G(i,4),c=l[0],u=l[1],f=l[2],p=l[3];return Pp(e+c,t,e+n-u,t,o,a,s)||Pp(e+n,t+u,e+n,t+r-f,o,a,s)||Pp(e+n-f,t+r,e+p,t+r,o,a,s)||Pp(e,t+r-p,e,t+c,o,a,s)||h4(e+n-u,t+u,u,1.5*Math.PI,2*Math.PI,o,a,s)||h4(e+n-f,t+r-f,f,0,.5*Math.PI,o,a,s)||h4(e+p,t+r-p,p,.5*Math.PI,Math.PI,o,a,s)||h4(e+c,t+c,c,Math.PI,1.5*Math.PI,o,a,s)}function q0e(e,t,n,r,i,o){var a=e.parsedStyle,s=a.pointerEvents,l=s===void 0?"auto":s,c=a.x,u=c===void 0?0:c,f=a.y,p=f===void 0?0:f,d=a.width,h=a.height;if(l==="non-transparent-pixel"){var m=i.config.offscreenCanvas,g=o.offscreenCanvasCreator.getOrCreateCanvas(m),v=o.offscreenCanvasCreator.getOrCreateContext(m,{willReadFrequently:!0});g.width=d,g.height=h,i.defaultStyleRendererFactory[Ge.IMAGE].render(v,Te(Te({},e.parsedStyle),{x:0,y:0}),e,void 0,void 0,void 0);var y=v.getImageData(t.x-u,t.y-p,1,1).data;return y.every(function(x){return x!==0})}return!0}var GW=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[Ge.CIRCLE]=N0e,n[Ge.ELLIPSE]=L0e,n[Ge.RECT]=H0e,n[Ge.LINE]=R0e,n[Ge.POLYLINE]=V0e,n[Ge.POLYGON]=j0e,n[Ge.PATH]=B0e,n[Ge.TEXT]=r,n[Ge.GROUP]=null,n[Ge.IMAGE]=q0e,n[Ge.HTML]=null,n[Ge.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new P0e)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(ua);var G0e=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Qe.create(),this.dprMatrix=Qe.create(),this.tmpMat4=Qe.create(),this.vec3a=Ne.create(),this.vec3b=Ne.create(),this.vec3c=Ne.create(),this.vec3d=Ne.create()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,o=t.camera,a=t.renderingService,s=t.renderingContext,l=t.rBushRoot,c=t.pathGeneratorFactory;this.rBush=l,this.pathGeneratorFactory=c;var u=t.contextService,f=s.root.ownerDocument.defaultView,p=function(m){var g=m.target,v=g.rBushNode;v.aabb&&r.removedRBushNodeAABBs.push(v.aabb)},d=function(m){var g=m.target,v=g.rBushNode;v.aabb&&r.removedRBushNodeAABBs.push(v.aabb)};a.hooks.init.tap(e.tag,function(){f.addEventListener(nn.UNMOUNTED,p),f.addEventListener(nn.CULLED,d);var m=u.getDPR(),g=i.width,v=i.height,y=u.getContext();r.clearRect(y,0,0,g*m,v*m,i.background)}),a.hooks.destroy.tap(e.tag,function(){f.removeEventListener(nn.UNMOUNTED,p),f.removeEventListener(nn.CULLED,d),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),a.hooks.beginFrame.tap(e.tag,function(){var m,g=u.getContext(),v=u.getDPR(),y=i.width,x=i.height,_=r.canvasRendererPluginOptions,w=_.dirtyObjectNumThreshold,S=_.dirtyObjectRatioThreshold,M=a.getStats(),O=M.total,E=M.rendered,P=E/O;r.clearFullScreen=r.clearFullScreenLastFrame||!(!((m=f.context.renderingPlugins[1])===null||m===void 0)&&m.isFirstTimeRenderingFinished)||a.disableDirtyRectangleRendering()||E>w&&P>S,g&&(g.resetTransform?g.resetTransform():g.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(g,0,0,y*v,x*v,i.background))});var h=function(m,g){m.isVisible()&&!m.isCulled()&&r.renderDisplayObject(m,g,r.context,r.restoreStack,n);var v=m.sortable.sorted||m.childNodes;v.forEach(function(y){h(y,g)})};a.hooks.endFrame.tap(e.tag,function(){if(s.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}r.clearFullScreenLastFrame=!1;var m=u.getContext(),g=u.getDPR();if(Qe.fromScaling(r.dprMatrix,[g,g,1]),Qe.multiply(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)h(s.root,m);else{var v=r.safeMergeAABB.apply(r,qe([r.mergeDirtyAABBs(r.renderQueue)],G(r.removedRBushNodeAABBs.map(function(ie){var R=ie.minX,q=ie.minY,J=ie.maxX,te=ie.maxY,ae=new vi;return ae.setMinMax([R,q,0],[J,te,0]),ae})),!1));if(r.removedRBushNodeAABBs=[],vi.isEmpty(v)){r.renderQueue=[];return}var y=r.convertAABB2Rect(v),x=y.x,_=y.y,w=y.width,S=y.height,M=Ne.transformMat4(r.vec3a,[x,_,0],r.vpMatrix),O=Ne.transformMat4(r.vec3b,[x+w,_,0],r.vpMatrix),E=Ne.transformMat4(r.vec3c,[x,_+S,0],r.vpMatrix),P=Ne.transformMat4(r.vec3d,[x+w,_+S,0],r.vpMatrix),k=Math.min(M[0],O[0],P[0],E[0]),A=Math.min(M[1],O[1],P[1],E[1]),N=Math.max(M[0],O[0],P[0],E[0]),L=Math.max(M[1],O[1],P[1],E[1]),z=Math.floor(k),B=Math.floor(A),H=Math.ceil(N-k),j=Math.ceil(L-A);m.save(),r.clearRect(m,z,B,H,j,i.background),m.beginPath(),m.rect(z,B,H,j),m.clip(),m.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var W=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;W&&f.dispatchEvent(new or(Ia.DIRTY_RECTANGLE,{dirtyRect:{x:z,y:B,width:H,height:j}}));var Z=r.searchDirtyObjects(v);Z.sort(function(ie,R){return ie.sortable.renderOrder-R.sortable.renderOrder}).forEach(function(ie){ie&&ie.isVisible()&&!ie.isCulled()&&r.renderDisplayObject(ie,m,r.context,r.restoreStack,n)}),m.restore(),r.renderQueue.forEach(function(ie){r.saveDirtyAABB(ie)}),r.renderQueue=[]}r.restoreStack.forEach(function(){m.restore()}),r.restoreStack=[]}),a.hooks.render.tap(e.tag,function(m){r.clearFullScreen||r.renderQueue.push(m)})},e.prototype.clearRect=function(t,n,r,i,o,a){t.clearRect(n,r,i,o),a&&(t.fillStyle=a,t.fillRect(n,r,i,o))},e.prototype.renderDisplayObject=function(t,n,r,i,o){var a=t.nodeName,s=i[i.length-1];s&&!(t.compareDocumentPosition(s)&lo.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var l=this.context.styleRendererFactory[a],c=this.pathGeneratorFactory[a],u=t.parsedStyle.clipPath;if(u){this.applyWorldTransform(n,u);var f=this.pathGeneratorFactory[u.nodeName];f&&(n.save(),i.push(t),n.beginPath(),f(n,u.parsedStyle),n.closePath(),n.clip())}l&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),c&&(n.beginPath(),c(n,t.parsedStyle),t.nodeName!==Ge.LINE&&t.nodeName!==Ge.PATH&&t.nodeName!==Ge.POLYLINE&&n.closePath()),l&&(l.render(n,t.parsedStyle,t,r,this,o),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),o=Math.floor(n[1]),a=Math.ceil(r[0]),s=Math.ceil(r[1]),l=a-i,c=s-o;return{x:i,y:o,width:l,height:c}},e.prototype.mergeDirtyAABBs=function(t){var n=new vi;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var o=r.renderable.dirtyRenderBounds;o&&n.add(o)}),n},e.prototype.searchDirtyObjects=function(t){var n=G(t.getMin(),2),r=n[0],i=n[1],o=G(t.getMax(),2),a=o[0],s=o[1],l=this.rBush.search({minX:r,minY:i,maxX:a,maxY:s});return l.map(function(c){var u=c.displayObject;return u})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new vi);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,o=r.fill,a=r.opacity,s=r.lineDash,l=r.lineDashOffset;s&&t.setLineDash(s),on(l)||(t.lineDashOffset=l),on(a)||(t.globalAlpha*=a),!on(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!on(o)&&!Array.isArray(o)&&!o.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){r?(Qe.copy(this.tmpMat4,n.getLocalTransform()),Qe.multiply(this.tmpMat4,r,this.tmpMat4),Qe.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Qe.copy(this.tmpMat4,n.getWorldTransform()),Qe.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new vi;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),Np=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,o,a){var s=n.fill,l=n.fillRule,c=n.opacity,u=c===void 0?1:c,f=n.fillOpacity,p=f===void 0?1:f,d=n.stroke,h=n.strokeOpacity,m=h===void 0?1:h,g=n.lineWidth,v=g===void 0?1:g,y=n.lineCap,x=n.lineJoin,_=n.shadowType,w=n.shadowColor,S=n.shadowBlur,M=n.filter,O=n.miterLimit,E=s&&!s.isNone,P=d&&!d.isNone&&v>0,k=s?.alpha===0,A=!!(M&&M.length),N=!on(w)&&S>0,L=r.nodeName,z=_==="inner",B=P&&N&&(L===Ge.PATH||L===Ge.LINE||L===Ge.POLYLINE||k||z);E&&(t.globalAlpha=u*p,B||m4(r,t,N),XW(t,r,s,l,i,o,a,this.imagePool),B||this.clearShadowAndFilter(t,A,N)),P&&(t.globalAlpha=u*m,t.lineWidth=v,on(O)||(t.miterLimit=O),on(y)||(t.lineCap=y),on(x)||(t.lineJoin=x),B&&(z&&(t.globalCompositeOperation="source-atop"),m4(r,t,!0),z&&(MA(t,r,d,i,o,a,this.imagePool),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,A,!0))),MA(t,r,d,i,o,a,this.imagePool))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!on(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e}();function m4(e,t,n){var r=e.parsedStyle,i=r.filter,o=r.shadowColor,a=r.shadowBlur,s=r.shadowOffsetX,l=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=o.toString(),t.shadowBlur=a||0,t.shadowOffsetX=s||0,t.shadowOffsetY=l||0)}function $W(e,t,n,r,i,o,a){var s,l;if(e.image.nodeName==="rect"){var c=e.image.parsedStyle,u=c.width,f=c.height;l=r.contextService.getDPR();var p=r.config.offscreenCanvas;s=o.offscreenCanvasCreator.getOrCreateCanvas(p),s.width=u*l,s.height=f*l;var d=o.offscreenCanvasCreator.getOrCreateContext(p),h=[];e.image.forEach(function(g){i.renderDisplayObject(g,d,r,h,o)}),h.forEach(function(){d.restore()})}var m=a.getOrCreatePatternSync(e,n,s,l,t.getGeometryBounds().min,function(){t.renderable.dirty=!0,r.renderingService.dirtify()});return m}function YW(e,t,n,r){var i;if(e.type===yc.LinearGradient||e.type===yc.RadialGradient){var o=t.getGeometryBounds(),a=o&&o.halfExtents[0]*2||1,s=o&&o.halfExtents[1]*2||1,l=o&&o.min||[0,0];i=r.getOrCreateGradient(Te(Te({type:e.type},e.value),{min:l,width:a,height:s}),n)}return i}function XW(e,t,n,r,i,o,a,s,l){l===void 0&&(l=!1),Array.isArray(n)?n.forEach(function(c){e.fillStyle=YW(c,t,e,s),l||(r?e.fill(r):e.fill())}):(dh(n)&&(e.fillStyle=$W(n,t,e,i,o,a,s)),l||(r?e.fill(r):e.fill()))}function MA(e,t,n,r,i,o,a,s){s===void 0&&(s=!1),Array.isArray(n)?n.forEach(function(l){e.strokeStyle=YW(l,t,e,a),s||e.stroke()}):(dh(n)&&(e.strokeStyle=$W(n,t,e,r,i,o,a)),s||e.stroke())}var $0e=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.x,o=i===void 0?0:i,a=n.y,s=a===void 0?0:a,l=n.width,c=n.height,u=n.src,f=n.shadowColor,p=n.shadowBlur,d,h=l,m=c;if(rr(u)?d=this.imagePool.getImageSync(u):(h||(h=u.width),m||(m=u.height),d=u),d){var g=!on(f)&&p>0;m4(r,t,g);try{t.drawImage(d,o,s,h,m)}catch{}}},e}(),Y0e=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,o,a){r.getBounds();var s=n,l=s.lineWidth,c=l===void 0?1:l,u=s.textAlign,f=u===void 0?"start":u,p=s.textBaseline,d=p===void 0?"alphabetic":p,h=s.lineJoin,m=h===void 0?"miter":h,g=s.miterLimit,v=g===void 0?10:g,y=s.letterSpacing,x=y===void 0?0:y,_=s.stroke,w=s.fill,S=s.fillRule,M=s.fillOpacity,O=M===void 0?1:M,E=s.strokeOpacity,P=E===void 0?1:E,k=s.opacity,A=k===void 0?1:k,N=s.metrics,L=s.x,z=L===void 0?0:L,B=s.y,H=B===void 0?0:B,j=s.dx,W=s.dy,Z=s.shadowColor,ie=s.shadowBlur,R=N.font,q=N.lines,J=N.height,te=N.lineHeight,ae=N.lineMetrics;t.font=R,t.lineWidth=c,t.textAlign=f==="middle"?"center":f;var le=d;!a.enableCSSParsing&&le==="alphabetic"&&(le="bottom"),t.lineJoin=m,on(v)||(t.miterLimit=v);var ue=H;d==="middle"?ue+=-J/2-te/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?ue+=-J:(d==="top"||d==="hanging")&&(ue+=-te);var ye=z+(j||0);ue+=W||0,q.length===1&&(le==="bottom"?(le="middle",ue-=.5*J):le==="top"&&(le="middle",ue+=.5*J)),t.textBaseline=le;var Me=!on(Z)&&ie>0;m4(r,t,Me);for(var we=0;we<q.length;we++){var De=c/2+ye;ue+=te,!on(_)&&!_.isNone&&c&&this.drawLetterSpacing(t,r,q[we],ae[we],f,De,ue,x,w,S,O,_,P,A,!0,i,o,a),on(w)||this.drawLetterSpacing(t,r,q[we],ae[we],f,De,ue,x,w,S,O,_,P,A,!1,i,o,a)}},e.prototype.drawLetterSpacing=function(t,n,r,i,o,a,s,l,c,u,f,p,d,h,m,g,v,y){if(l===0){m?this.strokeText(t,n,r,a,s,p,d,g,v,y):this.fillText(t,n,r,a,s,c,u,f,h,g,v,y);return}var x=t.textAlign;t.textAlign="left";var _=a;o==="center"||o==="middle"?_=a-i.width/2:(o==="right"||o==="end")&&(_=a-i.width);for(var w=Array.from(r),S=t.measureText(r).width,M=0,O=0;O<w.length;++O){var E=w[O];m?this.strokeText(t,n,E,_,s,p,d,g,v,y):this.fillText(t,n,E,_,s,c,u,f,h,g,v,y),M=t.measureText(r.substring(O+1)).width,_+=S-M+l,S=M}t.textAlign=x},e.prototype.fillText=function(t,n,r,i,o,a,s,l,c,u,f,p){XW(t,n,a,s,u,f,p,this.imagePool,!0);var d,h=!on(l)&&l!==1;h&&(d=t.globalAlpha,t.globalAlpha=l*c),t.fillText(r,i,o),h&&(t.globalAlpha=d)},e.prototype.strokeText=function(t,n,r,i,o,a,s,l,c,u){MA(t,n,a,l,c,u,this.imagePool,!0);var f,p=!on(s)&&s!==1;p&&(f=t.globalAlpha,t.globalAlpha=s),t.strokeText(r,i,o),p&&(t.globalAlpha=f)},e}(),Kpt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),Zpt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),Jpt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),Qpt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),edt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),tdt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),ndt=function(e){ut(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Np),KW=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=Te({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,o=new Np(i),a=(n={},n[Ge.CIRCLE]=o,n[Ge.ELLIPSE]=o,n[Ge.RECT]=o,n[Ge.IMAGE]=new $0e(i),n[Ge.TEXT]=new Y0e(i),n[Ge.LINE]=o,n[Ge.POLYLINE]=o,n[Ge.POLYGON]=o,n[Ge.PATH]=o,n[Ge.GROUP]=void 0,n[Ge.HTML]=void 0,n[Ge.MESH]=void 0,n);this.context.defaultStyleRendererFactory=a,this.context.styleRendererFactory=a,this.addRenderingPlugin(new G0e(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(ua);var K0e=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,o=t.renderingContext,a=t.config;this.context=t;var s=o.root.ownerDocument.defaultView,l=function(S){i.hooks.pointerMove.call(S)},c=function(S){i.hooks.pointerUp.call(S)},u=function(S){i.hooks.pointerDown.call(S)},f=function(S){i.hooks.pointerOver.call(S)},p=function(S){i.hooks.pointerOut.call(S)},d=function(S){i.hooks.pointerCancel.call(S)},h=function(S){i.hooks.pointerWheel.call(S)},m=function(S){i.hooks.click.call(S)},g=function(S){n.globalThis.document.addEventListener("pointermove",l,!0),S.addEventListener("pointerdown",u,!0),S.addEventListener("pointerleave",p,!0),S.addEventListener("pointerover",f,!0),n.globalThis.addEventListener("pointerup",c,!0),n.globalThis.addEventListener("pointercancel",d,!0)},v=function(S){S.addEventListener("touchstart",u,!0),S.addEventListener("touchend",c,!0),S.addEventListener("touchmove",l,!0),S.addEventListener("touchcancel",d,!0)},y=function(S){n.globalThis.document.addEventListener("mousemove",l,!0),S.addEventListener("mousedown",u,!0),S.addEventListener("mouseout",p,!0),S.addEventListener("mouseover",f,!0),n.globalThis.addEventListener("mouseup",c,!0)},x=function(S){n.globalThis.document.removeEventListener("pointermove",l,!0),S.removeEventListener("pointerdown",u,!0),S.removeEventListener("pointerleave",p,!0),S.removeEventListener("pointerover",f,!0),n.globalThis.removeEventListener("pointerup",c,!0)},_=function(S){S.removeEventListener("touchstart",u,!0),S.removeEventListener("touchend",c,!0),S.removeEventListener("touchmove",l,!0),S.removeEventListener("touchcancel",d,!0)},w=function(S){n.globalThis.document.removeEventListener("mousemove",l,!0),S.removeEventListener("mousedown",u,!0),S.removeEventListener("mouseout",p,!0),S.removeEventListener("mouseover",f,!0),n.globalThis.removeEventListener("mouseup",c,!0)};i.hooks.init.tap(e.tag,function(){var S=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(S.style.msContentZooming="none",S.style.msTouchAction="none"):s.supportsPointerEvents&&(S.style.touchAction="none"),s.supportsPointerEvents?g(S):y(S),s.supportsTouchEvents&&v(S),a.useNativeClickEvent&&S.addEventListener("click",m,!0),S.addEventListener("wheel",h,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var S=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(S.style.msContentZooming="",S.style.msTouchAction=""):s.supportsPointerEvents&&(S.style.touchAction=""),s.supportsPointerEvents?x(S):w(S),s.supportsTouchEvents&&_(S),a.useNativeClickEvent&&S.removeEventListener("click",m,!0),S.removeEventListener("wheel",h,!0)})},e.tag="DOMInteraction",e}(),ZW=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new K0e)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(ua);var J0e="g-canvas-camera",Q0e=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t,n){return n===void 0&&(n=[0,0,0]),"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+n[0],t[13]+n[1]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,o=t.renderingContext,a=t.renderingService;this.context=t;var s=o.root.ownerDocument.defaultView,l=s.context.eventService.nativeHTMLMap,c=function(m,g){g.style.transform=r.joinTransformMatrix(m.getWorldTransform(),m.getOrigin())},u=function(m){var g=m.target;if(g.nodeName===Ge.HTML){r.$camera||(r.$camera=r.createCamera(i));var v=r.getOrCreateEl(g);if(r.$camera.appendChild(v),n.enableCSSParsing){var y=g.ownerDocument.documentElement.attributes;Object.keys(y).forEach(function(x){v.style[x]=y[x]})}Object.keys(g.attributes).forEach(function(x){r.updateAttribute(x,g)}),c(g,v),l.set(v,g)}},f=function(m){var g=m.target;if(g.nodeName===Ge.HTML&&r.$camera){var v=r.getOrCreateEl(g);v&&(v.remove(),l.delete(v))}},p=function(m){var g=m.target;if(g.nodeName===Ge.HTML){var v=m.attrName;r.updateAttribute(v,g)}},d=function(m){var g=m.target;if(g.nodeName===Ge.HTML){var v=r.getOrCreateEl(g);c(g,v)}},h=function(){if(r.$camera){var m=r.context.config,g=m.width,v=m.height;r.$camera.parentElement.style.width="".concat(g||0,"px"),r.$camera.parentElement.style.height="".concat(v||0,"px")}};a.hooks.init.tap(e.tag,function(){s.addEventListener(Ia.RESIZE,h),s.addEventListener(nn.MOUNTED,u),s.addEventListener(nn.UNMOUNTED,f),s.addEventListener(nn.ATTR_MODIFIED,p),s.addEventListener(nn.BOUNDS_CHANGED,d)}),a.hooks.endFrame.tap(e.tag,function(){r.$camera&&o.renderReasons.has(nf.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),a.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(Ia.RESIZE,h),s.removeEventListener(nn.MOUNTED,u),s.removeEventListener(nn.UNMOUNTED,f),s.removeEventListener(nn.ATTR_MODIFIED,p),s.removeEventListener(nn.BOUNDS_CHANGED,d)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,o=n.height,a=this.context.contextService.getDomElement(),s=a.parentNode;if(s){var l=J0e,c=s.querySelector("#"+l);if(!c){var u=(r||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(i||0,"px"),u.style.height="".concat(o||0,"px");var f=(r||document).createElement("div");c=f,f.id=l,f.style.position="absolute",f.style.left="".concat(a.offsetLeft||0,"px"),f.style.top="".concat(a.offsetTop||0,"px"),f.style.transformOrigin="left top",f.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),f.style.pointerEvents="none",f.style.width="100%",f.style.height="100%",u.appendChild(f),s.appendChild(u)}return c}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;rr(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"x":r.style.left="".concat(n.parsedStyle.x,"px");break;case"y":r.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var o=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":if(this.context.enableCSSParsing){var a=n.computedStyleMap().get("width");r.style.width=a.toString()}else{var a=n.parsedStyle.width;r.style.width=Dn(a)?"".concat(a,"px"):a.toString()}break;case"height":if(this.context.enableCSSParsing){var s=n.computedStyleMap().get("height");r.style.height=s.toString()}else{var s=n.parsedStyle.height;r.style.height=Dn(s)?"".concat(s,"px"):s.toString()}break;case"zIndex":var l=n.parsedStyle.zIndex;r.style["z-index"]="".concat(l);break;case"visibility":var c=n.parsedStyle.visibility;r.style.visibility=c;break;case"pointerEvents":var u=n.parsedStyle.pointerEvents,f=u===void 0?"auto":u;r.style.pointerEvents=f;break;case"opacity":var p=n.parsedStyle.opacity;r.style.opacity="".concat(p);break;case"fill":var d=n.parsedStyle.fill,h="";s2(d)?d.isNone?h="transparent":h=n.getAttribute("fill"):Array.isArray(d)?h=n.getAttribute("fill"):dh(d),r.style.background=h;break;case"stroke":var m=n.parsedStyle.stroke,g="";s2(m)?m.isNone?g="transparent":g=n.getAttribute("stroke"):Array.isArray(m)?g=n.getAttribute("stroke"):dh(m),r.style["border-color"]=g,r.style["border-style"]="solid";break;case"lineWidth":var v=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(v||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var y=n.style.filter;r.style.filter=y;break;default:!on(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),JW=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new Q0e)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(ua);var t1e=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,o){var a;r?a=r(t):hh&&(a=new window.Image),a&&(a.onload=function(){n.imageCache[t]=a,i(a)},a.onerror=function(s){o(s)},a.crossOrigin="Anonymous",a.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,o,a){var s=this.generatePatternKey(t);if(s&&this.patternCache[s])return this.patternCache[s];var l=t.image,c=t.repetition,u=t.transform,f,p=!1;rr(l)?f=this.getImageSync(l,a):r?(f=r,p=!0):f=l;var d=f&&n.createPattern(f,c);if(d){var h=void 0;u?h=uE(R_(u),new Ri({})):h=Qe.identity(Qe.create()),p&&Qe.scale(h,h,[1/i,1/i,1]),d.setTransform({a:h[0],b:h[1],c:h[4],d:h[5],e:h[12]+o[0],f:h[13]+o[1]})}return s&&d&&(this.patternCache[s]=d),d},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,o=t.steps,a=t.min,s=t.width,l=t.height,c=t.angle,u=t.cx,f=t.cy,p=t.size;if(this.gradientCache[r])return this.gradientCache[r];var d=null;if(i===yc.LinearGradient){var h=hF(a,s,l,c),m=h.x1,g=h.y1,v=h.x2,y=h.y2;d=n.createLinearGradient(m,g,v,y)}else if(i===yc.RadialGradient){var x=mF(a,s,l,u,f,p),_=x.x,w=x.y,S=x.r;d=n.createRadialGradient(_,w,0,_,w,S)}return d&&(o.forEach(function(M){var O=M.offset,E=M.color;O.unit===xt.kPercentage&&d?.addColorStop(O.value/100,E.toString())}),this.gradientCache[r]=d),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.min,i=t.width,o=t.height,a=t.steps,s=t.angle,l=t.cx,c=t.cy,u=t.size;return"gradient-".concat(n,"-").concat(s?.toString()||0,"-").concat(l?.toString()||0,"-").concat(c?.toString()||0,"-").concat(u?.toString()||0,"-").concat(r[0],"-").concat(r[1],"-").concat(i,"-").concat(o,"-").concat(a.map(function(f){var p=f.offset,d=f.color;return"".concat(p).concat(d)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(rr(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),n1e=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,o=r.root.ownerDocument.defaultView,a=function(c,u,f){var p=c.parsedStyle,d=p.width,h=p.height;d&&!h?c.setAttribute("height",f/u*d):!d&&h&&c.setAttribute("width",u/f*h)},s=function(c){var u=c.target,f=u.nodeName,p=u.attributes;if(f===Ge.IMAGE){var d=p.src,h=p.keepAspectRatio;rr(d)&&i.getImageSync(d,function(m){var g=m.width,v=m.height;h&&a(u,g,v),u.renderable.dirty=!0,n.dirtify()})}},l=function(c){var u=c.target,f=c.attrName,p=c.newValue;u.nodeName===Ge.IMAGE&&f==="src"&&rr(p)&&i.getOrCreateImage(p).then(function(d){var h=d.width,m=d.height;u.attributes.keepAspectRatio&&a(u,h,m),u.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){o.addEventListener(nn.MOUNTED,s),o.addEventListener(nn.ATTR_MODIFIED,l)}),n.hooks.destroy.tap(e.tag,function(){o.removeEventListener(nn.MOUNTED,s),o.removeEventListener(nn.ATTR_MODIFIED,l)})},e.tag="LoadImage",e}(),QW=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new t1e(this.context.config),this.addRenderingPlugin(new n1e)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(ua);var i1e=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=rr(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||hh&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,kF(this.$canvas,t,n)),this.renderingContext.renderReasons.add(nf.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),Bc(this,void 0,void 0,function(){var n,r;return jc(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),o1e=function(e){ut(t,e);function t(){var n=e.apply(this,qe([],G(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=i1e},t.prototype.destroy=function(){delete this.context.ContextService},t}(ua),g4=function(e){ut(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new o1e),r.registerPlugin(new QW),r.registerPlugin(new HW),r.registerPlugin(new KW),r.registerPlugin(new ZW),r.registerPlugin(new GW),r.registerPlugin(new JW),r}return t}(sF);var a1e=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,o=i.root.ownerDocument,a=o.defaultView,s=function(l){var c=l.target,u=c===o,f=u&&n.dragndropPluginOptions.isDocumentDraggable?o:c.closest&&c.closest("[draggable=true]");if(f){var p=!1,d=l.timeStamp,h=[l.clientX,l.clientY],m=null,g=[l.clientX,l.clientY],v=function(x){return Bc(n,void 0,void 0,function(){var _,w,S,M,O,E;return jc(this,function(P){switch(P.label){case 0:if(!p){if(_=x.timeStamp-d,w=Si([x.clientX,x.clientY],h),_<=this.dragndropPluginOptions.dragstartTimeThreshold||w<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];x.type="dragstart",f.dispatchEvent(x),p=!0}return x.type="drag",x.dx=x.clientX-g[0],x.dy=x.clientY-g[1],f.dispatchEvent(x),g=[x.clientX,x.clientY],u?[3,2]:(S=this.dragndropPluginOptions.overlap==="pointer"?[x.canvasX,x.canvasY]:c.getBounds().center,[4,o.elementsFromPoint(S[0],S[1])]);case 1:M=P.sent(),O=M[M.indexOf(c)+1],E=O?.closest("[droppable=true]")||(this.dragndropPluginOptions.isDocumentDroppable?o:null),m!==E&&(m&&(x.type="dragleave",x.target=m,m.dispatchEvent(x)),E&&(x.type="dragenter",x.target=E,E.dispatchEvent(x)),m=E,m&&(x.type="dragover",x.target=m,m.dispatchEvent(x))),P.label=2;case 2:return[2]}})})};a.addEventListener("pointermove",v);var y=function(x){if(p){x.detail={preventClick:!0};var _=x.clone();m&&(_.type="drop",_.target=m,m.dispatchEvent(_)),_.type="dragend",f.dispatchEvent(_),p=!1}a.removeEventListener("pointermove",v)};c.addEventListener("pointerup",y,{once:!0}),c.addEventListener("pointerupoutside",y,{once:!0})}};r.hooks.init.tap(e.tag,function(){a.addEventListener("pointerdown",s)}),r.hooks.destroy.tap(e.tag,function(){a.removeEventListener("pointerdown",s)})},e.tag="Dragndrop",e}(),v4=function(e){ut(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new a1e(Te({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(ua);var s1e="*",l1e=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this._events[t]||[],a=this._events[s1e]||[],s=function(l){for(var c=l.length,u=0;u<c;u++)if(l[u]){var f=l[u],p=f.callback,d=f.once;d&&(l.splice(u,1),l.length===0&&delete n._events[t],c--,u--),p.apply(n,r)}};s(o),s(a)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,o=0;o<i;o++)r[o].callback===n&&(r.splice(o,1),i--,o--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),y4=l1e;var pr={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var eq=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var Z4=Ym(nq());var c1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Lp(e){return(t,...n)=>_e({},e(t,...n),t)}function pf(e){return(t,...n)=>_e({},t,e(t,...n))}function u1e(e){return e instanceof Date?!1:typeof e=="object"}function O1(e,t){if(!e)return t;if(Array.isArray(e))return e;if(u1e(e)){let{value:n=t}=e,r=c1e(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}return e}var f1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},b4=()=>e=>{let{children:t}=e;if(!Array.isArray(t))return[];let{x:n=0,y:r=0,width:i,height:o,data:a}=e;return t.map(s=>{var{data:l,x:c,y:u,width:f,height:p}=s,d=f1e(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},d),{data:O1(l,a),x:c??n,y:u??r,width:f??i,height:p??o})})};b4.props={};var p1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},_4=()=>e=>{let{children:t}=e;if(!Array.isArray(t))return[];let{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:o}=e,[a,s,l,c]=n==="col"?["y","height","width","x"]:["x","width","height","y"],u=r.reduce((m,g)=>m+g),f=e[s]-i*(t.length-1),p=r.map(m=>f*(m/u)),d=[],h=e[a]||0;for(let m=0;m<p.length;m+=1){let g=t[m],{data:v}=g,y=p1e(g,["data"]),x=O1(v,o);d.push(Object.assign({[a]:h,[s]:p[m],[c]:e[c]||0,[l]:e[l],data:x},y)),h+=p[m]+i}return d};_4.props={};var kA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},w4=()=>e=>{let{children:t}=e,n=kA(e,["children"]);if(!Array.isArray(t))return[];let{data:r,scale:i={},axis:o={},legend:a={},encode:s={},transform:l=[]}=n,c=kA(n,["data","scale","axis","legend","encode","transform"]),u=t.map(f=>{var{data:p,scale:d={},axis:h={},legend:m={},encode:g={},transform:v=[]}=f,y=kA(f,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:O1(p,r),scale:_e({},i,d),encode:_e({},s,g),transform:[...l,...v],axis:h&&o?_e({},o,h):!1,legend:m&&a?_e({},a,m):!1},y)});return[Object.assign(Object.assign({},c),{marks:u,type:"standardView"})]};w4.props={};var d1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},S4=({static:e=!1}={})=>t=>{let{width:n,height:r,depth:i,paddingLeft:o,paddingRight:a,paddingTop:s,paddingBottom:l,padding:c,inset:u,insetLeft:f,insetTop:p,insetRight:d,insetBottom:h,margin:m,marginLeft:g,marginBottom:v,marginTop:y,marginRight:x,data:_,coordinate:w,theme:S,component:M,interaction:O,x:E,y:P,z:k,key:A,frame:N,labelTransform:L,parentKey:z,clip:B,viewStyle:H,title:j}=t,W=d1e(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:E,y:P,z:k,key:A,width:n,height:r,depth:i,padding:c,paddingLeft:o,paddingRight:a,paddingTop:s,inset:u,insetLeft:f,insetTop:p,insetRight:d,insetBottom:h,paddingBottom:l,theme:S,coordinate:w,component:M,interaction:O,frame:N,labelTransform:L,margin:m,marginLeft:g,marginBottom:v,marginTop:y,marginRight:x,parentKey:z,clip:B,style:H},!e&&{title:j}),{marks:[Object.assign(Object.assign(Object.assign({},W),{key:`${A}-0`,data:_}),e&&{title:j})]})]};S4.props={};var Ip=class e{constructor(t){this.$value=t}static of(t){return new e(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}};var h1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},m1e=Lp(e=>{let{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:o,y:a}=t,s=(l,c)=>{var u;if(l===void 0||!i)return{};let f=An(n,h=>h[l]),p=((u=r?.[c])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),d=p.map(h=>f.has(h)?f.get(h).length:1);return{domain:p,flex:d}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"top"}},o===void 0&&{paddingInner:0}),s(o,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"right"}},a===void 0&&{paddingInner:0}),s(a,"y"))}}}),G2=pf(e=>{let{data:t,scale:n,legend:r}=e,i=[e],o,a,s;for(;i.length;){let p=i.shift(),{children:d,encode:h={},scale:m={},legend:g={}}=p,{color:v}=h,{color:y}=m,{color:x}=g;v!==void 0&&(o=v),y!==void 0&&(a=y),x!==void 0&&(s=x),Array.isArray(d)&&i.push(...d)}let l=()=>{var p;let d=(p=n?.color)===null||p===void 0?void 0:p.domain;if(d!==void 0)return[d];if(o===void 0)return[void 0];let h=typeof o=="function"?o:g=>g[o],m=t.map(h);return m.some(g=>typeof g=="number")?[_o(m)]:[Array.from(new Set(m)),"ordinal"]},c=typeof o=="string"?o:"",[u,f]=l();return Object.assign({encode:{color:{type:"column",value:u??[]}},scale:{color:_e({},a,{domain:u,type:f})}},r===void 0&&{legend:{color:_e({title:c},s)}})}),$2=Lp(()=>({animate:{enterType:"fadeIn"}})),Y2=pf(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),X2=pf(()=>({type:"cell"})),EA=pf(e=>{let{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{let{data:r,encode:i}=e,{x:o,y:a}=i,s=o?Array.from(new Set(r.map(u=>u[o]))):[],l=a?Array.from(new Set(r.map(u=>u[a]))):[];return(()=>{if(s.length&&l.length){let u=[];for(let f of s)for(let p of l)u.push({[o]:f,[a]:p});return u}if(s.length)return s.map(u=>({[o]:u}));if(l.length)return l.map(u=>({[a]:u}))})()}}]}}}),AA=pf((e,t=g1e,n=v1e,r=y1e,i={})=>{let{data:o,encode:a,children:s,scale:l,x:c=0,y:u=0,shareData:f=!1,key:p}=e,{value:d}=o,{x:h,y:m}=a,{color:g}=l,{domain:v}=g;return{children:(x,_,w)=>{let{x:S,y:M}=_,{paddingLeft:O,paddingTop:E,marginLeft:P,marginTop:k}=w,{domain:A}=S.getOptions(),{domain:N}=M.getOptions(),L=Us(x),z=x.map(t),B=x.map(({x:R,y:q})=>[S.invert(R),M.invert(q)]),j=B.map(([R,q])=>J=>{let{[h]:te,[m]:ae}=J;return(h!==void 0?te===R:!0)&&(m!==void 0?ae===q:!0)}).map(R=>d.filter(R)),W=f?kn(j,R=>R.length):void 0,Z=B.map(([R,q])=>({columnField:h,columnIndex:A.indexOf(R),columnValue:R,columnValuesLength:A.length,rowField:m,rowIndex:N.indexOf(q),rowValue:q,rowValuesLength:N.length})),ie=Z.map(R=>Array.isArray(s)?s:[s(R)].flat(1));return L.flatMap(R=>{let[q,J,te,ae]=z[R],le=Z[R],ue=j[R];return ie[R].map(Me=>{var we,De,{scale:Ve,key:Ze,facet:Ae=!0,axis:pe={},legend:ft={}}=Me,nt=h1e(Me,["scale","key","facet","axis","legend"]);let $e=((we=Ve?.y)===null||we===void 0?void 0:we.guide)||pe.y,at=((De=Ve?.x)===null||De===void 0?void 0:De.guide)||pe.x,mt={x:{tickCount:h?5:void 0},y:{tickCount:m?5:void 0}},lt=Ae?ue:ue.length===0?[]:d,Et={color:{domain:v}},Rt={x:rq(at,n)(le,lt),y:rq($e,r)(le,lt)};return Object.assign(Object.assign({key:`${Ze}-${R}`,data:lt,margin:0,x:q+O+c+P,y:J+E+u+k,parentKey:p,width:te,height:ae,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!lt.length,dataDomain:W,scale:_e(mt,Ve,Et),axis:_e({},pe,Rt),legend:!1},nt),i)})})}}});function g1e(e){let{points:t}=e;return P0(t)}function K2(e,t){return t.length?_e({title:!1,tick:null,label:null},e):_e({title:!1,tick:null,label:null,grid:null},e)}function v1e(e){return(t,n)=>{let{rowIndex:r,rowValuesLength:i,columnIndex:o,columnValuesLength:a}=t;if(r!==i-1)return K2(e,n);let s=o!==a-1?!1:void 0,l=n.length?void 0:null;return _e({title:s,grid:l},e)}}function y1e(e){return(t,n)=>{let{rowIndex:r,columnIndex:i}=t;if(i!==0)return K2(e,n);let o=r!==0?!1:void 0,a=n.length?void 0:null;return _e({title:o,grid:a},e)}}function rq(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}var C4=()=>e=>[Ip.of(e).call(X2).call(G2).call($2).call(m1e).call(Y2).call(EA).call(AA).value()];C4.props={};var TA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},x1e=Lp(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),b1e=pf(e=>{let{data:t,children:n,x:r=0,y:i=0,key:o}=e;return{children:(s,l,c)=>{let{x:u,y:f}=l,{paddingLeft:p,paddingTop:d,marginLeft:h,marginTop:m}=c,{domain:g}=u.getOptions(),{domain:v}=f.getOptions(),y=Us(s),x=s.map(({points:M})=>P0(M)),_=s.map(({x:M,y:O})=>[u.invert(M),f.invert(O)]),w=_.map(([M,O])=>({columnField:M,columnIndex:g.indexOf(M),columnValue:M,columnValuesLength:g.length,rowField:O,rowIndex:v.indexOf(O),rowValue:O,rowValuesLength:v.length})),S=w.map(M=>Array.isArray(n)?n:[n(M)].flat(1));return y.flatMap(M=>{let[O,E,P,k]=x[M],[A,N]=_[M],L=w[M];return S[M].map(B=>{var H,j;let{scale:W,key:Z,encode:ie,axis:R,interaction:q}=B,J=TA(B,["scale","key","encode","axis","interaction"]),te=(H=W?.y)===null||H===void 0?void 0:H.guide,ae=(j=W?.x)===null||j===void 0?void 0:j.guide,le={x:{facet:!1},y:{facet:!1}},ue={x:w1e(ae)(L,t),y:S1e(te)(L,t)},ye={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:o,key:`${Z}-${M}`,x:O+p+r+h,y:E+d+i+m,width:P,height:k,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:_e(le,W),axis:_e(ye,R,ue),legend:!1,encode:_e({},ie,{x:A,y:N}),interaction:_e({},q,{legendFilter:!1})},J)})})}}}),_1e=pf(e=>{let{encode:t}=e,n=TA(e,["encode"]),{position:r=[],x:i=r,y:o=[...r].reverse()}=t,a=TA(t,["position","x","y"]),s=[];for(let l of[i].flat(1))for(let c of[o].flat(1))s.push({$x:l,$y:c});return Object.assign(Object.assign({},n),{data:s,encode:Object.assign(Object.assign({},a),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[o].flat(1).length===1&&{y:{paddingInner:0}})})});function w1e(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{let{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return K2(e,n)}}function S1e(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{let{columnIndex:r}=t;if(r!==0)return K2(e,n)}}var PA=()=>e=>[Ip.of(e).call(X2).call(G2).call(b1e).call(_1e).call($2).call(Y2).call(x1e).value()];var C1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},O1e=Lp(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),M1e=Lp(e=>({coordinate:{type:"polar"}})),k1e=e=>{let{encode:t}=e,n=C1e(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function iq(e){return t=>null}function E1e(e){let{points:t}=e,[n,r,i,o]=t,a=er(n,o),s=ur(n,o),l=ur(r,i),c=Q5(s,l),u=1/Math.sin(c/2),f=a/(1+u),p=f*Math.sqrt(2),[d,h]=i,g=pc(s)+c/2,v=f*u,y=d+v*Math.sin(g),x=h-v*Math.cos(g);return[y-p/2,x-p/2,p,p]}var NA=()=>e=>[Ip.of(e).call(X2).call(k1e).call(G2).call(M1e).call(EA).call(AA,E1e,iq,iq,{frame:!1}).call($2).call(Y2).call(O1e).value()];function A1e(e,t,n){let i=n,o=[0,i],a=[-i+1,1];if(e==="normal")return o;if(e==="reverse")return a;if(e==="alternate")return t%2===0?o:a;if(e==="reverse-alternate")return t%2===0?a:o}function T1e(e,t,n){let r=[e];for(;r.length;){let i=r.pop();i.animate=_e({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});let{children:o}=i;Array.isArray(o)&&r.push(...o)}return e}var O4=()=>e=>{let{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:o="ease-in-out-sine"}=e,a=t.length;if(!Array.isArray(t)||a===0)return[];let{key:s}=t[0],l=t.map(c=>Object.assign(Object.assign({},c),{key:s})).map(c=>T1e(c,n,o));return function*(){let c=0,u;for(;r==="infinite"||c<r;){let[f,p]=A1e(i,c,a);for(let d=f;d<p;d+=1){let h=Math.abs(d);u!==h&&(yield l[h]),u=h}c++}}};O4.props={};var P1e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},LA=()=>e=>{let{type:t,data:n,scale:r,encode:i,style:o,animate:a,key:s,state:l}=e,c=P1e(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},c),{children:[{type:"geoPath",key:`${s}-0`,data:{value:n},scale:r,encode:i,style:o,animate:a,state:l}]})]};LA.props={};var $t=1e-6,M4=1e-12,En=Math.PI,$r=En/2,IA=En/4,Ao=En*2,Fi=180/En,Lr=En/180,Pn=Math.abs,Ul=Math.atan,Xo=Math.atan2,un=Math.cos,Z2=Math.ceil,k4=Math.exp;var jh=Math.log,E4=Math.pow,rn=Math.sin,ha=Math.sign||function(e){return e>0?1:e<0?-1:0},oi=Math.sqrt,M1=Math.tan;function A4(e){return e>1?0:e<-1?En:Math.acos(e)}function ki(e){return e>1?$r:e<-1?-$r:Math.asin(e)}function To(){}function T4(e,t){e&&aq.hasOwnProperty(e.type)&&aq[e.type](e,t)}var oq={Feature:function(e,t){T4(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)T4(n[r].geometry,t)}},aq={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){DA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)DA(n[r],t,0)},Polygon:function(e,t){sq(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)sq(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)T4(n[r],t)}};function DA(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function sq(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)DA(e[n],t,1);t.polygonEnd()}function Dp(e,t){e&&oq.hasOwnProperty(e.type)?oq[e.type](e,t):T4(e,t)}function J2(e){return[Xo(e[1],e[0]),ki(e[2])]}function fu(e){var t=e[0],n=e[1],r=un(n);return[r*un(t),r*rn(t),rn(n)]}function Q2(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function k1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function P4(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ey(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ty(e){var t=oi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ny(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function zA(e,t){return Pn(e)>En&&(e-=Math.round(e/Ao)*Ao),[e,t]}zA.invert=zA;function RA(e,t,n){return(e%=Ao)?t||n?ny(cq(e),uq(t,n)):cq(e):t||n?uq(t,n):zA}function lq(e){return function(t,n){return t+=e,Pn(t)>En&&(t-=Math.round(t/Ao)*Ao),[t,n]}}function cq(e){var t=lq(e);return t.invert=lq(-e),t}function uq(e,t){var n=un(e),r=rn(e),i=un(t),o=rn(t);function a(s,l){var c=un(l),u=un(s)*c,f=rn(s)*c,p=rn(l),d=p*n+u*r;return[Xo(f*i-d*o,u*n-p*r),ki(d*i+f*o)]}return a.invert=function(s,l){var c=un(l),u=un(s)*c,f=rn(s)*c,p=rn(l),d=p*i-f*o;return[Xo(f*i+p*o,u*n+d*r),ki(d*n-u*r)]},a}function fq(e){e=RA(e[0]*Lr,e[1]*Lr,e.length>2?e[2]*Lr:0);function t(n){return n=e(n[0]*Lr,n[1]*Lr),n[0]*=Fi,n[1]*=Fi,n}return t.invert=function(n){return n=e.invert(n[0]*Lr,n[1]*Lr),n[0]*=Fi,n[1]*=Fi,n},t}function dq(e,t,n,r,i,o){if(n){var a=un(t),s=rn(t),l=r*n;i==null?(i=t+r*Ao,o=t-l/2):(i=pq(a,i),o=pq(a,o),(r>0?i<o:i>o)&&(i+=r*Ao));for(var c,u=i;r>0?u>o:u<o;u-=l)c=J2([a,-s*un(u),-s*rn(u)]),e.point(c[0],c[1])}}function pq(e,t){t=fu(t),t[0]-=e,ty(t);var n=A4(-t[1]);return((-t[2]<0?-n:n)+Ao-$t)%Ao}function N4(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:To,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function E1(e,t){return Pn(e[0]-t[0])<$t&&Pn(e[1]-t[1])<$t}function L4(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function I4(e,t,n,r,i){var o=[],a=[],s,l;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,g=h[0],v=h[m],y;if(E1(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=h[s])[0],g[1]);i.lineEnd();return}v[0]+=2*$t}o.push(y=new L4(g,h,null,!0)),a.push(y.o=new L4(g,null,y,!1)),o.push(y=new L4(v,h,null,!1)),a.push(y.o=new L4(v,null,y,!0))}}),!!o.length){for(a.sort(t),hq(o),hq(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var c=o[0],u,f;;){for(var p=c,d=!0;p.v;)if((p=p.n)===c)return;u=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,l=u.length;s<l;++s)i.point((f=u[s])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d)for(u=p.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,u=p.z,d=!d}while(!p.v);i.lineEnd()}}}function hq(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function FA(e){return Pn(e[0])<=En?e[0]:ha(e[0])*((Pn(e[0])+En)%Ao-En)}function mq(e,t){var n=FA(t),r=t[1],i=rn(r),o=[rn(n),-un(n),0],a=0,s=0,l=new Ws;i===1?r=$r+$t:i===-1&&(r=-$r-$t);for(var c=0,u=e.length;c<u;++c)if(p=(f=e[c]).length)for(var f,p,d=f[p-1],h=FA(d),m=d[1]/2+IA,g=rn(m),v=un(m),y=0;y<p;++y,h=_,g=S,v=M,d=x){var x=f[y],_=FA(x),w=x[1]/2+IA,S=rn(w),M=un(w),O=_-h,E=O>=0?1:-1,P=E*O,k=P>En,A=g*S;if(l.add(Xo(A*E*rn(P),v*M+A*un(P))),a+=k?O+E*Ao:O,k^h>=n^_>=n){var N=k1(fu(d),fu(x));ty(N);var L=k1(o,N);ty(L);var z=(k^O>=0?-1:1)*ki(L[2]);(r>z||r===z&&(N[0]||N[1]))&&(s+=k^O>=0?1:-1)}}return(a<-$t||a<$t&&l<-M4)^s&1}function D4(e,t,n,r){return function(i){var o=t(i),a=N4(),s=t(a),l=!1,c,u,f,p={point:d,lineStart:m,lineEnd:g,polygonStart:function(){p.point=v,p.lineStart=y,p.lineEnd=x,u=[],c=[]},polygonEnd:function(){p.point=d,p.lineStart=m,p.lineEnd=g,u=x0(u);var _=mq(c,r);u.length?(l||(i.polygonStart(),l=!0),I4(u,L1e,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,w){e(_,w)&&i.point(_,w)}function h(_,w){o.point(_,w)}function m(){p.point=h,o.lineStart()}function g(){p.point=d,o.lineEnd()}function v(_,w){f.push([_,w]),s.point(_,w)}function y(){s.lineStart(),f=[]}function x(){v(f[0][0],f[0][1]),s.lineEnd();var _=s.clean(),w=a.result(),S,M=w.length,O,E,P;if(f.pop(),c.push(f),f=null,!!M){if(_&1){if(E=w[0],(O=E.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<O;++S)i.point((P=E[S])[0],P[1]);i.lineEnd()}return}M>1&&_&2&&w.push(w.pop().concat(w.shift())),u.push(w.filter(N1e))}}return p}}function N1e(e){return e.length>1}function L1e(e,t){return((e=e.x)[0]<0?e[1]-$r-$t:$r-e[1])-((t=t.x)[0]<0?t[1]-$r-$t:$r-t[1])}var BA=D4(function(){return!0},I1e,z1e,[-En,-$r]);function I1e(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?En:-En,l=Pn(o-t);Pn(l-En)<$t?(e.point(t,n=(n+a)/2>0?$r:-$r),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&l>=En&&(Pn(t-r)<$t&&(t-=r*$t),Pn(o-s)<$t&&(o-=s*$t),n=D1e(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function D1e(e,t,n,r){var i,o,a=rn(e-n);return Pn(a)>$t?Ul((rn(t)*(o=un(r))*rn(n)-rn(r)*(i=un(t))*rn(e))/(i*o*a)):(t+r)/2}function z1e(e,t,n,r){var i;if(e==null)i=n*$r,r.point(-En,i),r.point(0,i),r.point(En,i),r.point(En,0),r.point(En,-i),r.point(0,-i),r.point(-En,-i),r.point(-En,0),r.point(-En,i);else if(Pn(e[0]-t[0])>$t){var o=e[0]<t[0]?En:-En;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function gq(e){var t=un(e),n=2*Lr,r=t>0,i=Pn(t)>$t;function o(u,f,p,d){dq(d,e,n,p,u,f)}function a(u,f){return un(u)*un(f)>t}function s(u){var f,p,d,h,m;return{lineStart:function(){h=d=!1,m=1},point:function(g,v){var y=[g,v],x,_=a(g,v),w=r?_?0:c(g,v):_?c(g+(g<0?En:-En),v):0;if(!f&&(h=d=_)&&u.lineStart(),_!==d&&(x=l(f,y),(!x||E1(f,x)||E1(y,x))&&(y[2]=1)),_!==d)m=0,_?(u.lineStart(),x=l(y,f),u.point(x[0],x[1])):(x=l(f,y),u.point(x[0],x[1],2),u.lineEnd()),f=x;else if(i&&f&&r^_){var S;!(w&p)&&(S=l(y,f,!0))&&(m=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}_&&(!f||!E1(f,y))&&u.point(y[0],y[1]),f=y,d=_,p=w},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(h&&d)<<1}}}function l(u,f,p){var d=fu(u),h=fu(f),m=[1,0,0],g=k1(d,h),v=Q2(g,g),y=g[0],x=v-y*y;if(!x)return!p&&u;var _=t*v/x,w=-t*y/x,S=k1(m,g),M=ey(m,_),O=ey(g,w);P4(M,O);var E=S,P=Q2(M,E),k=Q2(E,E),A=P*P-k*(Q2(M,M)-1);if(!(A<0)){var N=oi(A),L=ey(E,(-P-N)/k);if(P4(L,M),L=J2(L),!p)return L;var z=u[0],B=f[0],H=u[1],j=f[1],W;B<z&&(W=z,z=B,B=W);var Z=B-z,ie=Pn(Z-En)<$t,R=ie||Z<$t;if(!ie&&j<H&&(W=H,H=j,j=W),R?ie?H+j>0^L[1]<(Pn(L[0]-z)<$t?H:j):H<=L[1]&&L[1]<=j:Z>En^(z<=L[0]&&L[0]<=B)){var q=ey(E,(-P+N)/k);return P4(q,M),[L,J2(q)]}}}function c(u,f){var p=r?e:En-e,d=0;return u<-p?d|=1:u>p&&(d|=2),f<-p?d|=4:f>p&&(d|=8),d}return D4(a,s,o,r?[0,-e]:[-En,e-En])}function vq(e,t,n,r,i,o){var a=e[0],s=e[1],l=t[0],c=t[1],u=0,f=1,p=l-a,d=c-s,h;if(h=n-a,!(!p&&h>0)){if(h/=p,p<0){if(h<u)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>u&&(u=h)}if(h=i-a,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>u&&(u=h)}else if(p>0){if(h<u)return;h<f&&(f=h)}if(h=r-s,!(!d&&h>0)){if(h/=d,d<0){if(h<u)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>u&&(u=h)}if(h=o-s,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>u&&(u=h)}else if(d>0){if(h<u)return;h<f&&(f=h)}return u>0&&(e[0]=a+u*p,e[1]=s+u*d),f<1&&(t[0]=a+f*p,t[1]=s+f*d),!0}}}}}var ry=1e9,z4=-ry;function iy(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function o(c,u,f,p){var d=0,h=0;if(c==null||(d=a(c,f))!==(h=a(u,f))||l(c,u)<0^f>0)do p.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==h);else p.point(u[0],u[1])}function a(c,u){return Pn(c[0]-e)<$t?u>0?0:3:Pn(c[0]-n)<$t?u>0?2:1:Pn(c[1]-t)<$t?u>0?1:0:u>0?3:2}function s(c,u){return l(c.x,u.x)}function l(c,u){var f=a(c,1),p=a(u,1);return f!==p?f-p:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=N4(),p,d,h,m,g,v,y,x,_,w,S,M={point:O,lineStart:A,lineEnd:N,polygonStart:P,polygonEnd:k};function O(z,B){i(z,B)&&u.point(z,B)}function E(){for(var z=0,B=0,H=d.length;B<H;++B)for(var j=d[B],W=1,Z=j.length,ie=j[0],R,q,J=ie[0],te=ie[1];W<Z;++W)R=J,q=te,ie=j[W],J=ie[0],te=ie[1],q<=r?te>r&&(J-R)*(r-q)>(te-q)*(e-R)&&++z:te<=r&&(J-R)*(r-q)<(te-q)*(e-R)&&--z;return z}function P(){u=f,p=[],d=[],S=!0}function k(){var z=E(),B=S&&z,H=(p=x0(p)).length;(B||H)&&(c.polygonStart(),B&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),H&&I4(p,s,z,o,c),c.polygonEnd()),u=c,p=d=h=null}function A(){M.point=L,d&&d.push(h=[]),w=!0,_=!1,y=x=NaN}function N(){p&&(L(m,g),v&&_&&f.rejoin(),p.push(f.result())),M.point=O,_&&u.lineEnd()}function L(z,B){var H=i(z,B);if(d&&h.push([z,B]),w)m=z,g=B,v=H,w=!1,H&&(u.lineStart(),u.point(z,B));else if(H&&_)u.point(z,B);else{var j=[y=Math.max(z4,Math.min(ry,y)),x=Math.max(z4,Math.min(ry,x))],W=[z=Math.max(z4,Math.min(ry,z)),B=Math.max(z4,Math.min(ry,B))];vq(j,W,e,t,n,r)?(_||(u.lineStart(),u.point(j[0],j[1])),u.point(W[0],W[1]),H||u.lineEnd(),S=!1):H&&(u.lineStart(),u.point(z,B),S=!1)}y=z,x=B,_=H}return M}}function yq(e,t,n){var r=Ku(e,t-$t,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function xq(e,t,n){var r=Ku(e,t-$t,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function jA(){var e,t,n,r,i,o,a,s,l=10,c=l,u=90,f=360,p,d,h,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Ku(Z2(r/u)*u,n,u).map(h).concat(Ku(Z2(s/f)*f,a,f).map(m)).concat(Ku(Z2(t/l)*l,e,l).filter(function(x){return Pn(x%u)>$t}).map(p)).concat(Ku(Z2(o/c)*c,i,c).filter(function(x){return Pn(x%f)>$t}).map(d))}return v.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(m(a).slice(1),h(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(x){return arguments.length?v.extentMajor(x).extentMinor(x):v.extentMinor()},v.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],s=+x[0][1],a=+x[1][1],r>n&&(x=r,r=n,n=x),s>a&&(x=s,s=a,a=x),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],o=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),o>i&&(x=o,o=i,i=x),v.precision(g)):[[t,o],[e,i]]},v.step=function(x){return arguments.length?v.stepMajor(x).stepMinor(x):v.stepMinor()},v.stepMajor=function(x){return arguments.length?(u=+x[0],f=+x[1],v):[u,f]},v.stepMinor=function(x){return arguments.length?(l=+x[0],c=+x[1],v):[l,c]},v.precision=function(x){return arguments.length?(g=+x,p=yq(o,i,90),d=xq(t,e,g),h=yq(s,a,90),m=xq(r,n,g),v):g},v.extentMajor([[-180,-90+$t],[180,90-$t]]).extentMinor([[-180,-80-$t],[180,80+$t]])}function VA(){return jA()()}var zp=e=>e;var HA=new Ws,WA=new Ws,bq,_q,qA,UA,Rp={point:To,lineStart:To,lineEnd:To,polygonStart:function(){Rp.lineStart=R1e,Rp.lineEnd=B1e},polygonEnd:function(){Rp.lineStart=Rp.lineEnd=Rp.point=To,HA.add(Pn(WA)),WA=new Ws},result:function(){var e=HA/2;return HA=new Ws,e}};function R1e(){Rp.point=F1e}function F1e(e,t){Rp.point=wq,bq=qA=e,_q=UA=t}function wq(e,t){WA.add(UA*e-qA*t),qA=e,UA=t}function B1e(){wq(bq,_q)}var GA=Rp;var A1=1/0,R4=A1,oy=-A1,F4=oy,j1e={point:V1e,lineStart:To,lineEnd:To,polygonStart:To,polygonEnd:To,result:function(){var e=[[A1,R4],[oy,F4]];return oy=F4=-(R4=A1=1/0),e}};function V1e(e,t){e<A1&&(A1=e),e>oy&&(oy=e),t<R4&&(R4=t),t>F4&&(F4=t)}var T1=j1e;var $A=0,YA=0,ay=0,B4=0,j4=0,P1=0,XA=0,KA=0,sy=0,Oq,Mq,pu,du,wc={point:Vh,lineStart:Sq,lineEnd:Cq,polygonStart:function(){wc.lineStart=q1e,wc.lineEnd=U1e},polygonEnd:function(){wc.point=Vh,wc.lineStart=Sq,wc.lineEnd=Cq},result:function(){var e=sy?[XA/sy,KA/sy]:P1?[B4/P1,j4/P1]:ay?[$A/ay,YA/ay]:[NaN,NaN];return $A=YA=ay=B4=j4=P1=XA=KA=sy=0,e}};function Vh(e,t){$A+=e,YA+=t,++ay}function Sq(){wc.point=H1e}function H1e(e,t){wc.point=W1e,Vh(pu=e,du=t)}function W1e(e,t){var n=e-pu,r=t-du,i=oi(n*n+r*r);B4+=i*(pu+e)/2,j4+=i*(du+t)/2,P1+=i,Vh(pu=e,du=t)}function Cq(){wc.point=Vh}function q1e(){wc.point=G1e}function U1e(){kq(Oq,Mq)}function G1e(e,t){wc.point=kq,Vh(Oq=pu=e,Mq=du=t)}function kq(e,t){var n=e-pu,r=t-du,i=oi(n*n+r*r);B4+=i*(pu+e)/2,j4+=i*(du+t)/2,P1+=i,i=du*e-pu*t,XA+=i*(pu+e),KA+=i*(du+t),sy+=i*3,Vh(pu=e,du=t)}var ZA=wc;function V4(e){this._context=e}V4.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ao);break}}},result:To};var QA=new Ws,JA,Eq,Aq,ly,cy,H4={point:To,lineStart:function(){H4.point=$1e},lineEnd:function(){JA&&Tq(Eq,Aq),H4.point=To},polygonStart:function(){JA=!0},polygonEnd:function(){JA=null},result:function(){var e=+QA;return QA=new Ws,e}};function $1e(e,t){H4.point=Tq,Eq=ly=e,Aq=cy=t}function Tq(e,t){ly-=e,cy-=t,QA.add(oi(ly*ly+cy*cy)),ly=e,cy=t}var e7=H4;var Pq,W4,Nq,Lq,uy=class{constructor(t){this._append=t==null?Iq:Y1e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Nq||this._append!==W4){let r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Nq=r,W4=this._append,Lq=this._,this._=i}this._+=Lq;break}}}result(){let t=this._;return this._="",t.length?t:null}};function Iq(e){let t=1;this._+=e[0];for(let n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Y1e(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Iq;if(t!==Pq){let n=10**t;Pq=t,W4=function(i){let o=1;this._+=i[0];for(let a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return W4}function q4(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Dp(s,i(o))),o.result()}return a.area=function(s){return Dp(s,i(GA)),GA.result()},a.measure=function(s){return Dp(s,i(e7)),e7.result()},a.bounds=function(s){return Dp(s,i(T1)),T1.result()},a.centroid=function(s){return Dp(s,i(ZA)),ZA.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,zp):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new uy(n)):new V4(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{let l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new uy(n)),a},a.projection(e).digits(n).context(t)}function Hh(e){return function(t){var n=new t7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function t7(){}t7.prototype={constructor:t7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function n7(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Dp(n,e.stream(T1)),t(T1.result()),r!=null&&e.clipExtent(r),e}function Wh(e,t,n){return n7(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function N1(e,t,n){return Wh(e,[[0,0],t],n)}function L1(e,t,n){return n7(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function I1(e,t,n){return n7(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var Dq=16,X1e=un(30*Lr);function r7(e,t){return+t?Z1e(e,t):K1e(e)}function K1e(e){return Hh({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Z1e(e,t){function n(r,i,o,a,s,l,c,u,f,p,d,h,m,g){var v=c-r,y=u-i,x=v*v+y*y;if(x>4*t&&m--){var _=a+p,w=s+d,S=l+h,M=oi(_*_+w*w+S*S),O=ki(S/=M),E=Pn(Pn(S)-1)<$t||Pn(o-f)<$t?(o+f)/2:Xo(w,_),P=e(E,O),k=P[0],A=P[1],N=k-r,L=A-i,z=y*N-v*L;(z*z/x>t||Pn((v*N+y*L)/x-.5)>.3||a*p+s*d+l*h<X1e)&&(n(r,i,o,a,s,l,k,A,E,_/=M,w/=M,S,m,g),g.point(k,A),n(k,A,E,_,w,S,c,u,f,p,d,h,m,g))}}return function(r){var i,o,a,s,l,c,u,f,p,d,h,m,g={point:v,lineStart:y,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=w},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function v(O,E){O=e(O,E),r.point(O[0],O[1])}function y(){f=NaN,g.point=x,r.lineStart()}function x(O,E){var P=fu([O,E]),k=e(O,E);n(f,p,u,d,h,m,f=k[0],p=k[1],u=O,d=P[0],h=P[1],m=P[2],Dq,r),r.point(f,p)}function _(){g.point=v,r.lineEnd()}function w(){y(),g.point=S,g.lineEnd=M}function S(O,E){x(i=O,E),o=f,a=p,s=d,l=h,c=m,g.point=x}function M(){n(f,p,u,d,h,m,o,a,i,s,l,c,Dq,r),g.lineEnd=_,_()}return g}}var J1e=Hh({point:function(e,t){this.stream.point(e*Lr,t*Lr)}});function Q1e(e){return Hh({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function ege(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function zq(e,t,n,r,i,o){if(!o)return ege(e,t,n,r,i);var a=un(o),s=rn(o),l=a*e,c=s*e,u=a/e,f=s/e,p=(s*n-a*t)/e,d=(s*t+a*n)/e;function h(m,g){return m*=r,g*=i,[l*m-c*g+t,n-c*m-l*g]}return h.invert=function(m,g){return[r*(u*m-f*g+p),i*(d-f*m-u*g)]},h}function Ei(e){return D1(function(){return e})()}function D1(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,l=0,c=0,u,f=0,p=1,d=1,h=null,m=BA,g=null,v,y,x,_=zp,w=.5,S,M,O,E,P;function k(z){return O(z[0]*Lr,z[1]*Lr)}function A(z){return z=O.invert(z[0],z[1]),z&&[z[0]*Fi,z[1]*Fi]}k.stream=function(z){return E&&P===z?E:E=J1e(Q1e(u)(m(S(_(P=z)))))},k.preclip=function(z){return arguments.length?(m=z,h=void 0,L()):m},k.postclip=function(z){return arguments.length?(_=z,g=v=y=x=null,L()):_},k.clipAngle=function(z){return arguments.length?(m=+z?gq(h=z*Lr):(h=null,BA),L()):h*Fi},k.clipExtent=function(z){return arguments.length?(_=z==null?(g=v=y=x=null,zp):iy(g=+z[0][0],v=+z[0][1],y=+z[1][0],x=+z[1][1]),L()):g==null?null:[[g,v],[y,x]]},k.scale=function(z){return arguments.length?(n=+z,N()):n},k.translate=function(z){return arguments.length?(r=+z[0],i=+z[1],N()):[r,i]},k.center=function(z){return arguments.length?(o=z[0]%360*Lr,a=z[1]%360*Lr,N()):[o*Fi,a*Fi]},k.rotate=function(z){return arguments.length?(s=z[0]%360*Lr,l=z[1]%360*Lr,c=z.length>2?z[2]%360*Lr:0,N()):[s*Fi,l*Fi,c*Fi]},k.angle=function(z){return arguments.length?(f=z%360*Lr,N()):f*Fi},k.reflectX=function(z){return arguments.length?(p=z?-1:1,N()):p<0},k.reflectY=function(z){return arguments.length?(d=z?-1:1,N()):d<0},k.precision=function(z){return arguments.length?(S=r7(M,w=z*z),L()):oi(w)},k.fitExtent=function(z,B){return Wh(k,z,B)},k.fitSize=function(z,B){return N1(k,z,B)},k.fitWidth=function(z,B){return L1(k,z,B)},k.fitHeight=function(z,B){return I1(k,z,B)};function N(){var z=zq(n,0,0,p,d,f).apply(null,t(o,a)),B=zq(n,r-z[0],i-z[1],p,d,f);return u=RA(s,l,c),M=ny(t,B),O=ny(u,M),S=r7(M,w),L()}function L(){return E=P=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&A,N()}}function z1(e){var t=0,n=En/3,r=D1(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Lr,n=o[1]*Lr):[t*Fi,n*Fi]},i}function Rq(e){var t=un(e);function n(r,i){return[r*t,rn(i)/t]}return n.invert=function(r,i){return[r/t,ki(i*t)]},n}function U4(e,t){var n=rn(e),r=(n+rn(t))/2;if(Pn(r)<$t)return Rq(e);var i=1+n*(2*r-n),o=oi(i)/r;function a(s,l){var c=oi(i-2*r*rn(l))/r;return[c*rn(s*=r),o-c*un(s)]}return a.invert=function(s,l){var c=o-l,u=Xo(s,Pn(c))*ha(c);return c*r<0&&(u-=En*ha(s)*ha(c)),[u/r,ki((i-(s*s+c*c)*r*r)/(2*r))]},a}function Fp(){return z1(U4).scale(155.424).center([0,33.6442])}function fy(){return Fp().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tge(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function i7(){var e,t,n=fy(),r,i=Fp().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Fp().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,c={point:function(p,d){l=[p,d]}};function u(p){var d=p[0],h=p[1];return l=null,r.point(d,h),l||(o.point(d,h),l)||(s.point(d,h),l)}u.invert=function(p){var d=n.scale(),h=n.translate(),m=(p[0]-h[0])/d,g=(p[1]-h[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(p)},u.stream=function(p){return e&&t===p?e:e=tge([n.stream(t=p),i.stream(p),a.stream(p)])},u.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),a.precision(p),f()):n.precision()},u.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),a.scale(p),u.translate(n.translate())):n.scale()},u.translate=function(p){if(!arguments.length)return n.translate();var d=n.scale(),h=+p[0],m=+p[1];return r=n.translate(p).clipExtent([[h-.455*d,m-.238*d],[h+.455*d,m+.238*d]]).stream(c),o=i.translate([h-.307*d,m+.201*d]).clipExtent([[h-.425*d+$t,m+.12*d+$t],[h-.214*d-$t,m+.234*d-$t]]).stream(c),s=a.translate([h-.205*d,m+.212*d]).clipExtent([[h-.214*d+$t,m+.166*d+$t],[h-.115*d-$t,m+.234*d-$t]]).stream(c),f()},u.fitExtent=function(p,d){return Wh(u,p,d)},u.fitSize=function(p,d){return N1(u,p,d)},u.fitWidth=function(p,d){return L1(u,p,d)},u.fitHeight=function(p,d){return I1(u,p,d)};function f(){return e=t=null,u}return u.scale(1070)}function G4(e){return function(t,n){var r=un(t),i=un(n),o=e(r*i);return o===1/0?[2,0]:[o*i*rn(t),o*rn(n)]}}function hu(e){return function(t,n){var r=oi(t*t+n*n),i=e(r),o=rn(i),a=un(i);return[Xo(t*o,r*a),ki(r&&n*o/r)]}}var py=G4(function(e){return oi(2/(1+e))});py.invert=hu(function(e){return 2*ki(e/2)});function o7(){return Ei(py).scale(124.75).clipAngle(180-.001)}var dy=G4(function(e){return(e=A4(e))&&e/rn(e)});dy.invert=hu(function(e){return e});function a7(){return Ei(dy).scale(79.4188).clipAngle(180-.001)}function Bp(e,t){return[e,jh(M1(($r+t)/2))]}Bp.invert=function(e,t){return[e,2*Ul(k4(t))-$r]};function s7(){return l7(Bp).scale(961/Ao)}function l7(e){var t=Ei(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=l=c=null:(a=+f[0][0],s=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):a==null?null:[[a,s],[l,c]]};function u(){var f=En*r(),p=t(fq(t.rotate()).invert([0,0]));return o(a==null?[[p[0]-f,p[1]-f],[p[0]+f,p[1]+f]]:e===Bp?[[Math.max(p[0]-f,a),s],[Math.min(p[0]+f,l),c]]:[[a,Math.max(p[1]-f,s)],[l,Math.min(p[1]+f,c)]])}return u()}function $4(e){return M1(($r+e)/2)}function Y4(e,t){var n=un(e),r=e===t?rn(e):jh(n/un(t))/jh($4(t)/$4(e)),i=n*E4($4(e),r)/r;if(!r)return Bp;function o(a,s){i>0?s<-$r+$t&&(s=-$r+$t):s>$r-$t&&(s=$r-$t);var l=i/E4($4(s),r);return[l*rn(r*a),i-l*un(r*a)]}return o.invert=function(a,s){var l=i-s,c=ha(r)*oi(a*a+l*l),u=Xo(a,Pn(l))*ha(l);return l*r<0&&(u-=En*ha(a)*ha(l)),[u/r,2*Ul(E4(i/c,1/r))-$r]},o}function c7(){return z1(Y4).scale(109.5).parallels([30,30])}function jp(e,t){return[e,t]}jp.invert=jp;function u7(){return Ei(jp).scale(152.63)}function X4(e,t){var n=un(e),r=e===t?rn(e):(n-un(t))/(t-e),i=n/r+e;if(Pn(r)<$t)return jp;function o(a,s){var l=i-s,c=r*a;return[l*rn(c),i-l*un(c)]}return o.invert=function(a,s){var l=i-s,c=Xo(a,Pn(l))*ha(l);return l*r<0&&(c-=En*ha(a)*ha(l)),[c/r,i-ha(r)*oi(a*a+l*l)]},o}function f7(){return z1(X4).scale(131.154).center([0,13.9389])}var hy=1.340264,my=-.081106,gy=893e-6,vy=.003796,K4=oi(3)/2,nge=12;function yy(e,t){var n=ki(K4*rn(t)),r=n*n,i=r*r*r;return[e*un(n)/(K4*(hy+3*my*r+i*(7*gy+9*vy*r))),n*(hy+my*r+i*(gy+vy*r))]}yy.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,l;o<nge&&(s=n*(hy+my*r+i*(gy+vy*r))-t,l=hy+3*my*r+i*(7*gy+9*vy*r),n-=a=s/l,r=n*n,i=r*r*r,!(Pn(a)<M4));++o);return[K4*e*(hy+3*my*r+i*(7*gy+9*vy*r))/un(n),ki(rn(n)/K4)]};function p7(){return Ei(yy).scale(177.158)}function xy(e,t){var n=un(t),r=un(e)*n;return[n*rn(e)/r,rn(t)/r]}xy.invert=hu(Ul);function d7(){return Ei(xy).scale(144.049).clipAngle(60)}function h7(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,l=null,c,u,f,p=1,d=1,h=Hh({point:function(_,w){var S=x([_,w]);this.stream.point(S[0],S[1])}}),m=zp,g,v;function y(){return p=e*r,d=e*i,g=v=null,x}function x(_){var w=_[0]*p,S=_[1]*d;if(o){var M=S*a-w*s;w=w*a+S*s,S=M}return[w+t,S+n]}return x.invert=function(_){var w=_[0]-t,S=_[1]-n;if(o){var M=S*a+w*s;w=w*a-S*s,S=M}return[w/p,S/d]},x.stream=function(_){return g&&v===_?g:g=h(m(v=_))},x.postclip=function(_){return arguments.length?(m=_,l=c=u=f=null,y()):m},x.clipExtent=function(_){return arguments.length?(m=_==null?(l=c=u=f=null,zp):iy(l=+_[0][0],c=+_[0][1],u=+_[1][0],f=+_[1][1]),y()):l==null?null:[[l,c],[u,f]]},x.scale=function(_){return arguments.length?(e=+_,y()):e},x.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],y()):[t,n]},x.angle=function(_){return arguments.length?(o=_%360*Lr,s=rn(o),a=un(o),y()):o*Fi},x.reflectX=function(_){return arguments.length?(r=_?-1:1,y()):r<0},x.reflectY=function(_){return arguments.length?(i=_?-1:1,y()):i<0},x.fitExtent=function(_,w){return Wh(x,_,w)},x.fitSize=function(_,w){return N1(x,_,w)},x.fitWidth=function(_,w){return L1(x,_,w)},x.fitHeight=function(_,w){return I1(x,_,w)},x}function by(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}by.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Pn(i)>$t&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function m7(){return Ei(by).scale(175.295)}function _y(e,t){return[un(t)*rn(e),rn(t)]}_y.invert=hu(ki);function g7(){return Ei(_y).scale(249.5).clipAngle(90+$t)}function wy(e,t){var n=un(t),r=1+un(e)*n;return[n*rn(e)/r,rn(t)/r]}wy.invert=hu(function(e){return 2*Ul(e)});function v7(){return Ei(wy).scale(250).clipAngle(142)}function Sy(e,t){return[jh(M1(($r+t)/2)),-e]}Sy.invert=function(e,t){return[-t,2*Ul(k4(e))-$r]};function y7(){var e=l7(Sy),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var x7={};Fc(x7,{geoAlbers:()=>fy,geoAlbersUsa:()=>i7,geoAzimuthalEqualArea:()=>o7,geoAzimuthalEqualAreaRaw:()=>py,geoAzimuthalEquidistant:()=>a7,geoAzimuthalEquidistantRaw:()=>dy,geoConicConformal:()=>c7,geoConicConformalRaw:()=>Y4,geoConicEqualArea:()=>Fp,geoConicEqualAreaRaw:()=>U4,geoConicEquidistant:()=>f7,geoConicEquidistantRaw:()=>X4,geoEqualEarth:()=>p7,geoEqualEarthRaw:()=>yy,geoEquirectangular:()=>u7,geoEquirectangularRaw:()=>jp,geoGnomonic:()=>d7,geoGnomonicRaw:()=>xy,geoIdentity:()=>h7,geoMercator:()=>s7,geoMercatorRaw:()=>Bp,geoNaturalEarth1:()=>m7,geoNaturalEarth1Raw:()=>by,geoOrthographic:()=>g7,geoOrthographicRaw:()=>_y,geoProjection:()=>Ei,geoProjectionMutator:()=>D1,geoStereographic:()=>v7,geoStereographicRaw:()=>wy,geoTransverseMercator:()=>y7,geoTransverseMercatorRaw:()=>Sy});var rge=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ige(e){if(typeof e=="function")return e;let t=`geo${aa(e)}`,n=x7[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function oge(e){return{type:"FeatureCollection",features:e.flatMap(t=>age(t).features)}}function age(e){let t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;let n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function sge(e,t){var n;for(let[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function lge(e,t,n,r){let i=()=>{let s=t.filter(Fq);return s.find(c=>c.sphere)?{type:"Sphere"}:oge(s.filter(c=>!c.sphere).flatMap(c=>c.data.value))},{outline:o=i()}=r,{size:a="fitExtent"}=r;if(a==="fitExtent")return cge(e,o,n);if(a==="fitWidth")return uge(e,o,n)}function cge(e,t,n){let{x:r,y:i,width:o,height:a}=n;e.fitExtent([[r,i],[o,a]],t)}function uge(e,t,n){let{width:r,height:i}=n,[[o,a],[s,l]]=q4(e.fitWidth(r,t)).bounds(t),c=Math.ceil(l-a),u=Math.min(Math.ceil(s-o),c),f=e.scale()*(u-1)/u,[p,d]=e.translate(),h=d+(i-c)/2;e.scale(f).translate([p,h]).precision(.2)}function fge(e){let{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});let{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[VA()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function Fq(e){return e.type==="geoPath"}var b7=()=>e=>{let{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];let{type:r="equalEarth"}=n,i=rge(n,["type"]),o=ige(r),a=t.map(fge),s;function l(){return[["custom",(f,p,d,h)=>{let m=o();lge(m,a,{x:f,y:p,width:d,height:h},i),sge(m,i),s=q4(m);let v=new ai({domain:[f,f+d]}),y=new ai({domain:[p,p+h]}),x=w=>{let S=m(w);if(!S)return[null,null];let[M,O]=S;return[v.map(M),y.map(O)]},_=w=>{if(!w)return null;let[S,M]=w,O=[v.invert(S),y.invert(M)];return m.invert(O)};return{transform:w=>x(w),untransform:w=>_(w)}}]]}function c(f){let{style:p,tooltip:d={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:Ah(d,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},p),{d:h=>s(h)||[]})})}let u=f=>Fq(f)?c(f):f;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:a.flatMap(u)})]};b7.props={};function _7(e,t){let{__data__:n}=e,{markKey:r,index:i,seriesIndex:o}=n,{markState:a}=t,s=Array.from(a.keys()).find(l=>l.key===r);if(s)return o?o.map(l=>s.data[l]):s.data[i]}function pge(e){return R1(e,t=>t.className==="component")}function dge(e){return R1(e,t=>t.className==="element")}function hge(e){return R1(e,t=>t.className==="label")}function Po(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);let{target:o}=i;if(!o)return;let{className:a}=o;if(a==="plot")return;let s=dge(o),l=pge(o),c=hge(o),u=s||l||c;if(!u)return;let{className:f,markType:p}=u,d=Object.assign(Object.assign({},i),{nativeEvent:!0});f==="element"?(d.data={data:_7(u,t)},n.emit(`element:${e}`,d),n.emit(`${p}:${e}`,d)):f==="label"?(d.data={data:u.attributes.datum},n.emit(`label:${e}`,d),n.emit(`${a}:${e}`,d)):(n.emit(`component:${e}`,d),n.emit(`${a}:${e}`,d))}}function w7(){return(e,t,n)=>{let{container:r,view:i}=e,o=Po(pr.CLICK,i,n,M=>M.detail===1),a=Po(pr.DBLCLICK,i,n,M=>M.detail===2),s=Po(pr.POINTER_TAP,i,n),l=Po(pr.POINTER_DOWN,i,n),c=Po(pr.POINTER_UP,i,n),u=Po(pr.POINTER_OVER,i,n),f=Po(pr.POINTER_OUT,i,n),p=Po(pr.POINTER_MOVE,i,n),d=Po(pr.POINTER_ENTER,i,n),h=Po(pr.POINTER_LEAVE,i,n),m=Po(pr.POINTER_UPOUTSIDE,i,n),g=Po(pr.DRAG_START,i,n),v=Po(pr.DRAG,i,n),y=Po(pr.DRAG_END,i,n),x=Po(pr.DRAG_ENTER,i,n),_=Po(pr.DRAG_LEAVE,i,n),w=Po(pr.DRAG_OVER,i,n),S=Po(pr.DROP,i,n);return r.addEventListener("click",o),r.addEventListener("click",a),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",l),r.addEventListener("pointerup",c),r.addEventListener("pointerover",u),r.addEventListener("pointerout",f),r.addEventListener("pointermove",p),r.addEventListener("pointerenter",d),r.addEventListener("pointerleave",h),r.addEventListener("pointerupoutside",m),r.addEventListener("dragstart",g),r.addEventListener("drag",v),r.addEventListener("dragend",y),r.addEventListener("dragenter",x),r.addEventListener("dragleave",_),r.addEventListener("dragover",w),r.addEventListener("drop",S),()=>{r.removeEventListener("click",o),r.removeEventListener("click",a),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",l),r.removeEventListener("pointerup",c),r.removeEventListener("pointerover",u),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",p),r.removeEventListener("pointerenter",d),r.removeEventListener("pointerleave",h),r.removeEventListener("pointerupoutside",m),r.removeEventListener("dragstart",g),r.removeEventListener("drag",v),r.removeEventListener("dragend",y),r.removeEventListener("dragenter",x),r.removeEventListener("dragleave",_),r.removeEventListener("dragover",w),r.removeEventListener("drop",S)}}}w7.props={reapplyWhenUpdate:!0};function Bq(){return{"component.axisRadar":KS,"component.axisLinear":Qs,"component.axisArc":$S,"component.legendContinuousBlock":ZS,"component.legendContinuousBlockSize":JS,"component.legendContinuousSize":_1,"interaction.event":w7,"composition.mark":S4,"composition.view":w4,"shape.label.label":k3}}var mge=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _r(e,t){let n=Object.assign(Object.assign({},Bq()),t),r=o=>{if(typeof o!="string")return o;let a=`${e}.${o}`;return n[a]||Kc(`Unknown Component: ${a}`)};return[(o,a)=>{let{type:s}=o,l=mge(o,["type"]);s||Kc("Plot type is required!");let c=r(s);return c?.(l,a)},r]}function S7(e){let{canvas:t,group:n}=e;return t?.document||n?.ownerDocument||Kc("Cannot find library document")}var jq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Vq(e,t,n){let[r]=_r("coordinate",n),{innerHeight:i,innerWidth:o,insetLeft:a,insetTop:s,insetRight:l,insetBottom:c}=e,{coordinates:u=[]}=t,f=gge(u),p=f[0].type==="cartesian3D",d=Object.assign(Object.assign({},e),{x:a,y:s,width:o-a-l,height:i-c-s,transformations:f.flatMap(r)});return p?new Z4.Coordinate3D(d):new Z4.Coordinate(d)}function C7(e,t){let{coordinate:n={},coordinates:r}=e,i=jq(e,["coordinate","coordinates"]);if(r)return e;let{type:o,transform:a=[]}=n,s=jq(n,["type","transform"]);if(!o)return Object.assign(Object.assign({},i),{coordinates:a});let[,l]=_r("coordinate",t),{transform:c=!1}=l(o).props||{};if(c)throw new Error(`Unknown coordinate: ${o}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:o},s),...a]})}function Gl(e,t){return e.filter(n=>n.type===t)}function df(e){return Gl(e,"polar").length>0}function Hq(e){return Gl(e,"helix").length>0}function qh(e){return Gl(e,"transpose").length%2===1}function Wq(e){return Gl(e,"parallel").length>0}function J4(e){return Gl(e,"theta").length>0}function qq(e){return Gl(e,"reflect").length>0}function Uh(e){return Gl(e,"radial").length>0}function Uq(e){return Gl(e,"radar").length>0}function Gq(e){return Gl(e,"reflectY").length>0}function gge(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}var Cy={};Fc(Cy,{interpolateBlues:()=>NU,interpolateBrBG:()=>fU,interpolateBuGn:()=>bU,interpolateBuPu:()=>_U,interpolateCividis:()=>FU,interpolateCool:()=>VU,interpolateCubehelixDefault:()=>BU,interpolateGnBu:()=>wU,interpolateGreens:()=>LU,interpolateGreys:()=>IU,interpolateInferno:()=>$U,interpolateMagma:()=>GU,interpolateOrRd:()=>SU,interpolateOranges:()=>RU,interpolatePRGn:()=>pU,interpolatePiYG:()=>dU,interpolatePlasma:()=>YU,interpolatePuBu:()=>OU,interpolatePuBuGn:()=>CU,interpolatePuOr:()=>hU,interpolatePuRd:()=>MU,interpolatePurples:()=>DU,interpolateRainbow:()=>HU,interpolateRdBu:()=>mU,interpolateRdGy:()=>gU,interpolateRdPu:()=>kU,interpolateRdYlBu:()=>vU,interpolateRdYlGn:()=>yU,interpolateReds:()=>zU,interpolateSinebow:()=>WU,interpolateSpectral:()=>xU,interpolateTurbo:()=>qU,interpolateViridis:()=>UU,interpolateWarm:()=>jU,interpolateYlGn:()=>AU,interpolateYlGnBu:()=>EU,interpolateYlOrBr:()=>TU,interpolateYlOrRd:()=>PU,schemeAccent:()=>Yq,schemeBlues:()=>Y7,schemeBrBG:()=>k7,schemeBuGn:()=>z7,schemeBuPu:()=>R7,schemeCategory10:()=>$q,schemeDark2:()=>Xq,schemeGnBu:()=>F7,schemeGreens:()=>X7,schemeGreys:()=>K7,schemeObservable10:()=>Kq,schemeOrRd:()=>B7,schemeOranges:()=>Q7,schemePRGn:()=>E7,schemePaired:()=>Zq,schemePastel1:()=>Jq,schemePastel2:()=>Qq,schemePiYG:()=>A7,schemePuBu:()=>V7,schemePuBuGn:()=>j7,schemePuOr:()=>T7,schemePuRd:()=>H7,schemePurples:()=>Z7,schemeRdBu:()=>P7,schemeRdGy:()=>N7,schemeRdPu:()=>W7,schemeRdYlBu:()=>L7,schemeRdYlGn:()=>I7,schemeReds:()=>J7,schemeSet1:()=>eU,schemeSet2:()=>tU,schemeSet3:()=>nU,schemeSpectral:()=>D7,schemeTableau10:()=>rU,schemeYlGn:()=>U7,schemeYlGnBu:()=>q7,schemeYlOrBr:()=>G7,schemeYlOrRd:()=>$7});function Mt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var $q=Mt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Yq=Mt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var Xq=Mt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var Kq=Mt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var Zq=Mt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var Jq=Mt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var Qq=Mt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var eU=Mt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var tU=Mt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var nU=Mt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");var rU=Mt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function O7(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function iU(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return O7((n-r/t)*t,a,i,o,s)}}function oU(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return O7((n-r/t)*t,i,o,a,s)}}var Q4=e=>()=>e;function aU(e,t){return function(n){return e+n*t}}function vge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function sU(e,t){var n=t-e;return n?aU(e,n>180||n<-180?n-360*Math.round(n/360):n):Q4(isNaN(e)?t:e)}function lU(e){return(e=+e)==1?hf:function(t,n){return n-t?vge(t,n,e):Q4(isNaN(t)?n:t)}}function hf(e,t){var n=t-e;return n?aU(e,n):Q4(isNaN(e)?t:e)}var yge=function e(t){var n=lU(t);function r(i,o){var a=n((i=_p(i)).r,(o=_p(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=hf(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function cU(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=_p(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=o(l),s+""}}}var M7=cU(iU),xge=cU(oU);function uU(e){return function t(n){n=+n;function r(i,o){var a=e((i=Na(i)).h,(o=Na(o)).h),s=hf(i.s,o.s),l=hf(i.l,o.l),c=hf(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}var bge=uU(sU),F1=uU(hf);var mn=e=>M7(e[e.length-1]);var k7=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Mt),fU=mn(k7);var E7=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Mt),pU=mn(E7);var A7=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Mt),dU=mn(A7);var T7=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Mt),hU=mn(T7);var P7=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Mt),mU=mn(P7);var N7=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Mt),gU=mn(N7);var L7=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Mt),vU=mn(L7);var I7=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Mt),yU=mn(I7);var D7=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Mt),xU=mn(D7);var z7=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Mt),bU=mn(z7);var R7=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Mt),_U=mn(R7);var F7=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Mt),wU=mn(F7);var B7=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Mt),SU=mn(B7);var j7=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Mt),CU=mn(j7);var V7=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Mt),OU=mn(V7);var H7=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Mt),MU=mn(H7);var W7=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Mt),kU=mn(W7);var q7=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Mt),EU=mn(q7);var U7=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Mt),AU=mn(U7);var G7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Mt),TU=mn(G7);var $7=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Mt),PU=mn($7);var Y7=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Mt),NU=mn(Y7);var X7=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Mt),LU=mn(X7);var K7=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Mt),IU=mn(K7);var Z7=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Mt),DU=mn(Z7);var J7=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Mt),zU=mn(J7);var Q7=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Mt),RU=mn(Q7);function FU(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var BU=F1(Na(300,.5,0),Na(-240,.5,1));var jU=F1(Na(-100,.75,.35),Na(80,1.5,.8)),VU=F1(Na(260,.75,.35),Na(80,1.5,.8)),eC=Na();function HU(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return eC.h=360*e-100,eC.s=1.5-1.5*t,eC.l=.8-.9*t,eC+""}var tC=_p(),_ge=Math.PI/3,wge=Math.PI*2/3;function WU(e){var t;return e=(.5-e)*Math.PI,tC.r=255*(t=Math.sin(e))*t,tC.g=255*(t=Math.sin(e+_ge))*t,tC.b=255*(t=Math.sin(e+wge))*t,tC+""}function qU(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function nC(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var UU=nC(Mt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),GU=nC(Mt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$U=nC(Mt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),YU=nC(Mt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function tG(e,t,n,r,i,o){let{guide:a={}}=n,s=Ege(e,t,n);if(typeof s!="string")return n;let l=Age(s,e,t,n),c=Oge(s,l,n);return Object.assign(Object.assign(Object.assign({},n),Pge(s,e,t,n,r)),{domain:c,range:Tge(s,e,t,n,c,i,o),expectedDomain:l,guide:a,name:e,type:s})}function nG(e,t){let n={};for(let r of e){let{values:i,name:o}=r,a=t[o];for(let s of i){let{name:l,value:c}=s;n[l]=c.map(u=>a.map(u))}}return n}function rG(e,t){let n=Array.from(e.values()).flatMap(i=>i.channels);zd(n,i=>i.map(o=>t.get(o.scale.uid)),i=>i.name).filter(([,i])=>i.some(o=>typeof o.getOptions().groupTransform=="function")&&i.every(o=>o.getTicks)).map(i=>i[1]).forEach(i=>{let o=i.map(a=>a.getOptions().groupTransform)[0];o(i)})}function iG(e,t){var n;let{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],o=Array.from(new Set(e.flatMap(s=>s.channels.map(l=>l.scale)))),a=new Map(o.map(s=>[s.name,s]));for(let s of r){let l=Cge(s);for(let c of l){let u=a.get(c),f=((n=s.scale)===null||n===void 0?void 0:n[c])||{},{independent:p=!1}=f;if(u&&!p){let{guide:d}=u,h=typeof d=="boolean"?{}:d;u.guide=_e({},h,s),Object.assign(u,f)}else{let d=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:c,guide:Pd(s,i)});o.push(d)}}}return o}function Sge(e){if(!e||!Array.isArray(e))return[cc,cc];let t,n;return[o=>{var a;t=o.map.bind(o),n=(a=o.invert)===null||a===void 0?void 0:a.bind(o);let s=e.filter(([p])=>typeof p=="function"),l=e.filter(([p])=>typeof p!="function"),c=new Map(l);if(o.map=p=>{for(let[d,h]of s)if(d(p))return h;return c.has(p)?c.get(p):t(p)},!n)return o;let u=new Map(l.map(([p,d])=>[d,p])),f=new Map(s.map(([p,d])=>[d,p]));return o.invert=p=>f.has(p)?p:u.has(p)?u.get(p):n(p),o},o=>(t!==null&&(o.map=t),n!==null&&(o.invert=n),o)]}function tT(e,t){let n=Object.keys(e);for(let r of Object.values(t)){let{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{let o=n.filter(l=>l.startsWith(i)).map(l=>+(l.replace(i,"")||0)),a=kn(o)+1,s=`${i}${a}`;e[s]=r,r.getOptions().key=s}}return e}function nT(e,t){let[n]=_r("scale",t),{relations:r}=e,[i]=Sge(r),o=n(e);return i(o)}function oG(e){let t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));XU(t,"x"),XU(t,"y")}function Cge(e){let{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(o=>i.includes(o)):[]}function XU(e,t){let n=e.filter(({name:o,facet:a=!0})=>a&&o===t),r=n.flatMap(o=>o.domain),i=n.every(aG)?_o(r):n.every(sG)?Array.from(new Set(r)):null;if(i!==null)for(let o of n)o.domain=i}function Oge(e,t,n){let{ratio:r}=n;return r==null?t:aG({type:e})?Mge(t,r,e):sG({type:e})?kge(t,r):t}function Mge(e,t,n){let r=e.map(Number),i=new ai({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(o=>new Date(i.map(o))):e.map(o=>i.map(o))}function kge(e,t){let n=Math.round(e.length*t);return e.slice(0,n)}function aG(e){let{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function sG(e){let{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function Ege(e,t,n){let{type:r,domain:i,range:o,quantitative:a,ordinal:s}=n;return r!==void 0?r:Wge(t)?"identity":typeof o=="string"?"linear":(i||o||[]).length>2?eT(e,s):i!==void 0?QU([i])?eT(e,s):eG(t)?"time":ZU(e,o,a):QU(t)?eT(e,s):eG(t)?"time":ZU(e,o,a)}function Age(e,t,n,r){let{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return JU(Fge(n,r),r);case"band":case"ordinal":case"point":return Bge(n);case"quantile":return jge(n);case"sequential":return JU(Vge(n),r);default:return[]}}function Tge(e,t,n,r,i,o,a){let{range:s}=r;if(typeof s=="string")return Nge(s);if(s!==void 0)return s;let{rangeMin:l,rangeMax:c}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{let u=KU(n,r,i,o,a),[f,p]=Hge(t,u);return[l??f,c??p]}case"band":case"point":return[l??(t==="size"?5:0),c??(t==="size"?10:1)];case"ordinal":return KU(n,r,i,o,a);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function Pge(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return Dge(i,r);case"band":case"point":return zge(e,t,i,r);case"sequential":return Ige(r);default:return r}}function KU(e,t,n,r,i){let[o]=_r("palette",i),{category10:a,category20:s}=r,l=LD(n).length<=a.length?a:s,{palette:c=l,offset:u}=t;if(Array.isArray(c))return c;try{return o({type:c})}catch{let p=Lge(c,n,u);if(p)return p;throw new Error(`Unknown Component: ${c} `)}}function Nge(e){return e.split("-")}function Lge(e,t,n=r=>r){if(!e)return null;let r=aa(e),i=Cy[`scheme${r}`],o=Cy[`interpolate${r}`];if(!i&&!o)return null;if(i){if(!i.some(Array.isArray))return i;let a=i[t.length];if(a)return a}return t.map((a,s)=>o(n(s/t.length)))}function Ige(e){let{palette:t="ylGnBu",offset:n}=e,r=aa(t),i=Cy[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?o=>i(n(o)):i}}function Dge(e,t){let{interpolate:n=Tl,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function zge(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});let i=Rge(e,t,n),{paddingInner:o=i,paddingOuter:a=i}=r;return Object.assign(Object.assign({},r),{paddingInner:o,paddingOuter:a,padding:i,unknown:NaN})}function Rge(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?J4(n)?0:.1:e==="point"?.5:0}function eT(e,t){return t||(qge(e)?"point":"ordinal")}function ZU(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function JU(e,t){if(e.length===0)return e;let{domainMin:n,domainMax:r}=t,[i,o]=e;return[n??i,r??o]}function Fge(e,t){let{zero:n=!1}=t,r=1/0,i=-1/0;for(let o of e)for(let a of o)qn(a)&&(r=Math.min(r,+a),i=Math.max(i,+a));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function Bge(e){return Array.from(new Set(e.flat()))}function jge(e){return e.flat().sort()}function Vge(e){let t=1/0,n=-1/0;for(let r of e)for(let i of r)qn(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function Hge(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[ND(t),v5(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function QU(e){return rT(e,t=>{let n=typeof t;return n==="string"||n==="boolean"})}function eG(e){return rT(e,t=>t instanceof Date)}function Wge(e){return rT(e,Zc)}function rT(e,t){for(let n of e)if(n.some(t))return!0;return!1}function qge(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function lG(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function cG(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;let{type:t,domain:n,range:r,interpolator:i}=e,o=n&&n.length>0,a=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&o&&a||["sequential"].includes(t)&&o&&(a||i)||["constant","identity"].includes(t)&&a)}var uG={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},fG={threshold:"threshold",quantize:"quantize",quantile:"quantile"},pG={ordinal:"ordinal",band:"band",point:"point"},dG={constant:"constant"};var Vp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hG(e,t,n){let{coordinates:r=[],title:i}=t,[,o]=_r("component",n),a=e.filter(({guide:u})=>u!==null),s=[],l=Qge(t,e,n);if(s.push(...l),i){let{props:u}=o("title"),{defaultPosition:f,defaultOrientation:p,defaultOrder:d,defaultSize:h,defaultCrossPadding:m}=u,g=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:p,order:d,crossPadding:m[0],defaultSize:h},g))}return Yge(a,r).forEach(([u,f])=>{let{props:p}=o(u),{defaultPosition:d,defaultPlane:h="xy",defaultOrientation:m,defaultSize:g,defaultOrder:v,defaultLength:y,defaultPadding:x=[0,0],defaultCrossPadding:_=[0,0]}=p,w=_e({},...f),{guide:S,field:M}=w,O=Array.isArray(S)?S:[S];for(let E of O){let[P,k]=Zge(u,d,m,E,f,a,r);if(!P&&!k)continue;let A=P==="left"||P==="right",N=A?x[1]:x[0],L=A?_[1]:_[0],{size:z,order:B=v,length:H=y,padding:j=N,crossPadding:W=L}=E;s.push(Object.assign(Object.assign({title:M},E),{defaultSize:g,length:H,position:P,plane:h,orientation:k,padding:j,order:B,crossPadding:W,size:z,type:u,scales:f}))}}),s}function oT(e,t,n,r,i){let[o]=_r("component",r),{scaleInstances:a,scale:s,bbox:l}=e,c=Vp(e,["scaleInstances","scale","bbox"]),u={bbox:l,library:r};return o(c)({coordinate:t,library:r,markState:i,scales:a,theme:n,value:u,scale:s})}function mG(e){return e.map(t=>{let n=_e(t,t.style);return delete n.style,n})}function iC(e,t){let n=["left","right","bottom","top"];return y0(e,({type:o,position:a,group:s})=>n.includes(a)?s===void 0?o.startsWith("legend")?`legend-${a}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,o])=>{if(o.length===1)return o[0];if(t!==void 0){let u=o.filter(m=>m.length!==void 0).map(m=>m.length),f=Ci(u);if(f>t)return o.forEach(m=>m.group=Symbol("independent")),o;let p=t-f,d=o.length-u.length,h=p/d;o.forEach(m=>{m.length===void 0&&(m.length=h)})}let a=kn(o,u=>u.size),s=kn(o,u=>u.order),l=kn(o,u=>u.crossPadding),c=o[0].position;return{type:"group",size:a,order:s,position:c,children:o,crossPadding:l}})}function Uge(e,t){let n=["shape","size","color","opacity"],r=(p,d)=>p==="constant"&&d==="size",i=e.filter(({type:p,name:d})=>typeof p=="string"&&n.includes(d)&&!r(p,d)),o=i.filter(({type:p})=>p==="constant"),a=i.filter(({type:p})=>p!=="constant"),l=y0(a,p=>p.field?p.field:Symbol("independent")).map(([p,d])=>[p,[...d,...o]]).filter(([,p])=>p.some(d=>d.type!=="constant")),c=new Map(l);if(c.size===0)return[];let u=p=>p.sort(([d],[h])=>d.localeCompare(h));return Array.from(c).map(([,p])=>{let h=DD(p).sort((m,g)=>g.length-m.length).map(m=>({combination:m,option:m.map(g=>[g.name,Gge(g)])}));for(let{option:m,combination:g}of h)if(!m.every(v=>v[1]==="constant")&&m.every(v=>v[1]==="discrete"||v[1]==="constant"))return["legendCategory",g];for(let[m,g]of eq)for(let{option:v,combination:y}of h)if(g.some(x=>gv(u(x),u(v))))return[m,y];return null}).filter(qn)}function Gge(e){let{type:t}=e;return typeof t!="string"?null:t in uG?"continuous":t in pG?"discrete":t in fG?"distribution":t in dG?"constant":null}function $ge(e,t){return e.map(n=>{let{name:r}=n;if(Hq(t)||J4(t)||qh(t)&&(df(t)||Uh(t)))return null;if(r.startsWith("x"))return df(t)?["axisArc",[n]]:Uh(t)?["axisLinear",[n]]:[qh(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return df(t)?["axisLinear",[n]]:Uh(t)?["axisArc",[n]]:[qh(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(Uq(t))return["axisRadar",[n]];if(!df(t))return["axisY",[n]]}return null}).filter(qn)}function Yge(e,t){let n=e.filter(r=>cG(r));return[...Uge(n,t),...$ge(n,t)]}function iT(e){let t=Gl(e,"polar");if(t.length){let r=t[t.length-1],{startAngle:i,endAngle:o}=zb(r);return[i,o]}let n=Gl(e,"radial");if(n.length){let r=n[n.length-1],{startAngle:i,endAngle:o}=Fb(r);return[i,o]}return[-Math.PI/2,Math.PI/2*3]}function Xge(e){let t=/position(\d*)/g.exec(e);return t?+t[1]:null}function Kge(e,t,n,r,i){let{name:o}=n[0];if(e==="axisRadar"){let a=r.filter(f=>f.name.startsWith("position")),s=Xge(o);if(o===a.slice(-1)[0].name||s===null)return[null,null];let[l,c]=iT(i);return["center",(c-l)/(a.length-1)*s+l]}if(e==="axisY"&&Wq(i))return qh(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){let[a]=iT(i);return["center",a]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:df(i)?["center",null]:Uh(i)?["center",null]:e==="axisX"&&qq(i)||e==="axisX"&&Gq(i)?["top",null]:t}function Zge(e,t,n,r,i,o,a){let[s]=iT(a),l=[r.position||t,s??n];return typeof e=="string"&&e.startsWith("axis")?Kge(e,l,i,o,a):typeof e=="string"&&e.startsWith("legend")&&df(a)&&r.position==="center"?["center","vertical"]:l}function Jge(e,t,n=[]){return e==="x"?qh(n)?`${t}Y`:`${t}X`:e==="y"?qh(n)?`${t}X`:`${t}Y`:null}function Qge(e,t,n){let[,r]=_r("component",n),{coordinates:i}=e;function o(a,s,l,c){let u=Jge(s,a,i);if(!c||!u)return;let{props:f}=r(u),{defaultPosition:p,defaultSize:d,defaultOrder:h,defaultCrossPadding:[m]}=f;return Object.assign(Object.assign({position:p,defaultSize:d,order:h,type:u,crossPadding:m},c),{scales:[l]})}return t.filter(a=>a.slider||a.scrollbar).flatMap(a=>{let{slider:s,scrollbar:l,name:c}=a;return[o("slider",c,a,s),o("scrollbar",c,a,l)]}).filter(a=>!!a)}function aT(e,t,n,r,i,o){let{type:a}=e;if(!["left","right","bottom","top"].includes(r)||typeof a!="string")return;let l=a;return(l.startsWith("axis")?ive:l.startsWith("group")?eve:l.startsWith("legendContinuous")?ove:l==="legendCategory"?ave:l.startsWith("slider")?rve:l==="title"?nve:l.startsWith("scrollbar")?tve:()=>{})(e,t,n,r,i,o)}function eve(e,t,n,r,i,o){let{children:a}=e,s=kn(a,c=>c.crossPadding);a.forEach(c=>c.crossPadding=s),a.forEach(c=>aT(c,t,n,r,i,o));let l=kn(a,c=>c.size);e.size=l,a.forEach(c=>c.size=l)}function tve(e,t,n,r,i,o){let{trackSize:a=6}=_e({},i.scrollbar,e);e.size=a}function nve(e,t,n,r,i,o){let a=_e({},i.title,e),{title:s,subtitle:l,spacing:c=0}=a,u=Vp(a,["title","subtitle","spacing"]);if(s){let f=Ke(u,"title"),p=rC(s,f);e.size=p.height}if(l){let f=Ke(u,"subtitle"),p=rC(l,f);e.size+=c+p.height}}function rve(e,t,n,r,i,o){let a=()=>{let{slider:u}=i;return _e({},u,e)},{trackSize:s,handleIconSize:l}=a(),c=Math.max(s,l*2.4);e.size=c}function ive(e,t,n,r,i,o){var a;e.transform=e.transform||[{type:"hide"}];let s=r==="left"||r==="right",l=sT(e,r,i),{tickLength:c=0,labelSpacing:u=0,titleSpacing:f=0,labelAutoRotate:p}=l,d=Vp(l,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),h=Oy(e,o),m=My(d,h),g=c+u;if(m&&m.length){let y=kn(m,_=>_.width),x=kn(m,_=>_.height);if(s)e.size=y+g;else{let{tickFilter:_,labelTransform:w}=e;cve(h,m,t,n,_)&&!w&&p!==!1&&p!==null?(e.labelTransform="rotate(90)",e.size=y+g):(e.labelTransform=(a=e.labelTransform)!==null&&a!==void 0?a:"rotate(0)",e.size=x+g)}}else e.size=c;let v=ky(d);v&&(s?e.size+=f+v.width:e.size+=f+v.height)}function ove(e,t,n,r,i,o){let s=(()=>{let{legendContinuous:_}=i;return _e({},_,e)})(),{labelSpacing:l=0,titleSpacing:c=0}=s,u=Vp(s,["labelSpacing","titleSpacing"]),f=r==="left"||r==="right",p=Ke(u,"ribbon"),{size:d}=p,h=Ke(u,"handleIcon"),{size:m}=h,g=Math.max(d,m*2.4);e.size=g;let v=Oy(e,o),y=My(u,v);if(y){let _=f?"width":"height",w=kn(y,S=>S[_]);e.size+=w+l}let x=ky(u);x&&(f?e.size=Math.max(e.size,x.width):e.size+=c+x.height)}function ave(e,t,n,r,i,o){let s=(()=>{let{legendCategory:L}=i,{title:z}=e,[B,H]=Array.isArray(z)?[z,void 0]:[void 0,z];return _e({title:B},L,Object.assign(Object.assign({},e),{title:H}))})(),{itemSpacing:l,itemMarkerSize:c,titleSpacing:u,rowPadding:f,colPadding:p,maxCols:d=1/0,maxRows:h=1/0}=s,m=Vp(s,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:g,length:v}=e,y=L=>Math.min(L,h),x=L=>Math.min(L,d),_=r==="left"||r==="right",w=v===void 0?t+(_?0:n[0]+n[1]):v,S=ky(m),M=Oy(e,o),O=My(m,M,"itemLabel"),E=Math.max(O[0].height,c)+f,P=(L,z=0)=>c+L+l[0]+z;_?(()=>{let L=-1/0,z=0,B=1,H=0,j=-1/0,W=-1/0,Z=S?S.height:0,ie=w-Z;for(let{width:R}of O){let q=P(R,p);L=Math.max(L,q),z+E>ie?(B++,j=Math.max(j,H),W=Math.max(W,z),H=1,z=E):(z+=E,H++)}B<=1&&(j=H,W=z),e.size=L*x(B),e.length=W+Z,_e(e,{cols:x(B),gridRow:j})})():typeof g=="number"?(()=>{let L=Math.ceil(O.length/g),z=kn(O,B=>P(B.width))*g;e.size=E*y(L)-f,e.length=Math.min(z,w)})():(()=>{let L=1,z=0,B=-1/0;for(let{width:H}of O){let j=P(H,p);z+j>w?(B=Math.max(B,z),z=j,L++):z+=j}L===1&&(B=z),e.size=E*y(L)-f,e.length=B})(),S&&(_?e.size=Math.max(e.size,S.width):e.size+=u+S.height)}function Oy(e,t){let[n]=_r("scale",t),{scales:r,tickCount:i,tickMethod:o}=e,a=r.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(a.tickCount=i),o!==void 0&&(a.tickMethod=o),n(a)}function My(e,t,n="label"){let{labelFormatter:r,tickFilter:i,label:o=!0}=e,a=Vp(e,["labelFormatter","tickFilter","label"]);if(!o)return null;let s=sve(t,r,i),l=Ke(a,n),c=s.map((p,d)=>Object.fromEntries(Object.entries(l).map(([h,m])=>[h,typeof m=="function"?m(p,d):m]))),u=s.map((p,d)=>{let h=c[d];return rC(p,h)});if(!c.some(p=>p.transform)){let p=s.map((d,h)=>h);e.indexBBox=new Map(p.map(d=>[d,[s[d],u[d]]]))}return u}function ky(e){let t=c=>c===!1||c===null,{title:n}=e,r=Vp(e,["title"]);if(t(n)||n===void 0)return null;let i=Ke(r,"title"),{direction:o,transform:a}=i,s=Array.isArray(n)?n.join(","):n;return typeof s!="string"?null:rC(s,Object.assign(Object.assign({},i),{transform:a||(o==="vertical"?"rotate(-90)":"")}))}function sT(e,t,n){let{title:r}=e,[i,o]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:a,[`axis${b0(t)}`]:s}=n;return _e({title:i},a,s,Object.assign(Object.assign({},e),{title:o}))}function gG(e,t){let n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function sve(e,t,n){let i=gG(e,n).map(a=>typeof a=="number"?vh(a):a),o=t?typeof t=="string"?da(t):t:e.getFormatter?e.getFormatter():a=>`${a}`;return i.map(o)}function lve(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function cve(e,t,n,r,i){if(Ci(t,d=>d.width)>n)return!0;let a=e.clone();a.update({range:[0,n]});let s=gG(e,i),l=s.map(d=>a.map(d)+lve(a,d)),c=s.map((d,h)=>h),u=-r[0],f=n+r[1],p=(d,h)=>{let{width:m}=h;return[d-m/2,d+m/2]};for(let d=0;d<c.length;d++){let h=l[d],[m,g]=p(h,t[d]);if(m<u||g>f)return!0;let v=l[d+1];if(v){let[y]=p(v,t[d+1]);if(g>y)return!0}}return!1}function rC(e,t){let n=uve(e),{filter:r}=t,i=Vp(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function uve(e){return e instanceof Ri?e:new Uo({style:{text:`${e}`}})}function yG(e){let t=e.find(({type:i})=>i==="axisX"),n=e.find(({type:i})=>i==="axisY"),r=e.find(({type:i})=>i==="axisZ");t&&n&&r&&(t.plane="xy",n.plane="xy",r.plane="yz",r.origin=[t.bbox.x,t.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=t.bbox.x,r.bbox.y=t.bbox.y,e.push(Object.assign(Object.assign({},t),{plane:"xz",showLabel:!1,showTitle:!1,origin:[t.bbox.x,t.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function xG(e,t,n,r){var i,o;let{width:a,height:s,depth:l,x:c=0,y:u=0,z:f=0,inset:p=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:d=p,insetTop:h=p,insetBottom:m=p,insetRight:g=p,margin:v=(o=n.margin)!==null&&o!==void 0?o:0,marginLeft:y=v,marginBottom:x=v,marginTop:_=v,marginRight:w=v,padding:S=n.padding,paddingBottom:M=S,paddingLeft:O=S,paddingRight:E=S,paddingTop:P=S}=fve(e,t,n,r),k=1/4,A=(Me,we,De,Ve,Ze)=>{let{marks:Ae}=t;if(Ae.length===0)return[Ve,Ze];if(Me-Ve-Ze-Me*k>0)return[Ve,Ze];let nt=Me*(1-k);return[we==="auto"?nt*Ve/(Ve+Ze):Ve,De==="auto"?nt*Ze/(Ve+Ze):Ze]},N=Me=>Me==="auto"?20:Me??20,L=N(P),z=N(M),B=vG(e,s-L-z,[L+_,z+x],["left","right"],t,n,r),{paddingLeft:H,paddingRight:j}=B,W=a-y-w,[Z,ie]=A(W,O,E,H,j),R=W-Z-ie,q=vG(e,R,[Z+y,ie+w],["bottom","top"],t,n,r),{paddingTop:J,paddingBottom:te}=q,ae=s-x-_,[le,ue]=A(ae,M,P,te,J),ye=ae-le-ue;return{width:a,height:s,depth:l,insetLeft:d,insetTop:h,insetBottom:m,insetRight:g,innerWidth:R,innerHeight:ye,paddingLeft:Z,paddingRight:ie,paddingTop:ue,paddingBottom:le,marginLeft:y,marginBottom:x,marginTop:_,marginRight:w,x:c,y:u,z:f}}function bG(e){let{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:o=r,paddingTop:a=r,paddingBottom:s=r,margin:l=16,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:p=l,inset:d=0,insetLeft:h=d,insetRight:m=d,insetTop:g=d,insetBottom:v=d}=e,y=w=>w==="auto"?20:w,x=n-y(i)-y(o)-c-u-h-m,_=t-y(a)-y(s)-f-p-g-v;return{width:x,height:_}}function fve(e,t,n,r){let{coordinates:i}=t;if(!df(i)&&!Uh(i))return t;let o=e.filter(v=>typeof v.type=="string"&&v.type.startsWith("axis"));if(o.length===0)return t;let a=o.map(v=>{let y=v.type==="axisArc"?"arc":"linear";return sT(v,y,n)}),s=kn(a,v=>{var y;return(y=v.labelSpacing)!==null&&y!==void 0?y:0}),l=o.flatMap((v,y)=>{let x=a[y],_=Oy(v,r);return My(x,_)}).filter(qn),c=kn(l,v=>v.height)+s,u=o.flatMap((v,y)=>{let x=a[y];return ky(x)}).filter(v=>v!==null),f=u.length===0?0:kn(u,v=>v.height),{inset:p=c,insetLeft:d=p,insetBottom:h=p,insetTop:m=p+f,insetRight:g=p}=t;return Object.assign(Object.assign({},t),{insetLeft:d,insetBottom:h,insetTop:m,insetRight:g})}function vG(e,t,n,r,i,o,a){let s=An(e,h=>h.position),{padding:l=o.padding,paddingLeft:c=l,paddingRight:u=l,paddingBottom:f=l,paddingTop:p=l}=i,d={paddingBottom:f,paddingLeft:c,paddingTop:p,paddingRight:u};for(let h of r){let m=`padding${b0(C3(h))}`,g=s.get(h)||[],v=d[m],y=E=>{E.size===void 0&&(E.size=E.defaultSize)},x=E=>{E.type==="group"?(E.children.forEach(y),E.size=kn(E.children,P=>P.size)):E.size=E.defaultSize},_=E=>{E.size||(v!=="auto"?x(E):(aT(E,t,n,h,o,a),y(E)))},w=E=>{E.type.startsWith("axis")&&E.labelAutoHide===void 0&&(E.labelAutoHide=!0)},S=h==="bottom"||h==="top",M=ni(g,E=>E.order),O=g.filter(E=>E.type.startsWith("axis")&&E.order==M);if(O.length&&(O[0].crossPadding=0),typeof v=="number")g.forEach(y),g.forEach(w);else if(g.length===0)d[m]=0;else{let E=S?t+n[0]+n[1]:t,P=iC(g,E);P.forEach(_);let k=P.reduce((A,{size:N,crossPadding:L=12})=>A+N+L,0);d[m]=k}}return d}function _G(e,t,n){let r=An(e,S=>`${S.plane||"xy"}-${S.position}`),{paddingLeft:i,paddingRight:o,paddingTop:a,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:p,innerWidth:d,insetBottom:h,insetLeft:m,insetRight:g,insetTop:v,height:y,width:x,depth:_}=n,w={xy:lT({width:x,height:y,paddingLeft:i,paddingRight:o,paddingTop:a,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:p,innerWidth:d,insetBottom:h,insetLeft:m,insetRight:g,insetTop:v}),yz:lT({width:_,height:y,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:_,innerHeight:y,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:lT({width:x,height:_,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:_,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(let[S,M]of r.entries()){let[O,E]=S.split("-"),P=w[O][E],[k,A]=Z6(M,N=>typeof N.type!="string"?!1:!!(E==="center"||N.type.startsWith("axis")&&["inner","outer"].includes(E)));k.length&&pve(k,t,P,E),A.length&&_ve(M,t,P)}}function lT({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:o,marginLeft:a,marginTop:s,marginBottom:l,marginRight:c,innerHeight:u,innerWidth:f,insetBottom:p,insetLeft:d,insetRight:h,insetTop:m}){let g=n+a,v=i+s,y=r+c,x=o+l,_=e-a-c,w=[g+d,v+m,f-d-h,u-m-p,"center",null,null];return{top:[g,0,f,v,"vertical",!0,gr,a,_],right:[e-y,v,y,u,"horizontal",!1,gr],bottom:[g,t-x,f,x,"vertical",!1,gr,a,_],left:[0,v,g,u,"horizontal",!0,gr],"top-left":[g,0,f,v,"vertical",!0,gr],"top-right":[g,0,f,v,"vertical",!0,gr],"bottom-left":[g,t-x,f,x,"vertical",!1,gr],"bottom-right":[g,t-x,f,x,"vertical",!1,gr],center:w,inner:w,outer:w}}function pve(e,t,n,r){let[i,o]=Z6(e,a=>!!(typeof a.type=="string"&&a.type.startsWith("axis")));dve(i,t,n,r),wve(o,t,n)}function dve(e,t,n,r){r==="center"?Jz(t)?bve(e,t,n,r):yn(t)?gve(e,t,n):eh(t)&&vve(e,t,n,e[0].orientation):r==="inner"?hve(e,t,n):r==="outer"&&mve(e,t,n)}function hve(e,t,n){let[r,i,,o]=n,[a,s]=t.getCenter(),[l]=F0(t),c=o/2,u=l*c,f=a-u,p=s-u;for(let d=0;d<e.length;d++){let h=e[d];h.bbox={x:r+f,y:i+p,width:u*2,height:u*2}}}function mve(e,t,n){let[r,i,o,a]=n;for(let s of e)s.bbox={x:r,y:i,width:o,height:a}}function gve(e,t,n){let[r,i,o,a]=n;for(let s of e)s.bbox={x:r,y:i,width:o,height:a}}function vve(e,t,n,r){r==="horizontal"?xve(e,t,n):r==="vertical"&&yve(e,t,n)}function yve(e,t,n){let[r,i,,o]=n,a=new Array(e.length).fill(0),l=t.map(a).filter((c,u)=>u%2===0).map(c=>c+r);for(let c=0;c<e.length;c++){let u=e[c],f=l[c],p=l[c+1]-f;u.bbox={x:f,y:i,width:p,height:o}}}function xve(e,t,n){let[r,i,o]=n,a=new Array(e.length).fill(0),l=t.map(a).filter((c,u)=>u%2===1).map(c=>c+i);for(let c=0;c<e.length;c++){let u=e[c],f=l[c],p=l[c+1]-f;u.bbox={x:r,y:f,width:o,height:p}}}function bve(e,t,n,r){let[i,o,a,s]=n;for(let l of e)l.bbox={x:i,y:o,width:a,height:s},l.radar={index:e.indexOf(l),count:e.length}}function _ve(e,t,n){let[r,i,o,a,s,l,c,u,f]=n,[p,d,h,m,g,v,y,x]=s==="vertical"?["y",i,"x",r,"height",a,"width",o]:["x",r,"y",i,"width",o,"height",a];e.sort((E,P)=>c?.(E.order,P.order));let _=E=>E==="title"||E==="group"||E.startsWith("legend"),w=(E,P,k)=>k===void 0?P:_(E)?k:P,S=(E,P,k)=>k===void 0?P:_(E)?k:P,M=l?d+v:d;for(let E=0,P=M;E<e.length;E++){let k=e[E],{crossPadding:A=0,type:N}=k,{size:L}=k;k.bbox={[p]:l?P-L-A:P+A,[h]:S(N,m,u),[g]:L,[y]:w(N,x,f)},P+=(L+A)*(l?-1:1)}let O=e.filter(E=>E.type==="group");for(let E of O){let{bbox:P,children:k}=E,A=P[y],N=A/k.length,L=k.reduce((W,Z)=>{var ie;let R=(ie=Z.layout)===null||ie===void 0?void 0:ie.justifyContent;return R||W},"flex-start"),z=k.map((W,Z)=>{let{length:ie=N,padding:R=0}=W;return ie+(Z===k.length-1?0:R)}),B=Ci(z),H=A-B,j=L==="flex-start"?0:L==="center"?H/2:H;for(let W=0,Z=P[h]+j;W<k.length;W++){let ie=k[W],{padding:R=0}=ie,q=W===k.length-1?0:R;ie.bbox={[g]:P[g],[p]:P[p],[h]:Z,[y]:z[W]-q},_e(ie,{layout:{justifyContent:L}}),Z+=z[W]}}}function wve(e,t,n){if(e.length===0)return;let[r,i,o,a]=n,[s]=F0(t),l=a/2*s/Math.sqrt(2),c=r+o/2,u=i+a/2;for(let f=0;f<e.length;f++){let p=e[f];p.bbox={x:c-l,y:u-l,width:l*2,height:l*2}}}var Sve=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},B1=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function wG(e,t,n){let{encode:r={},scale:i={},transform:o=[]}=t,a=B1(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},a),{encode:r,scale:i,transform:o})]}function oC(e,t,n){return Sve(this,void 0,void 0,function*(){let{library:r}=n,{data:i}=t,[o]=_r("data",r),a=kve(i),{transform:s=[]}=a,u=[B1(a,["transform"]),...s].map(d=>o(d,n)),f=yield ED(u)(i),p=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?Us(f):[],Object.assign(Object.assign({},t),{data:p})]})}function SG(e,t,n){let{encode:r}=t;if(!r)return[e,t];let i={};for(let[o,a]of Object.entries(r))if(Array.isArray(a))for(let s=0;s<a.length;s++){let l=`${o}${s===0?"":s}`;i[l]=a[s]}else i[o]=a;return[e,Object.assign(Object.assign({},t),{encode:i})]}function CG(e,t,n){let{encode:r,data:i}=t;if(!r)return[e,t];let o=qs(r,a=>Cve(a)?a:{type:Ove(i,a),value:a});return[e,Object.assign(Object.assign({},t),{encode:o})]}function OG(e,t,n){let{encode:r}=t;if(!r)return[e,t];let i=qs(r,(o,a)=>{let{type:s}=o;return s!=="constant"||lG(a)?o:Object.assign(Object.assign({},o),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function MG(e,t,n){let{encode:r,data:i}=t;if(!r)return[e,t];let{library:o}=n,a=NG(o),s=qs(r,l=>a(i,l));return[e,Object.assign(Object.assign({},t),{encode:s})]}function kG(e,t,n){let{tooltip:r={}}=t;return Aa(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:Zc(r)&&M8(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function EG(e,t,n){let{data:r,encode:i,tooltip:o={}}=t;if(Aa(o))return[e,t];let a=f=>{if(!f)return f;if(typeof f=="string")return e.map(p=>({name:f,value:r[p][f]}));if(Zc(f)){let{field:p,channel:d,color:h,name:m=p,valueFormatter:g=S=>S}=f,v=typeof g=="string"?da(g):g,y=d&&i[d],x=y&&i[d].field,_=m||x||d,w=[];for(let S of e){let M=p?r[S][p]:y?i[d].value[S]:null;w[S]={name:_,color:h,value:v(M)}}return w}if(typeof f=="function"){let p=[];for(let d of e){let h=f(r[d],d,r,i);Zc(h)?p[d]=h:p[d]={value:h}}return p}return f},{title:s,items:l=[]}=o,c=B1(o,["title","items"]),u=Object.assign({title:a(s),items:Array.isArray(l)?l.map(a):[]},c);return[e,Object.assign(Object.assign({},t),{tooltip:u})]}function AG(e,t,n){let{encode:r}=t,i=B1(t,["encode"]);if(!r)return[e,t];let o=Object.entries(r),a=o.filter(([,l])=>{let{value:c}=l;return Array.isArray(c[0])}).flatMap(([l,c])=>{let u=[[l,new Array(e.length).fill(void 0)]],{value:f}=c,p=B1(c,["value"]);for(let d=0;d<f.length;d++){let h=f[d];if(Array.isArray(h))for(let m=0;m<h.length;m++){let g=u[m]||[`${l}${m}`,new Array(e).fill(void 0)];g[1][d]=h[m],u[m]=g}}return u.map(([d,h])=>[d,Object.assign({type:"column",value:h},p)])}),s=Object.fromEntries([...o,...a]);return[e,Object.assign(Object.assign({},i),{encode:s})]}function TG(e,t,n){let{axis:r={},legend:i={},slider:o={},scrollbar:a={}}=t,s=(c,u)=>{if(typeof c=="boolean")return c?{}:null;let f=c[u];return f===void 0||f?f:null},l=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return _e(t,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(c=>{let u=s(a,c);return[c,Object.assign({guide:s(r,c),slider:s(o,c),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[e,t]}function PG(e,t,n){let{animate:r}=t;return r||r===void 0?[e,t]:(_e(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function Cve(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;let{type:t}=e;return qn(t)}function Ove(e,t){return typeof t=="function"?"transform":typeof t=="string"&&Mve(e,t)?"field":"constant"}function Mve(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function kve(e){if(Dn(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};let{type:t="inline"}=e,n=B1(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var LG=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},Eve=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function IG(e,t,n){return LG(this,void 0,void 0,function*(){let[r,i]=yield Ave(e,t,n),{encode:o,scale:a,data:s,tooltip:l}=i;if(Array.isArray(s)===!1)return null;let{channels:c}=t,u=zd(Object.entries(o).filter(([,p])=>qn(p)),p=>p.map(([d,h])=>Object.assign({name:d},h)),([p])=>{var d;let h=(d=/([^\d]+)\d*$/.exec(p))===null||d===void 0?void 0:d[1],m=c.find(g=>g.name===h);return m?.independent?p:h}),f=c.filter(p=>{let{name:d,required:h}=p;if(u.find(([m])=>m===d))return!0;if(h)throw new Error(`Missing encoding for channel: ${d}.`);return!1}).flatMap(p=>{let{name:d,scale:h,scaleKey:m,range:g,quantitative:v,ordinal:y}=p;return u.filter(([_])=>_.startsWith(d)).map(([_,w],S)=>{let M=w.some(B=>B.visual),O=w.some(B=>B.constant),E=a[_]||{},{independent:P=!1,key:k=m||_,type:A=O?"constant":M?"identity":h}=E,N=Eve(E,["independent","key","type"]),L=A==="constant",z=L?void 0:g;return{name:_,values:w,scaleKey:P||L?Symbol("independent"):k,scale:Object.assign(Object.assign({type:A,range:z},N),{quantitative:v,ordinal:y})}})});return[i,Object.assign(Object.assign({},t),{index:r,channels:f,tooltip:l})]})}function NG(e){let[t]=_r("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:Tve(r)})}function Ave(e,t,n){return LG(this,void 0,void 0,function*(){let{library:r}=n,[i]=_r("transform",r),{preInference:o=[],postInference:a=[]}=t,{transform:s=[]}=e,l=[wG,oC,SG,CG,OG,MG,AG,PG,TG,kG,...o.map(i),...s.map(i),...a.map(i),EG],c=[],u=e;for(let f of l)[c,u]=yield f(c,u,n);return[c,u]})}function Tve(e){let{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var mf=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},Hp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sC(e,t,n){var r;return mf(this,void 0,void 0,function*(){let{library:i}=n,[o]=_r("composition",i),[a]=_r("interaction",i),s=new Set(Object.keys(i).map(N=>{var L;return(L=/mark\.(.*)/.exec(N))===null||L===void 0?void 0:L[1]}).filter(qn)),l=new Set(Object.keys(i).map(N=>{var L;return(L=/component\.(.*)/.exec(N))===null||L===void 0?void 0:L[1]}).filter(qn)),c=N=>{let{type:L}=N;if(typeof L=="function"){let{props:z={}}=L,{composite:B=!0}=z;if(B)return"mark"}return typeof L!="string"?L:s.has(L)||l.has(L)?"mark":L},u=N=>c(N)==="mark",f=N=>c(N)==="standardView",p=N=>{let{type:L}=N;return typeof L!="string"?!1:!!l.has(L)},d=N=>{if(f(N))return[N];let L=c(N);return o({type:L,static:p(N)})(N)},h=[],m=new Map,g=new Map,v=[e],y=[];for(;v.length;){let N=v.shift();if(f(N)){let L=g.get(N),[z,B]=L?VG(L,N,i):yield BG(N,n);m.set(z,N),h.push(z);let H=B.flatMap(d).map(j=>C7(j,i));if(v.push(...H),H.every(f)){let j=yield Promise.all(H.map(W=>jG(W,n)));oG(j);for(let W=0;W<H.length;W++){let Z=H[W],ie=j[W];g.set(Z,ie)}}}else{let L=u(N)?N:yield UG(N,n),z=d(L);Array.isArray(z)?v.push(...z):typeof z=="function"&&y.push(z())}}n.emitter.emit(pr.BEFORE_PAINT);let x=new Map,_=new Map,w=[];t.selectAll(mu(q2)).data(h,N=>N.key).join(N=>N.append("g").attr("className",q2).attr("id",L=>L.key).call(DG).each(function(L,z,B){uT(L,bt(B),w,n),x.set(L,B)}),N=>N.call(DG).each(function(L,z,B){uT(L,bt(B),w,n),_.set(L,B)}),N=>N.each(function(L,z,B){let H=B.nameInteraction.values();for(let j of H)j.destroy()}).remove());let S=(N,L,z)=>Array.from(N.entries()).map(([B,H])=>{let j=z||new Map,W=(R,q=J=>J)=>j.set(R,q),Z=m.get(B),ie=Nve(bt(H),Z,n);return{view:B,container:H,options:Z,setState:W,update:(R,q)=>mf(this,void 0,void 0,function*(){let te=m5(Array.from(j.values()))(Z);return yield ie(te,R,()=>{nr(q)&&L(N,q,j)})})}}),M=(N=_,L,z)=>{var B;let H=S(N,M,z);for(let j of H){let{options:W,container:Z}=j,ie=Z.nameInteraction,R=aC(W);L&&(R=R.filter(q=>L.includes(q[0])));for(let q of R){let[J,te]=q,ae=ie.get(J);if(ae&&((B=ae.destroy)===null||B===void 0||B.call(ae)),te){let ue=cT(j.view,J,te,a)(j,H,n.emitter);ie.set(J,{destroy:ue})}}}},O=S(x,M);for(let N of O){let{options:L}=N,z=new Map;N.container.nameInteraction=z;for(let B of aC(L)){let[H,j]=B;if(j){let Z=cT(N.view,H,j,a)(N,O,n.emitter);z.set(H,{destroy:Z})}}}M();let{width:E,height:P}=e,k=[];for(let N of y){let L=new Promise(z=>mf(this,void 0,void 0,function*(){for(let B of N){let H=Object.assign({width:E,height:P},B);yield sC(H,t,n)}z()}));k.push(L)}n.views=h,(r=n.animations)===null||r===void 0||r.forEach(N=>N?.cancel()),n.animations=w,n.emitter.emit(pr.AFTER_PAINT);let A=w.filter(qn).map($ve).map(N=>N.finished);return Promise.all([...A,...k])})}function DG(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function Pve(e){let[,t]=_r("interaction",e);return n=>{let[r,i]=n;try{return[r,t(r)]}catch{return[r,i.type]}}}function Nve(e,t,n){let{library:r}=n,i=Pve(r),o=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=aC(t).map(i).filter(o).map(l=>l[0]);return(l,c,u)=>mf(this,void 0,void 0,function*(){let f=[],[p,d]=yield BG(l,n);uT(p,e,f,n);for(let h of s.filter(m=>m!==c))Lve(h,e,l,p,n);for(let h of d)sC(h,e,n);return u(),{options:l,view:p}})}function Lve(e,t,n,r,i){var o;let{library:a}=i,[s]=_r("interaction",a),c=t.node().nameInteraction,u=aC(n).find(([m])=>m===e),f=c.get(e);if(!f||((o=f.destroy)===null||o===void 0||o.call(f),!u[1]))return;let p=cT(r,e,u[1],s),d={options:n,view:r,container:t.node(),update:m=>Promise.resolve(m)},h=p(d,[],i.emitter);c.set(e,{destroy:h})}function BG(e,t){return mf(this,void 0,void 0,function*(){let{library:n}=t,r=yield Dve(e,t),i=Ive(r);e.interaction=i.interaction,e.coordinate=i.coordinate,e.marks=[...i.marks,...i.components];let o=C7(i,n),a=yield jG(o,t);return VG(a,o,n)})}function Ive(e){let{coordinate:t={},interaction:n={},style:r={},marks:i}=e,o=Hp(e,["coordinate","interaction","style","marks"]),a=i.map(p=>p.coordinate||{}),s=i.map(p=>p.interaction||{}),l=i.map(p=>p.viewStyle||{}),c=[...a,t].reduceRight((p,d)=>_e(p,d),{}),u=[n,...s].reduce((p,d)=>_e(p,d),{}),f=[...l,r].reduce((p,d)=>_e(p,d),{});return Object.assign(Object.assign({},o),{marks:i,coordinate:c,interaction:u,style:f})}function Dve(e,t){return mf(this,void 0,void 0,function*(){let{library:n}=t,[r,i]=_r("mark",n),o=new Set(Object.keys(n).map(d=>{var h;return(h=/component\.(.*)/.exec(d))===null||h===void 0?void 0:h[1]}).filter(qn)),{marks:a}=e,s=[],l=[],c=[...a],{width:u,height:f}=bG(e),p={options:e,width:u,height:f};for(;c.length;){let[d]=c.splice(0,1),h=yield UG(d,t),{type:m=Kc("G2Mark type is required."),key:g}=h;if(o.has(m))l.push(h);else{let{props:v={}}=i(m),{composite:y=!0}=v;if(!y)s.push(h);else{let{data:x}=h,_=Object.assign(Object.assign({},h),{data:x&&(Array.isArray(x)?x:x.value)}),w=yield r(_,p),S=Array.isArray(w)?w:[w];c.unshift(...S.map((M,O)=>Object.assign(Object.assign({},M),{key:`${g}-${O}`})))}}}return Object.assign(Object.assign({},e),{marks:s,components:l})})}function jG(e,t){return mf(this,void 0,void 0,function*(){let{library:n}=t,[r]=_r("theme",n),[,i]=_r("mark",n),{theme:o,marks:a,coordinates:s=[]}=e,l=r(qG(o)),c=new Map;for(let f of a){let{type:p}=f,{props:d={}}=i(p),h=yield IG(f,d,t);if(h){let[m,g]=h;c.set(m,g)}}let u=An(Array.from(c.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(let f of u.values()){let p=f.reduce((_,{scale:w})=>_e(_,w),{}),{scaleKey:d}=f[0],{values:h}=f[0],m=Array.from(new Set(h.map(_=>_.field).filter(qn))),g=_e({guide:{title:m.length===0?void 0:m},field:m[0]},p),{name:v}=f[0],y=f.flatMap(({values:_})=>_.map(w=>w.value)),x=Object.assign(Object.assign({},tG(v,y,g,s,l,n)),{uid:Symbol("scale"),key:d});f.forEach(_=>_.scale=x)}return c})}function cT(e,t,n,r){let i=e.theme,o=typeof t=="string"?i[t]||{}:{};return r(_e(o,Object.assign({type:t},n)))}function VG(e,t,n){var r;let[i]=_r("mark",n),[o]=_r("theme",n),[a]=_r("labelTransform",n),{key:s,frame:l=!1,theme:c,clip:u,style:f={},labelTransform:p=[]}=t,d=o(qG(c)),h=Array.from(e.values()),m=iG(h,t),g=mG(hG(Zve(Array.from(m),h,e),t,n)),v=xG(g,t,d,n),y=Vq(v,t,n),x=l?_e({mainLineWidth:1,mainStroke:"#000"},f):f;_G(iC(g),y,v),yG(g);let _=new Map(Array.from(e.values()).flatMap(O=>{let{channels:E}=O;return E.map(({scale:P})=>[P.uid,nT(P,n)])}));rG(e,_);let w={};for(let O of g){let{scales:E=[]}=O,P=[];for(let k of E){let{name:A,uid:N}=k,L=(r=_.get(N))!==null&&r!==void 0?r:nT(k,n);P.push(L),A==="y"&&L.update(Object.assign(Object.assign({},L.getOptions()),{xScale:w.x})),tT(w,{[A]:L})}O.scaleInstances=P}let S=[];for(let[O,E]of e.entries()){let{children:P,dataDomain:k,modifier:A,key:N}=O,{index:L,channels:z,tooltip:B}=E,H=Object.fromEntries(z.map(({name:Me,scale:we})=>[Me,we])),j=qs(H,({uid:Me})=>_.get(Me));tT(w,j);let W=nG(z,j),Z=i(O),[ie,R,q]=Fve(Z(L,j,W,y)),J=k||ie.length,te=A?A(R,J,v):[],ae=Me=>{var we,De;return(De=(we=B.title)===null||we===void 0?void 0:we[Me])===null||De===void 0?void 0:De.value},le=Me=>B.items.map(we=>we[Me]),ue=ie.map((Me,we)=>{let De=Object.assign({points:R[we],transform:te[we],index:Me,markKey:N,viewKey:s},B&&{title:ae(Me),items:le(Me)});for(let[Ve,Ze]of Object.entries(W))De[Ve]=Ze[Me],q&&(De[`series${aa(Ve)}`]=q[we].map(Ae=>Ze[Ae]));return q&&(De.seriesIndex=q[we]),q&&B&&(De.seriesItems=q[we].map(Ve=>le(Ve)),De.seriesTitle=q[we].map(Ve=>ae(Ve))),De});E.data=ue,E.index=ie;let ye=P?.(ue,j,v);S.push(...ye||[])}return[{layout:v,theme:d,coordinate:y,markState:e,key:s,clip:u,scale:w,style:x,components:g,labelTransform:m5(p.map(a))},S]}function uT(e,t,n,r){return mf(this,void 0,void 0,function*(){let{library:i}=r,{components:o,theme:a,layout:s,markState:l,coordinate:c,key:u,style:f,clip:p,scale:d}=e,{x:h,y:m,width:g,height:v}=s,y=Hp(s,["x","y","width","height"]),x=["view","plot","main","content"],_=x.map((j,W)=>W),w=["a","margin","padding","inset"],S=x.map(j=>Y6(Object.assign({},a.view,f),j)),M=w.map(j=>Ke(y,j)),O=j=>j.style("x",W=>N[W].x).style("y",W=>N[W].y).style("width",W=>N[W].width).style("height",W=>N[W].height).each(function(W,Z,ie){Jve(bt(ie),S[W])}),E=0,P=0,k=g,A=v,N=_.map(j=>{let W=M[j],{left:Z=0,top:ie=0,bottom:R=0,right:q=0}=W;return E+=Z,P+=ie,k-=Z+q,A-=ie+R,{x:E,y:P,width:k,height:A}});t.selectAll(mu(CA)).data(_.filter(j=>qn(S[j])),j=>x[j]).join(j=>j.append("rect").attr("className",CA).style("zIndex",-2).call(O),j=>j.call(O),j=>j.remove());let L=Hve(l),z=L?{duration:L[1]}:!1;for(let[,j]of y0(o,W=>`${W.type}-${W.position}`))j.forEach((W,Z)=>W.index=Z);let B=t.selectAll(mu(SA)).data(o,j=>`${j.type}-${j.position}-${j.index}`).join(j=>j.append("g").style("zIndex",({zIndex:W})=>W||-1).attr("className",SA).append(W=>oT(_e({animate:z,scale:d},W),c,a,i,l)),j=>j.transition(function(W,Z,ie){let{preserve:R=!1}=W;if(R)return;let q=oT(_e({animate:z,scale:d},W),c,a,i,l),{attributes:J}=q,[te]=ie.childNodes;return te.update(J,!1)})).transitions();n.push(...B.flat().filter(qn));let H=t.selectAll(mu(Fh)).data([s],()=>u).join(j=>j.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Fh).call(zG).call(RG,Array.from(l.keys())).call(FG,p),j=>j.call(RG,Array.from(l.keys())).call(W=>L?Kve(W,L):zG(W)).call(FG,p)).transitions();n.push(...H.flat());for(let[j,W]of l.entries()){let{data:Z}=W,{key:ie,class:R,type:q}=j,J=t.select(`#${ie}`),te=Uve(j,W,e,r),ae=Gve(j,W,e,i),le=Yve(j,W,e,i),ue=Xve(j,W,e,i),ye=Wve(t,J,R,"element"),Me=J.selectAll(mu(ql)).selectFacetAll(ye).data(Z,we=>we.key,we=>we.groupKey).join(we=>we.append(te).attr("className",ql).attr("markType",q).transition(function(De,Ve,Ze){return ae(De,[Ze])}),we=>we.call(De=>{let Ve=De.parent(),Ze=AD(Ae=>{let[pe,ft]=Ae.getBounds().min;return[pe,ft]});De.transition(function(Ae,pe,ft){qve(ft,Ve,Ze);let nt=te(Ae,pe),$e=le(Ae,[ft],[nt]);return $e!==null||(ft.nodeName===nt.nodeName&&nt.nodeName!=="g"?kv(ft,nt):(ft.parentNode.replaceChild(nt,ft),nt.className=ql,nt.markType=q,nt.__data__=ft.__data__)),$e}).attr("markType",q).attr("className",ql)}),we=>we.each(function(De,Ve,Ze){Ze.__removed__=!0}).transition(function(De,Ve,Ze){return ue(De,[Ze])}).remove(),we=>we.append(te).attr("className",ql).attr("markType",q).transition(function(De,Ve,Ze){let{__fromElements__:Ae}=Ze,pe=le(De,Ae,[Ze]);return new nw(Ae,null,Ze.parentNode).transition(pe).remove(),pe}),we=>we.transition(function(De,Ve,Ze){let pe=new nw([],Ze.__toData__,Ze.parentNode).append(te).attr("className",ql).attr("markType",q).nodes();return le(De,[Ze],pe)}).remove()).transitions();n.push(...Me.flat())}zve(e,t,n,i,r)})}function zve(e,t,n,r,i){let[o]=_r("labelTransform",r),{markState:a,labelTransform:s}=e,l=t.select(mu(p4)).node(),c=new Map,u=new Map,f=Array.from(a.entries()).flatMap(([g,v])=>{let{labels:y=[],key:x}=g,_=Vve(g,v,e,r,i),w=t.select(`#${x}`).selectAll(mu(ql)).nodes().filter(S=>!S.__removed__);return y.flatMap((S,M)=>{let{transform:O=[]}=S,E=Hp(S,["transform"]);return w.flatMap(P=>{let k=Rve(E,M,P);return k.forEach(A=>{c.set(A,_),u.set(A,S)}),k})})}),p=bt(l).selectAll(mu(U2)).data(f,g=>g.key).join(g=>g.append(v=>c.get(v)(v)).attr("className",U2),g=>g.each(function(v,y,x){let w=c.get(v)(v);kv(x,w)}),g=>g.remove()).nodes(),d=An(p,g=>u.get(g.__data__)),{coordinate:h}=e,m={canvas:i.canvas,coordinate:h};for(let[g,v]of d){let{transform:y=[]}=g;m5(y.map(o))(v,m)}s&&s(p,m)}function Rve(e,t,n){let{seriesIndex:r,seriesKey:i,points:o,key:a,index:s}=n.__data__,l=jve(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${a}-${t}`,bounds:l,index:s,points:o,dependentElement:n})];let c=Bve(e),u=r.map((f,p)=>Object.assign(Object.assign({},e),{key:`${i[p]}-${t}`,bounds:[o[p]],index:f,points:o,dependentElement:n}));return c?c(u):u}function Fve([e,t,n]){if(n)return[e,t,n];let r=[],i=[];for(let o=0;o<e.length;o++){let a=e[o],s=t[o];s.every(([l,c])=>qn(l)&&qn(c))&&(r.push(a),i.push(s))}return[r,i]}function Bve(e){let{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function jve(e){let t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(a=>{let s=a.effect.getKeyframes();t.attr(s[s.length-1])}),e.parentNode.appendChild(t);let r=t.getLocalBounds();t.destroy();let{min:i,max:o}=r;return[i,o]}function Vve(e,t,n,r,i){let[o]=_r("shape",r),{data:a,encode:s}=e,{data:l,defaultLabelShape:c}=t,u=l.map(m=>m.points),f=qs(s,m=>m.value),{theme:p,coordinate:d}=n,h=Object.assign(Object.assign({},i),{document:S7(i),theme:p,coordinate:d});return m=>{let{index:g,points:v}=m,y=a[g],{formatter:x=H=>`${H}`,transform:_,style:w,render:S}=m,M=Hp(m,["formatter","transform","style","render"]),O=qs(Object.assign(Object.assign({},M),w),H=>HG(H,y,g,a,{channel:f})),{shape:E=c,text:P}=O,k=Hp(O,["shape","text"]),A=typeof x=="string"?da(x):x,N=Object.assign(Object.assign({},k),{text:A(P,y,g,a),datum:y}),L=Object.assign({type:`label.${E}`,render:S},k),z=o(L,h),B=WG(p,"label",E,"label");return z(v,N,B,u)}}function HG(e,t,n,r,i){return typeof e=="function"?e(t,n,r,i):typeof e!="string"?e:Zc(t)&&t[e]!==void 0?t[e]:e}function Hve(e){let t=-1/0,n=1/0;for(let[r,i]of e){let{animate:o={}}=r,{data:a}=i,{enter:s={},update:l={},exit:c={}}=o,{type:u,duration:f=300,delay:p=0}=l,{type:d,duration:h=300,delay:m=0}=s,{type:g,duration:v=300,delay:y=0}=c;for(let x of a){let{updateType:_=u,updateDuration:w=f,updateDelay:S=p,enterType:M=d,enterDuration:O=h,enterDelay:E=m,exitDuration:P=v,exitDelay:k=y,exitType:A=g}=x;(_===void 0||_)&&(t=Math.max(t,w+S),n=Math.min(n,S)),(A===void 0||A)&&(t=Math.max(t,P+k),n=Math.min(n,k)),(M===void 0||M)&&(t=Math.max(t,O+E),n=Math.min(n,E))}}return t===-1/0?null:[n,t-n]}function Wve(e,t,n,r){return e.node().parentElement.findAll(o=>o.style.facet!==void 0&&o.style.facet===n&&o!==t.node()).flatMap(o=>o.getElementsByClassName(r))}function qve(e,t,n){if(!e.__facet__)return;let r=e.parentNode.parentNode,i=t.parentNode,[o,a]=n(r),[s,l]=n(i),c=`translate(${o-s}, ${a-l})`;TD(e,c),t.append(e)}function Uve(e,t,n,r){let{library:i}=r,[o]=_r("shape",i),{data:a,encode:s}=e,{defaultShape:l,data:c,shape:u}=t,f=qs(s,y=>y.value),p=c.map(y=>y.points),{theme:d,coordinate:h}=n,{type:m,style:g={}}=e,v=Object.assign(Object.assign({},r),{document:S7(r),coordinate:h,theme:d});return y=>{let{shape:x=l}=g,{shape:_=x,points:w,seriesIndex:S,index:M}=y,O=Hp(y,["shape","points","seriesIndex","index"]),E=Object.assign(Object.assign({},O),{index:M}),P=S?S.map(z=>a[z]):a[M],k=S||M,A=qs(g,z=>HG(z,P,k,a,{channel:f})),N=u[_]?u[_](A,v):o(Object.assign(Object.assign({},A),{type:GG(e,_)}),v),L=WG(d,m,_,l);return N(w,E,L,p)}}function WG(e,t,n,r){if(typeof t!="string")return;let{color:i}=e,o=e[t]||{},a=o[n]||o[r];return Object.assign({color:i},a)}function fT(e,t,n,r,i){var o,a;let[,s]=_r("shape",i),[l]=_r("animation",i),{defaultShape:c,shape:u}=n,{theme:f,coordinate:p}=r,h=`default${aa(e)}Animation`,{[h]:m}=((o=u[c])===null||o===void 0?void 0:o.props)||s(GG(t,c)).props,{[e]:g={}}=f,v=((a=t.animate)===null||a===void 0?void 0:a[e])||{},y={coordinate:p};return(x,_,w)=>{let{[`${e}Type`]:S,[`${e}Delay`]:M,[`${e}Duration`]:O,[`${e}Easing`]:E}=x,P=Object.assign({type:S||m},v);if(!P.type)return null;let N=l(P,y)(_,w,_e(g,{delay:M,duration:O,easing:E}));return Array.isArray(N)?N:[N]}}function Gve(e,t,n,r){return fT("enter",e,t,n,r)}function $ve(e){return e.finished.then(()=>{e.cancel()}),e}function Yve(e,t,n,r){return fT("update",e,t,n,r)}function Xve(e,t,n,r){return fT("exit",e,t,n,r)}function qG(e={}){if(typeof e=="string")return{type:e};let{type:t="light"}=e,n=Hp(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function aC(e){let t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(_e(t,n)).reverse()}function UG(e,t){return mf(this,void 0,void 0,function*(){let{data:n}=e,r=Hp(e,["data"]);if(n==null)return e;let[,{data:i}]=yield oC([],{data:n},t);return Object.assign({data:i},r)})}function zG(e){e.style("transform",t=>`translate(${t.paddingLeft+t.marginLeft}, ${t.paddingTop+t.marginTop})`).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function Kve(e,t){let[n,r]=t;e.transition(function(i,o,a){let{transform:s,width:l,height:c}=a.style,{paddingLeft:u,paddingTop:f,innerWidth:p,innerHeight:d,marginLeft:h,marginTop:m}=i,g=[{transform:s,width:l,height:c},{transform:`translate(${u+h}, ${f+m})`,width:p,height:d}];return a.animate(g,{delay:n,duration:r,fill:"both"})})}function GG(e,t){let{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function RG(e,t){let n=o=>o.class!==void 0?`${o.class}`:"";e.nodes().length===0||(e.selectAll(mu(wA)).data(t,o=>o.key).join(o=>o.append("g").attr("className",wA).attr("id",a=>a.key).style("facet",n).style("fill","transparent").style("zIndex",a=>{var s;return(s=a.zIndex)!==null&&s!==void 0?s:0}),o=>o.style("facet",n).style("fill","transparent").style("zIndex",a=>{var s;return(s=a.zIndex)!==null&&s!==void 0?s:0}),o=>o.remove()),e.select(mu(p4)).node())||e.append("g").attr("className",p4).style("zIndex",0)}function mu(...e){return e.map(t=>`.${t}`).join("")}function FG(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;let{paddingTop:r,paddingLeft:i,marginLeft:o,marginTop:a,innerWidth:s,innerHeight:l}=n;return new Ks({style:{x:i+o,y:r+a,width:s,height:l}})})}function Zve(e,t,n){var r;for(let[c]of n.entries())if(c.type==="cell")return e.filter(u=>u.name!=="shape");if(t.length!==1||e.some(c=>c.name==="shape"))return e;let{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;let a={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((r=e.find(c=>c.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[a[i]]};return[...e,l]}function Jve(e,t){for(let[n,r]of Object.entries(t))e.style(n,r)}function Qve(e){let t=_e({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){let o=i.shift();if(o.key===void 0){let s=n.get(o),l=r.get(o),c=s===null?"0":`${s.key}-${l}`;o.key=c}let{children:a=[]}=o;if(Array.isArray(a))for(let s=0;s<a.length;s++){let l=_e({},a[s]);a[s]=l,n.set(l,o),r.set(l,s),i.push(l)}}return t}function e2e(e,t){let n=new g4;return n.registerPlugin(new v4),new B_({width:e,height:t,container:document.createElement("div"),renderer:n})}function pT(e,t={},n=()=>{},r=i=>{throw i}){let{width:i=640,height:o=480,depth:a=0}=e,s=Qve(e),{canvas:l=e2e(i,o),emitter:c=new y4,library:u}=t;t.canvas=l,t.emitter=c;let{width:f,height:p}=l.getConfig();(f!==i||p!==o)&&l.resize(i,o),c.emit(pr.BEFORE_RENDER);let d=bt(l.document.documentElement);return l.ready.then(()=>sC(Object.assign(Object.assign({},s),{width:i,height:o,depth:a}),d,t)).then(()=>{if(a){let[h,m]=l.document.documentElement.getPosition();l.document.documentElement.setPosition(h,m,-a/2)}l.requestAnimationFrame(()=>{c.emit(pr.AFTER_RENDER),n?.()})}).catch(h=>{r?.(h)}),n2e(l.getConfig().container)}function lC(e,t={},n=!1){let{canvas:r,emitter:i}=t;r&&(t2e(r),n?r.destroy():r.destroyChildren()),i.off()}function t2e(e){let t=e.getRoot().querySelectorAll(`.${q2}`);t?.forEach(n=>{let{nameInteraction:r=new Map}=n;r?.size>0&&Array.from(r?.values()).forEach(i=>{i?.destroy()})})}function n2e(e){return typeof e=="string"?document.getElementById(e):e}var r2e={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function $G(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:r2e[t]}function dT(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>dT(i,t,n,r))}function j1(e){dT(e,"visibility","hidden",!0)}function Wp(e){dT(e,"visibility","visible",!0)}var Ey=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ss(e){return bt(e).selectAll(`.${ql}`).nodes().filter(t=>!t.__removed__)}function uC(e,t){return fC(e,t).flatMap(({container:n})=>Ss(n))}function fC(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function fo(e){return bt(e).select(`.${Fh}`).node()}function hT(e){if(e.tagName==="g")return e.getRenderBounds();let t=e.getGeometryBounds(),n=new vi;return n.setFromTransformedAABB(t,e.getWorldTransform()),n}function qp(e,t){let{offsetX:n,offsetY:r}=t,i=hT(e),{min:[o,a],max:[s,l]}=i,c=n<o||n>s,u=r<a||r>l;return c||u?null:[n-o,r-a]}function pC(e,t){let{offsetX:n,offsetY:r}=t,[i,o,a,s]=i2e(e);return[Math.min(a,Math.max(i,n))-i,Math.min(s,Math.max(o,r))-o]}function i2e(e){let t=e.getRenderBounds(),{min:[n,r],max:[i,o]}=t;return[n,r,i,o]}function dC(e){return t=>t.__data__.color}function V1(e){return t=>t.__data__.x}function tl(e){let t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(o=>[cC(r.key,o.key),o.data])));return r=>{let{index:i,markKey:o,viewKey:a}=r.__data__;return n.get(cC(a,o))[i]}}function Va(e,t=(r,i)=>r,n=(r,i,o)=>r.setAttribute(i,o)){let r="__states__",i="__ordinal__",o=u=>{let{[r]:f=[],[i]:p={}}=u,d=f.reduce((h,m)=>Object.assign(Object.assign({},h),e[m]),p);if(Object.keys(d).length!==0){for(let[h,m]of Object.entries(d)){let g=$G(u,h),v=t(m,u);n(u,h,v),h in p||(p[h]=g)}u[i]=p}},a=u=>{u[r]||(u[r]=[])};return{setState:(u,...f)=>{a(u),u[r]=[...f],o(u)},removeState:(u,...f)=>{a(u);for(let p of f){let d=u[r].indexOf(p);d!==-1&&u[r].splice(d,1)}o(u)},hasState:(u,f)=>(a(u),u[r].indexOf(f)!==-1)}}function o2e(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function cC(e,t){return`${e},${t}`}function Sc(e,t){let r=(Array.isArray(e)?e:[e]).flatMap(o=>o.marks.map(a=>[cC(o.key,a.key),a.state])),i={};for(let o of t){let[a,s]=Array.isArray(o)?o:[o,{}];i[a]=r.reduce((l,c)=>{let[u,f={}]=c,p=o2e(f[a])?s:f[a];for(let[d,h]of Object.entries(p)){let m=l[d],g=(v,y,x,_)=>{let w=cC(_.__data__.viewKey,_.__data__.markKey);return u!==w?m?.(v,y,x,_):typeof h!="function"?h:h(v,y,x,_)};l[d]=g}return l},{})}return i}function gu(e,t){let n=new Map(e.map((i,o)=>[i,o])),r=t?e.map(t):e;return(i,o)=>{if(typeof i!="function")return i;let a=n.get(o),s=t?t(o):o;return i(s,a,r,o)}}function hC(e){var{link:t=!1,valueof:n=(u,f)=>u,coordinate:r}=e,i=Ey(e,["link","valueof","coordinate"]);let o="element-link";if(!t)return[()=>{},()=>{}];let a=u=>u.__data__.points,s=(u,f)=>{let[,p,d]=u,[h,,,m]=f;return[p,h,m,d]};return[u=>{var f;if(u.length<=1)return;let p=Qi(u,(d,h)=>{let{x:m}=d.__data__,{x:g}=h.__data__;return m-g});for(let d=1;d<p.length;d++){let h=fi(),m=p[d-1],g=p[d],[v,y,x,_]=s(a(m),a(g));h.moveTo(...v),h.lineTo(...y),h.lineTo(...x),h.lineTo(..._),h.closePath();let w=qs(i,E=>n(E,m)),{fill:S=m.getAttribute("fill")}=w,M=Ey(w,["fill"]),O=new Gr({className:o,style:Object.assign({d:h.toString(),fill:S,zIndex:-2},M)});(f=m.link)===null||f===void 0||f.remove(),m.parentNode.appendChild(O),m.link=O}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function mC(e,t,n){let r=i=>{let{transform:o}=e.style;return o?`${o} ${i}`:i};if(yn(n)){let{points:i}=e.__data__,[o,a]=Tn(n)?yh(i):i,s=n.getCenter(),l=ur(o,s),c=ur(a,s),u=so(l),f=Q5(l,c),p=u+f/2,d=t*Math.cos(p),h=t*Math.sin(p);return r(`translate(${d}, ${h})`)}return Tn(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function gC(e){var{document:t,background:n,scale:r,coordinate:i,valueof:o}=e,a=Ey(e,["document","background","scale","coordinate","valueof"]);let s="element-background";if(!n)return[()=>{},()=>{}];let l=(v,y,x)=>{let _=v.invert(y),w=y+v.getBandWidth(_)/2,S=v.getStep(_)/2,M=S*x;return[w-S+M,w+S-M]},c=(v,y)=>{let{x}=r;if(!w1(x))return[0,1];let{__data__:_}=v,{x:w}=_,[S,M]=l(x,w,y);return[S,M]},u=(v,y)=>{let{y:x}=r;if(!w1(x))return[0,1];let{__data__:_}=v,{y:w}=_,[S,M]=l(x,w,y);return[S,M]},f=(v,y)=>{let{padding:x}=y,[_,w]=c(v,x),[S,M]=u(v,x),O=[[_,S],[w,S],[w,M],[_,M]].map(A=>i.map(A)),{__data__:E}=v,{y:P,y1:k}=E;return xE(t,O,{y:P,y1:k},i,y)},p=(v,y)=>{let{transform:x="scale(1.2, 1.2)",transformOrigin:_="center center",stroke:w=""}=y,S=Ey(y,["transform","transformOrigin","stroke"]),M=Object.assign({transform:x,transformOrigin:_,stroke:w},S),O=v.cloneNode(!0);for(let[E,P]of Object.entries(M))O.style[E]=P;return O},d=()=>{let{x:v,y}=r;return[v,y].some(w1)};return[v=>{v.background&&v.background.remove();let y=qs(a,A=>o(A,v)),{fill:x="#CCD6EC",fillOpacity:_=.3,zIndex:w=-2,padding:S=.001,lineWidth:M=0}=y,O=Ey(y,["fill","fillOpacity","zIndex","padding","lineWidth"]),E=Object.assign(Object.assign({},O),{fill:x,fillOpacity:_,zIndex:w,padding:S,lineWidth:M}),k=(d()?f:p)(v,E);k.className=s,v.parentNode.parentNode.appendChild(k),v.background=k},v=>{var y;(y=v.background)===null||y===void 0||y.remove(),v.background=null},v=>v.className===s]}function vu(e,t){let r=e.getRootNode().defaultView.getContextService().getDomElement();r?.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function YG(e){vu(e,e.cursor)}function H1(e,t,n){return e.find(r=>Object.entries(t).every(([i,o])=>n(r)[i]===o))}function Ay(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function W1(e,t=!1){let n=n6(e,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return t&&n.push(["Z"]),n}function vC(e){return e.querySelectorAll(".element")}function XG(e,t,n=0){let r=[["M",...t[1]]],i=Ay(e,t[1]),o=Ay(e,t[0]);return i===0?r.push(["L",...t[3]],["A",o,o,0,n,1,...t[0]],["Z"]):r.push(["A",i,i,0,n,0,...t[2]],["L",...t[3]],["A",o,o,0,n,1,...t[0]],["Z"]),r}function R1(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}var a2e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function s2e(e,{elements:t,datum:n,groupKey:r=f=>f,link:i=!1,background:o=!1,delay:a=60,scale:s,coordinate:l,emitter:c,state:u={}}){var f;let p=t(e),d=new Set(p),h=An(p,r),m=gu(p,n),[g,v]=hC(Object.assign({elements:p,valueof:m,link:i,coordinate:l},Ke(u.active,"link"))),[y,x,_]=gC(Object.assign({document:e.ownerDocument,scale:s,coordinate:l,background:o,valueof:m},Ke(u.active,"background"))),w=_e(u,{active:Object.assign({},((f=u.active)===null||f===void 0?void 0:f.offset)&&{transform:(...H)=>{let j=u.active.offset(...H),[,W]=H;return mC(p[W],j,l)}})}),{setState:S,removeState:M,hasState:O}=Va(w,m),E,P=H=>{let{target:j,nativeEvent:W=!0}=H;if(!d.has(j))return;E&&clearTimeout(E);let Z=r(j),ie=h.get(Z),R=new Set(ie);for(let q of p)R.has(q)?O(q,"active")||S(q,"active"):(S(q,"inactive"),v(q)),q!==j&&x(q);y(j),g(ie),W&&c.emit("element:highlight",{nativeEvent:W,data:{data:n(j),group:ie.map(n)}})},k=()=>{E&&clearTimeout(E),E=setTimeout(()=>{A(),E=null},a)},A=(H=!0)=>{for(let j of p)M(j,"active","inactive"),x(j),v(j);H&&c.emit("element:unhighlight",{nativeEvent:H})},N=H=>{let{target:j}=H;o&&!_(j)||!o&&!d.has(j)||(a>0?k():A())},L=()=>{A()};e.addEventListener("pointerover",P),e.addEventListener("pointerout",N),e.addEventListener("pointerleave",L);let z=H=>{let{nativeEvent:j}=H;j||A(!1)},B=H=>{let{nativeEvent:j}=H;if(j)return;let{data:W}=H.data,Z=H1(p,W,n);Z&&P({target:Z,nativeEvent:!1})};return c.on("element:highlight",B),c.on("element:unhighlight",z),()=>{e.removeEventListener("pointerover",P),e.removeEventListener("pointerout",N),e.removeEventListener("pointerleave",L),c.off("element:highlight",B),c.off("element:unhighlight",z);for(let H of p)x(H),v(H)}}function Up(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,o=a2e(e,["delay","createGroup","background","link"]);return(a,s,l)=>{let{container:c,view:u,options:f}=a,{scale:p,coordinate:d}=u,h=fo(c);return s2e(h,Object.assign({elements:Ss,datum:tl(u),groupKey:n?n(u):void 0,coordinate:d,scale:p,state:Sc(f,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:l},o))}}Up.props={reapplyWhenUpdate:!0};function yC(e){return Up(Object.assign(Object.assign({},e),{createGroup:V1}))}yC.props={reapplyWhenUpdate:!0};function xC(e){return Up(Object.assign(Object.assign({},e),{createGroup:dC}))}xC.props={reapplyWhenUpdate:!0};var l2e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function c2e(e,{elements:t,datum:n,groupKey:r=f=>f,link:i=!1,single:o=!1,coordinate:a,background:s=!1,scale:l,emitter:c,state:u={}}){var f;let p=t(e),d=new Set(p),h=An(p,r),m=gu(p,n),[g,v]=hC(Object.assign({link:i,elements:p,valueof:m,coordinate:a},Ke(u.selected,"link"))),[y,x]=gC(Object.assign({document:e.ownerDocument,background:s,coordinate:a,scale:l,valueof:m},Ke(u.selected,"background"))),_=_e(u,{selected:Object.assign({},((f=u.selected)===null||f===void 0?void 0:f.offset)&&{transform:(...L)=>{let z=u.selected.offset(...L),[,B]=L;return mC(p[B],z,a)}})}),{setState:w,removeState:S,hasState:M}=Va(_,m),O=(L=!0)=>{for(let z of p)S(z,"selected","unselected"),v(z),x(z);L&&c.emit("element:unselect",{nativeEvent:!0})},E=(L,z,B=!0)=>{if(M(z,"selected"))O();else{let H=r(z),j=h.get(H),W=new Set(j);for(let Z of p)W.has(Z)?w(Z,"selected"):(w(Z,"unselected"),v(Z)),Z!==z&&x(Z);if(g(j),y(z),!B)return;c.emit("element:select",Object.assign(Object.assign({},L),{nativeEvent:B,data:{data:[n(z),...j.map(n)]}}))}},P=(L,z,B=!0)=>{let H=r(z),j=h.get(H),W=new Set(j);if(M(z,"selected")){if(!p.some(ie=>!W.has(ie)&&M(ie,"selected")))return O();for(let ie of j)w(ie,"unselected"),v(ie),x(ie)}else{let Z=j.some(ie=>M(ie,"selected"));for(let ie of p)W.has(ie)?w(ie,"selected"):M(ie,"selected")||w(ie,"unselected");!Z&&i&&g(j),y(z)}B&&c.emit("element:select",Object.assign(Object.assign({},L),{nativeEvent:B,data:{data:p.filter(Z=>M(Z,"selected")).map(n)}}))},k=L=>{let{target:z,nativeEvent:B=!0}=L;return d.has(z)?o?E(L,z,B):P(L,z,B):O()};e.addEventListener("click",k);let A=L=>{let{nativeEvent:z,data:B}=L;if(z)return;let H=o?B.data.slice(0,1):B.data;for(let j of H){let W=H1(p,j,n);k({target:W,nativeEvent:!1})}},N=()=>{O(!1)};return c.on("element:select",A),c.on("element:unselect",N),()=>{for(let L of p)v(L);e.removeEventListener("click",k),c.off("element:select",A),c.off("element:unselect",N)}}function Gp(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=l2e(e,["createGroup","background","link"]);return(o,a,s)=>{let{container:l,view:c,options:u}=o,{coordinate:f,scale:p}=c,d=fo(l);return c2e(d,Object.assign({elements:Ss,datum:tl(c),groupKey:t?t(c):void 0,coordinate:f,scale:p,state:Sc(u,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:s},i))}}Gp.props={reapplyWhenUpdate:!0};function bC(e){return Gp(Object.assign(Object.assign({},e),{createGroup:V1}))}bC.props={reapplyWhenUpdate:!0};function _C(e){return Gp(Object.assign(Object.assign({},e),{createGroup:dC}))}_C.props={reapplyWhenUpdate:!0};var u2e=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},f2e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function p2e(e){let{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;let r={type:"normalizeY"};return t.push(r),e.transform=t,r}function d2e(e,t,n){let[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{let{encode:o}=i,a=s=>{let l=o[s];return[s,l?l.value:void 0]};return Object.fromEntries(n.map(a))});return r}function wC(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=a=>`${a}`}=e,o=f2e(e,["wait","leading","trailing","labelFormatter"]);return a=>{let{view:s,container:l,update:c,setState:u}=a,{markState:f,scale:p,coordinate:d}=s,h=d2e(f,"line",["x","y","series"]);if(!h)return;let{y:m,x:g,series:v=[]}=h,y=m.map((H,j)=>j),x=Qi(y.map(H=>g[H])),_=fo(l),w=l.getElementsByClassName(ql),S=l.getElementsByClassName(U2),O=An(S,H=>H.__data__.key.split("-")[0]),E=new xc({style:Object.assign({x1:0,y1:0,x2:0,y2:_.getAttribute("height"),stroke:"black",lineWidth:1},Ke(o,"rule"))}),P=new Uo({style:Object.assign({x:0,y:_.getAttribute("height"),text:"",fontSize:10},Ke(o,"label"))});E.append(P),_.appendChild(E);let k=(H,j,W)=>{let[Z]=H.invert(W),ie=j.invert(Z);return x[R6(x,ie)]},A=(H,j)=>{E.setAttribute("x1",H[0]),E.setAttribute("x2",H[0]),P.setAttribute("text",i(j))},N,L=H=>u2e(this,void 0,void 0,function*(){let{x:j}=p,W=k(d,j,H);A(H,W),u("chartIndex",ie=>{let R=_e({},ie),q=R.marks.find(ue=>ue.type==="line"),te=kn(Dd(y,ue=>kn(ue,ye=>+m[ye])/ni(ue,ye=>+m[ye]),ue=>v[ue]).values()),ae=[1/te,te];_e(q,{scale:{y:{domain:ae}}});let le=p2e(q);le.groupBy="color",le.basis=(ue,ye)=>{let Me=ue[Hs(we=>g[+we]).center(ue,W)];return ye[Me]};for(let ue of R.marks)ue.animate=!1;return R}),N=(yield c("chartIndex")).view}),z=H=>{let{scale:j,coordinate:W}=N,{x:Z,y:ie}=j,R=k(W,Z,H);A(H,R);for(let q of w){let{seriesIndex:J,key:te}=q.__data__,ae=J[Hs(Ve=>g[+Ve]).center(J,R)],le=[0,ie.map(1)],ue=[0,ie.map(m[ae]/m[J[0]])],[,ye]=W.map(le),[,Me]=W.map(ue),we=ye-Me;q.setAttribute("transform",`translate(0, ${we})`);let De=O.get(te)||[];for(let Ve of De)Ve.setAttribute("dy",we)}},B=js(H=>{let j=qp(_,H);j&&z(j)},t,{leading:n,trailing:r});return L([0,0]),_.addEventListener("pointerenter",B),_.addEventListener("pointermove",B),_.addEventListener("pointerleave",B),()=>{E.remove(),_.removeEventListener("pointerenter",B),_.removeEventListener("pointermove",B),_.removeEventListener("pointerleave",B)}}}wC.props={reapplyWhenUpdate:!0};function h2e(e){let{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(o=>o.type==="fisheye");if(r)return r;let i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function mT({wait:e=30,leading:t,trailing:n=!1}){return r=>{let{options:i,update:o,setState:a,container:s}=r,l=fo(s),c=js(u=>{let f=qp(l,u);if(!f){a("fisheye"),o();return}a("fisheye",p=>{let d=_e({},p,{interaction:{tooltip:{preserve:!0}}});for(let v of d.marks)v.animate=!1;let[h,m]=f,g=h2e(d);return g.focusX=h,g.focusY=m,g.visual=!0,d}),o()},e,{leading:t,trailing:n});return l.addEventListener("pointerenter",c),l.addEventListener("pointermove",c),l.addEventListener("pointerleave",c),()=>{l.removeEventListener("pointerenter",c),l.removeEventListener("pointermove",c),l.removeEventListener("pointerleave",c)}}}var Gh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function SC(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function m2e(e){let t=e.getRenderBounds(),{min:[n,r],max:[i,o]}=t;return{x:n,y:r,width:i-n,height:o-r}}function g2e(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function v2e(e,t,n,r,i,o,a,s={},l=[10,10]){let c={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u=new o8({className:"tooltip",style:{x:t,y:n,container:a,data:[],bounding:o,position:r,enterable:i,title:"",offset:l,template:{prefixCls:"g2-"},style:_e(c,s)}});return e.appendChild(u.HTMLTooltipElement),u}function QG({root:e,data:t,x:n,y:r,render:i,event:o,single:a,position:s="right-bottom",enterable:l=!1,css:c,mount:u,bounding:f,offset:p}){let d=SC(e,u),h=SC(e),m=a?h:e,g=f||m2e(e),v=g2e(h,d),{tooltipElement:y=v2e(d,n,r,s,l,g,v,c,p)}=m,{items:x,title:_=""}=t;y.update(Object.assign({x:n,y:r,data:x,title:_,position:s,enterable:l},i!==void 0&&{content:i(o,{items:x,title:_})})),m.tooltipElement=y}function $p({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});let o=SC(e),a=t?o:e,{tooltipElement:s}=a;s&&s.hide(i?.clientX,i?.clientY),r$(e),i$(e),o$(e)}function gT({root:e,single:t}){let n=SC(e),r=t?n:e;if(!r)return;let{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0),r$(e),i$(e),o$(e)}function e$(e){let{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function y2e(e){let{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(qn).map(o=>{var{color:a=t$(e)}=o,s=Gh(o,["color"]);return Object.assign(Object.assign({},s),{color:a})}).map(e$);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function x2e(e,t){let{color:n,series:r,facet:i=!1}=e,{color:o,series:a}=t,s=l=>l&&l.invert&&!(l instanceof ds)&&!(l instanceof Zu);if(s(r))return r.clone().invert(a);if(a&&r instanceof ds&&r.invert(a)!==o&&!i)return r.invert(a);if(s(n)){let l=n.invert(o);return Array.isArray(l)?null:l}return null}function t$(e){let t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function KG(e,t=n=>n){let n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function n$(e,t,n,r=e.map(o=>o.__data__),i={}){let o=l=>l instanceof Date?+l:l,a=KG(r.map(l=>l.title),o).filter(qn),s=r.flatMap((l,c)=>{let u=e[c],{items:f=[],title:p}=l,d=f.filter(qn),h=n!==void 0?n:f.length<=1;return d.map(m=>{var{color:g=t$(u)||i.color,name:v}=m,y=Gh(m,["color","name"]);let x=x2e(t,l),_=h?x||v:v||x;return Object.assign(Object.assign({},y),{color:g,name:_||p})})}).map(e$);return Object.assign(Object.assign({},a.length>0&&{title:a.join(",")}),{items:KG(s,l=>`(${o(l.name)}, ${o(l.value)}, ${o(l.color)})`)})}function b2e(e,t,n,r){var{plotWidth:i,plotHeight:o,mainWidth:a,mainHeight:s,startX:l,startY:c,transposed:u,polar:f,insetLeft:p,insetTop:d}=r,h=Gh(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);let m=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),g=(S,M,O)=>{let E=new ys({style:Object.assign({cx:S,cy:M,r:O},m)});return e.appendChild(E),E},v=(S,M,O,E)=>{let P=new xc({style:Object.assign({x1:S,x2:M,y1:O,y2:E},m)});return e.appendChild(P),P},x=((S,M)=>{if(M.length===1)return M[0];let O=M.map(P=>er(P,S)),E=sc(O,P=>P);return M[E]})(n,t),_=()=>u?[l+x[0],l+x[0],c,c+o]:[l,l+i,x[1]+c,x[1]+c],w=()=>{let S=l+p+a/2,M=c+d+s/2,O=er([S,M],x);return[S,M,O]};if(f){let[S,M,O]=w(),E=e.ruleX||g(S,M,O);E.style.cx=S,E.style.cy=M,E.style.r=O,e.ruleX=E}else{let[S,M,O,E]=_(),P=e.ruleX||v(S,M,O,E);P.style.x1=S,P.style.x2=M,P.style.y1=O,P.style.y2=E,e.ruleX=P}}function _2e(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:o,mainHeight:a,startX:s,startY:l,transposed:c,polar:u,insetLeft:f,insetTop:p}=n,d=Gh(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);let h=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},d),m=t.map(E=>E[1]),g=t.map(E=>E[0]),v=lc(m),y=lc(g),x=()=>{if(u){let E=Math.min(o,a)/2,P=s+f+o/2,k=l+p+a/2,A=so(ur([y,v],[P,k])),N=P+E*Math.cos(A),L=k+E*Math.sin(A);return[P,N,k,L]}return c?[s,s+r,v+l,v+l]:[y+s,y+s,l,l+i]},[_,w,S,M]=x(),O=()=>{let E=new xc({style:Object.assign({x1:_,x2:w,y1:S,y2:M},h)});return e.appendChild(E),E};if(g.length>0){let E=e.ruleY||O();E.style.x1=_,E.style.x2=w,E.style.y1=S,E.style.y2=M,e.ruleY=E}}function r$(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function i$(e){e.ruleX&&(e.ruleX.remove(),e.ruleX=void 0)}function w2e(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(a=>a.remove());let{type:i=""}=n,o=t.filter(a=>{let[{x:s,y:l}]=a;return qn(s)&&qn(l)}).map(a=>{let[{color:s,element:l},c]=a,u=s||l.style.fill||l.style.stroke||r.color,f=i==="hollow"?"transparent":u,p=i==="hollow"?u:"#fff";return new ys({className:"g2-tooltip-marker",style:Object.assign({cx:c[0],cy:c[1],fill:f,r:4,stroke:p,lineWidth:2},n)})});for(let a of o)e.appendChild(a);e.markers=o}function o$(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function ZG(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function gf(e,t){return e===void 0?t:e}function a$(e){let{title:t,items:n}=e;return n.length===0&&t===void 0}function S2e(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function JG(e,t){var{elements:n,sort:r,filter:i,scale:o,coordinate:a,crosshairs:s,crosshairsX:l,crosshairsY:c,render:u,groupName:f,emitter:p,wait:d=50,leading:h=!0,trailing:m=!1,startX:g=0,startY:v=0,body:y=!0,single:x=!0,position:_,enterable:w,mount:S,bounding:M,theme:O,offset:E,disableNative:P=!1,marker:k=!0,preserve:A=!1,style:N={},css:L={}}=t,z=Gh(t,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);let B=n(e),H=Tn(a),j=yn(a),W=_e(N,z),{innerWidth:Z,innerHeight:ie,width:R,height:q,insetLeft:J,insetTop:te}=a.getOptions(),ae=[],le=[];for(let ot of B){let{__data__:We}=ot,{seriesX:Zt,title:Tt,items:zn}=We;Zt?ae.push(ot):(Tt||zn)&&le.push(ot)}let ue=ot=>ot.markType==="interval",ye=le.length&&le.every(ue)&&!yn(a),Me=ot=>ot.__data__.x,De=!!o.x.getBandWidth&&le.length>0;ae.sort((ot,We)=>{let Zt=H?0:1,Tt=zn=>zn.getBounds().min[Zt];return H?Tt(We)-Tt(ot):Tt(ot)-Tt(We)});let Ve=ot=>{let We=H?1:0,{min:Zt,max:Tt}=ot.getLocalBounds();return Qi([Zt[We],Tt[We]])};ye?B.sort((ot,We)=>Me(ot)-Me(We)):le.sort((ot,We)=>{let[Zt,Tt]=Ve(ot),[zn,an]=Ve(We),Jt=(Zt+Tt)/2,yr=(zn+an)/2;return H?yr-Jt:Jt-yr});let Ze=new Map(ae.map(ot=>{let{__data__:We}=ot,{seriesX:Zt}=We,Tt=Zt.map((an,Jt)=>Jt),zn=Qi(Tt,an=>Zt[+an]);return[ot,[zn,Zt]]})),{x:Ae}=o,pe=Ae?.getBandWidth?Ae.getBandWidth()/2:0,ft=ot=>{let[We]=a.invert(ot);return We-pe},nt=(ot,We,Zt,Tt)=>{let{_x:zn}=ot,an=zn!==void 0?Ae.map(zn):ft(We),Jt=Tt.filter(qn),[yr,Cn]=Qi([Jt[0],Jt[Jt.length-1]]),yi=yr===Cn;if(!De&&(an<yr||an>Cn)&&!yi)return null;let xr=Hs(Ti=>Tt[+Ti]).center,to=xr(Zt,an);return Zt[to]},$e=ye?(ot,We)=>{let Zt=Hs(Me).center,Tt=Zt(We,ft(ot)),zn=We[Tt];return An(We,Me).get(Me(zn))}:(ot,We)=>{let Tt=ot[H?1:0],zn=We.filter(yr=>{let[Cn,yi]=Ve(yr);return Tt>=Cn&&Tt<=yi});if(!De||zn.length>0)return zn;let an=Hs(yr=>{let[Cn,yi]=Ve(yr);return(Cn+yi)/2}).center,Jt=an(We,Tt);return[We[Jt]].filter(qn)},at=(ot,We)=>{let{__data__:Zt}=ot;return Object.fromEntries(Object.entries(Zt).filter(([Tt])=>Tt.startsWith("series")&&Tt!=="series").map(([Tt,zn])=>{let an=zn[We];return[f0(Tt.replace("series","")),an]}))},mt=js(ot=>{var We;let Zt=qp(e,ot);if(!Zt)return;let Tt=hT(e),zn=Tt.min[0],an=Tt.min[1],Jt=[Zt[0]-g,Zt[1]-v];if(!Jt)return;let yr=$e(Jt,le),Cn=[],yi=[];for(let sr of ae){let[po,fn]=Ze.get(sr),no=nt(ot,Jt,po,fn);if(no!==null){Cn.push(sr);let Hi=at(sr,no),{x:ro,y:hi}=Hi,si=a.map([(ro||0)+pe,hi||0]);yi.push([Object.assign(Object.assign({},Hi),{element:sr}),si])}}let xr=Array.from(new Set(yi.map(sr=>sr[0].x))),to=xr[sc(xr,sr=>Math.abs(sr-ft(Jt)))],Ti=yi.filter(sr=>sr[0].x===to),jr=[...Ti.map(sr=>sr[0]),...yr.map(sr=>sr.__data__)],vn=[...Cn,...yr],$n=n$(vn,o,f,jr,O);if(r&&$n.items.sort((sr,po)=>r(sr)-r(po)),i&&($n.items=$n.items.filter(i)),vn.length===0||a$($n)){lt(ot);return}if(y&&QG({root:e,data:$n,x:Zt[0]+zn,y:Zt[1]+an,render:u,event:ot,single:x,position:_,enterable:w,mount:S,bounding:M,css:L,offset:E}),s||l||c){let sr=Ke(W,"crosshairs"),po=Object.assign(Object.assign({},sr),Ke(W,"crosshairsX")),fn=Object.assign(Object.assign({},sr),Ke(W,"crosshairsY")),no=Ti.map(Hi=>Hi[1]);l&&b2e(e,no,Zt,Object.assign(Object.assign({},po),{plotWidth:Z,plotHeight:ie,mainWidth:R,mainHeight:q,insetLeft:J,insetTop:te,startX:g,startY:v,transposed:H,polar:j})),c&&_2e(e,no,Object.assign(Object.assign({},fn),{plotWidth:Z,plotHeight:ie,mainWidth:R,mainHeight:q,insetLeft:J,insetTop:te,startX:g,startY:v,transposed:H,polar:j}))}if(k){let sr=Ke(W,"marker");w2e(e,{data:Ti,style:sr,theme:O})}let As=(We=Ti[0])===null||We===void 0?void 0:We[0].x,Pi=As??ft(Jt);p.emit("tooltip:show",Object.assign(Object.assign({},ot),{nativeEvent:!0,data:{data:{x:ff(o.x,Pi,!0)}}}))},d,{leading:h,trailing:m}),lt=ot=>{$p({root:e,single:x,emitter:p,event:ot})},Et=()=>{gT({root:e,single:x})},Rt=ot=>{var We,{nativeEvent:Zt,data:Tt,offsetX:zn,offsetY:an}=ot,Jt=Gh(ot,["nativeEvent","data","offsetX","offsetY"]);if(Zt)return;let yr=(We=Tt?.data)===null||We===void 0?void 0:We.x,yi=o.x.map(yr),[xr,to]=a.map([yi,.5]),Ti=e.getRenderBounds(),jr=Ti.min[0],vn=Ti.min[1];mt(Object.assign(Object.assign({},Jt),{offsetX:zn!==void 0?zn:jr+xr,offsetY:an!==void 0?an:vn+to,_x:yr}))},Qt=()=>{$p({root:e,single:x,emitter:p,nativeEvent:!1})},It=()=>{Dt(),Et()},Kt=()=>{Sn()},Sn=()=>{P||(e.addEventListener("pointerenter",mt),e.addEventListener("pointermove",mt),e.addEventListener("pointerleave",ot=>{qp(e,ot)||lt(ot)}))},Dt=()=>{P||(e.removeEventListener("pointerenter",mt),e.removeEventListener("pointermove",mt),e.removeEventListener("pointerleave",lt))};return Sn(),p.on("tooltip:show",Rt),p.on("tooltip:hide",Qt),p.on("tooltip:disable",It),p.on("tooltip:enable",Kt),()=>{Dt(),p.off("tooltip:show",Rt),p.off("tooltip:hide",Qt),p.off("tooltip:disable",It),p.off("tooltip:enable",Kt),A?$p({root:e,single:x,emitter:p,nativeEvent:!1}):Et()}}function C2e(e,{elements:t,coordinate:n,scale:r,render:i,groupName:o,sort:a,filter:s,emitter:l,wait:c=50,leading:u=!0,trailing:f=!1,groupKey:p=k=>k,single:d=!0,position:h,enterable:m,datum:g,view:v,mount:y,bounding:x,theme:_,offset:w,shared:S=!1,body:M=!0,disableNative:O=!1,preserve:E=!1,css:P={}}){var k,A;let N=t(e),L=An(N,p),z=we=>we.markType==="interval",B=N.every(z)&&!yn(n),H=r.x,j=r.series,W=(A=(k=H?.getBandWidth)===null||k===void 0?void 0:k.call(H))!==null&&A!==void 0?A:0,Z=j?we=>we.__data__.x:we=>we.__data__.x+W/2;B&&N.sort((we,De)=>Z(we)-Z(De));let ie=we=>{let{target:De}=we;return R1(De,Ve=>Ve.classList?Ve.classList.includes("element"):!1)},R=B?we=>{let De=qp(e,we);if(!De)return;let[Ve]=n.invert(De),Ze=Hs(Z).center,Ae=Ze(N,Ve),pe=N[Ae];return!S&&N.find(nt=>nt!==pe&&Z(nt)===Z(pe))?ie(we):pe}:ie,q=js(we=>{let De=R(we);if(!De){$p({root:e,single:d,emitter:l,event:we});return}let Ve=p(De),Ze=L.get(Ve);if(!Ze)return;let Ae=Ze.length===1&&!S?y2e(Ze[0]):n$(Ze,r,o,void 0,_);if(a&&Ae.items.sort((nt,$e)=>a(nt)-a($e)),s&&(Ae.items=Ae.items.filter(s)),a$(Ae)){$p({root:e,single:d,emitter:l,event:we});return}let{offsetX:pe,offsetY:ft}=we;M&&QG({root:e,data:Ae,x:pe,y:ft,render:i,event:we,single:d,position:h,enterable:m,mount:y,bounding:x,css:P,offset:w}),l.emit("tooltip:show",Object.assign(Object.assign({},we),{nativeEvent:!0,data:{data:_7(De,v)}}))},c,{leading:u,trailing:f}),J=we=>{$p({root:e,single:d,emitter:l,event:we})},te=()=>{O||(e.addEventListener("pointermove",q),e.addEventListener("pointerleave",J))},ae=()=>{O||(e.removeEventListener("pointermove",q),e.removeEventListener("pointerleave",J))},le=({nativeEvent:we,offsetX:De,offsetY:Ve,data:Ze})=>{if(we)return;let{data:Ae}=Ze,pe=H1(N,Ae,g);if(!pe)return;let ft=pe.getBBox(),{x:nt,y:$e,width:at,height:mt}=ft,lt=e.getBBox();q({target:pe,offsetX:De!==void 0?De+lt.x:nt+at/2,offsetY:Ve!==void 0?Ve+lt.y:$e+mt/2})},ue=({nativeEvent:we}={})=>{we||$p({root:e,single:d,emitter:l,nativeEvent:!1})},ye=()=>{ae(),gT({root:e,single:d})},Me=()=>{te()};return l.on("tooltip:show",le),l.on("tooltip:hide",ue),l.on("tooltip:enable",Me),l.on("tooltip:disable",ye),te(),()=>{ae(),l.off("tooltip:show",le),l.off("tooltip:hide",ue),E?$p({root:e,single:d,emitter:l,nativeEvent:!1}):gT({root:e,single:d})}}function CC(e){let{shared:t,crosshairs:n,crosshairsX:r,crosshairsY:i,series:o,name:a,item:s=()=>({}),facet:l=!1}=e,c=Gh(e,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(u,f,p)=>{let{container:d,view:h}=u,{scale:m,markState:g,coordinate:v,theme:y}=h,x=ZG(g,"seriesTooltip"),_=ZG(g,"crosshairs"),w=fo(d),S=gf(o,x),M=gf(n,_);if(S&&S2e(g)&&!l)return JG(w,Object.assign(Object.assign({},c),{theme:y,elements:Ss,scale:m,coordinate:v,crosshairs:M,crosshairsX:gf(gf(r,n),!1),crosshairsY:gf(i,M),item:s,emitter:p}));if(S&&l){let O=f.filter(L=>L!==u&&L.options.parentKey===u.options.key),E=uC(u,f),P=O[0].view.scale,k=w.getBounds(),A=k.min[0],N=k.min[1];return Object.assign(P,{facet:!0}),JG(w.parentNode.parentNode,Object.assign(Object.assign({},c),{theme:y,elements:()=>E,scale:P,coordinate:v,crosshairs:gf(n,_),crosshairsX:gf(gf(r,n),!1),crosshairsY:gf(i,M),item:s,startX:A,startY:N,emitter:p}))}return C2e(w,Object.assign(Object.assign({},c),{datum:tl(h),elements:Ss,scale:m,coordinate:v,groupKey:t?V1(h):void 0,item:s,emitter:p,view:h,theme:y,shared:t}))}}CC.props={reapplyWhenUpdate:!0};var OC=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},s$="legend-category",O2e="legend-continuous",M2e="items-item",k2e="legend-category-item-marker",E2e="legend-category-item-label";function vT(e){return e.getElementsByClassName(k2e)[0]}function yT(e){return e.getElementsByClassName(E2e)[0]}function xT(e){return e.getElementsByClassName(M2e)}function kC(e){return e.getElementsByClassName(s$)}function l$(e){return e.getElementsByClassName(O2e)}function c$(e,t){[...kC(e),...l$(e)].forEach(r=>{t(r,i=>i)})}function MC(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function A2e(e,{legends:t,marker:n,label:r,datum:i,filter:o,emitter:a,channel:s,state:l={}}){let c=new Map,u=new Map,f=new Map,{unselected:p={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=l,d={unselected:Ke(p,"marker")},h={unselected:Ke(p,"label")},{setState:m,removeState:g}=Va(d,void 0),{setState:v,removeState:y}=Va(h,void 0),x=Array.from(t(e)),_=x.map(i),w=()=>{for(let O of x){let E=i(O),P=n(O),k=r(O);_.includes(E)?(g(P,"unselected"),y(k,"unselected")):(m(P,"unselected"),v(k,"unselected"))}};for(let O of x){let E=()=>{vu(e,"pointer")},P=()=>{YG(e)},k=A=>OC(this,void 0,void 0,function*(){let N=i(O),L=_.indexOf(N);L===-1?_.push(N):_.splice(L,1),yield o(_),w();let{nativeEvent:z=!0}=A;z&&(_.length===x.length?a.emit("legend:reset",{nativeEvent:z}):a.emit("legend:filter",Object.assign(Object.assign({},A),{nativeEvent:z,data:{channel:s,values:_}})))});O.addEventListener("click",k),O.addEventListener("pointerenter",E),O.addEventListener("pointerout",P),c.set(O,k),u.set(O,E),f.set(O,P)}let S=O=>OC(this,void 0,void 0,function*(){let{nativeEvent:E}=O;if(E)return;let{data:P}=O,{channel:k,values:A}=P;k===s&&(_=A,yield o(_),w())}),M=O=>OC(this,void 0,void 0,function*(){let{nativeEvent:E}=O;E||(_=x.map(i),yield o(_),w())});return a.on("legend:filter",S),a.on("legend:reset",M),()=>{for(let O of x)O.removeEventListener("click",c.get(O)),O.removeEventListener("pointerenter",u.get(O)),O.removeEventListener("pointerout",f.get(O)),a.off("legend:filter",S),a.off("legend:reset",M)}}function T2e(e,{legend:t,filter:n,emitter:r,channel:i}){let o=({detail:{value:a}})=>{n(a),r.emit({nativeEvent:!0,data:{channel:i,values:a}})};return t.addEventListener("valuechange",o),()=>{t.removeEventListener("valuechange",o)}}function u$(e,{legend:t,channel:n,value:r,ordinal:i,channels:o,allChannels:a,facet:s=!1}){return OC(this,void 0,void 0,function*(){let{view:l,update:c,setState:u}=e;u(t,f=>{let{marks:p}=f,d=p.map(h=>{if(h.type==="legends")return h;let{transform:m=[],data:g=[]}=h,v=m.findIndex(({type:_})=>_.startsWith("group")||_.startsWith("bin")),y=[...m];g.length&&y.splice(v+1,0,{type:"filter",[n]:{value:r,ordinal:i}});let x=Object.fromEntries(o.map(_=>[_,{domain:l.scale[_].getOptions().domain}]));return _e({},h,Object.assign(Object.assign({transform:y,scale:x},!i&&{animate:!1}),{legend:s?!1:Object.fromEntries(a.map(_=>[_,{preserve:!0}]))}))});return Object.assign(Object.assign({},f),{marks:d})}),yield c()})}function P2e(e,t){for(let n of e)u$(n,Object.assign(Object.assign({},t),{facet:!0}))}function bT(){return(e,t,n)=>{let{container:r}=e,i=t.filter(f=>f!==e),o=i.length>0,a=f=>MC(f).scales.map(p=>p.name),s=[...kC(r),...l$(r)],l=s.flatMap(a),c=o?js(P2e,50,{trailing:!0}):js(u$,50,{trailing:!0}),u=s.map(f=>{let{name:p,domain:d}=MC(f).scales[0],h=a(f),m={legend:f,channel:p,channels:h,allChannels:l};return f.className===s$?A2e(r,{legends:xT,marker:vT,label:yT,datum:g=>{let{__data__:v}=g,{index:y}=v;return d[y]},filter:g=>{let v=Object.assign(Object.assign({},m),{value:g,ordinal:!0});c(o?i:e,v)},state:f.attributes.state,channel:p,emitter:n}):T2e(r,{legend:f,filter:g=>{let v=Object.assign(Object.assign({},m),{value:g,ordinal:!1});c(o?i:e,v)},emitter:n,channel:p})});return()=>{u.forEach(f=>f())}}}function _T(){return(e,t,n)=>{let{container:r,view:i,options:o}=e,a=kC(r),s=Ss(r),l=d=>MC(d).scales[0].name,c=d=>{let{scale:{[d]:h}}=i;return h},u=Sc(o,["active","inactive"]),f=gu(s,tl(i)),p=[];for(let d of a){let h=Z=>{let{data:ie}=d.attributes,{__data__:R}=Z,{index:q}=R;return ie[q].label},m=l(d),g=xT(d),v=c(m),y=An(s,Z=>v.invert(Z.__data__[m])),{state:x={}}=d.attributes,{inactive:_={}}=x,{setState:w,removeState:S}=Va(u,f),M={inactive:Ke(_,"marker")},O={inactive:Ke(_,"label")},{setState:E,removeState:P}=Va(M),{setState:k,removeState:A}=Va(O),N=Z=>{for(let ie of g){let R=vT(ie),q=yT(ie);ie===Z||Z===null?(P(R,"inactive"),A(q,"inactive")):(E(R,"inactive"),k(q,"inactive"))}},L=(Z,ie)=>{let R=h(ie),q=new Set(y.get(R));for(let te of s)q.has(te)?w(te,"active"):w(te,"inactive");N(ie);let{nativeEvent:J=!0}=Z;J&&n.emit("legend:highlight",Object.assign(Object.assign({},Z),{nativeEvent:J,data:{channel:m,value:R}}))},z=new Map;for(let Z of g){let ie=R=>{L(R,Z)};Z.addEventListener("pointerover",ie),z.set(Z,ie)}let B=Z=>{for(let R of s)S(R,"inactive","active");N(null);let{nativeEvent:ie=!0}=Z;ie&&n.emit("legend:unhighlight",{nativeEvent:ie})},H=Z=>{let{nativeEvent:ie,data:R}=Z;if(ie)return;let{channel:q,value:J}=R;if(q!==m)return;let te=g.find(ae=>h(ae)===J);te&&L({nativeEvent:!1},te)},j=Z=>{let{nativeEvent:ie}=Z;ie||B({nativeEvent:!1})};d.addEventListener("pointerleave",B),n.on("legend:highlight",H),n.on("legend:unhighlight",j);let W=()=>{d.removeEventListener(B),n.off("legend:highlight",H),n.off("legend:unhighlight",j);for(let[Z,ie]of z)Z.removeEventListener(ie)};p.push(W)}return()=>p.forEach(d=>d())}}var $l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function N2e(e,t){let[n,r,i,o]=e,[a,s,l,c]=t;return!(a>i||l<n||s>o||c<r)}function L2e(e,t,n,r,i){let[o,a,s,l]=i;return[Math.max(o,Math.min(e,n)),Math.max(a,Math.min(t,r)),Math.min(s,Math.max(e,n)),Math.min(l,Math.max(t,r))]}function I2e(e){let{width:t,height:n}=e.getBBox();return[0,0,t,n]}function vf(e,t){for(let[n,r]of Object.entries(t))e.style(n,r)}var f$=bc(e=>{let t=e.attributes,{x:n,y:r,width:i,height:o,class:a,renders:s={},handleSize:l=10,document:c}=t,u=$l(t,["x","y","width","height","class","renders","handleSize","document"]);if(!c||i===void 0||o===void 0||n===void 0||r===void 0)return;let f=l/2,p=(J,te,ae)=>{J.handle||(J.handle=ae.createElement("rect"),J.append(J.handle));let{handle:le}=J;return le.attr(te),le},d=Ke(g5(u,"handleNW","handleNE"),"handleN"),{render:h=p}=d,m=$l(d,["render"]),g=Ke(u,"handleE"),{render:v=p}=g,y=$l(g,["render"]),x=Ke(g5(u,"handleSE","handleSW"),"handleS"),{render:_=p}=x,w=$l(x,["render"]),S=Ke(u,"handleW"),{render:M=p}=S,O=$l(S,["render"]),E=Ke(u,"handleNW"),{render:P=p}=E,k=$l(E,["render"]),A=Ke(u,"handleNE"),{render:N=p}=A,L=$l(A,["render"]),z=Ke(u,"handleSE"),{render:B=p}=z,H=$l(z,["render"]),j=Ke(u,"handleSW"),{render:W=p}=j,Z=$l(j,["render"]),ie=(J,te)=>{let{id:ae}=J,le=te(J,J.attributes,c);le.id=ae,le.style.draggable=!0},R=J=>()=>{let te=bc(ae=>ie(ae,J));return new te({})},q=bt(e).attr("className",a).style("transform",`translate(${n}, ${r})`).style("draggable",!0);q.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(vf,Object.assign(Object.assign({width:i,height:o},g5(u,"handle")),{transform:void 0})),q.maybeAppend("handle-n",R(h)).style("x",f).style("y",-f).style("width",i-l).style("height",l).style("fill","transparent").call(vf,m),q.maybeAppend("handle-e",R(v)).style("x",i-f).style("y",f).style("width",l).style("height",o-l).style("fill","transparent").call(vf,y),q.maybeAppend("handle-s",R(_)).style("x",f).style("y",o-f).style("width",i-l).style("height",l).style("fill","transparent").call(vf,w),q.maybeAppend("handle-w",R(M)).style("x",-f).style("y",f).style("width",l).style("height",o-l).style("fill","transparent").call(vf,O),q.maybeAppend("handle-nw",R(P)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(vf,k),q.maybeAppend("handle-ne",R(N)).style("x",i-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(vf,L),q.maybeAppend("handle-se",R(B)).style("x",i-f).style("y",o-f).style("width",l).style("height",l).style("fill","transparent").call(vf,H),q.maybeAppend("handle-sw",R(W)).style("x",-f).style("y",o-f).style("width",l).style("height",l).style("fill","transparent").call(vf,Z)});function Ty(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:o=()=>{},brushupdated:a=()=>{},extent:s=I2e(e),brushRegion:l=(le,ue,ye,Me,we)=>[le,ue,ye,Me],reverse:c=!1,fill:u="#777",fillOpacity:f="0.3",stroke:p="#fff",selectedHandles:d=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,h=$l(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let m=null,g=null,v=null,y=null,x=null,_=!1,[w,S,M,O]=s;vu(e,"crosshair"),e.style.draggable=!0;let E=(le,ue,ye)=>{if(o(ye),y&&y.remove(),x&&x.remove(),m=[le,ue],c)return P();k()},P=()=>{x=new Gr({style:Object.assign(Object.assign({},h),{fill:u,fillOpacity:f,stroke:p,pointerEvents:"none"})}),y=new f$({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(x),e.appendChild(y)},k=()=>{y=new f$({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},h),{fill:u,fillOpacity:f,stroke:p,draggable:!0}),className:"mask"}),e.appendChild(y)},A=(le=!0)=>{y&&y.remove(),x&&x.remove(),m=null,g=null,v=null,_=!1,y=null,x=null,r(le)},N=(le,ue,ye=!0)=>{let[Me,we,De,Ve]=L2e(le[0],le[1],ue[0],ue[1],s),[Ze,Ae,pe,ft]=l(Me,we,De,Ve,s);return c?z(Ze,Ae,pe,ft):L(Ze,Ae,pe,ft),n(Ze,Ae,pe,ft,ye),[Ze,Ae,pe,ft]},L=(le,ue,ye,Me)=>{y.style.x=le,y.style.y=ue,y.style.width=ye-le,y.style.height=Me-ue},z=(le,ue,ye,Me)=>{x.style.d=`
      M${w},${S}L${M},${S}L${M},${O}L${w},${O}Z
      M${le},${ue}L${le},${Me}L${ye},${Me}L${ye},${ue}Z
    `,y.style.x=le,y.style.y=ue,y.style.width=ye-le,y.style.height=Me-ue},B=le=>{let ue=(Ae,pe,ft,nt,$e)=>Ae+pe<nt?nt-pe:Ae+ft>$e?$e-ft:Ae,ye=le[0]-v[0],Me=le[1]-v[1],we=ue(ye,m[0],g[0],w,M),De=ue(Me,m[1],g[1],S,O),Ve=[m[0]+we,m[1]+De],Ze=[g[0]+we,g[1]+De];N(Ve,Ze)},H={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},j=le=>Z(le)||W(le),W=le=>{let{id:ue}=le;return d.indexOf(ue)===-1?!1:new Set(Object.keys(H)).has(ue)},Z=le=>le===y.getElementById("selection"),ie=le=>{let{target:ue}=le,[ye,Me]=pC(e,le);if(!y||!j(ue)){E(ye,Me,le),_=!0;return}j(ue)&&(v=[ye,Me])},R=le=>{let{target:ue}=le,ye=pC(e,le);if(!m)return;if(!v)return N(m,ye);if(Z(ue))return B(ye);let[Me,we]=[ye[0]-v[0],ye[1]-v[1]],{id:De}=ue;if(H[De]){let[Ve,Ze,Ae,pe]=H[De].vector;return N([m[0]+Me*Ve,m[1]+we*Ze],[g[0]+Me*Ae,g[1]+we*pe])}},q=le=>{if(v){v=null;let{x:De,y:Ve,width:Ze,height:Ae}=y.style;m=[De,Ve],g=[De+Ze,Ve+Ae],a(De,Ve,De+Ze,Ve+Ae,le);return}g=pC(e,le);let[ue,ye,Me,we]=N(m,g);_=!1,i(ue,ye,Me,we,le)},J=le=>{let{target:ue}=le;y&&!j(ue)&&A()},te=le=>{let{target:ue}=le;!y||!j(ue)||_?vu(e,"crosshair"):Z(ue)?vu(e,"move"):W(ue)&&vu(e,H[ue.id].cursor)},ae=()=>{vu(e,"default")};return e.addEventListener("dragstart",ie),e.addEventListener("drag",R),e.addEventListener("dragend",q),e.addEventListener("click",J),e.addEventListener("pointermove",te),e.addEventListener("pointerleave",ae),{mask:y,move(le,ue,ye,Me,we=!0){y||E(le,ue,{}),m=[le,ue],g=[ye,Me],N([le,ue],[ye,Me],we)},remove(le=!0){y&&A(le)},destroy(){y&&A(!1),vu(e,"default"),e.removeEventListener("dragstart",ie),e.removeEventListener("drag",R),e.removeEventListener("dragend",q),e.removeEventListener("click",J),e.removeEventListener("pointermove",te),e.removeEventListener("pointerleave",ae)}}}function wT(e,t,n){return t.filter(r=>{if(r===e)return!1;let{interaction:i={}}=r.options;return Object.values(i).find(o=>o.brushKey===n)})}function D2e(e,t,n){return wT(e,t,n).map(r=>fo(r.container))}function z2e(e,t,n){return wT(e,t,n).map(r=>r.options)}function p$(e,t){var{elements:n,selectedHandles:r,siblings:i=R=>[],datum:o,brushRegion:a,extent:s,reverse:l,scale:c,coordinate:u,series:f=!1,key:p=R=>R,bboxOf:d=R=>{let{x:q,y:J,width:te,height:ae}=R.style;return{x:q,y:J,width:te,height:ae}},state:h={},emitter:m}=t,g=$l(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);let v=n(e),y=i(e),x=y.flatMap(n),_=gu(v,o),w=Ke(g,"mask"),{setState:S,removeState:M}=Va(h,_),O=new Map,{width:E,height:P,x:k=0,y:A=0}=d(e),N=s||[0,0,E,P],L=()=>{for(let R of[...v,...x])M(R,"active","inactive")},z=(R,q,J,te)=>{var ae;for(let ue of y)(ae=ue.brush)===null||ae===void 0||ae.remove();let le=new Set;for(let ue of v){let{min:ye,max:Me}=ue.getLocalBounds(),[we,De]=ye,[Ve,Ze]=Me;N2e([we,De,Ve,Ze],[R,q,J,te])?(S(ue,"active"),le.add(p(ue))):S(ue,"inactive")}for(let ue of x)le.has(p(ue))?S(ue,"active"):S(ue,"inactive")},B=()=>{for(let R of v)M(R,"inactive");for(let R of O.values())R.remove();O.clear()},H=(R,q,J,te)=>{let ae=ue=>{let ye=ue.cloneNode();return ye.__data__=ue.__data__,ue.parentNode.appendChild(ye),O.set(ue,ye),ye},le=new Ks({style:{x:R+k,y:q+A,width:J-R,height:te-q}});e.appendChild(le);for(let ue of v){let ye=O.get(ue)||ae(ue);ye.style.clipPath=le,S(ue,"inactive"),S(ye,"active")}},j=Ty(e,Object.assign(Object.assign({},w),{extent:N,brushRegion:a,reverse:l,selectedHandles:r,brushended:R=>{let q=f?B:L;R&&m.emit("brush:remove",{nativeEvent:!0}),q()},brushed:(R,q,J,te,ae)=>{let le=S1(R,q,J,te,c,u);ae&&m.emit("brush:highlight",{nativeEvent:!0,data:{selection:le}}),(f?H:z)(R,q,J,te)},brushcreated:(R,q,J,te,ae)=>{let le=S1(R,q,J,te,c,u);m.emit("brush:end",Object.assign(Object.assign({},ae),{nativeEvent:!0,data:{selection:le}}))},brushupdated:(R,q,J,te,ae)=>{let le=S1(R,q,J,te,c,u);m.emit("brush:end",Object.assign(Object.assign({},ae),{nativeEvent:!0,data:{selection:le}}))},brushstarted:R=>{m.emit("brush:start",R)}})),W=({nativeEvent:R,data:q})=>{if(R)return;let{selection:J}=q,[te,ae,le,ue]=RW(J,c,u);j.move(te,ae,le,ue,!1)};m.on("brush:highlight",W);let Z=({nativeEvent:R}={})=>{R||j.remove(!1)};m.on("brush:remove",Z);let ie=j.destroy.bind(j);return j.destroy=()=>{m.off("brush:highlight",W),m.off("brush:remove",Z),ie()},j}function $h(e){var{facet:t,brushKey:n}=e,r=$l(e,["facet","brushKey"]);return(i,o,a)=>{let{container:s,view:l,options:c}=i,u=fo(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},p=["active",["inactive",{opacity:.5}]],{scale:d,coordinate:h}=l;if(t){let g=u.getBounds(),v=g.min[0],y=g.min[1],x=g.max[0],_=g.max[1];return p$(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>uC(i,o),datum:tl(fC(i,o).map(w=>w.view)),brushRegion:(w,S,M,O)=>[w,S,M,O],extent:[v,y,x,_],state:Sc(fC(i,o).map(w=>w.options),p),emitter:a,scale:d,coordinate:h,selectedHandles:void 0},f),r))}let m=p$(u,Object.assign(Object.assign({elements:Ss,key:g=>g.__data__.key,siblings:()=>D2e(i,o,n),datum:tl([l,...wT(i,o,n).map(g=>g.view)]),brushRegion:(g,v,y,x)=>[g,v,y,x],extent:void 0,state:Sc([c,...z2e(i,o,n)],p),emitter:a,scale:d,coordinate:h,selectedHandles:void 0},f),r));return u.brush=m,()=>m.destroy()}}function Py(e,t,n,r,i){let[,o,,a]=i;return[e,o,n,a]}function ST(e){return $h(Object.assign(Object.assign({},e),{brushRegion:Py,selectedHandles:["handle-e","handle-w"]}))}function Ny(e,t,n,r,i){let[o,,a]=i;return[o,t,a,r]}function CT(e){return $h(Object.assign(Object.assign({},e),{brushRegion:Ny,selectedHandles:["handle-n","handle-s"]}))}var OT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},R2e="axis",F2e="axis-line",B2e="axis-main-group",d$="axis-hot-area";function j2e(e){return e.getElementsByClassName(R2e)}function h$(e){return e.getElementsByClassName(F2e)[0]}function V2e(e){return e.getElementsByClassName(B2e)[0]}function m$(e){return V2e(e).getLocalBounds()}function H2e(e,t){var{cross:n,offsetX:r,offsetY:i}=t,o=OT(t,["cross","offsetX","offsetY"]);let a=m$(e),s=h$(e),[l]=s.getLocalBounds().min,[c,u]=a.min,[f,p]=a.max,d=(f-c)*2;return{brushRegion:Ny,hotZone:new Ks({className:d$,style:Object.assign({width:n?d/2:d,transform:`translate(${(n?c:l-d/2).toFixed(2)}, ${u})`,height:p-u},o)}),extent:n?(h,m,g,v)=>[-1/0,m,1/0,v]:(h,m,g,v)=>[Math.floor(c-r),m,Math.ceil(f-r),v]}}function W2e(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,o=OT(t,["offsetY","offsetX","cross"]);let a=m$(e),s=h$(e),[,l]=s.getLocalBounds().min,[c,u]=a.min,[f,p]=a.max,d=p-u;return{brushRegion:Py,hotZone:new Ks({className:d$,style:Object.assign({width:f-c,height:i?d:d*2,transform:`translate(${c}, ${i?u:l-d})`},o)}),extent:i?(h,m,g,v)=>[h,-1/0,g,1/0]:(h,m,g,v)=>[h,Math.floor(u-n),g,Math.ceil(p-n)]}}function q2e(e,t){var{axes:n,elements:r,points:i,horizontal:o,datum:a,offsetY:s,offsetX:l,reverse:c=!1,state:u={},emitter:f,coordinate:p}=t,d=OT(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);let h=r(e),m=n(e),g=gu(h,a),{setState:v,removeState:y}=Va(u,g),x=new Map,_=Ke(d,"mask"),w=W=>Array.from(x.values()).every(([Z,ie,R,q])=>W.some(([J,te])=>J>=Z&&J<=R&&te>=ie&&te<=q)),S=m.map(W=>W.attributes.scale),M=W=>W.length>2?[W[0],W[W.length-1]]:W,O=new Map,E=()=>{O.clear();for(let W=0;W<m.length;W++){let Z=S[W],{domain:ie}=Z.getOptions();O.set(W,M(ie))}};E();let P=(W,Z)=>{let ie=[];for(let q of h){let J=i(q);w(J)?(v(q,"active"),ie.push(q)):v(q,"inactive")}if(O.set(W,A(ie,W)),!Z)return;let R=()=>{if(!N)return Array.from(O.values());let q=[];for(let[J,te]of O){let ae=S[J],{name:le}=ae.getOptions();le==="x"?q[0]=te:q[1]=te}return q};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:R()}})},k=W=>{for(let Z of h)y(Z,"active","inactive");E(),W&&f.emit("brushAxis:remove",{nativeEvent:!0})},A=(W,Z)=>{let ie=S[Z],{name:R}=ie.getOptions(),q=W.map(J=>{let te=J.__data__;return ie.invert(te[R])});return M(uu(ie,q))},N=m.some(o)&&m.some(W=>!o(W)),L=[];for(let W=0;W<m.length;W++){let Z=m[W],ie=o(Z)?W2e:H2e,{hotZone:R,brushRegion:q,extent:J}=ie(Z,{offsetY:s,offsetX:l,cross:N,zIndex:999,fill:"transparent"});Z.parentNode.appendChild(R);let te=Ty(R,Object.assign(Object.assign({},_),{reverse:c,brushRegion:q,brushended(ae){x.delete(Z),Array.from(x.entries()).length===0?k(ae):P(W,ae)},brushed(ae,le,ue,ye,Me){x.set(Z,J(ae,le,ue,ye)),P(W,Me)}}));L.push(te)}let z=(W={})=>{let{nativeEvent:Z}=W;Z||L.forEach(ie=>ie.remove(!1))},B=(W,Z,ie)=>{let[R,q]=W,J=le=>le.getStep?le.getStep():0,te=H(R,Z,ie),ae=H(q,Z,ie)+J(Z);return o(ie)?[te,-1/0,ae,1/0]:[-1/0,te,1/0,ae]},H=(W,Z,ie)=>{let{height:R,width:q}=p.getOptions(),J=Z.clone();return o(ie)?J.update({range:[0,q]}):J.update({range:[R,0]}),J.map(W)},j=W=>{let{nativeEvent:Z}=W;if(Z)return;let{selection:ie}=W.data;for(let R=0;R<L.length;R++){let q=ie[R],J=L[R],te=m[R];if(q){let ae=S[R];J.move(...B(q,ae,te),!1)}else J.remove(!1)}};return f.on("brushAxis:remove",z),f.on("brushAxis:highlight",j),()=>{L.forEach(W=>W.destroy()),f.off("brushAxis:remove",z),f.off("brushAxis:highlight",j)}}function MT(e){return(t,n,r)=>{let{container:i,view:o,options:a}=t,s=fo(i),{x:l,y:c}=s.getBBox(),{coordinate:u}=o;return q2e(i,Object.assign({elements:Ss,axes:j2e,offsetY:c,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{let{startPos:[p,d],endPos:[h,m]}=f.attributes;return p!==h&&d===m},datum:tl(o),state:Sc(a,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:r},e))}}var U2e=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},g$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function G2e(e=300){let t=null;return n=>{let{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function $2e(e,t){var{filter:n,reset:r,brushRegion:i,extent:o,reverse:a,emitter:s,scale:l,coordinate:c,selection:u,series:f=!1}=t,p=g$(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);let d=Ke(p,"mask"),{width:h,height:m}=e.getBBox(),g=o||[0,0,h,m],v=G2e(),y=Ty(e,Object.assign(Object.assign({},d),{extent:g,brushRegion:i,reverse:a,brushcreated:x}));e.addEventListener("click",_);function x(S,M,O,E,P){P.nativeEvent=!0,n(u(S,M,O,E),P),y.remove()}function _(S){v(S)&&(S.nativeEvent=!0,r(S))}let w=({nativeEvent:S,data:M})=>{if(S)return;let{selection:O}=M;n(O,{nativeEvent:!1})};return s.on("brush:filter",w),()=>{y.destroy(),s.off("brush:filter",w),e.removeEventListener("click",_)}}function Yh(e){var{hideX:t=!0,hideY:n=!0}=e,r=g$(e,["hideX","hideY"]);return(i,o,a)=>{let{container:s,view:l,options:c,update:u,setState:f}=i,p=fo(s),d={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1},h=!1,m=!1,g=l,{scale:v,coordinate:y}=l;return $2e(p,Object.assign(Object.assign({brushRegion:(x,_,w,S)=>[x,_,w,S],selection:(x,_,w,S)=>{let{scale:M,coordinate:O}=g;return S1(x,_,w,S,M,O)},filter:(x,_)=>U2e(this,void 0,void 0,function*(){if(m)return;m=!0;let[w,S]=x;f("brushFilter",O=>{let{marks:E}=O,P=E.map(k=>_e({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},k,{scale:{x:{domain:w,nice:!1},y:{domain:S,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:P,clip:!0})}),a.emit("brush:filter",Object.assign(Object.assign({},_),{data:{selection:[w,S]}})),g=(yield u()).view,m=!1,h=!0}),reset:x=>{if(m||!h)return;let{scale:_}=l,{x:w,y:S}=_,M=w.getOptions().domain,O=S.getOptions().domain;a.emit("brush:filter",Object.assign(Object.assign({},x),{data:{selection:[M,O]}})),h=!1,g=l,f("brushFilter"),u()},extent:void 0,emitter:a,scale:v,coordinate:y},d),r))}}function kT(e){return Yh(Object.assign(Object.assign({hideX:!0},e),{brushRegion:Py}))}function ET(e){return Yh(Object.assign(Object.assign({hideY:!0},e),{brushRegion:Ny}))}var Y2e=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},X2e="slider";function K2e(e,t,n,r=!1,i="x",o="y"){let{marks:a}=e,s=a.map(l=>{var c,u;return _e({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},l,{scale:t,[n]:Object.assign(Object.assign({},((c=l[n])===null||c===void 0?void 0:c[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((u=l[n])===null||u===void 0?void 0:u[o])&&{[o]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:s,clip:!0,animate:!1})}function Z2e(e,t,n){let[r,i]=e,o=n?l=>1-l:l=>l,a=ff(t,o(r),!0),s=ff(t,o(i),!1);return uu(t,[a,s])}function EC(e){return[e[0],e[e.length-1]]}function Ly({initDomain:e={},className:t=X2e,prefix:n="slider",setValue:r=(c,u)=>c.setValues(u),hasState:i=!1,wait:o=50,leading:a=!0,trailing:s=!1,getInitValues:l=c=>{var u;let f=(u=c?.attributes)===null||u===void 0?void 0:u.values;if(f[0]!==0||f[1]!==1)return f}}){return(c,u,f)=>{let{container:p,view:d,update:h,setState:m}=c,g=p.getElementsByClassName(t);if(!g.length)return()=>{};let v=!1,{scale:y,coordinate:x,layout:_}=d,{paddingLeft:w,paddingTop:S,paddingBottom:M,paddingRight:O}=_,{x:E,y:P}=y,k=Tn(x),A=B=>{let H=B==="vertical"?"y":"x",j=B==="vertical"?"x":"y";return k?[j,H]:[H,j]},N=new Map,L=new Set,z={x:e.x||E.getOptions().domain,y:e.y||P.getOptions().domain};for(let B of g){let{orientation:H}=B.attributes,[j,W]=A(H),Z=`${n}${aa(j)}:filter`,ie=j==="x",{ratio:R}=E.getOptions(),{ratio:q}=P.getOptions(),J=ue=>{if(ue.data){let{selection:Ve}=ue.data,[Ze=EC(z.x),Ae=EC(z.y)]=Ve;return ie?[uu(E,Ze,R),uu(P,Ae,q)]:[uu(P,Ae,q),uu(E,Ze,R)]}let{value:ye}=ue.detail,Me=y[j],we=Z2e(ye,Me,k&&H==="horizontal"),De=z[W];return[we,De]},te=js(ue=>Y2e(this,void 0,void 0,function*(){let{initValue:ye=!1}=ue;if(v&&!ye)return;v=!0;let{nativeEvent:Me=!0}=ue,[we,De]=J(ue);if(z[j]=we,z[W]=De,Me){let Ve=ie?we:De,Ze=ie?De:we;f.emit(Z,Object.assign(Object.assign({},ue),{nativeEvent:Me,data:{selection:[EC(Ve),EC(Ze)]}}))}m(B,Ve=>Object.assign(Object.assign({},K2e(Ve,{[j]:{domain:we,nice:!1}},n,i,j,W)),{paddingLeft:w,paddingTop:S,paddingBottom:M,paddingRight:O})),yield h(),v=!1}),o,{leading:a,trailing:s}),ae=ue=>{let{nativeEvent:ye}=ue;if(ye)return;let{data:Me}=ue,{selection:we}=Me,[De,Ve]=we;B.dispatchEvent(new or("valuechange",{data:Me,nativeEvent:!1}));let Ze=ie?H2(De,E):H2(Ve,P);r(B,Ze)};f.on(Z,ae),B.addEventListener("valuechange",te),N.set(B,te),L.add([Z,ae]);let le=l(B);le&&B.dispatchEvent(new or("valuechange",{detail:{value:le},nativeEvent:!1,initValue:!0}))}return()=>{for(let[B,H]of N)B.removeEventListener("valuechange",H);for(let[B,H]of L)f.off(B,H)}}}var v$="g2-scrollbar";function AT(e={}){return(t,n,r)=>{let{view:i,container:o}=t;if(!o.getElementsByClassName(v$).length)return()=>{};let{scale:s}=i,{x:l,y:c}=s,u={x:[...l.getOptions().domain],y:[...c.getOptions().domain]};return l.update({domain:l.getOptions().expectedDomain}),c.update({domain:c.getOptions().expectedDomain}),Ly(Object.assign(Object.assign({},e),{initDomain:u,className:v$,prefix:"scrollbar",hasState:!0,setValue:(p,d)=>p.setValue(d[0]),getInitValues:p=>{let d=p.slider.attributes.values;if(d[0]!==0)return d}}))(t,n,r)}}var J2e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Q2e(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${bV(r)}:${i}`).join(";")}">${t}</${e}>`}var eye={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function y$(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function AC(e){var{offsetX:t=8,offsetY:n=8}=e,r=J2e(e,["offsetX","offsetY"]);return i=>{let{container:o}=i,[a,s]=o.getBounds().min,l=Ke(r,"tip"),c=new Set,u=p=>{let{target:d}=p;if(!y$(d)){p.stopPropagation();return}let{offsetX:h,offsetY:m}=p,g=h+t-a,v=m+n-s;if(d.tip){d.tip.style.x=g,d.tip.style.y=v;return}let{text:y}=d.style,x=new Sp({className:"poptip",style:{innerHTML:Q2e("div",y,Object.assign(Object.assign({},eye),l)),x:g,y:v}});o.appendChild(x),d.tip=x,c.add(x)},f=p=>{let{target:d}=p;if(!y$(d)){p.stopPropagation();return}d.tip&&(d.tip.remove(),d.tip=null,c.delete(d.tip))};return o.addEventListener("pointerover",u),o.addEventListener("pointerout",f),()=>{o.removeEventListener("pointerover",u),o.removeEventListener("pointerout",f),c.forEach(p=>p.remove())}}}AC.props={reapplyWhenUpdate:!0};var tye=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},nye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rye(e){return bt(e).select(`.${Fh}`).node()}var iye={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function TT(e={}){let{originData:t=[],layout:n}=e,r=nye(e,["originData","layout"]),i=_e({},iye,r),o=Ke(i,"breadCrumb"),a=Ke(i,"active");return s=>{let{update:l,setState:c,container:u,options:f}=s,p=rye(u),d=f.marks[0],{state:h}=d,m=new vr;p.appendChild(m);let g=(_,w)=>tye(this,void 0,void 0,function*(){if(m.removeChildren(),w){let S="",M=o.y,O=0,E=[],P=p.getBBox().width,k=_.map((A,N)=>{S=`${S}${A}/`,E.push(A);let L=new Uo({name:S.replace(/\/$/,""),style:Object.assign(Object.assign({text:A,x:O,path:[...E],depth:N},o),{y:M})});m.appendChild(L),O+=L.getBBox().width;let z=new Uo({style:Object.assign(Object.assign({x:O,text:" / "},o),{y:M})});return m.appendChild(z),O+=z.getBBox().width,O>P&&(M=m.getBBox().height+o.y,O=0,L.attr({x:O,y:M}),O+=L.getBBox().width,z.attr({x:O,y:M}),O+=z.getBBox().width),N===rp(_)-1&&z.remove(),L});k.forEach((A,N)=>{if(N===rp(k)-1)return;let L=Object.assign({},A.attributes);A.attr("cursor","pointer"),A.addEventListener("mouseenter",()=>{A.attr(a)}),A.addEventListener("mouseleave",()=>{A.attr(L)}),A.addEventListener("click",()=>{g(Cr(A,["style","path"]),Cr(A,["style","depth"]))})})}c$(u,c),c("treemapDrillDown",S=>{let{marks:M}=S,O=_.join("/"),E=M.map(P=>{if(P.type!=="rect")return P;let k=t;if(w){let N=t.filter(j=>{let W=Cr(j,["id"]);return W&&(W.match(`${O}/`)||O.match(W))}).map(j=>({value:j.height===0?Cr(j,["value"]):void 0,name:Cr(j,["id"])})),{paddingLeft:L,paddingBottom:z,paddingRight:B}=n,H=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||m.getBBox().height+10)/(w+1),paddingLeft:L/(w+1),paddingBottom:z/(w+1),paddingRight:B/(w+1),path:j=>j.name,layer:j=>j.depth===w+1});k=oS(N,H,{value:"value"})[0]}else k=t.filter(N=>N.depth===1);let A=[];return k.forEach(({path:N})=>{A.push($c(N))}),_e({},P,{data:k,scale:{color:{domain:A}}})});return Object.assign(Object.assign({},S),{marks:E})}),yield l(void 0,["legendFilter"])}),v=_=>{let w=_.target;if(Cr(w,["markType"])!=="rect")return;let S=Cr(w,["__data__","key"]),M=Gu(t,O=>O.id===S);Cr(M,"height")&&g(Cr(M,"path"),Cr(M,"depth"))};p.addEventListener("click",v);let y=dv(Object.assign(Object.assign({},h.active),h.inactive)),x=()=>{vC(p).forEach(w=>{let S=Cr(w,["style","cursor"]),M=Gu(t,O=>O.id===Cr(w,["__data__","key"]));if(S!=="pointer"&&M?.height){w.style.cursor="pointer";let O=f6(w.attributes,y);w.addEventListener("mouseenter",()=>{w.attr(h.active)}),w.addEventListener("mouseleave",()=>{w.attr(_e(O,h.inactive))})}})};return x(),p.addEventListener("mousemove",x),()=>{m.remove(),p.removeEventListener("click",v),p.removeEventListener("mousemove",x)}}}var PT=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},oye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},aye={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},NT="movePoint",x$=e=>{let t=e.target,{markType:n}=t;n==="line"&&(t.attr("_lineWidth",t.attr("lineWidth")||1),t.attr("lineWidth",t.attr("_lineWidth")+3)),n==="interval"&&(t.attr("_opacity",t.attr("opacity")||1),t.attr("opacity",.7*t.attr("_opacity")))},b$=e=>{let t=e.target,{markType:n}=t;n==="line"&&t.attr("lineWidth",t.attr("_lineWidth")),n==="interval"&&t.attr("opacity",t.attr("_opacity"))},sye=(e,t,n)=>t.map(r=>["x","color"].reduce((o,a)=>{let s=n[a];return s&&r[s]!==e[s]?!1:o},!0)?Object.assign(Object.assign({},r),e):r),lye=e=>{let t=Cr(e,["__data__","y"]),r=Cr(e,["__data__","y1"])-t,{__data__:{data:i,encode:o,transform:a},childNodes:s}=e.parentNode,l=Gu(a,({type:f})=>f==="normalizeY"),c=Cr(o,["y","field"]),u=i[s.indexOf(e)][c];return(f,p=!1)=>l||p?f/(1-f)/(r/(1-r))*u:f},cye=(e,t)=>{let n=Cr(e,["__data__","seriesItems",t,"0","value"]),r=Cr(e,["__data__","seriesIndex",t]),{__data__:{data:i,encode:o,transform:a}}=e.parentNode,s=Gu(a,({type:u})=>u==="normalizeY"),l=Cr(o,["y","field"]),c=i[r][l];return u=>s?n===1?u:u/(1-u)/(n/(1-n))*c:u},_$=(e,t,n)=>{e.forEach((r,i)=>{r.attr("stroke",t[1]===i?n.activeStroke:n.stroke)})},w$=(e,t,n,r)=>{let i=new Gr({style:n}),o=new Uo({style:r});return t.appendChild(o),e.appendChild(i),[i,o]},S$=(e,t)=>{if(!Cr(e,["options","range","indexOf"]))return;let r=e.options.range.indexOf(t);return e.sortedDomain[r]},LT=(e,t,n)=>{let r=Ay(e,t),o=Ay(e,n)/r,a=e[0]+(t[0]-e[0])*o,s=e[1]+(t[1]-e[1])*o;return[a,s]};function IT(e={}){let{selection:t=[],precision:n=2}=e,r=oye(e,["selection","precision"]),i=Object.assign(Object.assign({},aye),r||{}),o=Ke(i,"path"),a=Ke(i,"label"),s=Ke(i,"point");return(l,c,u)=>{let{update:f,setState:p,container:d,view:h,options:{marks:m,coordinate:g}}=l,v=fo(d),y=vC(v),x,_=t,{transform:w=[],type:S}=g,M=!!Gu(w,({type:j})=>j==="transpose"),O=S==="polar",E=S==="theta",P=!!Gu(y,({markType:j})=>j==="area");P&&(y=y.filter(({markType:j})=>j==="area"));let k=new vr({style:{zIndex:2}});v.appendChild(k);let A=()=>{u.emit("element-point:select",{nativeEvent:!0,data:{selection:_}})},N=(j,W)=>{u.emit("element-point:moved",{nativeEvent:!0,data:{changeData:j,data:W}})},L=j=>{let W=j.target;_=[W.parentNode.childNodes.indexOf(W)],A(),B(W)},z=j=>{let{data:{selection:W},nativeEvent:Z}=j;if(Z)return;_=W;let ie=Cr(y,[_?.[0]]);ie&&B(ie)},B=j=>{let{attributes:W,markType:Z,__data__:ie}=j,{stroke:R}=W,{points:q,seriesTitle:J,color:te,title:ae,seriesX:le,y1:ue}=ie;if(M&&Z!=="interval")return;let{scale:ye,coordinate:Me}=x?.view||h,{color:we,y:De,x:Ve}=ye,Ze=Me.getCenter();k.removeChildren();let Ae,pe=(ft,nt,$e,at)=>PT(this,void 0,void 0,function*(){return p("elementPointMove",mt=>{var lt;let Et=(((lt=x?.options)===null||lt===void 0?void 0:lt.marks)||m).map(Rt=>{if(!at.includes(Rt.type))return Rt;let{data:Qt,encode:It}=Rt,Sn=Object.keys(It).reduce((ot,We)=>{let Zt=It[We];return We==="x"&&(ot[Zt]=ft),We==="y"&&(ot[Zt]=nt),We==="color"&&(ot[Zt]=$e),ot},{}),Dt=sye(Sn,Qt,It);return N(Sn,Dt),_e({},Rt,{data:Dt,animate:!1})});return Object.assign(Object.assign({},mt),{marks:Et})}),yield f("elementPointMove")});if(["line","area"].includes(Z))q.forEach((ft,nt)=>{let $e=Ve.invert(le[nt]);if(!$e)return;let at=new ys({name:NT,style:Object.assign({cx:ft[0],cy:ft[1],fill:R},s)}),mt=cye(j,nt);at.addEventListener("mousedown",lt=>{let Et=Me.output([le[nt],0]),Rt=J?.length;d.attr("cursor","move"),_[1]!==nt&&(_[1]=nt,A()),_$(k.childNodes,_,s);let[Qt,It]=w$(k,at,o,a),Kt=Dt=>{let ot=ft[1]+Dt.clientY-Ae[1];if(P)if(O){let We=ft[0]+Dt.clientX-Ae[0],[Zt,Tt]=LT(Ze,Et,[We,ot]),[,zn]=Me.output([1,De.output(0)]),[,an]=Me.invert([Zt,zn-(q[nt+Rt][1]-Tt)]),Jt=(nt+1)%Rt,yr=(nt-1+Rt)%Rt,Cn=W1([q[yr],[Zt,Tt],J[Jt]&&q[Jt]]);It.attr("text",mt(De.invert(an)).toFixed(n)),Qt.attr("d",Cn),at.attr("cx",Zt),at.attr("cy",Tt)}else{let[,We]=Me.output([1,De.output(0)]),[,Zt]=Me.invert([ft[0],We-(q[nt+Rt][1]-ot)]),Tt=W1([q[nt-1],[ft[0],ot],J[nt+1]&&q[nt+1]]);It.attr("text",mt(De.invert(Zt)).toFixed(n)),Qt.attr("d",Tt),at.attr("cy",ot)}else{let[,We]=Me.invert([ft[0],ot]),Zt=W1([q[nt-1],[ft[0],ot],q[nt+1]]);It.attr("text",De.invert(We).toFixed(n)),Qt.attr("d",Zt),at.attr("cy",ot)}};Ae=[lt.clientX,lt.clientY],window.addEventListener("mousemove",Kt);let Sn=()=>PT(this,void 0,void 0,function*(){if(d.attr("cursor","default"),window.removeEventListener("mousemove",Kt),d.removeEventListener("mouseup",Sn),mr(It.attr("text")))return;let Dt=Number(It.attr("text")),ot=S$(we,te);x=yield pe($e,Dt,ot,["line","area"]),It.remove(),Qt.remove(),B(j)});d.addEventListener("mouseup",Sn)}),k.appendChild(at)}),_$(k.childNodes,_,s);else if(Z==="interval"){let ft=[(q[0][0]+q[1][0])/2,q[0][1]];M?ft=[q[0][0],(q[0][1]+q[1][1])/2]:E&&(ft=q[0]);let nt=lye(j),$e=new ys({name:NT,style:Object.assign(Object.assign({cx:ft[0],cy:ft[1],fill:R},s),{stroke:s.activeStroke})});$e.addEventListener("mousedown",at=>{d.attr("cursor","move");let mt=S$(we,te),[lt,Et]=w$(k,$e,o,a),Rt=It=>{if(M){let Kt=ft[0]+It.clientX-Ae[0],[Sn]=Me.output([De.output(0),De.output(0)]),[,Dt]=Me.invert([Sn+(Kt-q[2][0]),ft[1]]),ot=W1([[Kt,q[0][1]],[Kt,q[1][1]],q[2],q[3]],!0);Et.attr("text",nt(De.invert(Dt)).toFixed(n)),lt.attr("d",ot),$e.attr("cx",Kt)}else if(E){let Kt=ft[1]+It.clientY-Ae[1],Sn=ft[0]+It.clientX-Ae[0],[Dt,ot]=LT(Ze,[Sn,Kt],ft),[We,Zt]=LT(Ze,[Sn,Kt],q[1]),Tt=Me.invert([Dt,ot])[1],zn=ue-Tt;if(zn<0)return;let an=XG(Ze,[[Dt,ot],[We,Zt],q[2],q[3]],zn>.5?1:0);Et.attr("text",nt(zn,!0).toFixed(n)),lt.attr("d",an),$e.attr("cx",Dt),$e.attr("cy",ot)}else{let Kt=ft[1]+It.clientY-Ae[1],[,Sn]=Me.output([1,De.output(0)]),[,Dt]=Me.invert([ft[0],Sn-(q[2][1]-Kt)]),ot=W1([[q[0][0],Kt],[q[1][0],Kt],q[2],q[3]],!0);Et.attr("text",nt(De.invert(Dt)).toFixed(n)),lt.attr("d",ot),$e.attr("cy",Kt)}};Ae=[at.clientX,at.clientY],window.addEventListener("mousemove",Rt);let Qt=()=>PT(this,void 0,void 0,function*(){if(d.attr("cursor","default"),d.removeEventListener("mouseup",Qt),window.removeEventListener("mousemove",Rt),mr(Et.attr("text")))return;let It=Number(Et.attr("text"));x=yield pe(ae,It,mt,[Z]),Et.remove(),lt.remove(),B(j)});d.addEventListener("mouseup",Qt)}),k.appendChild($e)}};y.forEach((j,W)=>{_[0]===W&&B(j),j.addEventListener("click",L),j.addEventListener("mouseenter",x$),j.addEventListener("mouseleave",b$)});let H=j=>{let W=j?.target;(!W||W.name!==NT&&!y.includes(W))&&(_=[],A(),k.removeChildren())};return u.on("element-point:select",z),u.on("element-point:unselect",H),d.addEventListener("mousedown",H),()=>{k.remove(),u.off("element-point:select",z),u.off("element-point:unselect",H),d.removeEventListener("mousedown",H),y.forEach(j=>{j.removeEventListener("click",L),j.removeEventListener("mouseenter",x$),j.removeEventListener("mouseleave",b$)})}}}var C$={},DT={},zT=34,Iy=10,RT=13;function M$(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function uye(e,t){var n=M$(e);return function(r,i){return t(n(r),i,e)}}function O$(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Cs(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function fye(e){return e<0?"-"+Cs(-e,6):e>9999?"+"+Cs(e,6):Cs(e,4)}function pye(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":fye(e.getUTCFullYear(),4)+"-"+Cs(e.getUTCMonth()+1,2)+"-"+Cs(e.getUTCDate(),2)+(i?"T"+Cs(t,2)+":"+Cs(n,2)+":"+Cs(r,2)+"."+Cs(i,3)+"Z":r?"T"+Cs(t,2)+":"+Cs(n,2)+":"+Cs(r,2)+"Z":n||t?"T"+Cs(t,2)+":"+Cs(n,2)+"Z":"")}function FT(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,p){var d,h,m=i(f,function(g,v){if(d)return d(g,v-1);h=g,d=p?uye(g,p):M$(g)});return m.columns=h||[],m}function i(f,p){var d=[],h=f.length,m=0,g=0,v,y=h<=0,x=!1;f.charCodeAt(h-1)===Iy&&--h,f.charCodeAt(h-1)===RT&&--h;function _(){if(y)return DT;if(x)return x=!1,C$;var S,M=m,O;if(f.charCodeAt(M)===zT){for(;m++<h&&f.charCodeAt(m)!==zT||f.charCodeAt(++m)===zT;);return(S=m)>=h?y=!0:(O=f.charCodeAt(m++))===Iy?x=!0:O===RT&&(x=!0,f.charCodeAt(m)===Iy&&++m),f.slice(M+1,S-1).replace(/""/g,'"')}for(;m<h;){if((O=f.charCodeAt(S=m++))===Iy)x=!0;else if(O===RT)x=!0,f.charCodeAt(m)===Iy&&++m;else if(O!==n)continue;return f.slice(M,S)}return y=!0,f.slice(M,h)}for(;(v=_())!==DT;){for(var w=[];v!==C$&&v!==DT;)w.push(v),v=_();p&&(w=p(w,g++))==null||d.push(w)}return d}function o(f,p){return f.map(function(d){return p.map(function(h){return u(d[h])}).join(e)})}function a(f,p){return p==null&&(p=O$(f)),[p.map(u).join(e)].concat(o(f,p)).join(`
`)}function s(f,p){return p==null&&(p=O$(f)),o(f,p).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?pye(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:c,formatValue:u}}function TC(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))dye&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}var dye=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var hye=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},PC=e=>{let{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>hye(void 0,void 0,void 0,function*(){let o=yield fetch(t);if(n==="csv"){let a=yield o.text();return FT(r).parse(a,i?TC:cc)}else if(n==="json")return yield o.json();throw new Error(`Unknown format: ${n}.`)})};PC.props={};function mye(e){return!e||Object.keys(e).length===0}var NC=e=>{let{fields:t,key:n="key",value:r="value"}=e;return i=>mye(t)?i:i.flatMap(o=>t.map(a=>Object.assign(Object.assign({},o),{[n]:a,[r]:o[a]})))};NC.props={};function gye(e){return e!=null&&!Number.isNaN(e)}var LC=e=>{let{callback:t=gye}=e;return n=>n.filter(t)};LC.props={};var IC=e=>{let{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};IC.props={};function vye(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}var DC=e=>{let{fields:t}=e;return n=>n.map(r=>vye(r,t))};DC.props={};function yye(e){return Object.keys(e).length===0}var zC=e=>t=>{if(!e||yye(e))return t;let n=r=>Object.entries(r).reduce((i,[o,a])=>(i[e[o]||o]=a,i),{});return t.map(n)};zC.props={};function k$(e,t){return e.map(n=>{if(Array.isArray(n)){let[r,i=t]=n;return[r,i]}return[n,t]})}var RC=e=>{let{fields:t=[]}=e,n=k$(t,!0);return r=>{let i=(o,a)=>n.reduce((s,[l,c=!0])=>s!==0?s:c?o[l]<a[l]?-1:+(o[l]!==a[l]):o[l]>a[l]?-1:+(o[l]!==a[l]),0);return[...r].sort(i)}};RC.props={};var FC=e=>{let{value:t}=e;return()=>t};FC.props={};var BC=e=>{let{callback:t=cc}=e;return n=>t(n)};BC.props={};var jC=e=>{let{callback:t=cc}=e;return n=>Array.isArray(n)?n.map(t):n};jC.props={};var xye=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})};function E$(e,t){return{set(n,r,i){if(t[n]===void 0)return this;let o=r?r.call(null,t[n]):t[n];return i?i.call(null,o):typeof e[n]=="function"?e[n](o):e[n]=o,this},setAsync(n,r,i){return xye(this,void 0,void 0,function*(){if(t[n]===void 0)return this;let o=r?yield r.call(null,t[n]):t[n];return i?i.call(null,o):typeof e[n]=="function"?e[n](o):e[n]=o,this})}}}var BT=Math.PI/180,Dy=64,VC=2048;function bye(e){return e.text}function _ye(){return"serif"}function A$(){return"normal"}function wye(e){return e.value}function Sye(){return~~(Math.random()*2)*90}function Cye(){return 1}function Oye(){}function Mye(e,t,n,r){if(t.sprite)return;let i=e.context,o=e.ratio;i.clearRect(0,0,(Dy<<5)/o,VC/o);let a=0,s=0,l=0,c=n.length;for(--r;++r<c;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font;let p=i.measureText(t.text+"m").width*o,d=t.size<<1;if(t.rotate){let h=Math.sin(t.rotate*BT),m=Math.cos(t.rotate*BT),g=p*m,v=p*h,y=d*m,x=d*h;p=Math.max(Math.abs(g+x),Math.abs(g-x))+31>>5<<5,d=~~Math.max(Math.abs(v+y),Math.abs(v-y))}else p=p+31>>5<<5;if(d>l&&(l=d),a+p>=Dy<<5&&(a=0,s+=l,l=0),s+d>=VC)break;i.translate((a+(p>>1))/o,(s+(d>>1))/o),t.rotate&&i.rotate(t.rotate*BT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=p,t.height=d,t.xoff=a,t.yoff=s,t.x1=p>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=p}let u=i.getImageData(0,0,(Dy<<5)/o,VC/o).data,f=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;let p=t.width,d=p>>5,h=t.y1-t.y0;for(let v=0;v<h*d;v++)f[v]=0;if(a=t.xoff,a==null)return;s=t.yoff;let m=0,g=-1;for(let v=0;v<h;v++){for(let y=0;y<p;y++){let x=d*v+(y>>5),_=u[(s+v)*(Dy<<5)+(a+y)<<2]?1<<31-y%32:0;f[x]|=_,m|=_}m?g=v:(t.y0++,h--,v--,s++)}t.y1=t.y0+g,t.sprite=f.slice(0,(t.y1-t.y0)*d)}}function kye(e,t,n){n>>=5;let r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,l=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),u;for(let f=0;f<l;f++){u=0;for(let p=0;p<=i;p++)if((u<<s|(p<i?(u=r[f*i+p])>>>a:0))&t[c+p])return!0;c+=n}return!1}function Eye(e,t){let n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Aye(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function P$(e){let t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Tye(e){let n=4*e[0]/e[1],r=0,i=0;return function(o){let a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function T$(e){let t=[],n=-1;for(;++n<e;)t[n]=0;return t}function Pye(){return document.createElement("canvas")}function yf(e){return typeof e=="function"?e:function(){return e}}var Nye={archimedean:P$,rectangular:Tye};function N$(){let e=[256,256],t=bye,n=_ye,r=wye,i=A$,o=Sye,a=Cye,s=P$,l=Math.random,c=Oye,u=[],f=null,p=1/0,d=Pye,h=A$,m={};m.start=function(){let[y,x]=e,_=g(d()),w=m.board?m.board:T$((e[0]>>5)*e[1]),S=u.length,M=[],O=u.map(function(A,N,L){return A.text=t.call(this,A,N,L),A.font=n.call(this,A,N,L),A.style=h.call(this,A,N,L),A.weight=i.call(this,A,N,L),A.rotate=o.call(this,A,N,L),A.size=~~r.call(this,A,N,L),A.padding=a.call(this,A,N,L),A}).sort(function(A,N){return N.size-A.size}),E=-1,P=m.board?[{x:0,y:0},{x:y,y:x}]:void 0;f&&clearInterval(f),f=setInterval(k,0),k();function k(){let A=Date.now();for(;Date.now()-A<p&&++E<S;){let N=O[E];N.x=y*(l()+.5)>>1,N.y=x*(l()+.5)>>1,Mye(_,N,O,E),N.hasText&&v(w,N,P)&&(c.call(null,"word",{cloud:m,word:N}),M.push(N),P?m.hasImage||Eye(P,N):P=[{x:N.x+N.x0,y:N.y+N.y0},{x:N.x+N.x1,y:N.y+N.y1}],N.x-=e[0]>>1,N.y-=e[1]>>1)}m._tags=M,m._bounds=P,E>=S&&(m.stop(),c.call(null,"end",{cloud:m,words:M,bounds:P}))}return m},m.stop=function(){return f&&(clearInterval(f),f=null),m};function g(y){y.width=y.height=1;let x=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(Dy<<5)/x,y.height=VC/x;let _=y.getContext("2d");return _.fillStyle=_.strokeStyle="red",_.textAlign="center",_.textBaseline="middle",{context:_,ratio:x}}function v(y,x,_){let w=x.x,S=x.y,M=Math.sqrt(e[0]*e[0]+e[1]*e[1]),O=s(e),E=l()<.5?1:-1,P,k=-E,A,N;for(;(P=O(k+=E))&&(A=~~P[0],N=~~P[1],!(Math.min(Math.abs(A),Math.abs(N))>=M));)if(x.x=w+A,x.y=S+N,!(x.x+x.x0<0||x.y+x.y0<0||x.x+x.x1>e[0]||x.y+x.y1>e[1])&&(!_||!kye(x,y,e[0]))&&(!_||Aye(x,_))){let L=x.sprite,z=x.width>>5,B=e[0]>>5,H=x.x-(z<<4),j=H&127,W=32-j,Z=x.y1-x.y0,ie,R=(x.y+x.y0)*B+(H>>5);for(let q=0;q<Z;q++){ie=0;for(let J=0;J<=z;J++)y[R+J]|=ie<<W|(J<z?(ie=L[q*z+J])>>>j:0);R+=B}return delete x.sprite,!0}return!1}return m.createMask=y=>{let x=document.createElement("canvas"),[_,w]=e;if(!_||!w)return;let S=_>>5,M=T$((_>>5)*w);x.width=_,x.height=w;let O=x.getContext("2d");O.drawImage(y,0,0,y.width,y.height,0,0,_,w);let E=O.getImageData(0,0,_,w).data;for(let P=0;P<w;P++)for(let k=0;k<_;k++){let A=S*P+(k>>5),N=P*_+k<<2,z=E[N]>=250&&E[N+1]>=250&&E[N+2]>=250?1<<31-k%32:0;M[A]|=z}m.board=M,m.hasImage=!0},m.timeInterval=function(y){p=y??1/0},m.words=function(y){u=y},m.size=function(y=[]){e=[+y[0],+y[1]]},m.text=function(y){t=yf(y)},m.font=function(y){n=yf(y)},m.fontWeight=function(y){i=yf(y)},m.rotate=function(y){o=yf(y)},m.canvas=function(y){d=yf(y)},m.spiral=function(y){s=Nye[y]||y},m.fontSize=function(y){r=yf(y)},m.padding=function(y){a=yf(y)},m.random=function(y){l=yf(y)},m.on=function(y){c=yf(y)},m}var Lye=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},Iye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Dye={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function zye(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){let r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function Rye(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){let[n,r]=e;if(!t)return()=>(r+n)/2;let[i,o]=t;return o===i?()=>(r+n)/2:({value:a})=>(r-n)/(o-i)*(a-i)+n}return()=>e}var HC=(e,t)=>n=>Lye(void 0,void 0,void 0,function*(){let r=Object.assign({},Dye,e,{canvas:t.createCanvas}),i=N$();yield E$(i,r).set("fontSize",y=>{let x=n.map(_=>_.value);return Rye(y,[ni(x),kn(x)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",zye,i.createMask),i.words([...n]);let o=i.start(),[a,s]=r.size,l=[{x:0,y:0},{x:a,y:s}],{_bounds:c=l,_tags:u,hasImage:f}=o,p=u.map(y=>{var{x,y:_,font:w}=y,S=Iye(y,["x","y","font"]);return Object.assign(Object.assign({},S),{x:x+a/2,y:_+s/2,fontFamily:w})}),[{x:d,y:h},{x:m,y:g}]=c,v={text:"",value:0,opacity:0,fontSize:0};return p.push(Object.assign(Object.assign({},v),{x:f?0:d,y:f?0:h}),Object.assign(Object.assign({},v),{x:f?a:m,y:f?s:g})),p});HC.props={};function L$(e){return typeof e=="string"?t=>t[e]:e}var WC=e=>{let{join:t,on:n,select:r=[],as:i=r,unknown:o=NaN}=e,[a,s]=n,l=L$(s),c=L$(a),u=Dd(t,([f])=>f,f=>l(f));return f=>f.map(p=>{let d=u.get(c(p));return Object.assign(Object.assign({},p),r.reduce((h,m,g)=>(h[i[g]]=d?d[m]:o,h),{}))})};WC.props={};var qC=e=>{let{start:t,end:n}=e;return r=>r.slice(t,n)};qC.props={};var B$=Ym(F$());var GC=e=>{let{field:t,groupBy:n,as:r=["y","size"],min:i,max:o,size:a=10,width:s}=e,[l,c]=r;return u=>Array.from(An(u,p=>n.map(d=>p[d]).join("-")).values()).map(p=>{let d=B$.default.create(p.map(g=>g[t]),{min:i,max:o,size:a,width:s}),h=d.map(g=>g.x),m=d.map(g=>g.y);return Object.assign(Object.assign({},p[0]),{[l]:h,[c]:m})})};GC.props={};var ma=Ym(V$());function YC(e,t){let n=Hye(e),r=n.filter(function(l){return Vye(l,e)}),i=0,o=0,a,s=[];if(r.length>1){let l=Wye(r);for(a=0;a<r.length;++a){let u=r[a];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}r.sort(function(u,f){return f.angle-u.angle});let c=r[r.length-1];for(a=0;a<r.length;++a){let u=r[a];o+=(c.x+u.x)*(u.y-c.y);let f={x:(u.x+c.x)/2,y:(u.y+c.y)/2},p=null;for(let d=0;d<u.parentIndex.length;++d)if(c.parentIndex.indexOf(u.parentIndex[d])>-1){let h=e[u.parentIndex[d]],m=Math.atan2(u.x-h.x,u.y-h.y),g=Math.atan2(c.x-h.x,c.y-h.y),v=g-m;v<0&&(v+=2*Math.PI);let y=g-v/2,x=q1(f,{x:h.x+h.radius*Math.sin(y),y:h.y+h.radius*Math.cos(y)});x>h.radius*2&&(x=h.radius*2),(p===null||p.width>x)&&(p={circle:h,width:x,p1:u,p2:c})}p!==null&&(s.push(p),i+=jT(p.circle.radius,p.width),c=u)}}else{let l=e[0];for(a=1;a<e.length;++a)e[a].radius<l.radius&&(l=e[a]);let c=!1;for(a=0;a<e.length;++a)if(q1(e[a],l)>Math.abs(l.radius-e[a].radius)){c=!0;break}c?i=o=0:(i=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-1e-10,y:l.y+l.radius},width:l.radius*2}))}return o/=2,t&&(t.area=i+o,t.arcArea=i,t.polygonArea=o,t.arcs=s,t.innerPoints=r,t.intersectionPoints=n),i+o}function Vye(e,t){for(let n=0;n<t.length;++n)if(q1(e,t[n])>t[n].radius+1e-10)return!1;return!0}function Hye(e){let t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){let i=HT(e[n],e[r]);for(let o=0;o<i.length;++o){let a=i[o];a.parentIndex=[n,r],t.push(a)}}return t}function jT(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function q1(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function VT(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);let r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return jT(e,r)+jT(t,i)}function HT(e,t){let n=q1(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];let o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),s=e.x+o*(t.x-e.x)/n,l=e.y+o*(t.y-e.y)/n,c=-(t.y-e.y)*(a/n),u=-(t.x-e.x)*(a/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function Wye(e){let t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function qT(e,t){t=t||{},t.maxIterations=t.maxIterations||500;let n=t.initialLayout||$ye,r=t.lossFunction||UT;e=qye(e);let i=n(e,t),o=[],a=[],s;for(s in i)i.hasOwnProperty(s)&&(o.push(i[s].x),o.push(i[s].y),a.push(s));let c=(0,ma.nelderMead)(function(u){let f={};for(let p=0;p<a.length;++p){let d=a[p];f[d]={x:u[2*p],y:u[2*p+1],radius:i[d].radius}}return r(f,e)},o,t).x;for(let u=0;u<a.length;++u)s=a[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}var H$=1e-10;function WT(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+H$?Math.abs(e-t):(0,ma.bisect)(function(r){return VT(e,t,r)-n},0,e+t)}function qye(e){e=e.slice();let t=[],n={},r,i,o,a;for(r=0;r<e.length;++r){let s=e[r];s.sets.length==1?t.push(s.sets[0]):s.sets.length==2&&(o=s.sets[0],a=s.sets[1],n[[o,a]]=!0,n[[a,o]]=!0)}for(t.sort((s,l)=>s>l?1:-1),r=0;r<t.length;++r)for(o=t[r],i=r+1;i<t.length;++i)a=t[i],[o,a]in n||e.push({sets:[o,a],size:0});return e}function Uye(e,t,n){let r=(0,ma.zerosM)(t.length,t.length),i=(0,ma.zerosM)(t.length,t.length);return e.filter(function(o){return o.sets.length==2}).map(function(o){let a=n[o.sets[0]],s=n[o.sets[1]],l=Math.sqrt(t[a].size/Math.PI),c=Math.sqrt(t[s].size/Math.PI),u=WT(l,c,o.size);r[a][s]=r[s][a]=u;let f=0;o.size+1e-10>=Math.min(t[a].size,t[s].size)?f=1:o.size<=1e-10&&(f=-1),i[a][s]=i[s][a]=f}),{distances:r,constraints:i}}function Gye(e,t,n,r){let i=0,o;for(o=0;o<t.length;++o)t[o]=0;for(o=0;o<n.length;++o){let a=e[2*o],s=e[2*o+1];for(let l=o+1;l<n.length;++l){let c=e[2*l],u=e[2*l+1],f=n[o][l],p=r[o][l],d=(c-a)*(c-a)+(u-s)*(u-s),h=Math.sqrt(d),m=d-f*f;p>0&&h<=f||p<0&&h>=f||(i+=2*m*m,t[2*o]+=4*m*(a-c),t[2*o+1]+=4*m*(s-u),t[2*l]+=4*m*(c-a),t[2*l+1]+=4*m*(u-s))}}return i}function $ye(e,t){let n=Xye(e,t),r=t.lossFunction||UT;if(e.length>=8){let i=Yye(e,t),o=r(i,e),a=r(n,e);o+1e-8<a&&(n=i)}return n}function Yye(e,t){t=t||{};let n=t.restarts||10,r=[],i={},o;for(o=0;o<e.length;++o){let m=e[o];m.sets.length==1&&(i[m.sets[0]]=r.length,r.push(m))}let a=Uye(e,r,i),s=a.distances,l=a.constraints,c=(0,ma.norm2)(s.map(ma.norm2))/s.length;s=s.map(function(m){return m.map(function(g){return g/c})});let u=function(m,g){return Gye(m,g,s,l)},f,p;for(o=0;o<n;++o){let m=(0,ma.zeros)(s.length*2).map(Math.random);p=(0,ma.conjugateGradient)(u,m,t),(!f||p.fx<f.fx)&&(f=p)}let d=f.x,h={};for(o=0;o<r.length;++o){let m=r[o];h[m.sets[0]]={x:d[2*o]*c,y:d[2*o+1]*c,radius:Math.sqrt(m.size/Math.PI)}}if(t.history)for(o=0;o<t.history.length;++o)(0,ma.scale)(t.history[o].x,c);return h}function Xye(e,t){let n=t&&t.lossFunction?t.lossFunction:UT,r={},i={},o;for(let f=0;f<e.length;++f){let p=e[f];p.sets.length==1&&(o=p.sets[0],r[o]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:p.size,radius:Math.sqrt(p.size/Math.PI)},i[o]=[])}e=e.filter(function(f){return f.sets.length==2});for(let f=0;f<e.length;++f){let p=e[f],d=p.hasOwnProperty("weight")?p.weight:1,h=p.sets[0],m=p.sets[1];p.size+H$>=Math.min(r[h].size,r[m].size)&&(d=0),i[h].push({set:m,size:p.size,weight:d}),i[m].push({set:h,size:p.size,weight:d})}let a=[];for(o in i)if(i.hasOwnProperty(o)){let f=0;for(let p=0;p<i[o].length;++p)f+=i[o][p].size*i[o][p].weight;a.push({set:o,size:f})}function s(f,p){return p.size-f.size}a.sort(s);let l={};function c(f){return f.set in l}function u(f,p){r[p].x=f.x,r[p].y=f.y,l[p]=!0}u({x:0,y:0},a[0].set);for(let f=1;f<a.length;++f){let p=a[f].set,d=i[p].filter(c);if(o=r[p],d.sort(s),d.length===0)throw"ERROR: missing pairwise overlap information";let h=[];for(let v=0;v<d.length;++v){let y=r[d[v].set],x=WT(o.radius,y.radius,d[v].size);h.push({x:y.x+x,y:y.y}),h.push({x:y.x-x,y:y.y}),h.push({y:y.y+x,x:y.x}),h.push({y:y.y-x,x:y.x});for(let _=v+1;_<d.length;++_){let w=r[d[_].set],S=WT(o.radius,w.radius,d[_].size),M=HT({x:y.x,y:y.y,radius:x},{x:w.x,y:w.y,radius:S});for(let O=0;O<M.length;++O)h.push(M[O])}}let m=1e50,g=h[0];for(let v=0;v<h.length;++v){r[p].x=h[v].x,r[p].y=h[v].y;let y=n(r,e);y<m&&(m=y,g=h[v])}u(g,p)}return r}function UT(e,t){let n=0;function r(i){return i.map(function(o){return e[o]})}for(let i=0;i<t.length;++i){let o=t[i],a;if(o.sets.length==1)continue;if(o.sets.length==2){let l=e[o.sets[0]],c=e[o.sets[1]];a=VT(l.radius,c.radius,q1(l,c))}else a=YC(r(o.sets));let s=o.hasOwnProperty("weight")?o.weight:1;n+=s*(a-o.size)*(a-o.size)}return n}function Kye(e){let t=function(n){let r=Math.max.apply(null,e.map(function(o){return o[n]+o.radius})),i=Math.min.apply(null,e.map(function(o){return o[n]-o.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function GT(e,t,n,r){let i=[],o=[];for(let m in e)e.hasOwnProperty(m)&&(o.push(m),i.push(e[m]));t-=2*r,n-=2*r;let a=Kye(i),s=a.xRange,l=a.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),e;let c=t/(s.max-s.min),u=n/(l.max-l.min),f=Math.min(u,c),p=(t-(s.max-s.min)*f)/2,d=(n-(l.max-l.min)*f)/2,h={};for(let m=0;m<i.length;++m){let g=i[m];h[o[m]]={radius:f*g.radius,x:r+p+(g.x-s.min)*f,y:r+d+(g.y-l.min)*f}}return h}function Zye(e,t,n){let r=[],i=e-n,o=t;return r.push("M",i,o),r.push("A",n,n,0,1,0,i+2*n,o),r.push("A",n,n,0,1,0,i,o),r.join(" ")}function $T(e){let t={};YC(e,t);let n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){let r=n[0].circle;return Zye(r.x,r.y,r.radius)}else{let r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){let o=n[i],a=o.circle.radius,s=o.width>a;r.push(`
A`,a,a,0,s?1:0,1,o.p1.x,o.p1.y)}return r.join(" ")}}var XC=e=>{let{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[o,a]=r;return s=>{let l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[t],size:f[n],[o]:f.sets.join("&")}));l.sort((f,p)=>f.sets.length-p.sets.length);let c=qT(l),u;return l.map(f=>{let p=f[t],d=({width:h,height:m})=>{u=u||GT(c,h,m,i);let g=p.map(y=>u[y]),v=$T(g);return/[zZ]$/.test(v)||(v+=" Z"),v};return Object.assign(Object.assign({},f),{[a]:d})})}};XC.props={};var KC=()=>e=>(console.log("G2 data section:",e),e);KC.props={};function zy(e){let{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function W$(e,t){let[n,r]=e,[i,o]=t;return n>=i[0]&&n<=o[0]&&r>=i[1]&&r<=o[1]}function q$(e,t){let[n,r]=e;return!(W$(n,t)&&W$(r,t))}function U$(e,t){let[n,r]=e,[i,o]=t;return n[0]<o[0]&&r[0]>i[0]&&n[1]<o[1]&&r[1]>i[1]}var YT=e=>{let{priority:t}=e;return n=>{let r=[];return t&&n.sort(t),n.forEach(i=>{Wp(i);let o=i.getLocalBounds();r.some(s=>U$(zy(o),zy(s.getLocalBounds())))?j1(i):r.push(i)}),n}};function Jye([e,t],[n,r]){return r>e&&t>n}function ZC(){let e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function Qye(e){let t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);let{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}var XT=e=>{let{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{let o=i.length;if(o<=1)return i;let[a,s]=ZC(),[l,c]=ZC(),[u,f]=ZC(),[p,d]=ZC();for(let h of i){let{min:m,max:g}=Qye(h),[v,y]=m,[x,_]=g;s(h,y),c(h,y),f(h,_-y),d(h,[v,x])}for(let h=0;h<t;h++){i.sort((g,v)=>gr(l(g),l(v)));let m=0;for(let g=0;g<o-1;g++){let v=i[g],y=g+1,x;for(;(x=i[y])&&!Jye(p(v),p(x));)y+=1;if(x){let _=l(v),w=u(v),S=l(x),M=S-(_+w);if(M<r){let O=(r-M)/2;m=Math.max(m,O),c(v,_-O),c(x,S+O)}}}if(m<n)break}for(let h of i)h.style.y+=l(h)-a(h);return i}};function G$(e){return typeof e=="object"?e:Dl(e)}function KT(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function $$(e,t,n){return .2126*KT(e)+.7152*KT(t)+.0722*KT(n)}function Y$(e,t){let{r:n,g:r,b:i}=e,{r:o,g:a,b:s}=t,l=$$(n,r,i),c=$$(o,a,s);return(Math.max(l,c)+.05)/(Math.min(l,c)+.05)}function exe(e,t){let n=fs(t,r=>Y$(e,G$(r)));return t[n]}var ZT=e=>{let{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{let o=i.attr("dependentElement").parsedStyle.fill,a=i.parsedStyle.fill;Y$(a,o)<t&&i.attr("fill",exe(o,n))}),r)};var JT=()=>e=>(e.forEach(t=>{Wp(t);let n=t.attr("bounds"),r=t.getLocalBounds();q$(zy(r),n)&&j1(t)}),e);var txe=(e,t)=>{let[[n,r],[i,o]]=t,[[a,s],[l,c]]=e,u=0,f=0;return a<n?u=n-a:l>i&&(u=i-l),s<r?f=r-s:c>o&&(f=o-c),[u,f]},QT=()=>(e,{canvas:t})=>{let{width:n,height:r}=t.getConfig();return e.forEach(i=>{Wp(i);let{max:o,min:a}=i.getRenderBounds(),[s,l]=o,[c,u]=a,f=txe([[c,u],[s,l]],[[0,0],[n,r]]);i.style.connector&&i.style.connectorPoints&&(i.style.connectorPoints[0][0]-=f[0],i.style.connectorPoints[0][1]-=f[1]),i.style.x+=f[0],i.style.y+=f[1]}),e};function eP(){return{"data.fetch":PC,"data.inline":FC,"data.sortBy":RC,"data.sort":IC,"data.filter":LC,"data.pick":DC,"data.rename":zC,"data.fold":NC,"data.slice":qC,"data.custom":BC,"data.map":jC,"data.join":WC,"data.kde":GC,"data.log":KC,"data.wordCloud":HC,"transform.stackY":_5,"transform.binX":n_,"transform.bin":N0,"transform.dodgeX":N5,"transform.jitter":B5,"transform.jitterX":j5,"transform.jitterY":V5,"transform.symmetryY":H5,"transform.diffY":W5,"transform.stackEnter":L5,"transform.normalizeY":I5,"transform.select":vp,"transform.selectX":q5,"transform.selectY":U5,"transform.groupX":G5,"transform.groupY":$5,"transform.groupColor":Y5,"transform.group":eu,"transform.sortX":X5,"transform.sortY":Z5,"transform.sortColor":K5,"transform.flexX":J5,"transform.pack":t_,"transform.sample":r_,"transform.filter":i_,"coordinate.cartesian":Db,"coordinate.polar":Uc,"coordinate.transpose":s0,"coordinate.theta":Rb,"coordinate.parallel":c0,"coordinate.fisheye":Bb,"coordinate.radial":l0,"coordinate.radar":jb,"encode.constant":Vb,"encode.field":Wb,"encode.transform":Hb,"encode.column":qb,"mark.interval":D3,"mark.rect":z3,"mark.line":R3,"mark.point":F3,"mark.text":B3,"mark.cell":j3,"mark.area":V3,"mark.link":d1,"mark.image":H3,"mark.polygon":W3,"mark.box":q3,"mark.vector":U3,"mark.lineX":$3,"mark.lineY":G3,"mark.connector":Y3,"mark.range":X3,"mark.rangeX":K3,"mark.rangeY":Z3,"mark.path":tS,"mark.shape":cS,"mark.density":bS,"mark.heatmap":_S,"mark.wordCloud":y1,"palette.category10":SS,"palette.category20":CS,"scale.linear":MS,"scale.ordinal":kS,"scale.band":OS,"scale.identity":ES,"scale.point":AS,"scale.time":TS,"scale.log":PS,"scale.pow":NS,"scale.sqrt":zS,"scale.threshold":LS,"scale.quantile":IS,"scale.quantize":DS,"scale.sequential":RS,"scale.constant":FS,"theme.classic":BS,"theme.classicDark":jS,"theme.academy":VS,"theme.light":b1,"theme.dark":F2,"component.axisX":YS,"component.axisY":XS,"component.legendCategory":V2,"component.legendContinuous":el,"component.legends":i4,"component.title":QS,"component.sliderX":e4,"component.sliderY":t4,"component.scrollbarX":n4,"component.scrollbarY":r4,"animation.scaleInX":zh,"animation.scaleOutX":gA,"animation.scaleInY":W2,"animation.scaleOutY":vA,"animation.waveIn":l4,"animation.fadeIn":o4,"animation.fadeOut":a4,"animation.zoomIn":bA,"animation.zoomOut":_A,"animation.pathIn":c4,"animation.morphing":s4,"animation.growInX":u4,"animation.growInY":f4,"interaction.elementHighlight":Up,"interaction.elementHighlightByX":yC,"interaction.elementHighlightByColor":xC,"interaction.elementSelect":Gp,"interaction.elementSelectByX":bC,"interaction.elementSelectByColor":_C,"interaction.fisheye":mT,"interaction.chartIndex":wC,"interaction.tooltip":CC,"interaction.legendFilter":bT,"interaction.legendHighlight":_T,"interaction.brushHighlight":$h,"interaction.brushXHighlight":ST,"interaction.brushYHighlight":CT,"interaction.brushAxisHighlight":MT,"interaction.brushFilter":Yh,"interaction.brushXFilter":kT,"interaction.brushYFilter":ET,"interaction.sliderFilter":Ly,"interaction.scrollbarFilter":AT,"interaction.poptip":AC,"interaction.treemapDrillDown":TT,"interaction.elementPointMove":IT,"composition.spaceLayer":b4,"composition.spaceFlex":_4,"composition.facetRect":C4,"composition.repeatMatrix":PA,"composition.facetCircle":NA,"composition.timingKeyframe":O4,"labelTransform.overlapHide":YT,"labelTransform.overlapDodgeY":XT,"labelTransform.overflowHide":JT,"labelTransform.contrastReverse":ZT,"labelTransform.exceedAdjust":QT}}function tP(){return{"composition.geoView":b7,"composition.geoPath":LA}}function nP(){return{"data.arc":h1,"data.cluster":gS,"mark.forceGraph":mS,"mark.tree":vS,"mark.pack":sS,"mark.sankey":Q3,"mark.chord":eS,"mark.treemap":aS}}function rP(){return{"data.venn":XC,"mark.boxplot":lS,"mark.gauge":xS,"mark.wordCloud":y1,"mark.liquid":wS}}function iP(){return Object.assign(Object.assign(Object.assign(Object.assign({},tP()),nP()),rP()),eP())}function oP(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}var X$={};var U1=e=>e?parseInt(e):0;function K$(e){let t=getComputedStyle(e),n=e.clientWidth||U1(t.width),r=e.clientHeight||U1(t.height),i=U1(t.paddingLeft)+U1(t.paddingRight),o=U1(t.paddingTop)+U1(t.paddingBottom);return{width:n-i,height:r-o}}function aP(e,t){let n=[e];for(;n.length;){let r=n.shift();t&&t(r);let i=r.children||[];for(let o of i)n.push(o)}}var Kp=class{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){let n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){let n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){let t=this.parentNode;if(t){let{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return aP(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){let n=[];return aP(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return aP(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}};var eY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},sP=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],lP="__remove__",tY="__callback__",Z$=1,J$=1;function nY(e){if(e===void 0){let t=document.createElement("div");return t[lP]=!0,t}return typeof e=="string"?document.getElementById(e):e}function rY(e){let t=e.parentNode;t&&t.removeChild(e)}function nxe(e){if(e.type!==null)return e;let t=e.children[e.children.length-1];for(let n of sP)t.attr(n,e.attr(n));return t}function Q$(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function JC(e,t){let{width:n,height:r,autoFit:i,depth:o=0}=e,a=640,s=480;if(i){let{width:l,height:c}=K$(t);a=l||a,s=c||s}return a=n||a,s=r||s,{width:Math.max(Dn(a)?a:Z$,Z$),height:Math.max(Dn(s)?s:J$,J$),depth:o}}function iY(e){let t=nxe(e),n=[t],r=new Map;for(r.set(t,Q$(t));n.length;){let i=n.pop(),o=r.get(i),{children:a=[]}=i;for(let s of a)if(s.type===tY)o.children=s.value;else{let l=Q$(s),{children:c=[]}=o;c.push(l),n.push(s),r.set(s,l),o.children=c}}return r.get(t)}function rxe(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function ixe(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function oxe(e,t,n,r,i){let{type:o}=e,{type:a=n||o}=t;if(ixe(a,i)){for(let s of sP)e.attr(s)!==void 0&&t[s]===void 0&&(t[s]=e.attr(s));return t}if(rxe(a,r)){let s={type:"view"},l=Object.assign({},t);for(let c of sP)l[c]!==void 0&&(s[c]=l[c],delete l[c]);return Object.assign(Object.assign({},s),{children:[l]})}return t}function axe(e,t,n){if(typeof e=="function")return t.mark;let i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function sxe(e,t,n){if(typeof e=="function"){let l=new Kp;return l.value=e,l.type=tY,l}let{type:r,children:i}=e,o=eY(e,["type","children"]),a=axe(r,t,n),s=new a;return s.value=o,s.type=r,s}function lxe(e,t){let{type:n,children:r}=t,i=eY(t,["type","children"]);e.type===n||n===void 0?K6(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function cxe(e,t,n,r){if(!e)return;let i=[[e,t]];for(;i.length;){let[o,a]=i.shift(),s=sxe(a,n,r);Array.isArray(o.children)&&o.push(s);let{children:l}=a;if(Array.isArray(l))for(let c of l)i.push([s,c]);else typeof l=="function"&&i.push([s,l])}}function oY(e,t,n,r,i){let o=oxe(e,t,n,r,i),a=[[null,e,o]];for(;a.length;){let[s,l,c]=a.shift();if(!l)cxe(s,c,r,i);else if(!c)l.remove();else{lxe(l,c);let{children:u}=c,{children:f}=l;if(Array.isArray(u)&&Array.isArray(f)){let p=Math.max(u.length,f.length);for(let d=0;d<p;d++){let h=u[d],m=f[d];a.push([l,m,h])}}else typeof u=="function"&&a.push([l,null,u])}}}function aY(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function uxe(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function fxe(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);let i=[...this.attr(n)||[],r];return this.attr(n,i)}}function pxe(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);let o=this.attr(n)||{};return o[r]=arguments.length===1?!0:i,this.attr(n,o)}}function dxe(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(Zc(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);let i=this.attr(t)||{},{items:o=[]}=i;return o.push(r),i.items=o,this.attr(t,i)}}function hxe(e,t,{ctor:n}){e.prototype[t]=function(r){let i=this.append(n);return t==="mark"&&(i.type=r),i}}function mxe(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function Xh(e){return t=>{for(let[n,r]of Object.entries(e)){let{type:i}=r;i==="value"?uxe(t,n,r):i==="array"?fxe(t,n,r):i==="object"?pxe(t,n,r):i==="node"?hxe(t,n,r):i==="container"?mxe(t,n,r):i==="mix"&&dxe(t,n,r)}return t}}function cP(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}var sY={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},lY=Object.assign(Object.assign({},sY),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),cY=Object.assign(Object.assign({},sY),{labelTransform:{type:"array"}});var gxe=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},uP=(()=>{let e=class extends Kp{changeData(n){var r;let i=this.getRoot();if(i)return this.attr("data",n),!((r=this.children)===null||r===void 0)&&r.length&&this.children.forEach(o=>{o.attr("data",n)}),i?.render()}getView(){let n=this.getRoot(),{views:r}=n.getContext();if(r?.length)return r.find(i=>i.key===this._key)}getScale(){var n;return(n=this.getView())===null||n===void 0?void 0:n.scale}getScaleByChannel(n){let r=this.getScale();if(r)return r[n]}getCoordinate(){var n;return(n=this.getView())===null||n===void 0?void 0:n.coordinate}getTheme(){var n;return(n=this.getView())===null||n===void 0?void 0:n.theme}getGroup(){let n=this._key;return n?this.getRoot().getContext().canvas.getRoot().getElementById(n):void 0}show(){let n=this.getGroup();n&&!n.isVisible()&&Wp(n)}hide(){let n=this.getGroup();n&&n.isVisible()&&j1(n)}};return e=gxe([Xh(cY)],e),e})();var vxe=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},uY=(()=>{let e=class extends Kp{changeData(n){let r=this.getRoot();if(r)return this.attr("data",n),r?.render()}getMark(){var n;let r=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(!r)return;let{markState:i}=r,o=Array.from(i.keys()).find(a=>a.key===this.attr("key"));return i.get(o)}getScale(){var n;let r=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(r)return r?.scale}getScaleByChannel(n){var r,i;let o=(r=this.getRoot())===null||r===void 0?void 0:r.getView();if(o)return(i=o?.scale)===null||i===void 0?void 0:i[n]}getGroup(){let n=this.attr("key");return n?this.getRoot().getContext().canvas.getRoot().getElementById(n):void 0}};return e=vxe([Xh(lY)],e),e})();var yxe=function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},xxe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},bxe="G2_CHART_KEY",Ry=class extends uP{constructor(t){let{container:n,canvas:r,renderer:i,plugins:o,lib:a,createCanvas:s}=t,l=xxe(t,["container","canvas","renderer","plugins","lib","createCanvas"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=mv(()=>{this.forceFit()},300),this._renderer=i||new g4,this._plugins=o||[],this._container=nY(n),this._emitter=new y4,this._context={library:Object.assign(Object.assign({},a),X$),emitter:this._emitter,canvas:r,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;let t=new Promise((o,a)=>pT(this._computedOptions(),this._context,this._createResolve(o),this._createReject(a))),[n,r,i]=aY();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return iY(this);let{type:n}=t;return n&&(this._previousDefinedType=n),oY(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){let t=this.options();this.emit(pr.BEFORE_CLEAR),this._reset(),lC(t,this._context,!1),this.emit(pr.AFTER_CLEAR)}destroy(){let t=this.options();this.emit(pr.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),lC(t,this._context,!0),this._container[lP]&&rY(this._container),this.emit(pr.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;let{width:t,height:n}=JC(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(pr.BEFORE_CHANGE_SIZE);let r=this.render();return r.then(()=>{this.emit(pr.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(pr.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);let r=this.render();return r.then(()=>{this.emit(pr.AFTER_CHANGE_SIZE)}),r}_create(){let{library:t}=this._context,n=o=>o.startsWith("mark.")||o==="component.axisX"||o==="component.axisY"||o==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(let o of r){let a=o.split(".").pop();class s extends uY{constructor(){super({},a)}}this._marks[a]=s,this[a]=function(l){let c=this.append(s);return a==="mark"&&(c.type=l),c}}let i=["composition.view",...Object.keys(t).filter(o=>o.startsWith("composition.")&&o!=="composition.mark")];this._compositions=Object.fromEntries(i.map(o=>{let a=o.split(".").pop();return[a,(()=>{let l=class extends uP{constructor(){super({},a)}};return l=yxe([Xh(cP(this._marks))],l),l})()]}));for(let o of Object.values(this._compositions))Xh(cP(this._compositions))(o);for(let o of i){let a=o.split(".").pop();this[a]=function(){let s=this._compositions[a];return this.type=null,this.append(s)}}}_reset(){let t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{let t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{let n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){let t=this.options(),{key:n=bxe}=t,{width:r,height:i,depth:o}=JC(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:o})}_createCanvas(){let{width:t,height:n}=JC(this.options(),this._container);this._plugins.push(new v4),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new B_({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){let t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}};var _xe=Object.assign({},iP()),fY=oP(Ry,_xe);var No=(()=>{let t=class t{constructor(r){this.http=r,this.newDocumentResponse$=new Xr,this.getDocumentResponse$=new Xr,this.actionDocumentResponse$=new Xr,this.revokeShareResponse$=new Xr,this.commentResponse$=new Xr,this.fetchDocumentsResponse$=new Xr,this.recentDocumentsResponse$=new Xr,this.dashboardStatsResponse$=new Xr,this.updateDocumentResponse$=new Xr}newDocument(r){this.http.post("http://192.168.1.106:7000/authorize/documents",r).subscribe(i=>{this.newDocumentResponse$.next(i)})}getDocument(r){console.log("The requested ID: ",r),this.http.get("http://192.168.1.106:7000/authorize/documents/"+r).subscribe(i=>{this.getDocumentResponse$.next(i)})}actionDocument(r){this.http.put("http://192.168.1.106:7000/authorize/documents/action",r).subscribe(i=>{this.actionDocumentResponse$.next(i)})}revokeShare(r,i){this.http.put("http://192.168.1.106:7000/authorize/documents/revoke/share/"+r+"/"+i,{}).subscribe(o=>{this.revokeShareResponse$.next(o)})}comment(r){this.http.post("http://192.168.1.106:7000/authorize/documents/comment",r).subscribe(i=>{this.commentResponse$.next(i)})}fetchDocuments(r){this.http.post("http://192.168.1.106:7000/authorize/documents/fetch",r).subscribe(i=>{this.fetchDocumentsResponse$.next(i)})}getRecentDocuments(){this.http.get("http://192.168.1.106:7000/authorize/documents/recent").subscribe(r=>{this.recentDocumentsResponse$.next(r)})}getDashboardStats(){this.http.get("http://192.168.1.106:7000/authorize/documents/stats").subscribe(r=>{this.dashboardStatsResponse$.next(r)})}updateDocument(r){this.http.put("http://192.168.1.106:7000/authorize/documents",r).subscribe(i=>{this.updateDocumentResponse$.next(i)})}};t.\u0275fac=function(i){return new(i||t)(_l(wl))},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var G1=(()=>{let t=class t{constructor(){this.status=""}replaceUnderscores(r){return r.replace(/_/g," ")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["authorise-doc-status"]],inputs:{status:"status"},decls:4,vars:4,consts:[[3,"ngClass","nzBordered"],["nz-icon","",3,"nzType"]],template:function(i,o){i&1&&(D(0,"nz-tag",0),xe(1,"span",1),D(2,"span"),ce(3),F()()),i&2&&(oe("ngClass",o.status=="NONE"?"status-none":o.status==="CREATED"?"status-created":o.status==="DRAFT"?"status-draft":o.status==="PENDING"?"status-pending":o.status==="DECLINED"?"status-declined":o.status==="COMPLETED"?"status-completed":o.status==="ON_HOLD"?"status-on-hold":o.status==="OVERDUE"?"status-overdue":o.status==="IN_PROGRESS"?"status-in-progress":"status-none")("nzBordered",!1),$(),oe("nzType",o.status=="NONE"?"line":o.status==="CREATED"?"copy":o.status==="DRAFT"?"edit":o.status==="PENDING"?"clock-circle":o.status==="DECLINED"?"close-circle":o.status==="COMPLETED"?"check-circle":o.status==="ON_HOLD"?"pause-circle":o.status==="OVERDUE"?"exclamation-circle":o.status==="IN_PROGRESS"?"clock-circle":"line"),$(2),Yt(o.replaceUnderscores(o.status)))},dependencies:[Jm,Kn,Xn,o0],styles:[".status-none[_ngcontent-%COMP%]{background:#fafafa;color:#000000d9}.status-created[_ngcontent-%COMP%]{color:#08979c;background:#e6fffb}.status-draft[_ngcontent-%COMP%]{color:#d4b106;background:#feffe6}.status-pending[_ngcontent-%COMP%]{color:#d48806;background:#fffbe6}.status-declined[_ngcontent-%COMP%]{color:#cf1322;background:#fff1f0}.status-completed[_ngcontent-%COMP%]{color:#389e0d;background:#f6ffed}.status-on-hold[_ngcontent-%COMP%]{color:#d48806;background:#fffbe6}.status-overdue[_ngcontent-%COMP%]{color:#d4380d;background:#fff2e8}.status-in-progress[_ngcontent-%COMP%]{color:#096dd9;background:#e6f7ff}"]});let e=t;return e})();function wxe(e,t){e&1&&(D(0,"span")(1,"p",57),xe(2,"span",58),F()())}function Sxe(e,t){if(e&1&&(D(0,"span"),ce(1),F()),e&2){let n=me();$(),Yt(n.dashboardStats.documents)}}function Cxe(e,t){e&1&&(D(0,"span")(1,"p",57),xe(2,"span",58),F()())}function Oxe(e,t){if(e&1&&(D(0,"span"),ce(1),F()),e&2){let n=me();$(),Yt(n.dashboardStats.shares)}}function Mxe(e,t){e&1&&(D(0,"span")(1,"p",57),xe(2,"span",58),F()())}function kxe(e,t){if(e&1&&(D(0,"span"),ce(1),F()),e&2){let n=me();$(),Yt(n.dashboardStats.sharedWithMe)}}function Exe(e,t){e&1&&(D(0,"span")(1,"p",57),xe(2,"span",58),F()())}function Axe(e,t){if(e&1&&(D(0,"span"),ce(1),F()),e&2){let n=me();$(),Yt(n.dashboardStats.pending)}}function Txe(e,t){e&1&&(D(0,"span")(1,"p",57),xe(2,"span",58),F()())}function Pxe(e,t){if(e&1&&(D(0,"span"),ce(1),F()),e&2){let n=me();$(),Yt(n.dashboardStats.actioned)}}function Nxe(e,t){if(e&1&&xe(0,"nz-avatar",70),e&2){let n=t.$implicit;oe("nzText",n.actioner.substring(0,2).toUpperCase())("nzTooltipTitle",n.actioner)}}function Lxe(e,t){if(e&1){let n=pt();D(0,"div",59),Xe("click",function(){let i=ze(n).$implicit,o=me();return Re(o.viewDocument(i.id))}),D(1,"div",49)(2,"div",60)(3,"div",61),Ct(),D(4,"svg",18)(5,"g",62),xe(6,"path",63)(7,"path",64),F()()(),Yn(),D(8,"div",65)(9,"span",66),ce(10),F()()()(),D(11,"div",50)(12,"p",67),ce(13),Ea(14,"date"),F(),D(15,"p",67),ce(16),Ea(17,"date"),F()(),D(18,"div",50),xe(19,"authorise-doc-status",68),F(),D(20,"div",49),ce(21),F(),D(22,"div",50)(23,"nz-avatar-group"),Je(24,Nxe,1,2,"nz-avatar",69),F()()()}if(e&2){let n=t.$implicit;$(9),oe("nzTooltipTitle",n.template.description),$(),Wt(" ",n.template.title," "),$(3),Wt(" ",ns(14,7,n.createdAt,"dd MMMM yyyy")," "),$(3),Wt(" ",ns(17,10,n.createdAt,"HH:mm:ss")," "),$(3),oe("status",n.status),$(2),Wt(" ",n.owner," "),$(3),oe("ngForOf",n.actioners)}}var dY=(()=>{let t=class t{constructor(r,i,o,a,s,l){this.http=r,this.documentsService=i,this.routingService=o,this.cookiesService=a,this.notificationService=s,this.cdr=l,this.subs=new ci,this.user=this.cookiesService.getCookie("user"),this.recentDocumentsLoader=!1,this.dashboardStatsLoader=!1,this.fetchDocumentsLoader=!1,this.fetchDocumentsFilter={page:0,size:10,request:"OWN",status:null,sortField:null,sortDirection:null}}onBack(){}fetchDocuments(){console.log("Documents filter: ",this.fetchDocumentsFilter),this.fetchDocumentsLoader=!0,this.documentsService.fetchDocuments(this.fetchDocumentsFilter)}ngOnInit(){this.fetchDocuments(),this.subs.add=this.documentsService.fetchDocumentsResponse$.subscribe(r=>{this.onFetchDocumentsResponse(r)}),this.getDashboardStats(),this.subs.add=this.documentsService.dashboardStatsResponse$.subscribe(r=>{this.onDashboardStatsResponse(r),this.dashboardStatsLoader=!1})}onFetchDocumentsResponse(r){console.log(r),r.success?this.documents=r.data.content:this.notificationService.create("error","Error",r.message),this.fetchDocumentsLoader=!1,this.cdr.markForCheck()}onRecentDocumentsResponse(r){console.log(r),r.success&&(this.recentDocuments=r.data)}openFilteredDocs(r){this.routingService.navigateByUrl("authorise/documents/all?tab="+r)}onDashboardStatsResponse(r){if(console.log(r),r.success){this.dashboardStats=r.data;let i=new fY({container:"container",autoFit:!0});i.coordinate({type:"theta",innerRadius:.6}),i.interval().transform({type:"stackY"}).data([{name:"My Docs",value:this.dashboardStats.documents},{name:"Shares",value:this.dashboardStats.shares},{name:"Shared with Me",value:this.dashboardStats.sharedWithMe},{name:"Waiting Approval",value:this.dashboardStats.pending},{name:"Actioned",value:this.dashboardStats.actioned}]).encode("y","value").encode("color","name").style("stroke","white").style("inset",1).style("radius",10).scale("color",{type:"ordinal",range:["#8a97a3","#f75c38","#fdb239","#2784f3","#34b74e"]}).animate("enter",{type:"waveIn"}).animate("enter",{type:"waveIn",duration:1e3}),i.render()}}getRecentDocuments(){this.recentDocumentsLoader=!0,this.documentsService.getRecentDocuments()}getDashboardStats(){this.dashboardStatsLoader=!0,this.documentsService.getDashboardStats()}createNewDocument(){this.routingService.navigateByUrl("authorise/documents/create")}viewDocument(r){this.routingService.navigateByUrl("authorise/documents/view/"+r)}ngOnDestroy(){this.subs.dispose()}};t.\u0275fac=function(i){return new(i||t)(ht(wl),ht(No),ht(cr),ht(Sl),ht(Zi),ht(Zm))},t.\u0275cmp=tn({type:t,selectors:[["app-workspace"]],decls:137,vars:18,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-expand-lg"],[1,"site-page-header",3,"nzTitle","nzSubtitle"],["nz-page-header-breadcrumb",""],["routerLink","../workspace"],["nz-icon","","nzType","home"],[1,"container-fluid","remove-padding"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[3,"buttonClick","label","disableButton","loading"],[1,"row","mt-3"],[1,"col","authorise-stats-card",3,"click"],[1,"row"],[1,"col-7"],[1,"authorise-stats-card-header"],[1,"authorise-stats-card-number"],[4,"ngIf"],[1,"authorise-stats-card-link"],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M11.1 3.002c-3.648.007-5.56.096-6.78 1.317C3.002 5.637 3.002 7.758 3.002 12s0 6.363 1.318 7.681s3.438 1.318 7.68 1.318s6.363 0 7.681-1.318c1.221-1.22 1.31-3.132 1.317-6.78m-.518-9.384l-5.548 5.534m5.549-5.534c-.494-.494-3.822-.448-4.525-.438m4.525.438c.494.495.448 3.826.438 4.53","color","currentColor"],[1,"col-5","d-flex","justify-content-center","align-items-center"],[1,"authorise-stats-card-icon","card-icon-my-docs"],["xmlns","http://www.w3.org/2000/svg","width","3em","height","3em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-width","1.5"],["d","M3 10c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172C21 4.343 21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828C18.657 22 16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172C3 19.657 3 17.771 3 14z"],["stroke-linecap","round","d","M8 12h8M8 8h8m-8 8h5"],[1,"authorise-stats-card-icon","card-icon-my-shares"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-width","1.5"],["stroke-linejoin","round","d","M22 7h-8c-1.818 0-2.913.892-3.32 1.3c-.125.127-.188.19-.19.19c0 .002-.063.065-.19.19C9.892 9.087 9 10.182 9 12v3m13-8l-5-5m5 5l-5 5"],["d","M3.465 20.535C4.93 22 7.287 22 12.003 22c4.715 0 7.073 0 8.537-1.465c1.242-1.241 1.431-3.123 1.46-6.537M3.465 20.535C2 19.07 2 16.713 2 11.997m1.465 8.538C4.929 22 7.286 22 12 22s7.071 0 8.535-1.465c1.241-1.24 1.43-3.122 1.46-6.536m-18.53 6.536C2 19.071 2 16.714 2 12m1.465-8.54C4.706 2.218 6.588 2.029 10.002 2M2.055 8c.11-2.193.436-3.562 1.41-4.536c1.24-1.24 3.122-1.43 6.535-1.459"],[1,"authorise-stats-card-icon","card-icon-shared-with-me"],["d","M22 14c0 3.771 0 5.657-1.172 6.828C19.657 22 17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172c-.654-.653-.943-1.528-1.07-2.828M2 12V6.95c0-.883 0-1.324.07-1.692A4 4 0 0 1 5.257 2.07C5.626 2 6.068 2 6.95 2c.386 0 .58 0 .766.017a4 4 0 0 1 2.18.904c.144.119.28.255.554.529L11 4c.816.816 1.224 1.224 1.712 1.495a4 4 0 0 0 .848.352C14.098 6 14.675 6 15.828 6h.374c2.632 0 3.949 0 4.804.77c.079.07.154.145.224.224c.57.633.718 1.52.757 3.006"],["stroke-linejoin","round","d","M2 15h11m0 0l-4.125-3M13 15l-4.125 3"],[1,"authorise-stats-card-icon","card-icon-waiting-approval"],["fill","currentColor","fill-rule","evenodd","d","M10.944 1.25h2.112c1.838 0 3.294 0 4.433.153c1.172.158 2.121.49 2.87 1.238a.75.75 0 0 1-1.06 1.06c-.424-.422-1.004-.676-2.01-.811c-1.027-.138-2.382-.14-4.289-.14h-2c-1.907 0-3.261.002-4.29.14c-1.005.135-1.585.389-2.008.812c-.423.423-.677 1.003-.812 2.009c-.138 1.028-.14 2.382-.14 4.289v4c0 1.907.002 3.262.14 4.29c.135 1.005.389 1.585.812 2.008c.423.423 1.003.677 2.009.812c1.028.138 2.382.14 4.289.14h2c1.907 0 3.262-.002 4.29-.14c1.005-.135 1.585-.389 2.008-.812c.696-.696.907-1.777.943-4.309a.75.75 0 0 1 1.5.022c-.035 2.427-.192 4.158-1.382 5.348c-.749.748-1.698 1.08-2.87 1.238c-1.14.153-2.595.153-4.433.153h-2.112c-1.838 0-3.294 0-4.433-.153c-1.172-.158-2.121-.49-2.87-1.238c-.748-.749-1.08-1.698-1.238-2.87c-.153-1.14-.153-2.595-.153-4.433V9.944c0-1.838 0-3.294.153-4.433c.158-1.172.49-2.121 1.238-2.87c.749-.748 1.698-1.08 2.87-1.238c1.14-.153 2.595-.153 4.433-.153m7.17 5.796a2.716 2.716 0 1 1 3.84 3.84L17.2 15.643a7.025 7.025 0 0 1-.63.587c-.23.18-.48.334-.744.46c-.224.107-.46.185-.806.3l-2.084.695a1.28 1.28 0 0 1-1.62-1.62l.681-2.04l.014-.043c.116-.347.194-.582.301-.806a4.03 4.03 0 0 1 .46-.744c.153-.196.328-.371.587-.63l.031-.031zm2.78 1.06a1.216 1.216 0 0 0-1.72 0l-.182.182c.01.033.021.07.034.107c.094.27.273.63.611.968a2.553 2.553 0 0 0 1.075.645l.182-.182a1.216 1.216 0 0 0 0-1.72m-1.328 3.048a4.083 4.083 0 0 1-.99-.73a4.083 4.083 0 0 1-.73-.99L14.45 12.83c-.301.301-.407.409-.496.523c-.113.145-.21.302-.289.467c-.062.131-.111.274-.246.678l-.4 1.2l.283.283l1.2-.4c.404-.135.547-.184.678-.246c.165-.08.322-.176.467-.289c.114-.089.222-.195.523-.496zM7.25 9A.75.75 0 0 1 8 8.25h6.5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 9m0 4a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75","clip-rule","evenodd"],[1,"authorise-stats-card-icon","card-icon-actioned"],["d","M9.781 3.89c.564-.48.846-.72 1.14-.861a2.5 2.5 0 0 1 2.157 0c.295.14.577.38 1.14.861c.225.192.337.287.457.367a2.5 2.5 0 0 0 .908.376c.141.028.288.04.582.064c.739.058 1.108.088 1.416.197a2.5 2.5 0 0 1 1.525 1.524c.109.309.138.678.197 1.416c.023.294.035.441.063.583c.064.324.192.633.376.907c.08.12.176.232.367.457c.48.564.721.846.862 1.14a2.5 2.5 0 0 1 0 2.157c-.14.294-.381.576-.862 1.14a5.25 5.25 0 0 0-.367.457a2.497 2.497 0 0 0-.376.907c-.028.142-.04.289-.063.583c-.059.738-.088 1.108-.197 1.416a2.5 2.5 0 0 1-1.525 1.524c-.308.11-.677.139-1.416.197c-.294.024-.44.036-.582.064a2.5 2.5 0 0 0-.908.376a5.25 5.25 0 0 0-.456.367c-.564.48-.846.72-1.14.861a2.5 2.5 0 0 1-2.157 0c-.295-.14-.577-.38-1.14-.861a5.263 5.263 0 0 0-.457-.367a2.5 2.5 0 0 0-.908-.376a5.277 5.277 0 0 0-.582-.064c-.739-.058-1.108-.088-1.416-.197a2.5 2.5 0 0 1-1.525-1.524c-.109-.308-.138-.678-.197-1.416a5.186 5.186 0 0 0-.063-.583a2.5 2.5 0 0 0-.376-.907c-.08-.12-.176-.232-.367-.457c-.48-.564-.721-.846-.862-1.14a2.5 2.5 0 0 1 0-2.157c.141-.294.381-.576.862-1.14c.191-.225.287-.337.367-.457a2.5 2.5 0 0 0 .376-.907c.028-.142.04-.289.063-.583c.059-.738.088-1.107.197-1.416A2.5 2.5 0 0 1 6.42 4.894c.308-.109.677-.139 1.416-.197c.294-.024.44-.036.582-.064a2.5 2.5 0 0 0 .908-.376c.12-.08.232-.175.456-.367Z"],["stroke-linecap","round","stroke-linejoin","round","d","m8.5 12.5l2 2l5-5"],[1,"flex-grow-1"],[1,"row","h-100","pt-4"],[1,"col-md-8","remove-padding"],[1,"authorise-section-card","h-100"],[1,"authorise-workspace-header"],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24",1,"me-3"],["fill","none","stroke","#FF8E40","stroke-width","1.5"],["cx","12","cy","12","r","10"],["stroke-linecap","round","stroke-linejoin","round","d","M12 8v4l2.5 2.5"],[1,"mt-3"],[1,"row","authorise-workspace-table-header"],[1,"col-md-3"],[1,"col-md-2"],[2,"max-height","calc(100vh - 461px)","overflow-y","scroll"],["class","row authorise-workspace-table-data",3,"click",4,"ngFor","ngForOf"],[1,"col-md-4","remove-padding"],["fill","currentColor","fill-rule","evenodd","d","M14.254 1.365c-1.096-.306-2.122.024-2.851.695c-.719.66-1.153 1.646-1.153 2.7v6.695a2.295 2.295 0 0 0 2.295 2.295h6.694c1.055 0 2.042-.434 2.701-1.153c.67-.729 1.001-1.755.695-2.851a12.1 12.1 0 0 0-8.38-8.381M11.75 4.76c0-.652.27-1.232.668-1.597c.386-.355.886-.508 1.433-.355c3.55.991 6.349 3.79 7.34 7.34c.153.548 0 1.048-.355 1.434c-.365.397-.945.667-1.597.667h-6.694a.795.795 0 0 1-.795-.795z","clip-rule","evenodd"],["fill","currentColor","d","M8.672 4.716a.75.75 0 0 0-.45-1.432C4.183 4.554 1.25 8.328 1.25 12.79c0 5.501 4.46 9.961 9.96 9.961a9.96 9.96 0 0 0 9.505-6.973a.75.75 0 1 0-1.43-.45a8.465 8.465 0 0 1-8.074 5.923a8.46 8.46 0 0 1-8.461-8.46a8.465 8.465 0 0 1 5.922-8.074"],["id","container",2,"max-height","calc(100vh - 600px)"],[1,"placeholder-glow"],[1,"placeholder","col-12"],[1,"row","authorise-workspace-table-data",3,"click"],[1,"d-flex"],[1,"document-name-icon"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","color","currentColor"],["d","M15 2.5V4c0 1.414 0 2.121.44 2.56C15.878 7 16.585 7 18 7h1.5"],["d","M4 16V8c0-2.828 0-4.243.879-5.121C5.757 2 7.172 2 10 2h4.172c.408 0 .613 0 .797.076c.183.076.328.22.617.51l3.828 3.828c.29.29.434.434.51.618c.076.183.076.388.076.796V16c0 2.828 0 4.243-.879 5.121C18.243 22 16.828 22 14 22h-4c-2.828 0-4.243 0-5.121-.879C4 20.243 4 18.828 4 16m4-5h8m-8 3h8m-8 3h4.17"],[1,"document-name-text"],["nzTooltipPlacement","bottom","nz-tooltip","",3,"nzTooltipTitle"],[1,"authorise-workspace-table-p"],[3,"status"],["style","background-color: #f56a00","nzTooltipPlacement","bottom","nz-tooltip","",3,"nzText","nzTooltipTitle",4,"ngFor","ngForOf"],["nzTooltipPlacement","bottom","nz-tooltip","",2,"background-color","#f56a00",3,"nzText","nzTooltipTitle"]],template:function(i,o){if(i&1&&(D(0,"div",0)(1,"div")(2,"nav",1)(3,"nz-page-header",2)(4,"nz-breadcrumb",3)(5,"nz-breadcrumb-item",4),xe(6,"span",5),F(),D(7,"nz-breadcrumb-item"),ce(8,"Workspace"),F()()(),D(9,"div",6)(10,"div",7)(11,"ul",8)(12,"afc-button",9),Xe("buttonClick",function(){return o.createNewDocument()}),F()()()()()(),D(13,"div")(14,"div",10)(15,"div",11),Xe("click",function(){return o.openFilteredDocs("OWN")}),D(16,"div",12)(17,"div",13)(18,"p",14),ce(19,"My docs"),F(),D(20,"p",15),Je(21,wxe,3,0,"span",16)(22,Sxe,2,1,"span",16),F(),D(23,"p",17),Ct(),D(24,"svg",18),xe(25,"path",19),F(),ce(26," View "),F()(),Yn(),D(27,"div",20)(28,"div",21),Ct(),D(29,"svg",22)(30,"g",23),xe(31,"path",24)(32,"path",25),F()()()()()(),Yn(),D(33,"div",11),Xe("click",function(){return o.openFilteredDocs("SHARE")}),D(34,"div",12)(35,"div",13)(36,"p",14),ce(37,"My shares"),F(),D(38,"p",15),Je(39,Cxe,3,0,"span",16)(40,Oxe,2,1,"span",16),F(),D(41,"p",17),Ct(),D(42,"svg",18),xe(43,"path",19),F(),ce(44," View "),F()(),Yn(),D(45,"div",20)(46,"div",26),Ct(),D(47,"svg",22)(48,"g",27),xe(49,"path",28)(50,"path",29),F()()()()()(),Yn(),D(51,"div",11),Xe("click",function(){return o.openFilteredDocs("SHARED_WITH_ME")}),D(52,"div",12)(53,"div",13)(54,"p",14),ce(55,"Shared with me"),F(),D(56,"p",15),Je(57,Mxe,3,0,"span",16)(58,kxe,2,1,"span",16),F(),D(59,"p",17),Ct(),D(60,"svg",18),xe(61,"path",19),F(),ce(62," View "),F()(),Yn(),D(63,"div",20)(64,"div",30),Ct(),D(65,"svg",22)(66,"g",27),xe(67,"path",31)(68,"path",32),F()()()()()(),Yn(),D(69,"div",11),Xe("click",function(){return o.openFilteredDocs("WAITING_APPROVAL")}),D(70,"div",12)(71,"div",13)(72,"p",14),ce(73,"Waiting approval"),F(),D(74,"p",15),Je(75,Exe,3,0,"span",16)(76,Axe,2,1,"span",16),F(),D(77,"p",17),Ct(),D(78,"svg",18),xe(79,"path",19),F(),ce(80," View "),F()(),Yn(),D(81,"div",20)(82,"div",33),Ct(),D(83,"svg",22),xe(84,"path",34),F()()()()(),Yn(),D(85,"div",11),Xe("click",function(){return o.openFilteredDocs("ACTIONER")}),D(86,"div",12)(87,"div",13)(88,"p",14),ce(89,"Actioned"),F(),D(90,"p",15),Je(91,Txe,3,0,"span",16)(92,Pxe,2,1,"span",16),F(),D(93,"p",17),Ct(),D(94,"svg",18),xe(95,"path",19),F(),ce(96," View "),F()(),Yn(),D(97,"div",20)(98,"div",35),Ct(),D(99,"svg",22)(100,"g",23),xe(101,"path",36)(102,"path",37),F()()()()()()()(),Yn(),D(103,"div",38)(104,"div",39)(105,"div",40)(106,"div",41)(107,"div",42),Ct(),D(108,"svg",43)(109,"g",44),xe(110,"circle",45)(111,"path",46),F()(),ce(112," Recent Documents "),F(),Yn(),D(113,"div",47)(114,"div",47)(115,"div",48)(116,"div",49),ce(117,"Name"),F(),D(118,"div",50),ce(119,"Created"),F(),D(120,"div",50),ce(121,"Status"),F(),D(122,"div",49),ce(123,"Created By"),F(),D(124,"div",50),ce(125,"Collaborators"),F()(),D(126,"div",51),Je(127,Lxe,25,13,"div",52),F()()()()(),D(128,"div",53)(129,"div",41)(130,"div",42),Ct(),D(131,"svg",43),xe(132,"path",54)(133,"path",55),F(),ce(134," Summary "),F(),Yn(),D(135,"div",47),xe(136,"div",56),F()()()()()()),i&2){let a;$(3),oe("nzTitle","Hi "+o.user.name)("nzSubtitle","You currently have "+((a=o.dashboardStats==null?null:o.dashboardStats.pending)!==null&&a!==void 0?a:"...")+" documents waiting on you"),$(9),br("gradient"),oe("label","Create New Document")("disableButton",!1)("loading",!1),$(9),oe("ngIf",o.dashboardStatsLoader),$(),oe("ngIf",!o.dashboardStatsLoader),$(17),oe("ngIf",o.dashboardStatsLoader),$(),oe("ngIf",!o.dashboardStatsLoader),$(17),oe("ngIf",o.dashboardStatsLoader),$(),oe("ngIf",!o.dashboardStatsLoader),$(17),oe("ngIf",o.dashboardStatsLoader),$(),oe("ngIf",!o.dashboardStatsLoader),$(15),oe("ngIf",o.dashboardStatsLoader),$(),oe("ngIf",!o.dashboardStatsLoader),$(35),oe("ngForOf",o.documents)}},dependencies:[Xi,Ki,ei,Ji,Kn,qr,Wr,Xn,ui,wi,ra,qc,Eb,G1,Uu],styles:['.authorise-section-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px}.authorise-stats-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;border:1px solid transparent;transition-duration:.5s}.authorise-stats-card[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #b5e3be;background:#fffefe80}.authorise-stats-card[_ngcontent-%COMP%]:hover   .authorise-stats-card-header[_ngcontent-%COMP%]{color:#2ab347;font-weight:900}.authorise-stats-card-header[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:0;color:#a0a2ad;font-size:12px;font-weight:600;transition-duration:.5s}.authorise-stats-card-number[_ngcontent-%COMP%]{margin-bottom:0;color:#393842;font-weight:900;font-size:36px}.authorise-stats-card-link[_ngcontent-%COMP%]{color:#fff9;margin-bottom:0;font-size:14px;font-weight:600;transition-duration:.5s}.authorise-stats-card-link[_ngcontent-%COMP%]:hover{cursor:pointer;color:#f7b85f}.authorise-stats-card[_ngcontent-%COMP%]:hover   .authorise-stats-card-link[_ngcontent-%COMP%]{color:#a0a2ad}.authorise-stats-card-icon[_ngcontent-%COMP%]{padding:15px;border-radius:50%}.card-icon-my-docs[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f2f4f6,#f000);color:#8a97a3}.card-icon-my-shares[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f5e2d6,#f000);color:#f75c38}.card-icon-shared-with-me[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#feeeca,#f000);color:#fdb239}.card-icon-waiting-approval[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#c0def7,#f000);color:#2784f3}.card-icon-actioned[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#e2f7e6,#f000);color:#34b74e}.authorise-workspace-header[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#72858e;display:flex;align-items:center}.authorise-workspace-table-header[_ngcontent-%COMP%]{text-transform:uppercase;background:#eaedf0;border-radius:4px;display:flex;align-items:center;padding:15px 10px;font-weight:900;color:#91999c;font-size:14px}.authorise-workspace-table-data[_ngcontent-%COMP%]{margin:10px 10px 0;background:#fff;border-radius:4px;display:flex;align-items:center;padding:5px;font-weight:600;color:#677074;font-size:13px;border:1px solid transparent;transition-duration:.5s}.authorise-workspace-table-data[_ngcontent-%COMP%]:hover{border:1px solid #d7f2de;box-shadow:0 0 2rem #3347501a;cursor:pointer}.ellipse-border[_ngcontent-%COMP%]{position:relative;padding-left:10px}.ellipse-border[_ngcontent-%COMP%]:before{display:block;content:"";position:absolute;top:0;left:0;background-image:linear-gradient(-180deg,#dee2e600,#dee2e6 49%,#dee2e600);width:1px;height:100%}.workspace-ellipse[_ngcontent-%COMP%]:hover{cursor:pointer}.document-name-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.document-name-icon[_ngcontent-%COMP%]{margin-right:5px}.authorise-workspace-table-p[_ngcontent-%COMP%]{margin:0}.navbar[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-lg[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-md[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-sm[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xl[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xxl[_ngcontent-%COMP%]{justify-content:end}']});let e=t;return e})();var hY=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-documents"]],decls:1,vars:0,template:function(i,o){i&1&&xe(0,"router-outlet")},dependencies:[rs]});let e=t;return e})();var mY=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-reports"]],decls:2,vars:0,template:function(i,o){i&1&&(D(0,"p"),ce(1,"reports works!"),F())}});let e=t;return e})();var QC=(()=>{let t=class t{constructor(r){this.http=r,this.getUsersResponse$=new Xr,this.uploadSignatureResponse$=new Xr}getUsers(){this.http.get("http://192.168.1.106:7000/authorize/master/users").subscribe(r=>{this.getUsersResponse$.next(r)})}uploadSignature(r){this.http.post("http://192.168.1.106:7000/authorize/master/signature/upload",r).subscribe(i=>{this.uploadSignatureResponse$.next(i)})}};t.\u0275fac=function(i){return new(i||t)(_l(wl))},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ixe(e,t){if(e&1&&(D(0,"div",18),xe(1,"img",21),F()),e&2){let n=me();$(),oe("src",n.signature,Xm)}}function Dxe(e,t){e&1&&ce(0,"Upload Signature")}function zxe(e,t){if(e&1){let n=pt();D(0,"nz-upload",22),Gt("nzFileListChange",function(i){ze(n);let o=me();return Ut(o.fileList,i)||(o.fileList=i),Re(i)}),D(1,"p",23),xe(2,"span",24),F(),D(3,"p",25),ce(4,"Click or drag file to this area to upload"),F(),D(5,"p",26),ce(6," Only images are supported ( png, jpeg, jpg only ) "),F()(),D(7,"div",18)(8,"afc-button",19),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.uploadSignature())}),F()()}if(e&2){let n=me();oe("nzMultiple",!1),qt("nzFileList",n.fileList),oe("nzBeforeUpload",n.beforeUpload)("nzFileType","image/png,image/jpeg,image/jpg"),$(8),br("primary"),oe("label","Upload Signature")("disableButton",n.fileList.length==0)("loading",n.uploadSignatureLoader)("size","sm")}}function Rxe(e,t){}var vY=(()=>{let t=class t{constructor(r,i,o,a,s){this.routingService=r,this.cookiesService=i,this.userService=o,this.notificationService=a,this.cookieService=s,this.subs=new ci,this.isVisible=!1,this.isConfirmLoading=!1,this.fileList=[],this.uploadSignatureLoader=!1,this.beforeUpload=l=>(this.fileList=this.fileList.concat(l),!1)}ngOnInit(){this.user=this.cookiesService.getCookie("user"),console.log(this.user),this.signature="data:image/png;base64,"+localStorage.getItem("signature"),this.subs.add=this.userService.uploadSignatureResponse$.subscribe(r=>{this.onUploadSignature(r)})}onUploadSignature(r){console.log(r),r.success?(this.notificationService.create("success","Success",r.message),localStorage.removeItem("signature"),localStorage.setItem("signature",r.data),this.isVisible=!1,this.fileList=[],this.signature="data:image/png;base64,"+localStorage.getItem("signature")):this.notificationService.create("error","Error",r.message),this.uploadSignatureLoader=!1}onBack(){this.routingService.navigateByUrl("authorise/workspace")}addSignature(){this.isVisible=!0}handleCancel(){this.isVisible=!1}uploadSignature(){this.uploadSignatureLoader=!0;var r=new FormData;for(let i of this.fileList)r.append("file",i);this.userService.uploadSignature(r)}};t.\u0275fac=function(i){return new(i||t)(ht(cr),ht(Sl),ht(QC),ht(Zi),ht(_I))},t.\u0275cmp=tn({type:t,selectors:[["app-preferences"]],decls:28,vars:11,consts:[["modalTitle",""],["modalContent",""],["modalFooter",""],[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to your workspace",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../workspace"],["nz-icon","","nzType","home"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"row","mt-3"],[1,"col-md-6"],[1,"authorise-stats-card"],[1,"authorise-workspace-header"],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 256 256",1,"me-2"],["fill","currentColor","d","M232 168H63.86c2.66-5.24 5.33-10.63 8-16.11c15 1.65 32.58-8.78 52.66-31.14c5 13.46 14.45 30.93 30.58 31.25c9.06.18 18.11-5.2 27.42-16.37C189.31 143.75 203.3 152 232 152a8 8 0 0 0 0-16c-30.43 0-39.43-10.45-40-16.11a7.67 7.67 0 0 0-5.46-7.75a8.14 8.14 0 0 0-9.25 3.49c-12.07 18.54-19.38 20.43-21.92 20.37c-8.26-.16-16.66-19.52-19.54-33.42a8 8 0 0 0-14.09-3.37c-20.2 25.34-33.74 33.87-42.17 36.08c8.49-18.87 14.83-35.44 18.89-49.39c6.82-23.44 7.32-39.83 1.51-50.1c-3-5.38-9.34-11.8-22.06-11.8c-16.06 0-28.73 15.18-34.77 41.65c-3.59 15.71-4.18 33.21-1.62 48s7.87 25.55 15.59 31.94c-3.73 7.72-7.53 15.26-11.23 22.41H24a8 8 0 0 0 0 16h13.41c-11.32 21-20.12 35.64-20.26 35.88a8 8 0 1 0 13.71 8.24c.15-.26 11.27-18.79 24.7-44.12H232a8 8 0 0 0 0-16M58.74 69.21C62.72 51.74 70.43 40 77.91 40c5.33 0 7.1 1.86 8.13 3.67c3 5.33 6.52 24.19-21.66 86.39c-8.26-11.28-11.07-37.06-5.64-60.85"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"buttonClick","label","disableButton","loading","size"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter"],["alt","",2,"max-width","150px",3,"src"],["nzType","drag",3,"nzFileListChange","nzMultiple","nzFileList","nzBeforeUpload","nzFileType"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"]],template:function(i,o){if(i&1){let a=pt();D(0,"div")(1,"nav",3)(2,"nz-page-header",4),Xe("nzBack",function(){return ze(a),Re(o.onBack())}),D(3,"nz-breadcrumb",5)(4,"nz-breadcrumb-item",6),xe(5,"span",7),F(),D(6,"nz-breadcrumb-item"),ce(7,"Preferences"),F()()(),D(8,"div",8)(9,"div",9),xe(10,"ul",10),F()()()(),D(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14),Ct(),D(15,"svg",15),xe(16,"path",16),F(),ce(17," Manage Signature "),F(),Je(18,Ixe,2,1,"div",17),Yn(),D(19,"div",18)(20,"afc-button",19),Xe("buttonClick",function(){return ze(a),Re(o.addSignature())}),F()()()()(),D(21,"nz-modal",20),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(22,Dxe,1,0,"ng-template",null,0,dn)(24,zxe,9,10,"ng-template",null,1,dn)(26,Rxe,0,0,"ng-template",null,2,dn),F()}if(i&2){let a=bn(23),s=bn(25),l=bn(27);$(18),oe("ngIf",o.signature),$(2),br("primary"),oe("label","Add Signature")("disableButton",!1)("loading",!1)("size","sm"),$(),qt("nzVisible",o.isVisible),oe("nzTitle",a)("nzContent",s)("nzFooter",l)}},dependencies:[Ki,ei,Ji,Kn,np,qr,Wr,Xn,ui,wi,ls],styles:[".authorise-section-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;height:calc(100vh - 500px);margin:0 10px}.authorise-stats-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;border:1px solid transparent;transition-duration:.5s}.authorise-stats-card[_ngcontent-%COMP%]:hover{border:1px solid #b5e3be;background:#fffefe80}.authorise-workspace-header[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#72858e;display:flex;align-items:center}"]});let e=t;return e})();var yY=(()=>{let t=class t{constructor(r,i){this.documentsService=r,this.routingService=i}ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-admin"]],decls:1,vars:0,template:function(i,o){i&1&&xe(0,"router-outlet")},dependencies:[rs]});let e=t;return e})();function Bxe(e,t){e&1&&(D(0,"div",22),xe(1,"nz-empty"),F())}function jxe(e,t){if(e&1&&xe(0,"nz-avatar",36),e&2){let n=t.$implicit;oe("nzText",n.actioner.substring(0,2).toUpperCase())("nzTooltipTitle",n.actioner)}}function Vxe(e,t){if(e&1){let n=pt();D(0,"div",25),Xe("click",function(){let i=ze(n).$implicit,o=me(4);return Re(o.viewDocument(i.id))}),D(1,"div",20)(2,"div",9)(3,"div",26),Ct(),D(4,"svg",27)(5,"g",28),xe(6,"path",29)(7,"path",30),F()()(),Yn(),D(8,"div",31)(9,"span",32),ce(10),F()()()(),D(11,"div",21)(12,"p",33),ce(13),Ea(14,"date"),F(),D(15,"p",33),ce(16),Ea(17,"date"),F()(),D(18,"div",21),xe(19,"authorise-doc-status",34),F(),D(20,"div",20),ce(21),F(),D(22,"div",21)(23,"nz-avatar-group"),Je(24,jxe,1,2,"nz-avatar",35),F()()()}if(e&2){let n=t.$implicit;$(9),oe("nzTooltipTitle",n.template.description),$(),Wt(" ",n.template.title," "),$(3),Yt(ns(14,7,n.createdAt,"dd MMMM yyyy")),$(3),Yt(ns(17,10,n.createdAt,"HH:mm:ss")),$(3),oe("status",n.status),$(2),Wt(" ",n.owner," "),$(3),oe("ngForOf",n.actioners)}}function Hxe(e,t){if(e&1&&(D(0,"div",23),Je(1,Vxe,25,13,"div",24),F()),e&2){let n=me(3);$(),oe("ngForOf",n.documents)}}function Wxe(e,t){if(e&1&&Je(0,Bxe,2,0,"div",22)(1,Hxe,2,1,"div",23),e&2){let n=me(2);Fs(n.documents.length==0?0:-1),$(),Fs(n.documents.length!=0?1:-1)}}function qxe(e,t){if(e&1){let n=pt();D(0,"nz-tab",16),Xe("nzSelect",function(){let i=ze(n).$implicit,o=me();return Re(o.filterByRequest(i.value))}),D(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),ce(5,"Name"),F(),D(6,"div",21),ce(7,"Created"),F(),D(8,"div",21),ce(9,"Status"),F(),D(10,"div",20),ce(11,"Created By"),F(),D(12,"div",21),ce(13,"Collaborators"),F()(),Je(14,Wxe,2,2),F()()()}if(e&2){let n=t.$implicit,r=me();oe("nzTitle",n.name),$(14),Fs(r.documents?14:-1)}}var xY=(()=>{let t=class t{constructor(r,i,o,a,s){this.documentsService=r,this.routingService=i,this.notificationService=o,this.cdr=a,this.activatedRoute=s,this.subs=new ci,this.tabs=[{name:"My Docs",value:"OWN",disabled:!1},{name:"My Shares",value:"SHARE",disabled:!1},{name:"Shared With Me",value:"SHARED_WITH_ME",disabled:!1},{name:"Waiting Approval",value:"WAITING_APPROVAL",disabled:!1},{name:"Actioner",value:"ACTIONER",disabled:!1},{name:"Assignable",value:"ASSIGNABLE",disabled:!1}],this.fetchDocumentsLoader=!1,this.fetchDocumentsFilter={page:0,size:10,request:"OWN",status:null,sortField:null,sortDirection:null},this.selectedTab=null}createDocument(){this.routingService.navigateByUrl("authorise/documents/create")}onBack(){this.routingService.navigateByUrl("authorise/workspace")}ngOnInit(){let r;this.activatedRoute.queryParams.subscribe(i=>{r=i.tab}),r?this.filterByRequest(r):this.fetchDocuments(),this.subs.add=this.documentsService.fetchDocumentsResponse$.subscribe(i=>{this.onFetchDocumentsResponse(i)})}getSelectedIndex(){let r=this.tabs.findIndex(i=>i.value===this.selectedTab);return r>=0?r:0}onFetchDocumentsResponse(r){console.log(r),r.success?this.documents=r.data.content:this.notificationService.create("error","Error",r.message),this.fetchDocumentsLoader=!1,this.cdr.markForCheck()}viewDocument(r){this.routingService.navigateByUrl("authorise/documents/view/"+r)}fetchDocuments(){console.log("Documents filter: ",this.fetchDocumentsFilter),this.fetchDocumentsLoader=!0,this.documentsService.fetchDocuments(this.fetchDocumentsFilter)}filterByRequest(r){this.selectedTab=r,console.log("Filtering requests now"),this.fetchDocumentsFilter.request=r,this.fetchDocuments()}ngOnDestroy(){this.subs.dispose()}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr),ht(Zi),ht(Zm),ht(Qf))},t.\u0275cmp=tn({type:t,selectors:[["app-all-documents"]],decls:19,vars:7,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to your workspace",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../workspace"],["nz-icon","","nzType","home"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"d-flex"],[1,"ml-5"],[3,"buttonClick","label","disableButton","loading"],[1,"flex-grow-1"],[1,"authorise-section-card"],[3,"nzSelectedIndex"],[3,"nzTitle","nzSelect",4,"ngFor","ngForOf"],[3,"nzSelect","nzTitle"],[1,"mt-3"],[1,"mt-3",2,"height","100%"],[1,"row","authorise-workspace-table-header"],[1,"col-md-3"],[1,"col-md-2"],[1,"mt-5"],[2,"max-height","calc(100vh - 328px)","overflow-y","scroll"],["class","row authorise-workspace-table-data",3,"click",4,"ngFor","ngForOf"],[1,"row","authorise-workspace-table-data",3,"click"],[1,"document-name-icon"],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","color","currentColor"],["d","M15 2.5V4c0 1.414 0 2.121.44 2.56C15.878 7 16.585 7 18 7h1.5"],["d","M4 16V8c0-2.828 0-4.243.879-5.121C5.757 2 7.172 2 10 2h4.172c.408 0 .613 0 .797.076c.183.076.328.22.617.51l3.828 3.828c.29.29.434.434.51.618c.076.183.076.388.076.796V16c0 2.828 0 4.243-.879 5.121C18.243 22 16.828 22 14 22h-4c-2.828 0-4.243 0-5.121-.879C4 20.243 4 18.828 4 16m4-5h8m-8 3h8m-8 3h4.17"],[1,"document-name-text"],["nzTooltipPlacement","bottom","nz-tooltip","",3,"nzTooltipTitle"],[1,"authorise-workspace-table-p"],[3,"status"],["style","background-color: #f56a00","nzTooltipPlacement","bottom","nz-tooltip","",3,"nzText","nzTooltipTitle",4,"ngFor","ngForOf"],["nzTooltipPlacement","bottom","nz-tooltip","",2,"background-color","#f56a00",3,"nzText","nzTooltipTitle"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"div")(2,"nav",1)(3,"nz-page-header",2),Xe("nzBack",function(){return o.onBack()}),D(4,"nz-breadcrumb",3)(5,"nz-breadcrumb-item",4),xe(6,"span",5),F(),D(7,"nz-breadcrumb-item"),ce(8,"All Documents"),F()()(),D(9,"div",6)(10,"div",7),xe(11,"ul",8),D(12,"div",9)(13,"div",10)(14,"afc-button",11),Xe("buttonClick",function(){return o.createDocument()}),F()()()()()()(),D(15,"div",12)(16,"div",13)(17,"nz-tabset",14),Je(18,qxe,15,2,"nz-tab",15),F()()()()),i&2&&($(14),br("gradient"),oe("label","Open New Document")("disableButton",!1)("loading",!1),$(3),oe("nzSelectedIndex",o.getSelectedIndex()),$(),oe("ngForOf",o.tabs))},dependencies:[Xi,ei,Ji,Kn,qr,Wr,Xn,ui,wi,ra,Wc,Sb,wb,qc,Eb,G1,Uu],styles:['.authorise-workspace-table-header[_ngcontent-%COMP%]{text-transform:uppercase;background:#eaedf0;border-radius:4px;display:flex;align-items:center;padding:15px 10px;font-weight:900;color:#91999c;font-size:14px;margin:0 10px}.authorise-workspace-table-data[_ngcontent-%COMP%]{margin:10px 10px 0;background:#fff;border-radius:4px;display:flex;align-items:center;padding:5px;font-weight:600;color:#677074;font-size:13px;border:1px solid transparent;transition-duration:.5s}.authorise-workspace-table-data[_ngcontent-%COMP%]:hover{border:1px solid #d7f2de;box-shadow:0 0 2rem #3347501a;cursor:pointer}.ellipse-border[_ngcontent-%COMP%]{position:relative;padding-left:10px}.ellipse-border[_ngcontent-%COMP%]:before{display:block;content:"";position:absolute;top:0;left:0;background-image:linear-gradient(-180deg,#dee2e600,#dee2e6 49%,#dee2e600);width:1px;height:100%}.workspace-ellipse[_ngcontent-%COMP%]:hover{cursor:pointer}.document-name-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.document-name-icon[_ngcontent-%COMP%]{margin-right:5px}.authorise-workspace-table-p[_ngcontent-%COMP%]{margin:0}.navbar[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-lg[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-md[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-sm[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xl[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xxl[_ngcontent-%COMP%]{justify-content:end}.authorise-section-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;min-height:100%;margin:0 10px}']});let e=t;return e})();var $1=(()=>{let t=class t{constructor(r){this.http=r,this.createTemplateResponse$=new Xr,this.getTemplateResponse$=new Xr,this.getSlaAgreementResponse$=new Xr}createTemplate(r){this.http.post("http://192.168.1.106:7000/authorize/master/templates",r).subscribe(i=>{this.createTemplateResponse$.next(i)})}getTemplate(r){this.http.get("http://192.168.1.106:7000/authorize/master/templates?id="+r).subscribe(i=>{this.getTemplateResponse$.next(i)})}getSlaAgreement(r){this.http.get("http://192.168.1.106:7000/authorize/master/sla/"+r).subscribe(i=>{this.getSlaAgreementResponse$.next(i)})}};t.\u0275fac=function(i){return new(i||t)(_l(wl))},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Y1=(()=>{let t=class t{constructor(r){this.http=r,this.downloadResponse$=new Xr,this.openResponse$=new Xr}uploadFile(r){return this.http.post("http://192.168.1.106:7000/cdn",r)}downloadFile(r){this.http.get("http://192.168.1.106:7000/cdn/download/"+r,{observe:"response",responseType:"blob"}).subscribe({next:i=>{this.downloadResponse$.next(i)},error:i=>{console.error("Error downloading file:",i)}})}openFile(r){this.http.get("http://192.168.1.106:7000/cdn/download/"+r,{observe:"response",responseType:"blob"}).subscribe({next:i=>{this.openResponse$.next(i)},error:i=>{console.error("Error opening file:",i)}})}};t.\u0275fac=function(i){return new(i||t)(_l(wl))},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var bY=e=>typeof e>"u"||e===null,Uxe=e=>e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`),Gxe=e=>{let t={};return Object.keys(e).forEach(n=>{e[n]&&(t[n]=e[n])}),t},nO=e=>{let t=Gxe(e);return Object.entries(t).map(([n,r])=>`${Uxe(n)}:${r}`).join(";")},tO=class extends Error{constructor(t){super(t),this.name=this.constructor.name}};var _Y=(e,t,n)=>Math.min(Math.max(e,t),n);function ga(e){this.content=e}ga.prototype={constructor:ga,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return i==-1?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new ga(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new ga(n)},addToStart:function(e,t){return new ga([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ga(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(o==-1?i.length:o,0,t,n),new ga(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=ga.from(e),e.size?new ga(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=ga.from(e),e.size?new ga(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ga.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};ga.from=function(e){if(e instanceof ga)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ga(t)};var mP=ga;function PY(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){let a=PY(i.content,o.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function NY(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let a=e.child(--i),s=t.child(--o),l=a.nodeSize;if(a==s){n-=l,r-=l;continue}if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){let c=0,u=Math.min(a.text.length,s.text.length);for(;c<u&&a.text[a.text.length-c-1]==s.text[s.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){let c=NY(a.content,s.content,n-1,r-1);if(c)return c}n-=l,r-=l}}var _t=class e{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,o){for(let a=0,s=0;s<n;a++){let l=this.content[a],c=s+l.nodeSize;if(c>t&&r(l,i+s,o||null,a)!==!1&&l.content.size){let u=s+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,i+u)}s=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let o="",a=!0;return this.nodesBetween(t,n,(s,l)=>{let c=s.isText?s.text.slice(Math.max(t,l)-l,n-l):s.isLeaf?i?typeof i=="function"?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&c||s.isTextblock)&&r&&(a?a=!1:o+=r),o+=c},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new e(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let o=0,a=0;a<n;o++){let s=this.content[o],l=a+s.nodeSize;l>t&&((a<t||l>n)&&(s.isText?s=s.cut(Math.max(0,t-a),Math.min(s.text.length,n-a)):s=s.cut(Math.max(0,t-a-1),Math.min(s.content.size,n-a-1))),r.push(s),i+=s.nodeSize),a=l}return new e(r,i)}cutByIndex(t,n){return t==n?e.empty:t==0&&n==this.content.length?this:new e(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new e(i,o)}addToStart(t){return new e([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new e(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return PY(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return NY(this,t,n,r)}findIndex(t,n=-1){if(t==0)return rO(0,t);if(t==this.size)return rO(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),a=i+o.nodeSize;if(a>=t)return a==t||n>0?rO(r+1,a):rO(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return e.empty;let n,r=0;for(let i=0;i<t.length;i++){let o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(n||(n=t.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new e(n||t,r)}static from(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};_t.empty=new _t([],0);var gP={index:0,offset:0};function rO(e,t){return gP.index=e,gP.offset=t,gP}function oO(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!oO(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!oO(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}var Br=(()=>{class e{constructor(n,r){this.type=n,this.attrs=r}addToSet(n){let r,i=!1;for(let o=0;o<n.length;o++){let a=n[o];if(this.eq(a))return n;if(this.type.excludes(a.type))r||(r=n.slice(0,o));else{if(a.type.excludes(this.type))return n;!i&&a.type.rank>this.type.rank&&(r||(r=n.slice(0,o)),r.push(this),i=!0),r&&r.push(a)}}return r||(r=n.slice()),i||r.push(this),r}removeFromSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return n.slice(0,r).concat(n.slice(r+1));return n}isInSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return!0;return!1}eq(n){return this==n||this.type==n.type&&oO(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let r in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let i=n.marks[r.type];if(!i)throw new RangeError(`There is no mark type ${r.type} in this schema`);let o=i.create(r.attrs);return i.checkAttrs(o.attrs),o}static sameSet(n,r){if(n==r)return!0;if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++)if(!n[i].eq(r[i]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return e.none;if(n instanceof e)return[n];let r=n.slice();return r.sort((i,o)=>i.type.rank-o.type.rank),r}}return e.none=[],e})(),Jh=class extends Error{},jt=class e{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=IY(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}removeBetween(t,n){return new e(LY(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return e.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new e(_t.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new e(t,r,i)}};jt.empty=new jt(_t.empty,0,0);function LY(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:a,offset:s}=e.findIndex(n);if(i==t||o.isText){if(s!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(LY(o.content,t-i-1,n-i-1)))}function IY(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),a=e.maybeChild(i);if(o==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let s=IY(a.content,t-o-1,n);return s&&e.replaceChild(i,a.copy(s))}function $xe(e,t,n){if(n.openStart>e.depth)throw new Jh("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Jh("Inconsistent open depths");return DY(e,t,n,0)}function DY(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=DY(e,t,n,r+1);return o.copy(o.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let a=e.parent,s=a.content;return Zh(a,s.cut(0,e.parentOffset).append(n.content).append(s.cut(t.parentOffset)))}else{let{start:a,end:s}=Yxe(n,e);return Zh(o,RY(e,a,s,t,r))}else return Zh(o,aO(e,t,r))}function zY(e,t){if(!t.type.compatibleContent(e.type))throw new Jh("Cannot join "+t.type.name+" onto "+e.type.name)}function yP(e,t,n){let r=e.node(n);return zY(r,t.node(n)),r}function Kh(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function By(e,t,n,r){let i=(t||e).node(n),o=0,a=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Kh(e.nodeAfter,r),o++));for(let s=o;s<a;s++)Kh(i.child(s),r);t&&t.depth==n&&t.textOffset&&Kh(t.nodeBefore,r)}function Zh(e,t){return e.type.checkContent(t),e.copy(t)}function RY(e,t,n,r,i){let o=e.depth>i&&yP(e,t,i+1),a=r.depth>i&&yP(n,r,i+1),s=[];return By(null,e,i,s),o&&a&&t.index(i)==n.index(i)?(zY(o,a),Kh(Zh(o,RY(e,t,n,r,i+1)),s)):(o&&Kh(Zh(o,aO(e,t,i+1)),s),By(t,n,i,s),a&&Kh(Zh(a,aO(n,r,i+1)),s)),By(r,null,i,s),new _t(s)}function aO(e,t,n){let r=[];if(By(null,e,n,r),e.depth>n){let i=yP(e,t,n+1);Kh(Zh(i,aO(e,t,n+1)),r)}return By(t,null,n,r),new _t(r)}function Yxe(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)i=t.node(o).copy(_t.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}var sO=class e{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)i+=r.child(o).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Br.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let s=r;r=i,i=s}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Qh(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let a=t;;){let{index:s,offset:l}=a.content.findIndex(o),c=o-l;if(r.push(a,s,i+l),!c||(a=a.child(s),a.isText))break;o=c-1,i+=l+1}return new e(n,r,o)}static resolveCached(t,n){let r=wY.get(t);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==n)return a}else wY.set(t,r=new xP);let i=r.elts[r.i]=e.resolve(t,n);return r.i=(r.i+1)%Xxe,i}},xP=class{constructor(){this.elts=[],this.i=0}},Xxe=12,wY=new WeakMap,Qh=class{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Kxe=Object.create(null),yu=class e{constructor(t,n,r,i=Br.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||_t.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&oO(this.attrs,n||t.defaultAttrs||Kxe)&&Br.sameSet(this.marks,r||Br.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return jt.empty;let i=this.resolve(t),o=this.resolve(n),a=r?0:i.sharedDepth(n),s=i.start(a),c=i.node(a).content.cut(i.pos-s,o.pos-s);return new jt(c,i.depth-a,o.depth-a)}replace(t,n,r){return $xe(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return sO.resolveCached(this,t)}resolveNoCache(t){return sO.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),FY(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=_t.empty,i=0,o=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,o),s=a&&a.matchFragment(this.content,n);if(!s||!s.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(r),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Br.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Br.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=_t.fromJSON(t,n.content),o=t.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};yu.prototype.text=void 0;var bP=class e extends yu{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):FY(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function FY(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var em=class e{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new _P(t,n);if(r.next==null)return e.empty;let i=BY(r);r.next&&r.err("Unexpected trailing text");let o=rbe(nbe(i));return ibe(o,r),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function o(a,s){let l=a.matchFragment(t,r);if(l&&(!n||l.validEnd))return _t.from(s.map(c=>c.createAndFill()));for(let c=0;c<a.next.length;c++){let{type:u,next:f}=a.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=o(f,s.concat(u));if(p)return p}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(t)){let a=[];for(let s=i;s.type;s=s.via)a.push(s.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:s,next:l}=o.next[a];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in n)&&(!i.type||l.validEnd)&&(r.push({match:s.contentMatch,type:s,via:i}),n[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return o}).join(`
`)}};em.empty=new em(!0);var _P=class{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}};function BY(e){let t=[];do t.push(Zxe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Zxe(e){let t=[];do t.push(Jxe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Jxe(e){let t=tbe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Qxe(e,t);else break;return t}function SY(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Qxe(e,t){let n=SY(e),r=n;return e.eat(",")&&(e.next!="}"?r=SY(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function ebe(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let a=n[o];a.groups.indexOf(t)>-1&&i.push(a)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function tbe(e){if(e.eat("(")){let t=BY(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=ebe(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function nbe(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(a,s,l){let c={term:l,to:s};return t[a].push(c),c}function i(a,s){a.forEach(l=>l.to=s)}function o(a,s){if(a.type=="choice")return a.exprs.reduce((l,c)=>l.concat(o(c,s)),[]);if(a.type=="seq")for(let l=0;;l++){let c=o(a.exprs[l],s);if(l==a.exprs.length-1)return c;i(c,s=n())}else if(a.type=="star"){let l=n();return r(s,l),i(o(a.expr,l),l),[r(l)]}else if(a.type=="plus"){let l=n();return i(o(a.expr,s),l),i(o(a.expr,l),l),[r(l)]}else{if(a.type=="opt")return[r(s)].concat(o(a.expr,s));if(a.type=="range"){let l=s;for(let c=0;c<a.min;c++){let u=n();i(o(a.expr,l),u),l=u}if(a.max==-1)i(o(a.expr,l),l);else for(let c=a.min;c<a.max;c++){let u=n();r(l,u),i(o(a.expr,l),u),l=u}return[r(l)]}else{if(a.type=="name")return[r(s,void 0,a.value)];throw new Error("Unknown expr type")}}}}function jY(e,t){return t-e}function CY(e,t){let n=[];return r(t),n.sort(jY);function r(i){let o=e[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let a=0;a<o.length;a++){let{term:s,to:l}=o[a];!s&&n.indexOf(l)==-1&&r(l)}}}function rbe(e){let t=Object.create(null);return n(CY(e,0));function n(r){let i=[];r.forEach(a=>{e[a].forEach(({term:s,to:l})=>{if(!s)return;let c;for(let u=0;u<i.length;u++)i[u][0]==s&&(c=i[u][1]);CY(e,l).forEach(u=>{c||i.push([s,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=t[r.join(",")]=new em(r.indexOf(e.length-1)>-1);for(let a=0;a<i.length;a++){let s=i[a][1].sort(jY);o.next.push({type:i[a][0],next:t[s.join(",")]||n(s)})}return o}}function ibe(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],o=!i.validEnd,a=[];for(let s=0;s<i.next.length;s++){let{type:l,next:c}=i.next[s];a.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function VY(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function HY(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let o=e[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function WY(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let o=e[i];o.validate&&o.validate(t[i])}}function qY(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new wP(e,r,t[r]);return n}var lO=class e{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=qY(t,r.attrs),this.defaultAttrs=VY(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==em.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:HY(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yu(this,this.computeAttrs(t),_t.from(n),Br.setFrom(r))}createChecked(t=null,n,r){return n=_t.from(n),this.checkContent(n),new yu(this,this.computeAttrs(t),n,Br.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=_t.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(_t.empty,!0);return o?new yu(this,t,n.append(o),Br.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){WY(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Br.none:t}static compile(t,n){let r=Object.create(null);t.forEach((o,a)=>r[o]=new e(o,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function obe(e,t,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}var wP=class{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?obe(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}},Vy=class e{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=qY(t,i.attrs),this.excluded=null;let o=VY(this.attrs);this.instance=o?new Br(this,o):null}create(t=null){return!t&&this.instance?this.instance:new Br(this,HY(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((o,a)=>r[o]=new e(o,i++,n,a)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){WY(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}},cO=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=mP.from(t.nodes),n.marks=mP.from(t.marks||{}),this.nodes=lO.compile(this.spec.nodes,this),this.marks=Vy.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",s=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=em.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=s=="_"?null:s?OY(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:OY(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof lO){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new bP(r,r.defaultAttrs,t,Br.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeFromJSON(t){return yu.fromJSON(this,t)}markFromJSON(t){return Br.fromJSON(this,t)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function OY(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],a=o;if(o)n.push(o);else for(let s in e.marks){let l=e.marks[s];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function abe(e){return e.tag!=null}function sbe(e){return e.style!=null}var Zp=class e{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(abe(i))this.tags.push(i);else if(sbe(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=t.nodes[i.node];return o.contentMatch.matchType(o)})}parse(t,n={}){let r=new pO(this,n,!1);return r.addAll(t,Br.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new pO(this,n,!0);return r.addAll(t,Br.none,n.from,n.to),jt.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(ube(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(t,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],s=a.style;if(!(s.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||s.length>t.length&&(s.charCodeAt(t.length)!=61||s.slice(t.length+1)!=n))){if(a.getAttrs){let l=a.getAttrs(n);if(l===!1)continue;a.attrs=l||void 0}return a}}}static schemaRules(t){let n=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let s=n[a];if((s.priority==null?50:s.priority)<o)break}n.splice(a,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=kY(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=kY(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}},UY={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lbe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},GY={ol:!0,ul:!0},uO=1,fO=2,jy=4;function MY(e,t,n){return t!=null?(t?uO:0)|(t==="full"?fO:0):e&&e.whitespace=="pre"?uO|fO:n&~jy}var X1=class{constructor(t,n,r,i,o,a){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=Br.none,this.match=o||(a&jy?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_t.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&uO)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=_t.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(_t.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!UY.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}},pO=class{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,a=MY(null,n.preserveWhitespace,0)|(r?jy:0);i?o=new X1(i.type,i.attrs,Br.none,!0,n.topMatch||i.type.contentMatch,a):r?o=new X1(null,null,Br.none,!0,null,a):o=new X1(t.schema.topNodeType,null,Br.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top;if(i.options&fO||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&uO)i.options&fO?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=t.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=t.nodeName.toLowerCase(),o;GY.hasOwnProperty(i)&&this.parser.normalizeLists&&cbe(t);let a=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,r));if(a?a.ignore:lbe.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(t=a.skip);let s,l=this.top,c=this.needsBlock;if(UY.hasOwnProperty(i))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),s=!0,l.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);return}let u=a&&a.skip?n:this.readStyles(t,n);u&&this.addAll(t,u),s&&this.sync(l),this.needsBlock=c}else{let s=this.readStyles(t,n);s&&this.addElementByRule(t,a,s,a.consuming===!1?o:void 0)}}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],a=r.getPropertyValue(o);if(a)for(let s=void 0;;){let l=this.parser.matchStyle(o,a,this,s);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)s=l;else break}}return n}addElementByRule(t,n,r,i){let o,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r)||this.leafFallback(t,r);else{let l=this.enter(a,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let s=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r)}o&&this.sync(s)&&this.open--}addAll(t,n,r,i){let o=r||0;for(let a=r?t.childNodes[r]:t.firstChild,s=i==null?null:t.childNodes[i];a!=s;a=a.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(a,n);this.findAtPoint(t,o)}findPlace(t,n){let r,i;for(let o=this.open;o>=0;o--){let a=this.nodes[o],s=a.findWrapping(t);if(s&&(!r||r.length>s.length)&&(r=s,i=a,!s.length)||a.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(t,n){if(t.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(t,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(t.type));let o=Br.none;for(let a of r.concat(t.marks))(i.type?i.type.allowsMarkType(a.type):EY(a.type,t.type))&&(o=a.addToSet(o));return i.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let o=this.findPlace(t.create(n),r);return o&&(o=this.enterInner(t,n,r,!0,i)),o}enterInner(t,n,r,i=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let s=MY(t,o,a.options);a.options&jy&&a.content.length==0&&(s|=jy);let l=Br.none;return r=r.filter(c=>(a.type?a.type.allowsMarkType(c.type):EY(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new X1(t,n,l,i,null,s)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let n=this.open;n>=0;n--)if(this.nodes[n]==t)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(s,l)=>{for(;s>=0;s--){let c=n[s];if(c==""){if(s==n.length-1||s==0)continue;for(;l>=o;l--)if(a(s-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}};function cbe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&GY.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function ube(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function kY(e){let t={};for(let n in e)t[n]=e[n];return t}function EY(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],a=s=>{o.push(s);for(let l=0;l<s.edgeCount;l++){let{type:c,next:u}=s.edge(l);if(c==t||o.indexOf(u)<0&&a(u))return!0}};if(a(i.contentMatch))return!0}}var Jp=class e{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=vP(n).createDocumentFragment());let i=r,o=[];return t.forEach(a=>{if(o.length||a.marks.length){let s=0,l=0;for(;s<o.length&&l<a.marks.length;){let c=a.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[s][0])||c.type.spec.spanning===!1)break;s++,l++}for(;s<o.length;)i=o.pop()[1];for(;l<a.marks.length;){let c=a.marks[l++],u=this.serializeMark(c,a.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=iO(vP(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&iO(vP(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return iO(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=AY(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return AY(t.marks)}};function AY(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function vP(e){return e.document||window.document}var TY=new WeakMap;function fbe(e){let t=TY.get(e);return t===void 0&&TY.set(e,t=pbe(e)),t}function pbe(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function iO(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=fbe(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let s,l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:h}=iO(e,p,n,r);if(l.appendChild(d),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:l,contentDOM:s}}var XY=65535,KY=Math.pow(2,16);function dbe(e,t){return e+t*KY}function $Y(e){return e&XY}function hbe(e){return(e-(e&XY))/KY}var ZY=1,JY=2,dO=4,QY=8,qy=class{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&QY)>0}get deletedBefore(){return(this.delInfo&(ZY|dO))>0}get deletedAfter(){return(this.delInfo&(JY|dO))>0}get deletedAcross(){return(this.delInfo&dO)>0}},wf=class e{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}recover(t){let n=0,r=$Y(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+hbe(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[s+o],u=this.ranges[s+a],f=l+c;if(t<=f){let p=c?t==l?-1:t==f?1:n:n,d=l+i+(p<0?0:u);if(r)return d;let h=t==(n<0?l:f)?null:dbe(s/3,t-l),m=t==l?JY:t==f?ZY:dO;return(n<0?t!=l:t!=f)&&(m|=QY),new qy(d,m,h)}i+=u-c}return r?t+i:new qy(t+i,0,null)}touches(t,n){let r=0,i=$Y(n),o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[s+o],u=l+c;if(t<=u&&s==i*3)return!0;r+=this.ranges[s+a]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],s=a-(this.inverted?o:0),l=a+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];t(s,s+c,l,l+u),o+=u-c}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}};wf.empty=new wf([]);var Uy=class e{constructor(t=[],n,r=0,i=t.length){this.maps=t,this.mirror=n,this.from=r,this.to=i}slice(t=0,n=this.maps.length){return new e(this.maps,this.mirror,t,n)}copy(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(t){for(let n=0,r=this.maps.length;n<t.maps.length;n++){let i=t.getMirror(n);this.appendMap(t.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new e;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this.maps[o],s=a.mapResult(t,n);if(s.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this.maps[l].recover(s.recover);continue}}i|=s.delInfo,t=s.pos}return r?t:new qy(t,i,null)}},SP=Object.create(null),Lo=class{getMap(){return wf.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=SP[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in SP)throw new RangeError("Duplicate use of step JSON ID "+t);return SP[t]=n,n.prototype.jsonID=t,n}},Ko=class e{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new e(t,null)}static fail(t){return new e(null,t)}static fromReplace(t,n,r,i){try{return e.ok(t.replace(n,r,i))}catch(o){if(o instanceof Jh)return e.fail(o.message);throw o}}};function EP(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(EP(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return _t.fromArray(r)}var Gy=class e extends Lo{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new jt(EP(n.content,(a,s)=>!a.isAtom||!s.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return Ko.fromReplace(t,this.from,this.to,o)}invert(){return new tm(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};Lo.jsonID("addMark",Gy);var tm=class e extends Lo{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new jt(EP(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Ko.fromReplace(t,this.from,this.to,r)}invert(){return new Gy(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};Lo.jsonID("removeMark",tm);var $y=class e extends Lo{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ko.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ko.fromReplace(t,this.pos,this.pos+1,new jt(_t.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new e(this.pos,n.marks[i]);return new e(this.pos,this.mark)}}return new Yy(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};Lo.jsonID("addNodeMark",$y);var Yy=class e extends Lo{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ko.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ko.fromReplace(t,this.pos,this.pos+1,new jt(_t.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new $y(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};Lo.jsonID("removeNodeMark",Yy);var rl=class e extends Lo{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&MP(t,this.from,this.to)?Ko.fail("Structure replace would overwrite content"):Ko.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new wf([this.from,this.to-this.from,this.slice.size])}invert(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?jt.empty:new jt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?jt.empty:new jt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,jt.fromJSON(t,n.slice),!!n.structure)}};Lo.jsonID("replace",rl);var Io=class e extends Lo{constructor(t,n,r,i,o,a,s=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=s}apply(t){if(this.structure&&(MP(t,this.from,this.gapFrom)||MP(t,this.gapTo,this.to)))return Ko.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ko.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ko.fromReplace(t,this.from,this.to,r):Ko.fail("Content does not fit in gap")}getMap(){return new wf([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,jt.fromJSON(t,n.slice),n.insert,!!n.structure)}};Lo.jsonID("replaceAround",Io);function MP(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function mbe(e,t,n,r){let i=[],o=[],a,s;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let p=Math.max(c,t),d=Math.min(c+l.nodeSize,n),h=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(a&&a.to==p&&a.mark.eq(f[m])?a.to=d:i.push(a=new tm(p,d,f[m])));s&&s.to==p?s.to=d:o.push(s=new Gy(p,d,r))}}),i.forEach(l=>e.step(l)),o.forEach(l=>e.step(l))}function gbe(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,(a,s)=>{if(!a.isInline)return;o++;let l=null;if(r instanceof Vy){let c=a.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(a.marks)&&(l=[r]):l=a.marks;if(l&&l.length){let c=Math.min(s+a.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],p;for(let d=0;d<i.length;d++){let h=i[d];h.step==o-1&&f.eq(i[d].style)&&(p=h)}p?(p.to=c,p.step=o):i.push({style:f,from:Math.max(s,t),to:c,step:o})}}}),i.forEach(a=>e.step(new tm(a.from,a.to,a.style)))}function eX(e,t,n,r=n.contentMatch,i=!0){let o=e.doc.nodeAt(t),a=[],s=t+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=s+c.nodeSize,f=r.matchType(c.type);if(!f)a.push(new rl(s,u,jt.empty));else{r=f;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||e.step(new tm(s,u,c.marks[p]));if(i&&c.isText&&n.whitespace!="pre"){let p,d=/\r?\n|\r/g,h;for(;p=d.exec(c.text);)h||(h=new jt(_t.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),a.push(new rl(s+p.index,s+p.index+p[0].length,h))}}s=u}if(!r.validEnd){let l=r.fillBefore(_t.empty,!0);e.replace(s,s,new jt(l,0,0))}for(let l=a.length-1;l>=0;l--)e.step(a[l])}function vbe(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function nm(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),o=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(o,a,n))return r;if(r==0||i.type.spec.isolating||!vbe(i,o,a))break}return null}function ybe(e,t,n){let{$from:r,$to:i,depth:o}=t,a=r.before(o+1),s=i.after(o+1),l=a,c=s,u=_t.empty,f=0;for(let h=o,m=!1;h>n;h--)m||r.index(h)>0?(m=!0,u=_t.from(r.node(h).copy(u)),f++):l--;let p=_t.empty,d=0;for(let h=o,m=!1;h>n;h--)m||i.after(h+1)<i.end(h)?(m=!0,p=_t.from(i.node(h).copy(p)),d++):c++;e.step(new Io(l,c,a,s,new jt(u.append(p),f,d),u.size-f,!0))}function Z1(e,t,n=null,r=e){let i=xbe(e,t),o=i&&bbe(r,t);return o?i.map(YY).concat({type:t,attrs:n}).concat(o.map(YY)):null}function YY(e){return{type:e,attrs:null}}function xbe(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let a=o.length?o[0]:t;return n.canReplaceWith(r,i,a)?o:null}function bbe(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let l=(a.length?a[a.length-1]:t).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:a}function _be(e,t,n){let r=_t.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let s=n[a].type.contentMatch.matchFragment(r);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_t.from(n[a].type.create(n[a].attrs,r))}let i=t.start,o=t.end;e.step(new Io(i,o,i,o,new jt(r,0,0),n.length,!0))}function wbe(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(a,s)=>{let l=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,l)&&Obe(e.doc,e.mapping.slice(o).map(s),r)){let c=null;if(r.schema.linebreakReplacement){let d=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);d&&!h?c=!1:!d&&h&&(c=!0)}c===!1&&Cbe(e,a,s,o),eX(e,e.mapping.slice(o).map(s,1),r,void 0,c===null);let u=e.mapping.slice(o),f=u.map(s,1),p=u.map(s+a.nodeSize,1);return e.step(new Io(f,p,f+1,p-1,new jt(_t.from(r.create(l,null,a.marks)),0,0),1,!0)),c===!0&&Sbe(e,a,s,o),!1}})}function Sbe(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(i.text);){let l=e.mapping.slice(r).map(n+1+o+a.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function Cbe(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let a=e.mapping.slice(r).map(n+1+o);e.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function Obe(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Mbe(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Io(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new jt(_t.from(a),0,0),1,!0))}function Qp(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let f=i.node(c),p=i.index(c);if(f.type.spec.isolating)return!1;let d=f.content.cutByIndex(p,f.childCount),h=r&&r[u+1];h&&(d=d.replaceChild(0,h.type.create(h.attrs)));let m=r&&r[u]||f;if(!f.canReplace(p+1,f.childCount)||!m.type.validContent(d))return!1}let s=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(s,s,l?l.type:i.node(o+1).type)}function kbe(e,t,n=1,r){let i=e.doc.resolve(t),o=_t.empty,a=_t.empty;for(let s=i.depth,l=i.depth-n,c=n-1;s>l;s--,c--){o=_t.from(i.node(s).copy(o));let u=r&&r[c];a=_t.from(u?u.type.create(u.attrs,a):i.node(s).copy(a))}e.step(new rl(t,t,new jt(o.append(a),n,n),!0))}function rm(e,t){let n=e.resolve(t),r=n.index();return Ebe(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Ebe(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function Abe(e,t,n){let r=new rl(t-n,t+n,jt.empty,!0);e.step(r)}function Tbe(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function tX(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let a=r.depth;a>=0;a--){let s=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(s>0?1:0),c=r.node(a),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return s==0?r.pos:s<0?r.before(a+1):r.after(a+1)}return null}function vO(e,t,n=t,r=jt.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return nX(i,o,r)?new rl(t,n,r):new kP(i,o,r).fit()}function nX(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}var kP=class{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_t.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=_t.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let o=this.placed,a=r.depth,s=i.depth;for(;a&&s&&o.childCount==1;)o=o.firstChild.content,a--,s--;let l=new jt(o,a,s);return t>-1?new Io(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new rl(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){t=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=CP(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let s=this.depth;s>=0;s--){let{type:l,match:c}=this.frontier[s],u,f=null;if(n==1&&(a?c.matchType(a.type)||(f=c.fillBefore(_t.from(a),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:s,parent:o,inject:f};if(n==2&&a&&(u=c.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:s,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=CP(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new jt(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=CP(t,n);if(i.childCount<=1&&n>0){let o=t.size-n<=n+i.size;this.unplaced=new jt(Hy(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new jt(Hy(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let a=this.unplaced,s=r?r.content:a.content,l=a.openStart-t,c=0,u=[],{match:f,type:p}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let d=s.size+t-(a.content.size-a.openEnd);for(;c<s.childCount;){let m=s.child(c),g=f.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(f=g,u.push(rX(m.mark(p.allowedMarks(m.marks)),c==1?l:0,c==s.childCount?d:-1)))}let h=c==s.childCount;h||(d=-1),this.placed=Wy(this.placed,n,_t.from(u)),this.frontier[n].match=f,h&&d<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=s;m<d;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=h?t==0?jt.empty:new jt(Hy(a.content,t-1,1),t-1,d<0?a.openEnd:t-1):new jt(Hy(a.content,t,c),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!OP(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=OP(t,n,i,r,o);if(a){for(let s=n-1;s>=0;s--){let{match:l,type:c}=this.frontier[s],u=OP(t,s,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:a,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Wy(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Wy(this.placed,this.depth,_t.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_t.empty,!0);n.childCount&&(this.placed=Wy(this.placed,this.frontier.length,n))}};function Hy(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Hy(e.firstChild.content,t-1,n)))}function Wy(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Wy(e.lastChild.content,t-1,n)))}function CP(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function rX(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,rX(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(_t.empty,!0)))),e.copy(r)}function OP(e,t,n,r,i){let o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let s=r.fillBefore(o.content,!0,a);return s&&!Pbe(n,o.content,a)?s:null}function Pbe(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Nbe(e){return e.spec.defining||e.spec.definingForContent}function Lbe(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(nX(i,o,r))return e.step(new rl(t,n,r));let a=oX(i,e.doc.resolve(n));a[a.length-1]==0&&a.pop();let s=-(i.depth+1);a.unshift(s);for(let p=i.depth,d=i.pos-1;p>0;p--,d--){let h=i.node(p).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;a.indexOf(p)>-1?s=p:i.before(p)==d&&a.splice(1,0,-p)}let l=a.indexOf(s),c=[],u=r.openStart;for(let p=r.content,d=0;;d++){let h=p.firstChild;if(c.push(h),d==r.openStart)break;p=h.content}for(let p=u-1;p>=0;p--){let d=c[p],h=Nbe(d.type);if(h&&!d.sameMarkup(i.node(Math.abs(s)-1)))u=p;else if(h||!d.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let d=(p+u+1)%(r.openStart+1),h=c[d];if(h)for(let m=0;m<a.length;m++){let g=a[(m+l)%a.length],v=!0;g<0&&(v=!1,g=-g);let y=i.node(g-1),x=i.index(g-1);if(y.canReplaceWith(x,x,h.type,h.marks))return e.replace(i.before(g),v?o.after(g):n,new jt(iX(r.content,0,r.openStart,d),d,r.openEnd))}}let f=e.steps.length;for(let p=a.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>f));p--){let d=a[p];d<0||(t=i.before(d),n=o.after(d))}}function iX(e,t,n,r,i){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(iX(o.content,t+1,n,r,o)))}if(t>r){let o=i.contentMatchAt(0),a=o.fillBefore(e).append(e);e=a.append(o.matchFragment(a).fillBefore(_t.empty,!0))}return e}function Ibe(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=Tbe(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new jt(_t.from(r),0,0))}function Dbe(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=oX(r,i);for(let a=0;a<o.length;a++){let s=o[a],l=a==o.length-1;if(l&&s==0||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),i.end(s));if(s>0&&(l||r.node(s-1).canReplace(r.index(s-1),i.indexAfter(s-1))))return e.delete(r.before(s),i.after(s))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a)return e.delete(r.before(a),n);e.delete(t,n)}function oX(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&n.push(i)}return n}var hO=class e extends Lo{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ko.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ko.fromReplace(t,this.pos,this.pos+1,new jt(_t.from(i),0,n.isLeaf?0:1))}getMap(){return wf.empty}invert(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}};Lo.jsonID("attr",hO);var mO=class e extends Lo{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Ko.ok(r)}getMap(){return wf.empty}invert(t){return new e(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(n.attr,n.value)}};Lo.jsonID("docAttr",mO);var K1=class extends Error{};K1=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};K1.prototype=Object.create(Error.prototype);K1.prototype.constructor=K1;K1.prototype.name="TransformError";var gO=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Uy}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new K1(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=jt.empty){let i=vO(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new jt(_t.from(r),0,0))}delete(t,n){return this.replace(t,n,jt.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Lbe(this,t,n,r),this}replaceRangeWith(t,n,r){return Ibe(this,t,n,r),this}deleteRange(t,n){return Dbe(this,t,n),this}lift(t,n){return ybe(this,t,n),this}join(t,n=1){return Abe(this,t,n),this}wrap(t,n){return _be(this,t,n),this}setBlockType(t,n=t,r,i=null){return wbe(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return Mbe(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new hO(t,n,r)),this}setDocAttribute(t,n){return this.step(new mO(t,n)),this}addNodeMark(t,n){return this.step(new $y(t,n)),this}removeNodeMark(t,n){if(!(n instanceof Br)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Yy(t,n)),this}split(t,n=1,r){return kbe(this,t,n,r),this}addMark(t,n,r){return mbe(this,t,n,r),this}removeMark(t,n,r){return gbe(this,t,n,r),this}clearIncompatible(t,n,r){return eX(this,t,n,r),this}};var AP=Object.create(null),Gn=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new Q1(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=jt.empty){let r=n.content.lastChild,i=null;for(let s=0;s<n.openEnd;s++)i=r,r=r.lastChild;let o=t.steps.length,a=this.ranges;for(let s=0;s<a.length;s++){let{$from:l,$to:c}=a[s],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),s?jt.empty:n),s==0&&lX(t,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:s}=i[o],l=t.mapping.slice(r),c=l.map(a.pos),u=l.map(s.pos);o?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),lX(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ir(t):J1(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let o=t.depth-1;o>=0;o--){let a=n<0?J1(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):J1(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(a)return a}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new il(t.node(0))}static atStart(t){return J1(t,t,0,0,1)||new il(t)}static atEnd(t){return J1(t,t,t.content.size,t.childCount,-1)||new il(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=AP[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in AP)throw new RangeError("Duplicate use of selection JSON ID "+t);return AP[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ir.between(this.$anchor,this.$head).getBookmark()}};Gn.prototype.visible=!0;var Q1=class{constructor(t,n){this.$from=t,this.$to=n}},aX=!1;function sX(e){!aX&&!e.parent.inlineContent&&(aX=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var Ir=class e extends Gn{constructor(t,n=t){sX(t),sX(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Gn.near(r);let i=t.resolve(n.map(this.anchor));return new e(i.parent.inlineContent?i:r,r)}replace(t,n=jt.empty){if(super.replace(t,n),n==jt.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new xO(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Gn.findFrom(n,r,!0)||Gn.findFrom(n,-r,!0);if(o)n=o.$head;else return Gn.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Gn.findFrom(t,-r,!0)||Gn.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new e(t,n)}};Gn.jsonID("text",Ir);var xO=class e{constructor(t,n){this.anchor=t,this.head=n}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(t){return Ir.between(t.resolve(this.anchor),t.resolve(this.head))}},Nn=class e extends Gn{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=t.resolve(i);return r?Gn.near(o):new e(o)}content(){return new jt(_t.from(this.node),0,0)}eq(t){return t instanceof e&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new PP(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))}static create(t,n){return new e(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}};Nn.prototype.visible=!1;Gn.jsonID("node",Nn);var PP=class e{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new xO(r,r):new e(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Nn.isSelectable(r)?new Nn(n):Gn.near(n)}},il=class e extends Gn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=jt.empty){if(n==jt.empty){t.delete(0,t.doc.content.size);let r=Gn.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new e(t)}map(t){return new e(t)}eq(t){return t instanceof e}getBookmark(){return zbe}};Gn.jsonID("all",il);var zbe={map(){return this},resolve(e){return new il(e)}};function J1(e,t,n,r,i,o=!1){if(t.inlineContent)return Ir.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let s=t.child(a);if(s.isAtom){if(!o&&Nn.isSelectable(s))return Nn.create(e,n-(i<0?s.nodeSize:0))}else{let l=J1(e,s,n+i,i<0?s.childCount:0,i,o);if(l)return l}n+=s.nodeSize*i}return null}function lX(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof rl||i instanceof Io))return;let o=e.mapping.maps[r],a;o.forEach((s,l,c,u)=>{a==null&&(a=u)}),e.setSelection(Gn.near(e.doc.resolve(a),n))}var cX=1,yO=2,uX=4,NP=class extends gO{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|cX)&~yO,this.storedMarks=null,this}get selectionSet(){return(this.updated&cX)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=yO,this}ensureMarks(t){return Br.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&yO)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~yO,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Br.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(n);o=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,o)),this.selection.empty||this.setSelection(Gn.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=uX,this}get scrolledIntoView(){return(this.updated&uX)>0}};function fX(e,t){return!t||!e?e:e.bind(t)}var im=class{constructor(t,n,r){this.name=t,this.init=fX(n.init,r),this.apply=fX(n.apply,r)}},Rbe=[new im("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new im("selection",{init(e,t){return e.selection||Gn.atStart(t.doc)},apply(e){return e.selection}}),new im("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new im("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})],Xy=class{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Rbe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new im(r.key,r.spec.state,r))})}},bO=class e{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let s=this.config.plugins[a];if(s.spec.appendTransaction){let l=i?i[a].n:0,c=i?i[a].state:this,u=l<n.length&&s.spec.appendTransaction.call(s,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,a)){if(u.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[a]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new e(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new NP(this)}static create(t){let n=new Xy(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Xy(this.schema,t.plugins),r=n.fields,i=new e(n);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Xy(t.schema,t.plugins),o=new e(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=yu.fromJSON(t.schema,n.doc);else if(a.name=="selection")o.selection=Gn.fromJSON(o.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let s in r){let l=r[s],c=l.spec.state;if(l.key==a.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,s)){o[a.name]=c.fromJSON.call(l,t,n[s],o);return}}o[a.name]=a.init(t,o)}}),o}};function pX(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=pX(i,t,{})),n[r]=i}return n}var Sf=class{constructor(t){this.spec=t,this.props={},t.props&&pX(t.props,this,this.props),this.key=t.key?t.key.key:dX("plugin")}getState(t){return t[this.key]}},TP=Object.create(null);function dX(e){return e in TP?e+"$"+ ++TP[e]:(TP[e]=0,e+"$")}var eg=class{constructor(t="key"){this.key=dX(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};var Zo=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Qy=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t},RP=null,Of=function(e,t,n){let r=RP||(RP=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Fbe=function(){RP=null},fm=function(e,t,n,r){return n&&(hX(e,t,n,r,-1)||hX(e,t,n,r,1))},Bbe=/^(img|br|input|textarea|hr)$/i;function hX(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Xl(e))){let o=e.parentNode;if(!o||o.nodeType!=1||rx(e)||Bbe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Zo(e)+(i<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(i<0?-1:0)],e.contentEditable=="false")return!1;t=i<0?Xl(e):0}else return!1}}function Xl(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function jbe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Xl(e)}else if(e.parentNode&&!rx(e))t=Zo(e),e=e.parentNode;else return null}}function Vbe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!rx(e))t=Zo(e)+1,e=e.parentNode;else return null}}function Hbe(e,t,n){for(let r=t==0,i=t==Xl(e);r||i;){if(e==n)return!0;let o=Zo(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,i=i&&o==Xl(e)}}function rx(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var PO=function(e){return e.focusNode&&fm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function om(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Wbe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function qbe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Xl(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Xl(r.startContainer),r.startOffset)}}}var xu=typeof navigator<"u"?navigator:null,mX=typeof document<"u"?document:null,od=xu&&xu.userAgent||"",FP=/Edge\/(\d+)/.exec(od),$X=/MSIE \d/.exec(od),BP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(od),Os=!!($X||BP||FP),rd=$X?document.documentMode:BP?+BP[1]:FP?+FP[1]:0,kc=!Os&&/gecko\/(\d+)/i.test(od);kc&&+(/Firefox\/(\d+)/.exec(od)||[0,0])[1];var jP=!Os&&/Chrome\/(\d+)/.exec(od),ya=!!jP,YX=jP?+jP[1]:0,Ha=!Os&&!!xu&&/Apple Computer/.test(xu.vendor),og=Ha&&(/Mobile\/\w+/.test(od)||!!xu&&xu.maxTouchPoints>2),Yl=og||(xu?/Mac/.test(xu.platform):!1),Ube=xu?/Win/.test(xu.platform):!1,Mc=/Android \d/.test(od),ix=!!mX&&"webkitFontSmoothing"in mX.documentElement.style,Gbe=ix?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function $be(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Cf(e,t){return typeof e=="number"?e:e[t]}function Ybe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function gX(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let a=n||e.dom;a;a=Qy(a)){if(a.nodeType!=1)continue;let s=a,l=s==o.body,c=l?$be(o):Ybe(s),u=0,f=0;if(t.top<c.top+Cf(r,"top")?f=-(c.top-t.top+Cf(i,"top")):t.bottom>c.bottom-Cf(r,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+Cf(i,"top")-c.top:t.bottom-c.bottom+Cf(i,"bottom")),t.left<c.left+Cf(r,"left")?u=-(c.left-t.left+Cf(i,"left")):t.right>c.right-Cf(r,"right")&&(u=t.right-c.right+Cf(i,"right")),u||f)if(l)o.defaultView.scrollBy(u,f);else{let p=s.scrollLeft,d=s.scrollTop;f&&(s.scrollTop+=f),u&&(s.scrollLeft+=u);let h=s.scrollLeft-p,m=s.scrollTop-d;t={left:t.left-h,top:t.top-m,right:t.right-h,bottom:t.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function Xbe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let o=(t.left+t.right)/2,a=n+1;a<Math.min(innerHeight,t.bottom);a+=5){let s=e.root.elementFromPoint(o,a);if(!s||s==e.dom||!e.dom.contains(s))continue;let l=s.getBoundingClientRect();if(l.top>=n-20){r=s,i=l.top;break}}return{refDOM:r,refTop:i,stack:XX(e.dom)}}function XX(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Qy(r));return t}function Kbe({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;KX(n,r==0?0:r-t)}function KX(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}var tg=null;function Zbe(e){if(e.setActive)return e.setActive();if(tg)return e.focus(tg);let t=XX(e);e.focus(tg==null?{get preventScroll(){return tg={preventScroll:!0},!0}}:void 0),tg||(tg=!1,KX(t,0))}function ZX(e,t){let n,r=2e8,i,o=0,a=t.top,s=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=Of(u).getClientRects();else continue;for(let d=0;d<p.length;d++){let h=p[d];if(h.top<=a&&h.bottom>=s){a=Math.max(h.bottom,a),s=Math.min(h.top,s);let m=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:h.right<t.left?h.right:h.left,top:t.top}:t,u.nodeType==1&&m&&(o=f+(t.left>=(h.left+h.right)/2?1:0));continue}}else h.top>t.top&&!l&&h.left<=t.left&&h.right>=t.left&&(l=u,c={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(o=f+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Jbe(n,i):!n||r&&n.nodeType==1?{node:e,offset:o}:ZX(n,i)}function Jbe(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let o=ed(r,1);if(o.top!=o.bottom&&nN(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function nN(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Qbe(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function e5e(e,t,n){let{node:r,offset:i}=ZX(t,n),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}function t5e(e,t,n,r){let i=-1;for(let o=t,a=!1;o!=e.dom;){let s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.dom.nodeType==1&&(s.node.isBlock&&s.parent||!s.contentDOM)){let l=s.dom.getBoundingClientRect();if(s.node.isBlock&&s.parent&&(!a&&l.left>r.left||l.top>r.top?i=s.posBefore:(!a&&l.right<r.left||l.bottom<r.top)&&(i=s.posAfter),a=!0),!s.contentDOM&&i<0&&!s.node.isText)return(s.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?s.posBefore:s.posAfter}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function JX(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let a=e.childNodes[o];if(a.nodeType==1){let s=a.getClientRects();for(let l=0;l<s.length;l++){let c=s[l];if(nN(t,c))return JX(a,t,c)}}if((o=(o+1)%r)==i)break}return e}function n5e(e,t){let n=e.dom.ownerDocument,r,i=0,o=qbe(n,t.left,t.top);o&&({node:r,offset:i}=o);let a=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),s;if(!a||!e.dom.contains(a.nodeType!=1?a.parentNode:a)){let c=e.dom.getBoundingClientRect();if(!nN(t,c)||(a=JX(e.dom,t,c),!a))return null}if(Ha)for(let c=a;r&&c;c=Qy(c))c.draggable&&(r=void 0);if(a=Qbe(a,t),r){if(kc&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let c;ix&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=t5e(e,r,i,t))}s==null&&(s=e5e(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function vX(e){return e.top<e.bottom||e.left<e.right}function ed(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(vX(r))return r}return Array.prototype.find.call(n,vX)||e.getBoundingClientRect()}var r5e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function QX(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),a=ix||kc;if(r.nodeType==3)if(a&&(r5e.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=ed(Of(r,i,i),n);if(kc&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ed(Of(r,i-1,i-1),-1);if(c.top==l.top){let u=ed(Of(r,i,i+1),-1);if(u.top!=l.top)return Ky(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ky(ed(Of(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Xl(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return LP(l.getBoundingClientRect(),!1)}if(o==null&&i<Xl(r)){let l=r.childNodes[i];if(l.nodeType==1)return LP(l.getBoundingClientRect(),!0)}return LP(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Xl(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Of(l,Xl(l)-(a?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ky(ed(c,1),!1)}if(o==null&&i<Xl(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Of(l,0,a?0:1):l.nodeType==1?l:null:null;if(c)return Ky(ed(c,-1),!0)}return Ky(ed(r.nodeType==3?Of(r):r,-n),n>=0)}function Ky(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function LP(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function eK(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function i5e(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return eK(e,t,()=>{let{node:o}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let s=e.docView.nearestDesc(o,!0);if(!s)break;if(s.node.isBlock){o=s.contentDOM||s.dom;break}o=s.dom.parentNode}let a=QX(e,i.pos,1);for(let s=o.firstChild;s;s=s.nextSibling){let l;if(s.nodeType==1)l=s.getClientRects();else if(s.nodeType==3)l=Of(s,0,s.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?a.top-u.top>(u.bottom-a.top)*2:u.bottom-a.bottom>(a.bottom-u.top)*2))return!1}}return!0})}var o5e=/[\u0590-\u08ac]/;function a5e(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=e.domSelection();return s?!o5e.test(r.parent.textContent)||!s.modify?n=="left"||n=="backward"?o:a:eK(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),p=s.caretBidiLevel;s.modify("move",n,"character");let d=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:h,focusOffset:m}=e.domSelectionRange(),g=h&&!d.contains(h.nodeType==1?h:h.parentNode)||l==h&&c==m;try{s.collapse(u,f),l&&(l!=u||c!=f)&&s.extend&&s.extend(l,c)}catch{}return p!=null&&(s.caretBidiLevel=p),g}):r.pos==r.start()||r.pos==r.end()}var yX=null,xX=null,bX=!1;function s5e(e,t,n){return yX==t&&xX==n?bX:(yX=t,xX=n,bX=n=="up"||n=="down"?i5e(e,t,n):a5e(e,t,n))}var Kl=0,_X=1,am=2,bu=3,pm=class{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Kl,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,a;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Zo(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!n||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))r=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<o)return i.descAt(t-r-i.border);r=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],s=o+a.size;if(s>t||a instanceof SO){i=t-o;break}o=s}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof _O&&o.side>=0;r--);if(n<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&n&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Zo(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Zo(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,s=0;;s++){let l=this.children[s],c=a+l.size;if(i==-1&&t<=c){let u=a+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=a;for(let f=s;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Zo(p.dom)+1;break}t-=p.size}i==-1&&(i=0)}if(i>-1&&(c>n||s==this.children.length-1)){n=c;for(let u=s+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Zo(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=c}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let o=Math.min(t,n),a=Math.max(t,n);for(let p=0,d=0;p<this.children.length;p++){let h=this.children[p],m=d+h.size;if(o>d&&a<m)return h.setSelection(t-d-h.border,n-d-h.border,r,i);d=m}let s=this.domFromPos(t,t?-1:1),l=n==t?s:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((kc||Ha)&&t==n){let{node:p,offset:d}=s;if(p.nodeType==3){if(u=!!(d&&p.nodeValue[d-1]==`
`),u&&d==p.nodeValue.length)for(let h=p,m;h;h=h.parentNode){if(m=h.nextSibling){m.nodeName=="BR"&&(s=l={node:m.parentNode,offset:Zo(m)+1});break}let g=h.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let h=p.childNodes[d-1];u=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(kc&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let p=c.focusNode.childNodes[c.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||u&&Ha)&&fm(s.node,s.offset,c.anchorNode,c.anchorOffset)&&fm(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((c.extend||t==n)&&!u){c.collapse(s.node,s.offset);try{t!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(t>n){let d=s;s=l,l=d}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(s.node,s.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?t<=a&&n>=r:t<a&&n>r){let s=r+o.border,l=a-o.border;if(t>=s&&n<=l){this.dirty=t==r||n==a?am:_X,t==s&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=bu:o.markDirty(t-s,n-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?am:bu}r=a}this.dirty=am}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?am:_X;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}},_O=class extends pm{constructor(t,n,r,i){let o,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(a.nodeType!=1){let s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==Kl&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},VP=class extends pm{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}},ag=class e extends pm{constructor(t,n,r,i){super(t,[],r,i),this.mark=n}static create(t,n,r,i){let o=i.nodeViews[n.type.name],a=o&&o(n,i,r);return(!a||!a.dom)&&(a=Jp.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new e(t,n,a.dom,a.contentDOM||a.dom)}parseRule(){return this.dirty&bu||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=bu&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Kl){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Kl}}slice(t,n,r){let i=e.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;n<a&&(o=GP(o,n,a,r)),t>0&&(o=GP(o,0,t,r));for(let s=0;s<o.length;s++)o[s].parent=i;return i.children=o,i}},id=class e extends pm{constructor(t,n,r,i,o,a,s,l,c){super(t,[],o,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=s}static create(t,n,r,i,o,a){let s=o.nodeViews[n.type.name],l,c=s&&s(n,o,()=>{if(!l)return a;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Jp.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let p=u;return u=rK(u,r,n),c?l=new HP(t,n,r,i,u,f||null,p,c,o,a+1):n.isText?new wO(t,n,r,i,u,p,o):new e(t,n,r,i,u,f||null,p,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>_t.empty)}return t}matchesNode(t,n,r){return this.dirty==Kl&&t.eq(this.node)&&qP(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,o=t.composing?this.localCompositionInfo(t,n):null,a=o&&o.pos>-1?o:null,s=o&&o.pos<0,l=new UP(this,a&&a.node,t);f5e(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?Br.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,i)},(c,u,f,p)=>{l.syncToMarks(c.marks,r,t);let d;l.findNodeMatch(c,u,f,p)||s&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(d=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,f,d,t)||l.updateNextNode(c,u,f,t,p,i)||l.addNode(c,u,f,t,i),i+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==am)&&(a&&this.protectLocalComposition(t,a),tK(this.contentDOM,this.children,t),og&&p5e(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ir)||r<n||i>n+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,s=d5e(this.node.content,a,r-n,i-n);return s<0?null:{node:o,pos:s,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new VP(this,o,n,i);t.input.compositionNodes.push(a),this.children=GP(this.children,r,r+i.length,t,a)}update(t,n,r,i){return this.dirty==bu||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Kl}updateOuterDeco(t){if(qP(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=nK(this.dom,this.nodeDOM,WP(this.outerDeco,this.node,n),WP(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function wX(e,t,n,r,i){rK(r,t,e);let o=new id(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}var wO=class e extends id{constructor(t,n,r,i,o,a,s){super(t,n,r,i,o,null,a,s,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==bu||this.dirty!=Kl&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Kl||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Kl,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),o=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=bu)}get domAtom(){return!1}isText(t){return this.node.text==t}},SO=class extends pm{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Kl&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},HP=class extends id{constructor(t,n,r,i,o,a,s,l,c,u){super(t,n,r,i,o,a,s,c,u),this.spec=l}update(t,n,r,i){if(this.dirty==bu)return!1;if(this.spec.update){let o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}};function tK(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let a=t[o],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=SX(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(s,r);if(a instanceof ag){let l=r?r.previousSibling:e.lastChild;tK(a.contentDOM,a.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=SX(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}var Zy=function(e){e&&(this.nodeName=e)};Zy.prototype=Object.create(null);var sm=[new Zy];function WP(e,t,n){if(e.length==0)return sm;let r=n?sm[0]:new Zy,i=[r];for(let o=0;o<e.length;o++){let a=e[o].type.attrs;if(a){a.nodeName&&i.push(r=new Zy(a.nodeName));for(let s in a){let l=a[s];l!=null&&(n&&i.length==1&&i.push(r=new Zy(t.isInline?"span":"div")),s=="class"?r.class=(r.class?r.class+" ":"")+l:s=="style"?r.style=(r.style?r.style+";":"")+l:s!="nodeName"&&(r[s]=l))}}}return i}function nK(e,t,n,r){if(n==sm&&r==sm)return t;let i=t;for(let o=0;o<r.length;o++){let a=r[o],s=n[o];if(o){let l;s&&s.nodeName==a.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName),l.pmIsDeco=!0,l.appendChild(i),s=sm[0]),i=l}l5e(i,s||sm[0],a)}return i}function l5e(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&e.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&e.classList.add(i[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function rK(e,t,n){return nK(e,e,sm,WP(t,n,e.nodeType!=1))}function qP(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function SX(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}var UP=class{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=c5e(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Kl,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let s=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[o])&&!this.isLocked(c.dom)){s=l;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{let l=ag.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,r))o=this.top.children.indexOf(a,this.index);else for(let s=this.index,l=Math.min(this.top.children.length,s+5);s<l;s++){let c=this.top.children[s];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,r,i,o){let a=this.top.children[i];return a.dirty==bu&&a.dom==a.contentDOM&&(a.dirty=am),a.update(t,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,o,a){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof id){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,f,p=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=bu&&qP(n,l.outerDeco));if(!p&&l.update(t,n,r,i))return this.destroyBetween(this.index,s),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,t,n,r,i,a)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=am,f.updateChildren(i,a+1),f.dirty=Kl),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,o,a){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content))return null;let s=id.create(this.top,n,r,i,o,a);if(s.contentDOM){s.children=t.children,t.children=[];for(let l of s.children)l.parent=s}return t.destroy(),s}addNode(t,n,r,i,o){let a=id.create(this.top,t,n,r,i,o);a.contentDOM&&a.updateChildren(i,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new _O(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof ag;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof wO)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ha||ya)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new SO(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}};function c5e(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,a=[];e:for(;i>0;){let s;for(;;)if(r){let c=n.children[r-1];if(c instanceof ag)n=c,r=c.children.length;else{s=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=s.node;if(l){if(l!=e.child(i-1))break;--i,o.set(s,i),a.push(s)}}return{index:i,matched:o,matches:a.reverse()}}function u5e(e,t){return e.type.side-t.type.side}function f5e(e,t,n,r){let i=t.locals(e),o=0;if(i.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,i,t.forChild(o,u),c),o+=u.nodeSize}return}let a=0,s=[],l=null;for(let c=0;;){let u,f;for(;a<i.length&&i[a].to==o;){let g=i[a++];g.widget&&(u?(f||(f=[u])).push(g):u=g)}if(u)if(f){f.sort(u5e);for(let g=0;g<f.length;g++)n(f[g],c,!!l)}else n(u,c,!!l);let p,d;if(l)d=-1,p=l,l=null;else if(c<e.childCount)d=c,p=e.child(c++);else break;for(let g=0;g<s.length;g++)s[g].to<=o&&s.splice(g--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);let h=o+p.nodeSize;if(p.isText){let g=h;a<i.length&&i[a].from<g&&(g=i[a].from);for(let v=0;v<s.length;v++)s[v].to<g&&(g=s[v].to);g<h&&(l=p.cut(g-o),p=p.cut(0,g-o),h=g,d=-1)}else for(;a<i.length&&i[a].to<h;)a++;let m=p.isInline&&!p.isLeaf?s.filter(g=>!g.inline):s.slice();r(p,m,t.forChild(o,p),d),o=h}}function p5e(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function d5e(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let a=e.child(i++),s=o;if(o+=a.nodeSize,!a.isText)continue;let l=a.text;for(;i<e.childCount;){let c=e.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-t.length-s,r-s)==t)return r-t.length;let c=s<r?l.lastIndexOf(t,r-s-1):-1;if(c>=0&&c+t.length+s>=n)return s+c;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}return-1}function GP(e,t,n,r,i){let o=[];for(let a=0,s=0;a<e.length;a++){let l=e[a],c=s,u=s+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function rN(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&i.size==0,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let s=r.resolve(a),l,c;if(PO(n)){for(l=s;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&Nn.isSelectable(u)&&i.parent&&!(u.isInline&&Hbe(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new Nn(a==f?s:r.resolve(f))}}else{let u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=t=="pointer"||e.state.selection.head<s.pos&&!o?1:-1;c=iN(e,l,s,u)}return c}function iK(e){return e.editable?e.hasFocus():aK(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Mf(e,t=!1){let n=e.state.selection;if(oK(e,n),!!iK(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&ya){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&fm(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)m5e(e);else{let{anchor:r,head:i}=n,o,a;CX&&!(n instanceof Ir)&&(n.$from.parent.inlineContent||(o=OX(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=OX(e,n.to))),e.docView.setSelection(r,i,e.root,t),CX&&(o&&MX(o),a&&MX(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&h5e(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var CX=Ha||ya&&YX<63;function OX(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Ha&&i&&i.contentEditable=="false")return IP(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return IP(i);if(o)return IP(o)}}function IP(e){return e.contentEditable="true",Ha&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function MX(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function h5e(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!iK(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function m5e(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Zo(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&Os&&rd<=11&&(r.disabled=!0,r.disabled=!1)}function oK(e,t){if(t instanceof Nn){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(kX(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else kX(e)}function kX(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function iN(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ir.between(t,n,r)}function EX(e){return e.editable&&!e.hasFocus()?!1:aK(e)}function aK(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function g5e(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return fm(t.node,t.offset,n.anchorNode,n.anchorOffset)}function $P(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&Gn.findFrom(o,t)}function td(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function AX(e,t,n){let r=e.state.selection;if(r instanceof Ir)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=e.state.doc.resolve(i.pos+o.nodeSize*(t<0?-1:1));return td(e,new Ir(r.$anchor,a))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=$P(e.state,t);return i&&i instanceof Nn?td(e,i):!1}else if(!(Yl&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let s=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=e.docView.descAt(s))&&!a.contentDOM?Nn.isSelectable(o)?td(e,new Nn(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):ix?td(e,new Ir(e.state.doc.resolve(t<0?s:s+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Nn&&r.node.isInline)return td(e,new Ir(t>0?r.$to:r.$from));{let i=$P(e.state,t);return i?td(e,i):!1}}}function CO(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Jy(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function ng(e,t){return t<0?v5e(e):y5e(e)}function v5e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,a=!1;for(kc&&n.nodeType==1&&r<CO(n)&&Jy(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let s=n.childNodes[r-1];if(Jy(s,-1))i=n,o=--r;else if(s.nodeType==3)n=s,r=n.nodeValue.length;else break}}else{if(sK(n))break;{let s=n.previousSibling;for(;s&&Jy(s,-1);)i=n.parentNode,o=Zo(s),s=s.previousSibling;if(s)n=s,r=CO(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?YP(e,n,r):i&&YP(e,i,o)}function y5e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=CO(n),o,a;for(;;)if(r<i){if(n.nodeType!=1)break;let s=n.childNodes[r];if(Jy(s,1))o=n,a=++r;else break}else{if(sK(n))break;{let s=n.nextSibling;for(;s&&Jy(s,1);)o=s.parentNode,a=Zo(s)+1,s=s.nextSibling;if(s)n=s,r=0,i=CO(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}o&&YP(e,o,a)}function sK(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function x5e(e,t){for(;e&&t==e.childNodes.length&&!rx(e);)t=Zo(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function b5e(e,t){for(;e&&!t&&!rx(e);)t=Zo(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function YP(e,t,n){if(t.nodeType!=3){let o,a;(a=x5e(t,n))?(t=a,n=0):(o=b5e(t,n))&&(t=o,n=o.nodeValue.length)}let r=e.domSelection();if(!r)return;if(PO(r)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Mf(e)},50)}function TX(e,t){let n=e.state.doc.resolve(t);if(!(ya||Ube)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(t<n.end()){let o=e.coordsAtPos(t+1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function PX(e,t,n){let r=e.state.selection;if(r instanceof Ir&&!r.empty||n.indexOf("s")>-1||Yl&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let a=$P(e.state,t);if(a&&a instanceof Nn)return td(e,a)}if(!i.parent.inlineContent){let a=t<0?i:o,s=r instanceof il?Gn.near(a,t):Gn.findFrom(a,t);return s?td(e,s):!1}return!1}function NX(e,t){if(!(e.state.selection instanceof Ir))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let a=e.state.tr;return t<0?a.delete(n.pos-o.nodeSize,n.pos):a.delete(n.pos,n.pos+o.nodeSize),e.dispatch(a),!0}return!1}function LX(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function _5e(e){if(!Ha||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;LX(e,r,"true"),setTimeout(()=>LX(e,r,"false"),20)}return!1}function w5e(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function S5e(e,t){let n=t.keyCode,r=w5e(t);if(n==8||Yl&&n==72&&r=="c")return NX(e,-1)||ng(e,-1);if(n==46&&!t.shiftKey||Yl&&n==68&&r=="c")return NX(e,1)||ng(e,1);if(n==13||n==27)return!0;if(n==37||Yl&&n==66&&r=="c"){let i=n==37?TX(e,e.state.selection.from)=="ltr"?-1:1:-1;return AX(e,i,r)||ng(e,i)}else if(n==39||Yl&&n==70&&r=="c"){let i=n==39?TX(e,e.state.selection.from)=="ltr"?1:-1:1;return AX(e,i,r)||ng(e,i)}else{if(n==38||Yl&&n==80&&r=="c")return PX(e,-1,r)||ng(e,-1);if(n==40||Yl&&n==78&&r=="c")return _5e(e)||PX(e,1,r)||ng(e,1);if(r==(Yl?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function lK(e,t){e.someProp("transformCopied",d=>{t=d(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let d=r.firstChild;n.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),r=d.content}let a=e.someProp("clipboardSerializer")||Jp.fromSchema(e.state.schema),s=hK(),l=s.createElement("div");l.appendChild(a.serializeFragment(r,{document:s}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=dK[c.nodeName.toLowerCase()]);){for(let d=u.length-1;d>=0;d--){let h=s.createElement(u[d]);for(;l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=e.someProp("clipboardTextSerializer",d=>d(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function cK(e,t,n,r,i){let o=i.parent.type.spec.code,a,s;if(!n&&!t)return null;let l=t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,o||r,e)}),o)return t?new jt(_t.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):jt.empty;let f=e.someProp("clipboardTextParser",p=>p(t,i,r,e));if(f)s=f;else{let p=i.marks(),{schema:d}=e.state,h=Jp.fromSchema(d);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=a.appendChild(document.createElement("p"));m&&g.appendChild(h.serializeNode(d.text(m,p)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),a=k5e(n),ix&&E5e(a);let c=a&&a.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let p=a.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;a=p}if(s||(s=(e.someProp("clipboardParser")||e.someProp("domParser")||Zp.fromSchema(e.state.schema)).parseSlice(a,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!C5e.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)s=A5e(IX(s,+u[1],+u[2]),u[4]);else if(s=jt.maxOpen(O5e(s.content,i),!0),s.openStart||s.openEnd){let f=0,p=0;for(let d=s.content.firstChild;f<s.openStart&&!d.type.spec.isolating;f++,d=d.firstChild);for(let d=s.content.lastChild;p<s.openEnd&&!d.type.spec.isolating;p++,d=d.lastChild);s=IX(s,f,p)}return e.someProp("transformPasted",f=>{s=f(s,e)}),s}var C5e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function O5e(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),o,a=[];if(e.forEach(s=>{if(!a)return;let l=i.findWrapping(s.type),c;if(!l)return a=null;if(c=a.length&&o.length&&fK(l,o,s,a[a.length-1],0))a[a.length-1]=c;else{a.length&&(a[a.length-1]=pK(a[a.length-1],o.length));let u=uK(s,l);a.push(u),i=i.matchType(u.type),o=l}}),a)return _t.from(a)}return e}function uK(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,_t.from(e));return e}function fK(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=fK(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(_t.from(uK(n,e,i+1))))}}function pK(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,pK(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(_t.empty,!0);return e.copy(n.append(r))}function XP(e,t,n,r,i,o){let a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(o=0),i<r-1&&(s=XP(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(_t.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function IX(e,t,n){return t<e.openStart&&(e=new jt(XP(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new jt(XP(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var dK={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},DX=null;function hK(){return DX||(DX=document.implementation.createHTMLDocument("title"))}function M5e(e){let t=window.trustedTypes;return t?t.createPolicy("detachedDocument",{createHTML:n=>n}).createHTML(e):e}function k5e(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=hK().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&dK[r[1].toLowerCase()])&&(e=i.map(o=>"<"+o+">").join("")+e+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=M5e(e),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function E5e(e){let t=e.querySelectorAll(ya?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function A5e(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:o,openEnd:a}=e;for(let s=r.length-2;s>=0;s-=2){let l=n.nodes[r[s]];if(!l||l.hasRequiredAttrs())break;i=_t.from(l.create(r[s+1],i)),o++,a++}return new jt(i,o,a)}var Wa={},qa={},T5e={touchstart:!0,touchmove:!0},KP=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function P5e(e){for(let t in Wa){let n=Wa[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{L5e(e,r)&&!oN(e,r)&&(e.editable||!(r.type in qa))&&n(e,r)},T5e[t]?{passive:!0}:void 0)}Ha&&e.dom.addEventListener("input",()=>null),ZP(e)}function nd(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function N5e(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ZP(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>oN(e,r))})}function oN(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function L5e(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function I5e(e,t){!oN(e,t)&&Wa[t.type]&&(e.editable||!(t.type in qa))&&Wa[t.type](e,t)}qa.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!gK(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Mc&&ya&&n.keyCode==13)))if(e.domObserver.selectionChanged(e.domSelectionRange())?e.domObserver.flush():n.keyCode!=229&&e.domObserver.forceFlush(),og&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,om(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||S5e(e,n)?n.preventDefault():nd(e,"key")};qa.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};qa.keypress=(e,t)=>{let n=t;if(gK(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Yl&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ir)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i))&&e.dispatch(e.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function NO(e){return{left:e.clientX,top:e.clientY}}function D5e(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function aN(e,t,n,r,i){if(r==-1)return!1;let o=e.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(e.someProp(t,s=>a>o.depth?s(e,n,o.nodeAfter,o.before(a),i,!0):s(e,n,o.node(a),o.before(a),i,!1)))return!0;return!1}function ig(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function z5e(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Nn.isSelectable(r)?(ig(e,new Nn(n),"pointer"),!0):!1}function R5e(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Nn&&(r=n.node);let o=e.state.doc.resolve(t);for(let a=o.depth+1;a>0;a--){let s=a>o.depth?o.nodeAfter:o.node(a);if(Nn.isSelectable(s)){r&&n.$from.depth>0&&a>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(a);break}}return i!=null?(ig(e,Nn.create(e.state.doc,i),"pointer"),!0):!1}function F5e(e,t,n,r,i){return aN(e,"handleClickOn",t,n,r)||e.someProp("handleClick",o=>o(e,t,r))||(i?R5e(e,n):z5e(e,n))}function B5e(e,t,n,r){return aN(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function j5e(e,t,n,r){return aN(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||V5e(e,n,r)}function V5e(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(ig(e,Ir.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),s=i.before(o);if(a.inlineContent)ig(e,Ir.create(r,s+1,s+1+a.content.size),"pointer");else if(Nn.isSelectable(a))ig(e,Nn.create(r,s),"pointer");else continue;return!0}}function sN(e){return OO(e)}var mK=Yl?"metaKey":"ctrlKey";Wa.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=sN(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&D5e(n,e.input.lastClick)&&!n[mK]&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let a=e.posAtCoords(NO(n));a&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new JP(e,a,n,!!r)):(o=="doubleClick"?B5e:j5e)(e,a.pos,a.inside,n)?n.preventDefault():nd(e,"pointer"))};var JP=class{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[mK],this.allowDefault=r.shiftKey;let o,a;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),a=n.inside;else{let u=t.state.doc.resolve(n.pos);o=u.parent,a=u.depth?u.before():0}let s=i?null:r.target,l=s?t.docView.nearestDesc(s,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Nn&&c.from<=a&&c.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&kc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),nd(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Mf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(NO(t))),this.updateAllowDefault(t),this.allowDefault||!n?nd(this.view,"pointer"):F5e(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ha&&this.mightDrag&&!this.mightDrag.node.isAtom||ya&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ig(this.view,Gn.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):nd(this.view,"pointer")}move(t){this.updateAllowDefault(t),nd(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}};Wa.touchstart=e=>{e.input.lastTouch=Date.now(),sN(e),nd(e,"pointer")};Wa.touchmove=e=>{e.input.lastTouch=Date.now(),nd(e,"pointer")};Wa.contextmenu=e=>sN(e);function gK(e,t){return e.composing?!0:Ha&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}var H5e=Mc?5e3:-1;qa.compositionstart=qa.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ir&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),OO(e,!0),e.markCursor=null;else if(OO(e,!t.selection.empty),kc&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){let s=e.domSelection();s&&s.collapse(a,a.nodeValue.length);break}else i=a,o=-1}}e.input.composing=!0}vK(e,H5e)};qa.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,vK(e,20))};function vK(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>OO(e),t))}function yK(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=q5e());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function W5e(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=jbe(t.focusNode,t.focusOffset),r=Vbe(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function q5e(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function OO(e,t=!1){if(!(Mc&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),yK(e),t||e.docView&&e.docView.dirty){let n=rN(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function U5e(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}var ex=Os&&rd<15||og&&Gbe<604;Wa.copy=qa.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let o=ex?null:n.clipboardData,a=r.content(),{dom:s,text:l}=lK(e,a);o?(n.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",l)):U5e(e,s),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function G5e(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function $5e(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?tx(e,r.value,null,i,t):tx(e,r.textContent,r.innerHTML,i,t)},50)}function tx(e,t,n,r,i){let o=cK(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,o||jt.empty)))return!0;if(!o)return!1;let a=G5e(o),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xK(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}qa.paste=(e,t)=>{let n=t;if(e.composing&&!Mc)return;let r=ex?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&tx(e,xK(r),r.getData("text/html"),i,n)?n.preventDefault():$5e(e,n)};var MO=class{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}},bK=Yl?"altKey":"ctrlKey";Wa.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(NO(n)),a;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Nn?i.to-1:i.to))){if(r&&r.mightDrag)a=Nn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(a=Nn.create(e.state.doc,f.posBefore))}}let s=(a||e.state.selection).content(),{dom:l,text:c,slice:u}=lK(e,s);(!n.dataTransfer.files.length||!ya||YX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ex?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",ex||n.dataTransfer.setData("text/plain",c),e.dragging=new MO(u,!n[bK],a)};Wa.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};qa.dragover=qa.dragenter=(e,t)=>t.preventDefault();qa.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(NO(n));if(!i)return;let o=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",h=>{a=h(a,e)}):a=cK(e,xK(n.dataTransfer),ex?null:n.dataTransfer.getData("text/html"),!1,o);let s=!!(r&&!n[bK]);if(e.someProp("handleDrop",h=>h(e,n,a||jt.empty,s))){n.preventDefault();return}if(!a)return;n.preventDefault();let l=a?tX(e.state.doc,o.pos,a):o.pos;l==null&&(l=o.pos);let c=e.state.tr;if(s){let{node:h}=r;h?h.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,p=c.doc;if(f?c.replaceRangeWith(u,u,a.content.firstChild):c.replaceRange(u,u,a),c.doc.eq(p))return;let d=c.doc.resolve(u);if(f&&Nn.isSelectable(a.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new Nn(d));else{let h=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,v,y)=>h=y),c.setSelection(iN(e,d,c.doc.resolve(h)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};Wa.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Mf(e)},20))};Wa.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Wa.beforeinput=(e,t)=>{if(ya&&Mc&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,om(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in qa)Wa[e]=qa[e];function nx(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}var kO=class e{constructor(t,n){this.toDOM=t,this.spec=n||cm,this.side=this.spec.side||0}map(t,n,r,i){let{pos:o,deleted:a}=t.mapResult(n.from+i,this.side<0?-1:1);return a?null:new kf(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&nx(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}},lm=class e{constructor(t,n){this.attrs=t,this.spec=n||cm}map(t,n,r,i){let o=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new kf(o,a,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof e&&nx(this.attrs,t.attrs)&&nx(this.spec,t.spec)}static is(t){return t.type instanceof e}destroy(){}},QP=class e{constructor(t,n){this.attrs=t,this.spec=n||cm}map(t,n,r,i){let o=t.mapResult(n.from+i,1);if(o.deleted)return null;let a=t.mapResult(n.to+i,-1);return a.deleted||a.pos<=o.pos?null:new kf(o.pos-r,a.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),o;return i==n.from&&!(o=t.child(r)).isText&&i+o.nodeSize==n.to}eq(t){return this==t||t instanceof e&&nx(this.attrs,t.attrs)&&nx(this.spec,t.spec)}destroy(){}},kf=class e{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new e(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new e(t,t,new kO(n,r))}static inline(t,n,r,i){return new e(t,n,new lm(r,i))}static node(t,n,r,i){return new e(t,n,new QP(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof lm}get widget(){return this.type instanceof kO}},rg=[],cm={},ol=class e{constructor(t,n){this.local=t.length?t:rg,this.children=n.length?n:rg}static create(t,n){return n.length?AO(n,t,0,cm):va}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,o){for(let a=0;a<this.local.length;a++){let s=this.local[a];s.from<=n&&s.to>=t&&(!o||o(s.spec))&&r.push(s.copy(s.from+i,s.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>t){let s=this.children[a]+1;this.children[a+2].findInner(t-s,n-s,r,i+s,o)}}map(t,n,r){return this==va||t.maps.length==0?this:this.mapInner(t,n,0,0,r||cm)}mapInner(t,n,r,i,o){let a;for(let s=0;s<this.local.length;s++){let l=this.local[s].map(t,r,i);l&&l.type.valid(n,l)?(a||(a=[])).push(l):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?Y5e(this.children,a||[],t,n,r,i,o):a?new e(a.sort(um),rg):va}add(t,n){return n.length?this==va?e.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,o=0;t.forEach((s,l)=>{let c=l+r,u;if(u=wK(n,s,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(s,u,c+1):i.splice(o,0,l,l+s.nodeSize,AO(u,s,c+1,cm)),o+=3}});let a=_K(o?SK(n):n,-r);for(let s=0;s<a.length;s++)a[s].type.valid(t,a[s])||a.splice(s--,1);return new e(a.length?this.local.concat(a).sort(um):this.local,i||this.children)}remove(t){return t.length==0||this==va?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,s=r[o]+n,l=r[o+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>s&&f.to<l&&(t[u]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(a,s+1);c!=va?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<t.length;o++)if(a=t[o])for(let s=0;s<i.length;s++)i[s].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(s--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new e(i,r):va}forChild(t,n){if(this==va)return this;if(n.isLeaf)return e.empty;let r,i;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(r=this.children[s+2]);break}let o=t+1,a=o+n.content.size;for(let s=0;s<this.local.length;s++){let l=this.local[s];if(l.from<a&&l.to>o&&l.type instanceof lm){let c=Math.max(o,l.from)-o,u=Math.min(a,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let s=new e(i.sort(um),rg);return r?new EO([s,r]):s}return r||va}eq(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return lN(this.localsInner(t))}localsInner(t){if(this==va)return rg;if(t.inlineContent||!this.local.some(lm.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof lm||n.push(this.local[r]);return n}forEachSet(t){t(this)}};ol.empty=new ol([],[]);ol.removeOverlap=lN;var va=ol.empty,EO=class e{constructor(t){this.members=t}map(t,n){let r=this.members.map(i=>i.map(t,n,cm));return e.from(r)}forChild(t,n){if(n.isLeaf)return ol.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,n);o!=va&&(o instanceof e?r=r.concat(o.members):r.push(o))}return e.from(r)}eq(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let a=0;a<o.length;a++)n.push(o[a])}}return n?lN(r?n:n.sort(um)):rg}static from(t){switch(t.length){case 0:return va;case 1:return t[0];default:return new e(t.every(n=>n instanceof ol)?t:t.reduce((n,r)=>n.concat(r instanceof ol?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}};function Y5e(e,t,n,r,i,o,a){let s=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((p,d,h,m)=>{let g=m-h-(d-p);for(let v=0;v<s.length;v+=3){let y=s[v+1];if(y<0||p>y+u-f)continue;let x=s[v]+u-f;d>=x?s[v+1]=p<=x?-2:-1:p>=u&&g&&(s[v]+=g,s[v+1]+=g)}f+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<s.length;c+=3)if(s[c+1]<0){if(s[c+1]==-2){l=!0,s[c+1]=-1;continue}let u=n.map(e[c]+o),f=u-i;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(e[c+1]+o,-1),d=p-i,{index:h,offset:m}=r.content.findIndex(f),g=r.maybeChild(h);if(g&&m==f&&m+g.nodeSize==d){let v=s[c+2].mapInner(n,g,u+1,e[c]+o+1,a);v!=va?(s[c]=f,s[c+1]=d,s[c+2]=v):(s[c+1]=-2,l=!0)}else l=!0}if(l){let c=X5e(s,e,t,n,i,o,a),u=AO(c,r,0,a);t=u.local;for(let f=0;f<s.length;f+=3)s[f+1]<0&&(s.splice(f,3),f-=3);for(let f=0,p=0;f<u.children.length;f+=3){let d=u.children[f];for(;p<s.length&&s[p]<d;)p+=3;s.splice(p,0,u.children[f],u.children[f+1],u.children[f+2])}}return new ol(t.sort(um),s)}function _K(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new kf(i.from+t,i.to+t,i.type))}return n}function X5e(e,t,n,r,i,o,a){function s(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,i,c);f?n.push(f):a.onRemove&&a.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)s(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&s(e[l+2],t[l]+o+1);return n}function wK(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o=0,a;o<e.length;o++)(a=e[o])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[o]=null);return i}function SK(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function AO(e,t,n,r){let i=[],o=!1;t.forEach((s,l)=>{let c=wK(e,s,l+n);if(c){o=!0;let u=AO(c,s,n+l+1,r);u!=va&&i.push(l,l+s.nodeSize,u)}});let a=_K(o?SK(e):e,-n).sort(um);for(let s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new ol(a,i):va}function um(e,t){return e.from-t.from||e.to-t.to}function lN(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),zX(t,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),zX(t,i,r.copy(o.from,r.to)));break}}}return t}function zX(e,t,n){for(;t<e.length&&um(n,e[t])>0;)t++;e.splice(t,0,n)}function DP(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=va&&t.push(r)}),e.cursorWrapper&&t.push(ol.create(e.state.doc,[e.cursorWrapper.deco])),EO.from(t)}var K5e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Z5e=Os&&rd<=11,eN=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}},tN=class{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new eN,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Os&&rd<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Z5e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,K5e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(EX(this.view)){if(this.suppressingSelectionUpdates)return Mf(this.view);if(Os&&rd<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&fm(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let o=t.focusNode;o;o=Qy(o))n.add(o);for(let o=t.anchorNode;o;o=Qy(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}selectionChanged(t){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&EX(this.view)&&!this.ignoreSelectionChange(t)}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=this.selectionChanged(r),o=-1,a=-1,s=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(o=o<0?f.from:Math.min(f.from,o),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(s=!0))}if(kc&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,p]=u;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of u){let d=p.parentNode;d&&d.nodeName=="LI"&&(!f||e_e(t,f)!=d)&&p.remove()}}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&PO(r)&&(c=rN(t))&&c.eq(Gn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Mf(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,a),J5e(t)),this.handleDOMChange(o,a,s,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Mf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,o=t.nextSibling;if(Os&&rd<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:p}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(o=p)}let a=i&&i.parentNode==t.target?Zo(i)+1:0,s=r.localPosFromDOM(t.target,a,-1),l=o&&o.parentNode==t.target?Zo(o):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:s,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}},RX=new WeakMap,FX=!1;function J5e(e){if(!RX.has(e)&&(RX.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=kc,FX)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),FX=!0}}function BX(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return fm(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function Q5e(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return BX(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?BX(e,n):null}function e_e(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function t_e(e,t,n){let{node:r,fromOffset:i,toOffset:o,from:a,to:s}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],PO(l)||c.push({node:l.focusNode,offset:l.focusOffset})),ya&&e.input.lastKeyCode===8)for(let g=o;g>i;g--){let v=r.childNodes[g-1],y=v.pmViewDesc;if(v.nodeName=="BR"&&!y){o=g;break}if(!y||y.size)break}let f=e.state.doc,p=e.someProp("domParser")||Zp.fromSchema(e.state.schema),d=f.resolve(a),h=null,m=p.parse(r,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:i,to:o,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:n_e,context:d});if(c&&c[0].pos!=null){let g=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=g),h={anchor:g+a,head:v+a}}return{doc:m,sel:h,from:a,to:s}}function n_e(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Ha&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Ha&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var r_e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function i_e(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let E=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,P=rN(e,E);if(P&&!e.state.selection.eq(P)){if(ya&&Mc&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",A=>A(e,om(13,"Enter"))))return;let k=e.state.tr.setSelection(P);E=="pointer"?k.setMeta("pointer",!0):E=="key"&&k.scrollIntoView(),o&&k.setMeta("composition",o),e.dispatch(k)}return}let a=e.state.doc.resolve(t),s=a.sharedDepth(n);t=a.before(s+1),n=e.state.doc.resolve(n).after(s+1);let l=e.state.selection,c=t_e(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),p,d;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,d="end"):(p=e.state.selection.from,d="start"),e.input.lastKeyCode=null;let h=s_e(f.content,c.doc.content,c.from,p,d);if(h&&e.input.domChangeCount++,(og&&e.input.lastIOSEnter>Date.now()-225||Mc)&&i.some(E=>E.nodeType==1&&!r_e.test(E.nodeName))&&(!h||h.endA>=h.endB)&&e.someProp("handleKeyDown",E=>E(e,om(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!h)if(r&&l instanceof Ir&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=jX(e,e.state.doc,c.sel);if(E&&!E.eq(e.state.selection)){let P=e.state.tr.setSelection(E);o&&P.setMeta("composition",o),e.dispatch(P)}}return}e.state.selection.from<e.state.selection.to&&h.start==h.endB&&e.state.selection instanceof Ir&&(h.start>e.state.selection.from&&h.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?h.start=e.state.selection.from:h.endA<e.state.selection.to&&h.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(h.endB+=e.state.selection.to-h.endA,h.endA=e.state.selection.to)),Os&&rd<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>c.from&&c.doc.textBetween(h.start-c.from-1,h.start-c.from+1)==" \xA0"&&(h.start--,h.endA--,h.endB--);let m=c.doc.resolveNoCache(h.start-c.from),g=c.doc.resolveNoCache(h.endB-c.from),v=u.resolve(h.start),y=m.sameParent(g)&&m.parent.inlineContent&&v.end()>=h.endA,x;if((og&&e.input.lastIOSEnter>Date.now()-225&&(!y||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!y&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(x=Gn.findFrom(c.doc.resolve(m.pos+1),1,!0))&&x.head==g.pos)&&e.someProp("handleKeyDown",E=>E(e,om(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>h.start&&a_e(u,h.start,h.endA,m,g)&&e.someProp("handleKeyDown",E=>E(e,om(8,"Backspace")))){Mc&&ya&&e.domObserver.suppressSelectionUpdates();return}ya&&Mc&&h.endB==h.start&&(e.input.lastAndroidDelete=Date.now()),Mc&&!y&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==h.endA&&(h.endB-=2,g=c.doc.resolveNoCache(h.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(E){return E(e,om(13,"Enter"))})},20));let _=h.start,w=h.endA,S,M,O;if(y){if(m.pos==g.pos)Os&&rd<=11&&m.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Mf(e),20)),S=e.state.tr.delete(_,w),M=u.resolve(h.start).marksAcross(u.resolve(h.endA));else if(h.endA==h.endB&&(O=o_e(m.parent.content.cut(m.parentOffset,g.parentOffset),v.parent.content.cut(v.parentOffset,h.endA-v.start()))))S=e.state.tr,O.type=="add"?S.addMark(_,w,O.mark):S.removeMark(_,w,O.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let E=m.parent.textBetween(m.parentOffset,g.parentOffset);if(e.someProp("handleTextInput",P=>P(e,_,w,E)))return;S=e.state.tr.insertText(E,_,w)}}if(S||(S=e.state.tr.replace(_,w,c.doc.slice(h.start-c.from,h.endB-c.from))),c.sel){let E=jX(e,S.doc,c.sel);E&&!(ya&&Mc&&e.composing&&E.empty&&(h.start!=h.endB||e.input.lastAndroidDelete<Date.now()-100)&&(E.head==_||E.head==S.mapping.map(w)-1)||Os&&E.empty&&E.head==_)&&S.setSelection(E)}M&&S.ensureMarks(M),o&&S.setMeta("composition",o),e.dispatch(S.scrollIntoView())}function jX(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:iN(e,t.resolve(n.anchor),t.resolve(n.head))}function o_e(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,a,s,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)s=i[0],a="add",l=u=>u.mark(s.addToSet(u.marks));else if(i.length==0&&o.length==1)s=o[0],a="remove",l=u=>u.mark(s.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(_t.from(c).eq(e))return{mark:s,type:a}}function a_e(e,t,n,r,i){if(n-t<=i.pos-r.pos||zP(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let s=o.nodeAfter;return s!=null&&n==t+s.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=e.resolve(zP(o,!0,!0));return!a.parent.isTextblock||a.pos>n||zP(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function zP(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let o=e.node(r).maybeChild(e.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function s_e(e,t,n,r,i){let o=e.findDiffStart(t,n);if(o==null)return null;let{a,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,o-Math.min(a,s));r-=a+l-o}if(a<o&&e.size<t.size){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&VX(t.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}else if(s<o){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&VX(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}return{start:o,endA:a,endB:s}}function VX(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}var TO=class{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new KP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(GX),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=qX(this),WX(this),this.nodeViews=UX(this),this.docView=wX(this.state.doc,HX(this),DP(this),this.dom,this),this.domObserver=new tN(this,(r,i,o,a)=>i_e(this,r,i,o,a)),this.domObserver.start(),P5e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ZP(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(GX),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,o=!1,a=!1;t.storedMarks&&this.composing&&(yK(this),a=!0),this.state=t;let s=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let d=UX(this);c_e(d,this.nodeViews)&&(this.nodeViews=d,o=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&ZP(this),this.editable=qX(this),WX(this);let l=DP(this),c=HX(this),u=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(i.selection))&&(a=!0);let p=u=="preserve"&&a&&this.dom.style.overflowAnchor==null&&Xbe(this);if(a){this.domObserver.stop();let d=f&&(Os||ya)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&l_e(i.selection,t.selection);if(f){let h=ya?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=W5e(this)),(o||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=wX(t.doc,c,l,this.dom,this)),h&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&g5e(this))?Mf(this,d):(oK(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&Kbe(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Nn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&gX(this,n.getBoundingClientRect(),t)}else gX(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new MO(t.slice,t.move,i<0?void 0:Nn.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let s=this.directPlugins[a].props[t];if(s!=null&&(i=n?n(s):s))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let s=o[a].props[t];if(s!=null&&(i=n?n(s):s))return i}}hasFocus(){if(Os){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Zbe(this.dom),Mf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return n5e(this,t)}coordsAtPos(t,n=1){return QX(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return s5e(this,n||this.state,t)}pasteHTML(t,n){return tx(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return tx(this,t,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(N5e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],DP(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Fbe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return I5e(this,t)}dispatch(t){let n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?Ha&&this.root.nodeType===11&&Wbe(this.dom.ownerDocument)==this.dom&&Q5e(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function HX(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[kf.node(0,e.state.doc.content.size,t)]}function WX(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:kf.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function qX(e){return!e.someProp("editable",t=>t(e.state)===!1)}function l_e(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function UX(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function c_e(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function GX(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var u_e=["ol",0],f_e=["ul",0],p_e=["li",0],CK={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM(e){return e.attrs.order==1?u_e:["ol",{start:e.attrs.order},0]}},OK={parseDOM:[{tag:"ul"}],toDOM(){return f_e}},MK={parseDOM:[{tag:"li"}],toDOM(){return p_e},defining:!0};function kK(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=!1,l=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(e)&&a.startIndex==0){if(i.index(a.depth-1)==0)return!1;let u=n.doc.resolve(a.start-2);l=new Qh(u,u,a.depth),a.endIndex<a.parent.childCount&&(a=new Qh(i,n.doc.resolve(o.end(a.depth)),a.depth)),s=!0}let c=Z1(l,e,t,a);return c?(r&&r(d_e(n.tr,a,c,s,e).scrollIntoView()),!0):!1}}function d_e(e,t,n,r,i){let o=_t.empty;for(let u=n.length-1;u>=0;u--)o=_t.from(n[u].type.create(n[u].attrs,o));e.step(new Io(t.start-(r?2:0),t.end,t.start,t.end,new jt(o,0,0),n.length,!0));let a=0;for(let u=0;u<n.length;u++)n[u].type==i&&(a=u+1);let s=n.length-a,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,p=!0;u<f;u++,p=!1)!p&&Qp(e.doc,l,s)&&(e.split(l,s),l+=2*s),l+=c.child(u).nodeSize;return e}function EK(e,t){return function(n,r){let{$from:i,$to:o,node:a}=n.selection;if(a&&a.isBlock||i.depth<2||!i.sameParent(o))return!1;let s=i.node(-1);if(s.type!=e)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=e||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let f=_t.empty,p=i.index(-1)?1:i.index(-2)?2:3;for(let v=i.depth-p;v>=i.depth-3;v--)f=_t.from(i.node(v).copy(f));let d=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;f=f.append(_t.from(e.createAndFill()));let h=i.before(i.depth-(p-1)),m=n.tr.replace(h,i.after(-d),new jt(f,4-p,0)),g=-1;m.doc.nodesBetween(h,m.doc.content.size,(v,y)=>{if(g>-1)return!1;v.isTextblock&&v.content.size==0&&(g=y+1)}),g>-1&&m.setSelection(Gn.near(m.doc.resolve(g))),r(m.scrollIntoView())}return!0}let l=o.pos==i.end()?s.contentMatchAt(0).defaultType:null,c=n.tr.delete(i.pos,o.pos),u=l?[t?{type:e,attrs:t}:null,{type:l}]:void 0;return Qp(c.doc,i.pos,2,u)?(r&&r(c.split(i.pos,2,u).scrollIntoView()),!0):!1}}function cN(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==e);return o?n?r.node(o.depth-1).type==e?h_e(t,n,e,o):m_e(t,n,o):!0:!1}}function h_e(e,t,n,r){let i=e.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new Io(o-1,a,o,a,new jt(_t.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Qh(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));let s=nm(r);if(s==null)return!1;i.lift(r,s);let l=i.mapping.map(o,-1)-1;return rm(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function m_e(e,t,n){let r=e.tr,i=n.parent;for(let d=n.end,h=n.endIndex-1,m=n.startIndex;h>m;h--)d-=i.child(h).nodeSize,r.delete(d-1,d+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(s?0:1),u+1,a.content.append(l?_t.empty:_t.from(i))))return!1;let f=o.pos,p=f+a.nodeSize;return r.step(new Io(f-(s?1:0),p+(l?1:0),f+1,p-1,new jt((s?_t.empty:_t.from(i.copy(_t.empty))).append(l?_t.empty:_t.from(i.copy(_t.empty))),s?0:1,l?0:1),s?0:1)),t(r.scrollIntoView()),!0}function uN(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let s=o.parent,l=s.child(a-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==s.type,u=_t.from(c?e.create():null),f=new jt(_t.from(e.create(null,_t.from(s.type.create(null,u)))),c?3:1,0),p=o.start,d=o.end;n(t.tr.step(new Io(p-(c?3:1),d,p,d,f,1,!0)).scrollIntoView())}return!0}}var v_e={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title"),target:e.getAttribute("target")}}}],toDOM(e){let{href:t,title:n,target:r}=e.attrs;return["a",{href:t,title:n,target:r},0]}},y_e={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},x_e={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong",0]}},b_e={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},__e={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},w_e={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},S_e={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:e=>({color:e})}],toDOM(e){let{color:t}=e.attrs;return["span",{style:`color:${t};`},0]}},C_e={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:e=>({backgroundColor:e})}],toDOM(e){let{backgroundColor:t}=e.attrs;return["span",{style:`background-color:${t};`},0]}},O_e={attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM(){return["sup",0]}},M_e={attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM(){return["sub",0]}},k_e={link:v_e,em:y_e,strong:x_e,code:b_e,u:__e,s:w_e,text_color:S_e,text_background_color:C_e,sup:O_e,sub:M_e},E_e={content:"block+"},A_e={group:"inline"},T_e={content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{align:n,indent:parseInt(r,10)||null}}}],toDOM(e){let{align:t,indent:n}=e.attrs,r={textAlign:t!=="left"?t:null,marginLeft:n!==null?`${n*40}px`:null};return["p",{style:nO(r)||null,"data-indent":n??null},0]}},P_e={content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(e){let t=e.getAttribute("data-indent")||null;return{indent:parseInt(t,10)||null}}}],toDOM(e){let{indent:t}=e.attrs,n={marginLeft:t!==null?`${t*40}px`:null};return["blockquote",{style:nO(n)||null,"data-indent":t??null},0]}},N_e={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},L_e={attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{level:1,align:n,indent:parseInt(r,10)||null}}},{tag:"h2",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{level:2,align:n,indent:parseInt(r,10)||null}}},{tag:"h3",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{level:3,align:n,indent:parseInt(r,10)||null}}},{tag:"h4",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{level:4,align:n,indent:parseInt(r,10)||null}}},{tag:"h5",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{level:5,align:n,indent:parseInt(r,10)||null}}},{tag:"h6",getAttrs(e){let{textAlign:t}=e.style,n=e.getAttribute("align")||t||null,r=e.getAttribute("data-indent")||null;return{level:6,align:n,indent:parseInt(r,10)||null}}}],toDOM(e){let{level:t,align:n,indent:r}=e.attrs,i={textAlign:n!=="left"?n:null,marginLeft:r!==null?`${r*40}px`:null},a={style:nO(i)||null,"data-indent":r??null};return[`h${t}`,a,0]}},I_e={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},D_e={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},z_e={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt"),width:e.getAttribute("width")}}}],toDOM(e){let{src:t,alt:n,title:r,width:i}=e.attrs;return["img",{src:t,alt:n,title:r,width:i}]}},R_e=Jf(ka({},MK),{content:"paragraph block*"}),F_e=Jf(ka({},CK),{content:"list_item+",group:"block"}),B_e=Jf(ka({},OK),{content:"list_item+",group:"block"}),j_e={doc:E_e,text:A_e,paragraph:T_e,blockquote:P_e,horizontal_rule:N_e,heading:L_e,hard_break:D_e,code_block:I_e,image:z_e,list_item:R_e,ordered_list:F_e,bullet_list:B_e},LO=new cO({marks:k_e,nodes:j_e});var TK=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function V_e(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}var H_e=(e,t,n)=>{let r=V_e(e,n);if(!r)return!1;let i=PK(r);if(!i){let a=r.blockRange(),s=a&&nm(a);return s==null?!1:(t&&t(e.tr.lift(a,s).scrollIntoView()),!0)}let o=i.nodeBefore;if(IK(e,i,t,-1))return!0;if(r.parent.content.size==0&&(sg(o,"end")||Nn.isSelectable(o)))for(let a=r.depth;;a--){let s=vO(e.doc,r.before(a),r.after(a),jt.empty);if(s&&s.slice.size<s.to-s.from){if(t){let l=e.tr.step(s);l.setSelection(sg(o,"end")?Gn.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Nn.create(l.doc,i.pos-o.nodeSize)),t(l.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function sg(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}var W_e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=PK(r)}let a=o&&o.nodeBefore;return!a||!Nn.isSelectable(a)?!1:(t&&t(e.tr.setSelection(Nn.create(e.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function PK(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function q_e(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}var U_e=(e,t,n)=>{let r=q_e(e,n);if(!r)return!1;let i=NK(r);if(!i)return!1;let o=i.nodeAfter;if(IK(e,i,t,1))return!0;if(r.parent.content.size==0&&(sg(o,"start")||Nn.isSelectable(o))){let a=vO(e.doc,r.before(),r.after(),jt.empty);if(a&&a.slice.size<a.to-a.from){if(t){let s=e.tr.step(a);s.setSelection(sg(o,"start")?Gn.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):Nn.create(s.doc,s.mapping.map(i.pos))),t(s.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},G_e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=NK(r)}let a=o&&o.nodeAfter;return!a||!Nn.isSelectable(a)?!1:(t&&t(e.tr.setSelection(Nn.create(e.doc,o.pos)).scrollIntoView()),!0)};function NK(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}var LK=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&nm(i);return o==null?!1:(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},pN=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function dN(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var hN=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),a=dN(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(t){let s=n.after(),l=e.tr.replaceWith(s,s,a.createAndFill());l.setSelection(Gn.near(l.doc.resolve(s),1)),t(l.scrollIntoView())}return!0},mN=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof il||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=dN(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(a,o.createAndFill());s.setSelection(Ir.create(s.doc,a+1)),t(s.scrollIntoView())}return!0},gN=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Qp(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&nm(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function $_e(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Nn&&t.selection.node.isBlock)return!r.parentOffset||!Qp(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let o=i.parentOffset==i.parent.content.size,a=t.tr;(t.selection instanceof Ir||t.selection instanceof il)&&a.deleteSelection();let s=r.depth==0?null:dN(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=e&&e(i.parent,o,r),c=l?[l]:o&&s?[{type:s}]:void 0,u=Qp(a.doc,a.mapping.map(r.pos),1,c);if(!c&&!u&&Qp(a.doc,a.mapping.map(r.pos),1,s?[{type:s}]:void 0)&&(s&&(c=[{type:s}]),u=!0),u&&(a.split(a.mapping.map(r.pos),1,c),!o&&!r.parentOffset&&r.parent.type!=s)){let f=a.mapping.map(r.before()),p=a.doc.resolve(f);s&&r.node(-1).canReplaceWith(p.index(),p.index()+1,s)&&a.setNodeMarkup(a.mapping.map(r.before()),s)}n(a.scrollIntoView())}return!0}}var vN=$_e();var Y_e=(e,t)=>(t&&t(e.tr.setSelection(new il(e.doc))),!0);function X_e(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||rm(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function IK(e,t,n,r){let i=t.nodeBefore,o=t.nodeAfter,a,s,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&X_e(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(a=(s=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(n){let d=t.pos+o.nodeSize,h=_t.empty;for(let v=a.length-1;v>=0;v--)h=_t.from(a[v].create(null,h));h=_t.from(i.copy(h));let m=e.tr.step(new Io(t.pos-1,d,t.pos,d,new jt(h,1,0),a.length,!0)),g=d+2*a.length;rm(m.doc,g)&&m.join(g),n(m.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:Gn.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),p=f&&nm(f);if(p!=null&&p>=t.depth)return n&&n(e.tr.lift(f,p).scrollIntoView()),!0;if(c&&sg(o,"start",!0)&&sg(i,"end")){let d=i,h=[];for(;h.push(d),!d.isTextblock;)d=d.lastChild;let m=o,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,m.content)){if(n){let v=_t.empty;for(let x=h.length-1;x>=0;x--)v=_t.from(h[x].copy(v));let y=e.tr.step(new Io(t.pos-h.length,t.pos+o.nodeSize,t.pos+g,t.pos+o.nodeSize-g,new jt(v,h.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function DK(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(t.tr.setSelection(Ir.create(t.doc,e<0?i.start(o):i.end(o)))),!0):!1}}var K_e=DK(-1),Z_e=DK(1);function zK(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=a&&Z1(a,e,t);return s?(r&&r(n.tr.wrap(a,s).scrollIntoView()),!0):!1}}function IO(e,t=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(a,s,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(r){let o=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[a];o.setBlockType(s,l,e,t)}r(o.scrollIntoView())}return!0}}function J_e(e,t,n,r){for(let i=0;i<t.length;i++){let{$from:o,$to:a}=t[i],s=o.depth==0?e.inlineContent&&e.type.allowsMarkType(n):!1;if(e.nodesBetween(o.pos,a.pos,(l,c)=>{if(s||!r&&l.isAtom&&l.isInline&&c>=o.pos&&c+l.nodeSize<=a.pos)return!1;s=l.inlineContent&&l.type.allowsMarkType(n)}),s)return!0}return!1}function Q_e(e){let t=[];for(let n=0;n<e.length;n++){let{$from:r,$to:i}=e[n];r.doc.nodesBetween(r.pos,i.pos,(o,a)=>{if(o.isAtom&&o.content.size&&o.isInline&&a>=r.pos&&a+o.nodeSize<=i.pos)return a+1>r.pos&&t.push(new Q1(r,r.doc.resolve(a+1))),r=r.doc.resolve(a+1+o.content.size),!1}),r.pos<i.pos&&t.push(new Q1(r,i))}return t}function dm(e,t=null,n){let r=(n&&n.removeWhenPresent)!==!1,i=(n&&n.enterInlineAtoms)!==!1;return function(o,a){let{empty:s,$cursor:l,ranges:c}=o.selection;if(s&&!l||!J_e(o.doc,c,e,i))return!1;if(a)if(l)e.isInSet(o.storedMarks||l.marks())?a(o.tr.removeStoredMark(e)):a(o.tr.addStoredMark(e.create(t)));else{let u,f=o.tr;i||(c=Q_e(c)),r?u=!c.some(p=>o.doc.rangeHasMark(p.$from.pos,p.$to.pos,e)):u=!c.every(p=>{let d=!1;return f.doc.nodesBetween(p.$from.pos,p.$to.pos,(h,m,g)=>{if(d)return!1;d=!e.isInSet(h.marks)&&!!g&&g.type.allowsMarkType(e)&&!(h.isText&&/^\s*$/.test(h.textBetween(Math.max(0,p.$from.pos-m),Math.min(h.nodeSize,p.$to.pos-m))))}),!d});for(let p=0;p<c.length;p++){let{$from:d,$to:h}=c[p];if(!u)f.removeMark(d.pos,h.pos,e);else{let m=d.pos,g=h.pos,v=d.nodeAfter,y=h.nodeBefore,x=v&&v.isText?/^\s*/.exec(v.text)[0].length:0,_=y&&y.isText?/\s*$/.exec(y.text)[0].length:0;m+x<g&&(m+=x,g-=_),f.addMark(m,g,e.create(t))}}a(f.scrollIntoView())}return!0}}function lg(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}var fN=lg(TK,H_e,W_e),AK=lg(TK,U_e,G_e),Ef={Enter:lg(pN,mN,gN,vN),"Mod-Enter":hN,Backspace:fN,"Mod-Backspace":fN,"Shift-Backspace":fN,Delete:AK,"Mod-Delete":AK,"Mod-a":Y_e},RK={"Ctrl-h":Ef.Backspace,"Alt-Backspace":Ef["Mod-Backspace"],"Ctrl-d":Ef.Delete,"Ctrl-Alt-Backspace":Ef["Mod-Delete"],"Alt-Delete":Ef["Mod-Delete"],"Alt-d":Ef["Mod-Delete"],"Ctrl-a":K_e,"Ctrl-e":Z_e};for(let e in Ef)RK[e]=Ef[e];var ewe=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,FK=ewe?RK:Ef;var Zl=class{constructor(t,n,r={}){this.match=t,this.match=t,this.handler=typeof n=="string"?twe(n):n,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1}};function twe(e){return function(t,n,r,i){let o=e;if(n[1]){let a=n[0].lastIndexOf(n[1]);o+=n[0].slice(a+n[1].length),r+=a;let s=r-i;s>0&&(o=n[0].slice(a-s,a)+o,r=i)}return t.tr.insertText(o,r,i)}}var nwe=500;function jK({rules:e}){let t=new Sf({state:{init(){return null},apply(n,r){let i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,o){return BK(n,r,i,o,e,t)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&BK(n,r.pos,r.pos,"",e,t)})}}},isInputRules:!0});return t}function BK(e,t,n,r,i,o){if(e.composing)return!1;let a=e.state,s=a.doc.resolve(t),l=s.parent.textBetween(Math.max(0,s.parentOffset-nwe),s.parentOffset,null,"\uFFFC")+r;for(let c=0;c<i.length;c++){let u=i[c];if(s.parent.type.spec.code){if(!u.inCode)continue}else if(u.inCode==="only")continue;let f=u.match.exec(l),p=f&&u.handler(a,f,t-(f[0].length-r.length),n);if(p)return u.undoable&&p.setMeta(o,{transform:p,from:t,to:n,text:r}),e.dispatch(p),!0}return!1}var VK=new Zl(/--$/,"\u2014"),HK=new Zl(/\.\.\.$/,"\u2026"),rwe=new Zl(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),iwe=new Zl(/"$/,"\u201D"),owe=new Zl(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),awe=new Zl(/'$/,"\u2019"),WK=[rwe,iwe,owe,awe];function DO(e,t,n=null,r){return new Zl(e,(i,o,a,s)=>{let l=n instanceof Function?n(o):n,c=i.tr.delete(a,s),u=c.doc.resolve(a),f=u.blockRange(),p=f&&Z1(f,t,l);if(!p)return null;c.wrap(f,p);let d=c.doc.resolve(a-1).nodeBefore;return d&&d.type==t&&rm(c.doc,a-1)&&(!r||r(o,d))&&c.join(a-1),c})}function yN(e,t,n=null){return new Zl(e,(r,i,o,a)=>{let s=r.doc.resolve(o),l=n instanceof Function?n(i):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?r.tr.delete(o,a).setBlockType(o,o,t,l):null})}var zO=(e,t)=>{let{from:n,$from:r,to:i,empty:o}=e.selection;return o?!!t.isInSet(e.storedMarks||r.marks()):e.doc.rangeHasMark(n,i,t)},swe=(e,t)=>{for(let n=t.depth;n>0;n-=1)if(t.node(n).type===e)return t.node(n).type;return null},xN=(e,t,n={})=>{let{selection:r}=e,{$from:i,to:o}=r,a=swe(t,i);return!Object.entries(n).length||!a?!!a:o<=i.end()&&i.parent.hasMarkup(t,n)},qK=e=>{let t=[],{selection:n,storedMarks:r}=e,{from:i,to:o,empty:a,$from:s}=n;return a?t=r||s.marks():e.doc.nodesBetween(i,o,l=>{t=[...t,...l.marks]}),t},bN=e=>{let t=[],{selection:{from:n,to:r}}=e;return e.doc.nodesBetween(n,r,i=>{t.push(i)}),t},_N=(e,t,n)=>{for(let r of t){let{$from:i,$to:o}=r,a=i.depth===0?e.type.allowsMarkType(n):!1;if(e.nodesBetween(i.pos,o.pos,s=>a?!1:(a=s.inlineContent&&s.type.allowsMarkType(n),!0)),a)return!0}return!1},wN=(e,t,n)=>new Zl(e,(r,i,o,a)=>{let{tr:s}=r,l=o,c=a,[u,,f]=i,p=u.search(/\S/);if(f){let d=o+u.indexOf(f),h=d+f.length;h<a&&s.delete(h,a),d>o&&s.delete(o+p,d),c=o+f.length+p}return s.addMark(l,c,t.create(n)),s.removeStoredMark(t),s}),UK=(e,t)=>{let{$from:n}=e.selection;for(let r=n.depth;r>=0;r-=1){let i=n.index(r);if(n.node(r).canReplaceWith(i,i,t))return!0}return!1};var GK=()=>(e,t)=>{let{doc:n,selection:r,tr:i,schema:o}=e,{$head:{pos:a},from:s,to:l}=r,c=o.marks.link;if(s===l){let u=n.resolve(a),f=a-u.textOffset,p=f+u.parent.child(u.index()).nodeSize;i.removeMark(f,p,c)}else i.removeMark(s,l,c);return i.docChanged?(t?.(i),!0):!1},SN=(e,t={})=>(n,r)=>{let{tr:i,selection:o}=n,{empty:a,ranges:s,$from:l,$to:c}=o;if(a&&o instanceof Ir){let{$cursor:u}=o;if(!u||!_N(n.doc,s,e)||(i.addStoredMark(e.create(t)),!i.storedMarksSet))return!1;r?.(i)}else{if(i.addMark(l.pos,c.pos,e.create(t)),!i.docChanged)return!1;r?.(i.scrollIntoView())}return!0},$K=e=>(t,n)=>{let{tr:r,selection:i,storedMarks:o,doc:a}=t,{empty:s,ranges:l}=i;if(s&&i instanceof Ir){let{$cursor:c}=i;if(!c||!_N(t.doc,l,e))return!1;if(e.isInSet(o||c.marks()))return r.removeStoredMark(e),n?.(r),!0}else{for(let c of l){let{$from:u,$to:f}=c;a.rangeHasMark(u.pos,f.pos,e)&&r.removeMark(u.pos,f.pos,e)}if(!r.docChanged)return!1;n?.(r.scrollIntoView())}return!1};var RO=200,Jo=function(){};Jo.prototype.append=function(t){return t.length?(t=Jo.from(t),!this.length&&t||t.length<RO&&this.leafAppend(t)||this.length<RO&&t.leafPrepend(this)||this.appendInner(t)):this};Jo.prototype.prepend=function(t){return t.length?Jo.from(t).append(this):this};Jo.prototype.appendInner=function(t){return new lwe(this,t)};Jo.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Jo.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Jo.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Jo.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Jo.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,a){return i.push(t(o,a))},n,r),i};Jo.from=function(t){return t instanceof Jo?t:t&&t.length?new YK(t):Jo.empty};var YK=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,a,s){for(var l=o;l<a;l++)if(i(this.values[l],s+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,a,s){for(var l=o-1;l>=a;l--)if(i(this.values[l],s+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=RO)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=RO)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Jo);Jo.empty=new YK([]);var lwe=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,o,a){var s=this.left.length;if(i<s&&this.left.forEachInner(r,i,Math.min(o,s),a)===!1||o>s&&this.right.forEachInner(r,Math.max(i-s,0),Math.min(this.length,o)-s,a+s)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,o,a){var s=this.left.length;if(i>s&&this.right.forEachInvertedInner(r,i-s,Math.max(o,s)-s,a+s)===!1||o<s&&this.left.forEachInvertedInner(r,Math.min(i,s),o,a)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Jo),CN=Jo;var cwe=500,mm=class e{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let a=t.tr,s,l,c=[],u=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),o=i.maps.length),o--,u.push(f);return}if(i){u.push(new _u(f.map));let d=f.step.map(i.slice(o)),h;d&&a.maybeStep(d).doc&&(h=a.mapping.maps[a.mapping.maps.length-1],c.push(new _u(h,void 0,void 0,c.length+u.length))),o--,h&&i.appendMap(h,o)}else a.maybeStep(f.step);if(f.selection)return s=i?f.selection.map(i.slice(o)):f.selection,l=new e(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:a,selection:s}}addTransform(t,n,r,i){let o=[],a=this.eventCount,s=this.items,l=!i&&s.length?s.get(s.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),p=new _u(t.mapping.maps[u],f,n),d;(d=l&&l.merge(p))&&(p=d,u?o.pop():s=s.slice(0,s.length-1)),o.push(p),n&&(a++,n=void 0),i||(l=p)}let c=a-r.depth;return c>fwe&&(s=uwe(s,c),a-=c),new e(s.append(o),a)}remapping(t,n){let r=new Uy;return this.items.forEach((i,o)=>{let a=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},t,n),r}addMaps(t){return this.eventCount==0?this:new e(this.items.append(t.map(n=>new _u(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=t.mapping,a=t.steps.length,s=this.eventCount;this.items.forEach(p=>{p.selection&&s--},i);let l=n;this.items.forEach(p=>{let d=o.getMirror(--l);if(d==null)return;a=Math.min(a,d);let h=o.maps[d];if(p.step){let m=t.steps[d].invert(t.docs[d]),g=p.selection&&p.selection.map(o.slice(l+1,d));g&&s++,r.push(new _u(h,m,g))}else r.push(new _u(h))},i);let c=[];for(let p=n;p<a;p++)c.push(new _u(o.maps[p]));let u=this.items.slice(0,i).append(c).append(r),f=new e(u,s);return f.emptyItemCount()>cwe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],o=0;return this.items.forEach((a,s)=>{if(s>=t)i.push(a),a.selection&&o++;else if(a.step){let l=a.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=a.selection&&a.selection.map(n.slice(r));u&&o++;let f=new _u(c.invert(),l,u),p,d=i.length-1;(p=i.length&&i[d].merge(f))?i[d]=p:i.push(f)}}else a.map&&r--},this.items.length,0),new e(CN.from(i.reverse()),o)}};mm.empty=new mm(CN.empty,0);function uwe(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}var _u=class e{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new e(n.getMap().invert(),n,this.selection)}}},wu=class{constructor(t,n,r,i,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}},fwe=20;function pwe(e,t,n,r){let i=n.getMeta(hm),o;if(i)return i.historyState;n.getMeta(mwe)&&(e=new wu(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(a&&a.getMeta(hm))return a.getMeta(hm).redo?new wu(e.done.addTransform(n,void 0,r,FO(t)),e.undone,XK(n.mapping.maps),e.prevTime,e.prevComposition):new wu(e.done,e.undone.addTransform(n,void 0,r,FO(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let s=n.getMeta("composition"),l=e.prevTime==0||!a&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!dwe(n,e.prevRanges)),c=a?ON(e.prevRanges,n.mapping):XK(n.mapping.maps);return new wu(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,FO(t)),mm.empty,c,n.time,s??e.prevComposition)}else return(o=n.getMeta("rebased"))?new wu(e.done.rebased(n,o),e.undone.rebased(n,o),ON(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new wu(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),ON(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function dwe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(n=!0)}),n}function XK(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,o,a)=>t.push(o,a));return t}function ON(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function hwe(e,t,n){let r=FO(t),i=hm.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let a=o.selection.resolve(o.transform.doc),s=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),l=new wu(n?s:o.remaining,n?o.remaining:s,null,0,-1);return o.transform.setSelection(a).setMeta(hm,{redo:n,historyState:l})}var MN=!1,KK=null;function FO(e){let t=e.plugins;if(KK!=t){MN=!1,KK=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){MN=!0;break}}return MN}var hm=new eg("history"),mwe=new eg("closeHistory");function ZK(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Sf({key:hm,state:{init(){return new wu(mm.empty,mm.empty,null,0,-1)},apply(t,n,r){return pwe(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?jO:r=="historyRedo"?ox:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function BO(e,t){return(n,r)=>{let i=hm.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let o=hwe(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}var jO=BO(!1,!0),ox=BO(!0,!0),A4t=BO(!1,!1),T4t=BO(!0,!1);var Af={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},HO={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gwe=typeof navigator<"u"&&/Mac/.test(navigator.platform),vwe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(eo=0;eo<10;eo++)Af[48+eo]=Af[96+eo]=String(eo);var eo;for(eo=1;eo<=24;eo++)Af[eo+111]="F"+eo;var eo;for(eo=65;eo<=90;eo++)Af[eo]=String.fromCharCode(eo+32),HO[eo]=String.fromCharCode(eo);var eo;for(VO in Af)HO.hasOwnProperty(VO)||(HO[VO]=Af[VO]);var VO;function JK(e){var t=gwe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||vwe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?HO:Af)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var ywe=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function xwe(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,o,a;for(let s=0;s<t.length-1;s++){let l=t[s];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))ywe?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function bwe(e){let t=Object.create(null);for(let n in e)t[xwe(n)]=e[n];return t}function kN(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function ax(e){return new Sf({props:{handleKeyDown:_we(e)}})}function _we(e){let t=bwe(e);return function(n,r){let i=JK(r),o,a=t[kN(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let s=t[kN(i,r,!1)];if(s&&s(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Af[r.keyCode])&&o!=i){let s=t[kN(o,r)];if(s&&s(n.state,n.dispatch,n))return!0}}return!1}}var aZ=e=>typeof e=="string",wwe=()=>window.trustedTypes,sZ=e=>wwe()?.isHTML(e)??!1,Swe=e=>aZ(e)||sZ(e),Cwe={type:"doc",content:[{type:"paragraph"}]};var Owe=(e,t,n)=>{let r=t??LO,i=document.createElement("div");return i.innerHTML=e,Zp.fromSchema(r).parse(i,n).toJSON()},QK=(e,t,n)=>{if(!e)return t.nodeFromJSON(Cwe);if(!Swe(e))return t.nodeFromJSON(e);let r=Owe(e,t,n);return t.nodeFromJSON(r)};var Su=class{constructor(t){this.name=t}apply(){return(t,n)=>{let{schema:r}=t,i=r.marks[this.name];return i?SN(i)(t,n):!1}}toggle(){return(t,n)=>{let{schema:r}=t,i=r.marks[this.name];return i?dm(i)(t,n):!1}}isActive(t){let{schema:n}=t,r=n.marks[this.name];return r?zO(t,r):!1}canExecute(t){return this.toggle()(t)}},EN=class{toggle(){return(t,n)=>{let{schema:r}=t,i=r.nodes.blockquote;return i?this.isActive(t)?LK(t,n):zK(i)(t,n):!1}}isActive(t){let{schema:n}=t,r=n.nodes.blockquote;return r?xN(t,r):!1}canExecute(t){return this.toggle()(t)}},AN=class{insert(){return(t,n)=>{let{schema:r,tr:i}=t,o=r.nodes.horizontal_rule;return o?(n(i.replaceSelectionWith(o.create()).scrollIntoView()),!0):!1}}canExecute(t){return UK(t,t.schema.nodes.horizontal_rule)}},ug=class{constructor(t=!1){this.isBulletList=!1,this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,n)=>{let{schema:r}=t,i=this.getType(r);return i?this.isActive(t)?cN(r.nodes.list_item)(t,n):kK(i)(t,n):!1}}isActive(t){let{schema:n}=t,r=this.getType(n);return r?xN(t,r):!1}canExecute(t){return this.toggle()(t)}},Tf=class{constructor(t){this.level=t}apply(){return(t,n)=>{let{schema:r}=t,i=r.nodes.heading;return i?IO(i)(t,n):!1}}toggle(){return(t,n)=>{let{schema:r,selection:i,doc:o}=t,a=r.nodes.heading;if(!a)return!1;let s=i.$from.before(1),c=o.nodeAt(s)?.attrs??{};return this.isActive(t)?IO(r.nodes.paragraph,c)(t,n):IO(a,Jf(ka({},c),{level:this.level}))(t,n)}}isActive(t){let{schema:n}=t,r=bN(t),i=n.nodes.heading;if(!i)return!1;let o=[i,n.nodes.text,n.nodes.blockquote];return!!r.filter(l=>o.includes(l.type)).find(l=>l.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}},gm=class{constructor(t){this.align=t}toggle(){return(t,n)=>{let{doc:r,selection:i,tr:o,schema:a}=t,{from:s,to:l}=i,c=!1;return r.nodesBetween(s,l,(u,f)=>{let p=u.type;if([a.nodes.paragraph,a.nodes.heading].includes(p)){c=!0;let d=u.attrs.align===this.align?null:this.align;o.setNodeMarkup(f,p,Jf(ka({},u.attrs),{align:d}))}return!0}),c?(o.docChanged&&n?.(o),!0):!1}}isActive(t){return!!bN(t).find(i=>i.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}},Mwe={strict:!0},TN=class{update(t){return(n,r)=>{let{schema:i,selection:o}=n,a=i.marks.link;return!a||o.empty?!1:dm(a,t)(n,r)}}insert(t,n){return(r,i)=>{let{schema:o,tr:a}=r;if(!o.marks.link)return!1;let l={href:n.href,title:n.title??t,target:n.target??"_blank"},c=o.text(t,[o.marks.link.create(l)]);return a.replaceSelectionWith(c,!1).scrollIntoView(),a.docChanged?(i?.(a),!0):!1}}isActive(t,n=Mwe){if(n.strict)return!0;let{schema:r}=t,i=r.marks.link;return i?zO(t,i):!1}remove(t,n){return GK()(t,n)}canExecute(t){let n={href:""};return this.insert("Exec",n)(t)||this.update(n)(t)}},lZ=class{insert(t,n){return(r,i)=>{let{schema:o,tr:a,selection:s}=r,l=o.nodes.image;if(!l)return!1;let c=ka({width:null,src:t},n);!c.width&&s instanceof Nn&&s.node.type===l&&(c.width=s.node.attrs.width),a.replaceSelectionWith(l.createAndFill(c));let u=a.doc.resolve(a.selection.anchor-a.selection.$anchor.nodeBefore.nodeSize);return a.setSelection(new Nn(u)).scrollIntoView(),a.docChanged?(i?.(a),!0):!1}}isActive(t){let{selection:n}=t;return n instanceof Nn?n.node.type.name==="image":!1}},cg=class{constructor(t,n="color"){this.name=t,this.attrName=n}apply(t){return(n,r)=>{let{schema:i,selection:o,doc:a}=n,s=i.marks[this.name];if(!s)return!1;let{from:l,to:c,empty:u}=o;if(!u&&l+1===c){let f=a.nodeAt(l);if(f?.isAtom&&!f.isText&&f.isLeaf)return!1}return SN(s,t)(n,r)}}isActive(t){let{schema:n}=t,r=n.marks[this.name];return r?zO(t,r):!1}getActiveColors(t){if(!this.isActive(t))return[];let{schema:n}=t;return qK(t).filter(o=>o.type===n.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(t,n)=>{let{schema:r}=t,i=r.marks[this.name];return i?$K(i)(t,n):!1}}canExecute(t){let n=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(n)(t)}},kwe=["link"],PN=class{insert(){return(t,n)=>{let{tr:r}=t,{ranges:i,empty:o}=r.selection;return o||(Object.entries(t.schema.marks).forEach(([a,s])=>{kwe.includes(a)||i.forEach(l=>{r.removeMark(l.$from.pos,l.$to.pos,s)})}),n(r)),!0}}canExecute(){return!0}},Ewe=["paragraph","heading","blockquote"],eZ=0,tZ=10,Awe=(e,t,n)=>{let r=e.doc.nodeAt(t);if(!r)return!1;let i=r.attrs.indent??0,o=_Y(i+(n==="increase"?1:-1),eZ,tZ);if(o===i||o<eZ||o>tZ)return!1;let a=Jf(ka({},r.attrs),{indent:o});return e.setNodeMarkup(t,r.type,a),!0},fg=class{constructor(t){this.method="increase",this.method=t}insert(){return(t,n)=>{let{tr:r,doc:i}=t,{from:o,to:a}=r.selection,s=!1;return i.nodesBetween(o,a,(l,c)=>{let u=l.type;return Ewe.includes(u.name)?(s=Awe(r,c,this.method),!1):!l.type.name.includes("list")}),s?(r.docChanged&&n?.(r),!0):!1}}canExecute(t){return this.insert()(t)}},qO=class{constructor(t){this.mode="undo",this.mode=t}insert(){return(t,n)=>this.mode==="undo"?jO(t,n):ox(t,n)}canExecute(t){return this.insert()(t)}},DCt=new Su("strong"),zCt=new Su("em"),RCt=new Su("code"),FCt=new Su("u"),BCt=new Su("s"),jCt=new EN,VCt=new AN,HCt=new PN,WCt=new ug(!0),qCt=new ug(!1),UCt=new Tf(1),GCt=new Tf(2),$Ct=new Tf(3),YCt=new Tf(4),XCt=new Tf(5),KCt=new Tf(6),ZCt=new gm("left"),JCt=new gm("center"),QCt=new gm("right"),eOt=new gm("justify"),tOt=new TN,nOt=new lZ,rOt=new cg("text_color","color"),iOt=new cg("text_background_color","backgroundColor"),oOt=new fg("increase"),aOt=new fg("decrease"),sOt=new Su("sup"),lOt=new Su("sub"),cOt=new qO("undo"),uOt=new qO("redo");var NN={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},LN=class{constructor(t={}){this.locals=NN,this.get=n=>{let r=this.locals[n];return r?pI(r)?r:lv(r):lv("")},this.locals=ka(ka({},NN),t)}},Twe=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,Pwe=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,Nwe=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,Lwe=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,Iwe=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,Dwe=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,zwe=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,Rwe=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,Fwe=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,Bwe=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,jwe=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,Vwe=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,Hwe=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,Wwe=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,qwe=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,Uwe=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,Gwe=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,$we=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,Ywe=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,Xwe='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',Kwe='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',Zwe='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',Jwe='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',Qwe='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',e3e='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',t3e=20,n3e=20,r3e="currentColor",cZ={bold:Twe,italic:Pwe,code:Nwe,underline:Lwe,strike:Iwe,ordered_list:Dwe,bullet_list:zwe,blockquote:Rwe,link:Fwe,unlink:Bwe,image:jwe,align_left:Vwe,align_center:Hwe,align_right:Wwe,align_justify:qwe,text_color:Uwe,color_fill:Gwe,horizontal_rule:$we,format_clear:Ywe,indent:Xwe,outdent:Kwe,superscript:Zwe,subscript:Jwe,undo:Qwe,redo:e3e,path:"<path></path>"},IN=class{static get(t,n=r3e){let r=cZ[t];return r&&(r.includes("<path")||r.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${n}
          height=${t3e}
          width=${n3e}
        >
          ${r}
        </svg>
      `:r}},DN=(()=>{let t=class t{constructor(){this.locals={},this.icons={}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),i3e=(()=>{let t=class t{constructor(r){this.config=r}get locals(){return new LN(this.config.locals)}getIcon(r){return this.config.icons[r]?this.config.icons[r]:IN.get(r)}};t.\u0275fac=function(i){return new(i||t)(_l(DN,8))},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),nZ=e=>({locals:e.locals??{},icons:e.icons??{}}),o3e=(()=>{let t=class t{constructor(r){this.sanitizer=r}transform(r){return sZ(r)?r:this.sanitizer.bypassSecurityTrustHtml(r)}};t.\u0275fac=function(i){return new(i||t)(ht(Qm,16))},t.\u0275pipe=hI({name:"sanitizeHtml",type:t,pure:!0});let e=t;return e})();var a3e=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qu({type:t}),t.\u0275inj=Wu({providers:[o3e],imports:[fv,bb]});let e=t;return e})(),WO=new dI("NgxEditorConfig"),rZ={locals:NN,icons:cZ},uZ=(()=>{let t=class t{static forRoot(r=rZ){return{ngModule:t,providers:[{provide:WO,useValue:r},{provide:DN,useFactory:nZ,deps:[WO]}]}}static forChild(r=rZ){return{ngModule:t,providers:[{provide:WO,useValue:r},{provide:DN,useFactory:nZ,deps:[WO]},i3e]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qu({type:t}),t.\u0275inj=Wu({imports:[fv,a3e]});let e=t;return e})();var Ms=(e,t=!1)=>(n,r)=>{let i=new Su(e);return t?i.toggle()(n,r):i.apply()(n,r)},zN=class{constructor(t){if(this.applyTrx=n=>{this.state=this.state.apply(n??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=n=>{this.applyTrx(n)},!t)throw new tO("Required view to initialize commands.");this.view=t,this.state=t.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;let t=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);let n=this.tr.setMeta("FORCE_EMIT",t);return this.view.dispatch(n),!0}focus(t="end"){let n=t==="start"?Gn.atStart(this.state.doc):Gn.atEnd(this.state.doc);return this.tr.setSelection(n),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(t){return this.tr.insertText(t),this.applyTrx(),this}insertNewLine(){return lg(...[pN,mN,gN,vN])(this.state,this.dispatch),this}applyMark(t){return Ms(t,!1)(this.state,this.dispatch),this}toggleMark(t){return Ms(t,!0)(this.state,this.dispatch),this}bold(){return Ms("strong")(this.state,this.dispatch),this}toggleBold(){return Ms("strong",!0)(this.state,this.dispatch),this}italics(){return Ms("em")(this.state,this.dispatch),this}toggleItalics(){return Ms("em",!0)(this.state,this.dispatch),this}underline(){return Ms("u")(this.state,this.dispatch),this}toggleUnderline(){return Ms("u",!0)(this.state,this.dispatch),this}strike(){return Ms("s")(this.state,this.dispatch),this}toggleStrike(){return Ms("s",!0)(this.state,this.dispatch),this}code(){return Ms("code")(this.state,this.dispatch),this}toggleCode(){return Ms("code",!0)(this.state,this.dispatch),this}superscript(){return Ms("sup")(this.state,this.dispatch),this}subscript(){return Ms("sub")(this.state,this.dispatch),this}toggleOrderedList(){return new ug(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new ug(!0).toggle()(this.state,this.dispatch),this}toggleHeading(t){return new Tf(t).toggle()(this.state,this.dispatch),this}insertLink(t,n){return new TN().insert(t,n)(this.state,this.dispatch),this}updateLink(t){return new TN().update(t)(this.state,this.dispatch),this}insertImage(t,n={}){return new lZ().insert(t,n)(this.state,this.dispatch),this}textColor(t){return new cg("text_color").apply({color:t})(this.state,this.dispatch),this}backgroundColor(t){return new cg("text_background_color").apply({backgroundColor:t})(this.state,this.dispatch),this}removeTextColor(){return new cg("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new cg("text_background_color").remove()(this.state,this.dispatch),this}align(t){return new gm(t).toggle()(this.state,this.dispatch),this}insertHTML(t){let{selection:n,schema:r,tr:i}=this.state,{from:o,to:a}=n,s=document.createElement("div");s.innerHTML=aZ(t)?t.trim():t;let l=Zp.fromSchema(r).parseSlice(s),c=i.replaceRange(o,a,l);return this.applyTrx(c),this}indent(){return new fg("increase").insert()(this.state,this.dispatch),this}outdent(){return new fg("decrease").insert()(this.state,this.dispatch),this}},s3e=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,l3e=e=>DO(/^\s*>\s$/,e),c3e=e=>DO(/^(?:\d+)\.\s$/,e,t=>({order:Number(t[1])}),(t,n)=>n.childCount+n.attrs.order===Number(t[1])),u3e=e=>DO(/^\s*(?:[-+*])\s$/,e),f3e=e=>yN(/^```$/,e),p3e=(e,t)=>yN(new RegExp(`^(#{1,${t}})\\s$`),e,n=>({level:n[1].length})),d3e=e=>wN(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,e),h3e=e=>wN(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,e),m3e=e=>{let t=WK.concat(HK,VK);return t.push(d3e(e.marks.strong)),t.push(h3e(e.marks.em)),t.push(l3e(e.nodes.blockquote)),t.push(c3e(e.nodes.ordered_list)),t.push(u3e(e.nodes.bullet_list)),t.push(f3e(e.nodes.code_block)),t.push(p3e(e.nodes.heading,6)),jK({rules:t})},g3e=(e,t)=>{let n={};n["Mod-z"]=jO,s3e?n["Shift-Mod-z"]=ox:n["Mod-y"]=ox;let r=[ax({"Mod-b":dm(e.marks.strong),"Mod-i":dm(e.marks.em),"Mod-u":dm(e.marks.u),"Mod-`":dm(e.marks.code)}),ax({Enter:EK(e.nodes.list_item),"Shift-Enter":lg(hN,(i,o)=>{let{tr:a}=i,s=e.nodes.hard_break;return o(a.replaceSelectionWith(s.create()).scrollIntoView()),!0}),"Mod-[":cN(e.nodes.list_item),"Mod-]":uN(e.nodes.list_item),Tab:uN(e.nodes.list_item)}),ax(FK)];return t.history&&r.push(ax(n)),r},v3e=(e,t)=>{let n=[];return t.keyboardShortcuts&&n.push(...g3e(e,{history:t.history})),t.history&&n.push(ZK()),t.inputRules&&n.push(m3e(e)),n},fZ={linkOnPaste:!0,resizeImage:!0},iZ={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:LO,plugins:[],nodeViews:{},attributes:{},features:fZ,handleScrollToSelection:null,linkValidationPattern:`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)|(mailto:.*[@].*)`},vm=class{constructor(t=iZ){this.valueChangesSubject=new Xr,this.updateSubject=new Xr,this.options=ka(ka({},iZ),t),this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||LO}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new zN(this.view)}get features(){return ka(ka({},fZ),this.options.features)}handleTransactions(t){let n=this.view.state.apply(t);if(this.view.updateState(n),this.updateSubject.next(this.view),!t.docChanged&&!t.getMeta("FORCE_EMIT"))return;let r=n.doc.toJSON();this.valueChangesSubject.next(r)}createEditor(){let{options:t,schema:n}=this,{content:r=null,nodeViews:i}=t,{history:o=!0,keyboardShortcuts:a=!0,inputRules:s=!0}=t,l=QK(r,n,t.parseOptions),c=t.plugins??[],u=t.attributes??{},f=v3e(n,{history:o,keyboardShortcuts:a,inputRules:s});this.view=new TO(null,{state:bO.create({doc:l,schema:n,plugins:[...f,...c]}),nodeViews:i,dispatchTransaction:this.handleTransactions.bind(this),attributes:u,handleScrollToSelection:t.handleScrollToSelection})}setContent(t){if(bY(t))return;let{state:n}=this.view,{tr:r,doc:i}=n,o=QK(t,this.schema,this.options.parseOptions);r.replaceWith(0,n.doc.content.size,o),!i.eq(r.doc)&&r.docChanged&&this.view.dispatch(r)}registerPlugin(t){let{state:n}=this.view,r=[...n.plugins,t],i=n.reconfigure({plugins:r});this.view.updateState(i)}destroy(){this.view.destroy()}};function _3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"input",13),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("name",n.id)("placeholder",n.label),qt("ngModel",n.value)}}function w3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"textarea",14),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),oe("name",n.id)("placeholder",n.label)}}function S3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"input",15),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("placeholder",n.label),qt("ngModel",n.value),oe("name",n.id)}}function C3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-date-picker",16),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),oe("name",n.id)}}function O3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-time-picker",16),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),oe("name",n.id)}}function M3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-date-picker",17),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("nzShowTime",!0),qt("ngModel",n.value),oe("name",n.id)}}function k3e(e,t){if(e&1){let n=pt();D(0,"label",19),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.checked,i)||(o.checked=i),Re(i)}),ce(1),F()}if(e&2){let n=t.$implicit,r=me(2).$implicit;qt("ngModel",n.checked),oe("name",r.id),$(),Yt(n.label)}}function E3e(e,t){if(e&1&&(D(0,"nz-form-item"),Je(1,k3e,2,3,"label",18),F()),e&2){let n=me().$implicit;$(),oe("ngForOf",n.options)}}function A3e(e,t){if(e&1){let n=pt();D(0,"label",22),Gt("ngModelChange",function(i){ze(n);let o=me(2).$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),ce(1),F()}if(e&2){let n=t.$implicit,r=me(2).$implicit;qt("ngModel",r.value),oe("name",r.id),$(),Yt(n)}}function T3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-radio-group",20),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),Je(2,A3e,2,3,"label",21),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),$(),oe("ngForOf",n.options)}}function P3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"input",23),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("placeholder",n.label),qt("ngModel",n.value),oe("name",n.id)}}function N3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-upload",24),Xe("nzChange",function(i){ze(n);let o=me().index,a=me();return Re(a.onUploadChange(i,o))}),D(2,"p",25),xe(3,"span",26),F(),D(4,"p",27),ce(5," Click or drag file to this area to upload "),F(),D(6,"p",28),ce(7," Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files "),F()()()}if(e&2){let n=me(2);$(),oe("nzMultiple",!0)("nzCustomRequest",n.customRequestHandler)}}function L3e(e,t){}function I3e(e,t){if(e&1&&(D(0,"div")(1,"div",1),Je(2,_3e,2,3,"ng-template",2)(3,w3e,2,3,"ng-template",3)(4,S3e,2,3,"ng-template",4)(5,C3e,2,2,"ng-template",5)(6,O3e,2,2,"ng-template",6)(7,M3e,2,3,"ng-template",7)(8,E3e,2,1,"ng-template",8)(9,T3e,3,2,"ng-template",9)(10,P3e,2,3,"ng-template",10)(11,N3e,8,2,"ng-template",11)(12,L3e,0,0,"ng-template",12),F()()),e&2){let n=t.$implicit;$(),oe("ngSwitch",n.type)}}var pZ=(()=>{let t=class t{constructor(r){this.formBuilder=r,this.createTicketLoader=!1,this.formDataEmitter=new Ja,this.htmlContentControl=new ic,this.uploading=!1,this.fileList=[],this.editor=new vm,this.toolbar=[["bold","italic"],["underline"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]],this.subject="",this.subs=new ci,this.beforeUpload=i=>(console.log(this.fields),!1),this.customRequestHandler=i=>(console.log("Custom upload suppressed:",i),lv().subscribe())}ngOnInit(){this.editor=new vm,console.log("Fields: ",this.fields)}onUploadChange(r,i){console.log(r),console.log(i),this.fields[i].value=r.fileList,console.log(this.fields[i])}ngOnDestroy(){this.subs.dispose(),this.editor.destroy()}emitFormData(){this.formDataEmitter.emit(this.fields)}submitDocument(r){}};t.\u0275fac=function(i){return new(i||t)(ht(OI))},t.\u0275cmp=tn({type:t,selectors:[["app-dynamic-form"]],inputs:{fields:"fields",template:"template",ticketCategory:"ticketCategory",selectedUser:"selectedUser",systems:"systems",createTicketLoader:"createTicketLoader"},outputs:{formDataEmitter:"formDataEmitter"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngSwitch"],["ngSwitchCase","short-text"],["ngSwitchCase","long-text"],["ngSwitchCase","number"],["ngSwitchCase","date"],["ngSwitchCase","time"],["ngSwitchCase","date-time"],["ngSwitchCase","checkbox"],["ngSwitchCase","radio"],["ngSwitchCase","email"],["ngSwitchCase","upload"],["ngSwitchDefault",""],["nz-input","",3,"ngModelChange","name","placeholder","ngModel"],["rows","4","nz-input","",3,"ngModelChange","ngModel","name","placeholder"],["nz-input","","type","number",3,"ngModelChange","placeholder","ngModel","name"],[3,"ngModelChange","ngModel","name"],[3,"ngModelChange","nzShowTime","ngModel","name"],["nz-checkbox","",3,"ngModel","name","ngModelChange",4,"ngFor","ngForOf"],["nz-checkbox","",3,"ngModelChange","ngModel","name"],[3,"ngModelChange","ngModel"],["nz-radio","",3,"ngModel","name","ngModelChange",4,"ngFor","ngForOf"],["nz-radio","",3,"ngModelChange","ngModel","name"],["nz-input","","email","",3,"ngModelChange","placeholder","ngModel","name"],["nzType","drag","nzAction","",3,"nzChange","nzMultiple","nzCustomRequest"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"]],template:function(i,o){i&1&&(D(0,"form")(1,"fieldset"),Je(2,I3e,13,1,"div",0),F()()),i&2&&($(2),oe("ngForOf",o.fields))},dependencies:[Xi,hb,mb,gb,Kn,np,Xn,ss,Ml,_b,kb,as,El,Mb,Ob,tp,Cl,t0,yo,ep,xb,is,CI]});let e=t;return e})();function z3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"input",13),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("name",n.id)("placeholder",n.label),qt("ngModel",n.value)}}function R3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"textarea",14),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),oe("name",n.id)("placeholder",n.label)}}function F3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"input",15),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("placeholder",n.label),qt("ngModel",n.value),oe("name",n.id)}}function B3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-date-picker",16),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),oe("name",n.id)("nzInputReadOnly",!0)}}function j3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-time-picker",16),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),oe("name",n.id)("nzInputReadOnly",!0)}}function V3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-date-picker",17),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("nzShowTime",!0),qt("ngModel",n.value),oe("name",n.id)("nzInputReadOnly",!0)}}function H3e(e,t){if(e&1){let n=pt();D(0,"label",19),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.checked,i)||(o.checked=i),Re(i)}),ce(1),F()}if(e&2){let n=t.$implicit,r=me(2).$implicit;qt("ngModel",n.checked),oe("name",r.id),$(),Yt(n.label)}}function W3e(e,t){if(e&1&&(D(0,"nz-form-item"),Je(1,H3e,2,3,"label",18),F()),e&2){let n=me().$implicit;$(),oe("ngForOf",n.options)}}function q3e(e,t){if(e&1){let n=pt();D(0,"label",22),Gt("ngModelChange",function(i){ze(n);let o=me(2).$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),ce(1),F()}if(e&2){let n=t.$implicit,r=me(2).$implicit;qt("ngModel",r.value),oe("name",r.id),$(),Yt(n)}}function U3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-radio-group",20),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),Je(2,q3e,2,3,"label",21),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.value),$(),oe("ngForOf",n.options)}}function G3e(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"input",23),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.value,i)||(o.value=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),oe("placeholder",n.label),qt("ngModel",n.value),oe("name",n.id)}}function $3e(e,t){e&1&&(D(0,"nz-form-item")(1,"nz-upload",24)(2,"p",25),xe(3,"span",26),F(),D(4,"p",27),ce(5," Click or drag file to this area to upload "),F(),D(6,"p",28),ce(7," Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files "),F()()()),e&2&&($(),oe("nzMultiple",!0)("nzDisabled",!0))}function Y3e(e,t){}function X3e(e,t){if(e&1&&(D(0,"div")(1,"div",1),Je(2,z3e,2,3,"ng-template",2)(3,R3e,2,3,"ng-template",3)(4,F3e,2,3,"ng-template",4)(5,B3e,2,3,"ng-template",5)(6,j3e,2,3,"ng-template",6)(7,V3e,2,4,"ng-template",7)(8,W3e,2,1,"ng-template",8)(9,U3e,3,2,"ng-template",9)(10,G3e,2,3,"ng-template",10)(11,$3e,8,2,"ng-template",11)(12,Y3e,0,0,"ng-template",12),F()()),e&2){let n=t.$implicit;$(),oe("ngSwitch",n.type)}}var UO=(()=>{let t=class t{ngOnInit(){console.log("Fields: ",this.fields),this.fields=this.fields.flat()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-form-preview"]],inputs:{fields:"fields"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngSwitch"],["ngSwitchCase","short-text"],["ngSwitchCase","long-text"],["ngSwitchCase","number"],["ngSwitchCase","date"],["ngSwitchCase","time"],["ngSwitchCase","date-time"],["ngSwitchCase","checkbox"],["ngSwitchCase","radio"],["ngSwitchCase","email"],["ngSwitchCase","upload"],["ngSwitchDefault",""],["nz-input","","readonly","",3,"ngModelChange","name","placeholder","ngModel"],["rows","4","nz-input","","readonly","",3,"ngModelChange","ngModel","name","placeholder"],["nz-input","","type","number","readonly","",3,"ngModelChange","placeholder","ngModel","name"],[3,"ngModelChange","ngModel","name","nzInputReadOnly"],[3,"ngModelChange","nzShowTime","ngModel","name","nzInputReadOnly"],["nz-checkbox","",3,"ngModel","name","ngModelChange",4,"ngFor","ngForOf"],["nz-checkbox","",3,"ngModelChange","ngModel","name"],[3,"ngModelChange","ngModel"],["nz-radio","","aria-readonly","true",3,"ngModel","name","ngModelChange",4,"ngFor","ngForOf"],["nz-radio","","aria-readonly","true",3,"ngModelChange","ngModel","name"],["nz-input","","email","","readonly","",3,"ngModelChange","placeholder","ngModel","name"],["nzType","drag","nzAction","",3,"nzMultiple","nzDisabled"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"]],template:function(i,o){i&1&&Je(0,X3e,13,1,"div",0),i&2&&oe("ngForOf",o.fields)},dependencies:[Xi,hb,mb,gb,Kn,np,Xn,ss,Ml,_b,kb,as,El,Mb,Ob,Cl,t0,yo,xb,is]});let e=t;return e})();var J3e=["fieldsTemplate"],Q3e=["actionersTemplate"],eSe=()=>["checkbox","radio","select"],tSe=()=>["upload"],nSe=()=>["short-text","long-text","email"],rSe=()=>["number","date","time","date-time"],iSe=()=>["short-text","long-text","number"];function oSe(e,t){if(e&1){let n=pt();D(0,"div",33)(1,"nz-input-number",45),Gt("ngModelChange",function(i){ze(n);let o=me(2);return Ut(o.newTemplate.managersTime,i)||(o.newTemplate.managersTime=i),Re(i)}),F()()}if(e&2){let n=me(2);$(),qt("ngModel",n.newTemplate.managersTime)}}function aSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",51),xe(3,"path",74)(4,"path",75),F()()())}function sSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",51),xe(3,"path",76)(4,"path",77),F()()())}function lSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",51),xe(3,"path",78)(4,"path",79)(5,"path",80),F()()())}function cSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"circle",82)(4,"path",83),F()()())}function uSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",84)(4,"path",85)(5,"path",86)(6,"path",87),F()()())}function fSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",88)(4,"path",89),F()()())}function pSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",89)(4,"path",90),F()()())}function dSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"circle",82)(4,"path",90),F()()())}function hSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",91)(4,"path",92),F()()())}function mSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50),xe(2,"path",93),F()())}function gSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50),xe(2,"path",94),F()())}function vSe(e,t){if(e&1){let n=pt();D(0,"nz-form-item")(1,"nz-select",95),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.options,i)||(o.options=i),Re(i)}),xe(2,"nz-option"),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.options)}}function ySe(e,t){if(e&1){let n=pt();D(0,"div",32)(1,"nz-checkbox-group",96),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.validation.fileTypes,i)||(o.validation.fileTypes=i),Re(i)}),F()()}if(e&2){let n=me().$implicit;$(),qt("ngModel",n.validation.fileTypes)}}function xSe(e,t){if(e&1){let n=pt();D(0,"div",32)(1,"div",97)(2,"nz-input-group",98)(3,"input",99),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.validation.minLength,i)||(o.validation.minLength=i),Re(i)}),F()()(),D(4,"div",97)(5,"nz-input-group",100)(6,"input",99),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.validation.maxLength,i)||(o.validation.maxLength=i),Re(i)}),F()()()()}if(e&2){let n=me().$implicit;$(3),qt("ngModel",n.validation.minLength),$(3),qt("ngModel",n.validation.maxLength)}}function bSe(e,t){if(e&1){let n=pt();D(0,"div",32)(1,"div",97)(2,"nz-input-group",101)(3,"input",99),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.validation.minLength,i)||(o.validation.minLength=i),Re(i)}),F()()(),D(4,"div",97)(5,"nz-input-group",102)(6,"input",99),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.validation.maxLength,i)||(o.validation.maxLength=i),Re(i)}),F()()()()}if(e&2){let n=me().$implicit;$(3),qt("ngModel",n.validation.minLength),$(3),qt("ngModel",n.validation.maxLength)}}function _Se(e,t){if(e&1){let n=pt();D(0,"div",62)(1,"nz-input-group",103)(2,"input",64),Gt("ngModelChange",function(i){ze(n);let o=me().$implicit;return Ut(o.validation.pattern,i)||(o.validation.pattern=i),Re(i)}),F()()()}if(e&2){let n=me().$implicit;$(2),qt("ngModel",n.validation.pattern)}}function wSe(e,t){if(e&1){let n=pt();D(0,"div")(1,"div",46),Xe("dndCanceled",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListRight,"none"))})("dndCopied",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListRight,"move"))})("dndEnd",function(i){ze(n);let o=me(2);return Re(o.onDragEnd(i))})("dndLinked",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListRight,"link"))})("dndMoved",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListRight,"move"))})("dndStart",function(i){ze(n);let o=me(2);return Re(o.onDragStart(i))}),D(2,"div",47)(3,"div",48)(4,"span",49),Ct(),D(5,"svg",50)(6,"g",51),xe(7,"path",52)(8,"path",53),F()()()(),Yn(),D(9,"div",54)(10,"div",55)(11,"div")(12,"div",56)(13,"div",54)(14,"div",56)(15,"div",57),Je(16,aSe,5,0,"span",15)(17,sSe,5,0,"span",15)(18,lSe,6,0,"span",15)(19,cSe,5,0,"span",15)(20,uSe,7,0,"span",15)(21,fSe,5,0,"span",15)(22,pSe,5,0,"span",15)(23,dSe,5,0,"span",15)(24,hSe,5,0,"span",15)(25,mSe,3,0,"span",15)(26,gSe,3,0,"span",15),F(),D(27,"div",58),ce(28),F()()(),D(29,"div",59)(30,"div",60),ce(31," Mark as required "),F(),D(32,"div")(33,"nz-switch",61),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.validation.required,i)||(o.validation.required=i),Re(i)}),F()()()(),D(34,"div",62)(35,"nz-input-group",63)(36,"input",64),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.fieldName,i)||(o.fieldName=i),Re(i)}),F()()(),Je(37,vSe,3,1,"nz-form-item",15),D(38,"nz-collapse")(39,"nz-collapse-panel",65)(40,"h5"),ce(41,"Validation"),F(),Je(42,ySe,2,1,"div",66)(43,xSe,7,2,"div",66)(44,bSe,7,2,"div",66)(45,_Se,3,1,"div",67),D(46,"h5"),ce(47,"Additional Information"),F(),D(48,"div",62)(49,"nz-input-group",68)(50,"input",64),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.helpText,i)||(o.helpText=i),Re(i)}),F()()(),D(51,"div",62)(52,"nz-input-group",69)(53,"textarea",70),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.comment,i)||(o.comment=i),Re(i)}),F()()()()()()()(),D(54,"div",48)(55,"span",71),Xe("click",function(){let i=ze(n).index,o=me(2);return Re(o.removeDropzone(i))}),Ct(),D(56,"svg",50),xe(57,"path",72)(58,"path",73),F()()()()()()}if(e&2){let n=t.$implicit,r=me(2);$(),oe("dndDraggable",n),$(15),oe("ngIf",n.content==="short-text"),$(),oe("ngIf",n.content==="long-text"),$(),oe("ngIf",n.content==="date"),$(),oe("ngIf",n.content==="time"),$(),oe("ngIf",n.content==="date-time"),$(),oe("ngIf",n.content==="number"),$(),oe("ngIf",n.content==="checkbox"),$(),oe("ngIf",n.content==="radio"),$(),oe("ngIf",n.content==="email"),$(),oe("ngIf",n.content==="select"),$(),oe("ngIf",n.content==="upload"),$(2),Wt(" ",r.formatText(n.content)," "),$(5),qt("ngModel",n.validation.required),$(3),qt("ngModel",n.fieldName),$(),oe("ngIf",Yi(22,eSe).includes(n.content)),$(5),oe("ngIf",Yi(23,tSe).includes(n.content)),$(),oe("ngIf",Yi(24,nSe).includes(n.content)),$(),oe("ngIf",Yi(25,rSe).includes(n.content)),$(),oe("ngIf",Yi(26,iSe).includes(n.content)),$(5),qt("ngModel",n.helpText),$(3),qt("ngModel",n.comment)}}function SSe(e,t){if(e&1){let n=pt();D(0,"div")(1,"div")(2,"div")(3,"div",28)(4,"input",29),Gt("ngModelChange",function(i){ze(n);let o=me();return Ut(o.newTemplate.title,i)||(o.newTemplate.title=i),Re(i)}),F()(),D(5,"div",30)(6,"textarea",31),Gt("ngModelChange",function(i){ze(n);let o=me();return Ut(o.newTemplate.description,i)||(o.newTemplate.description=i),Re(i)}),F()(),D(7,"div",32)(8,"div",33)(9,"label",34),Gt("ngModelChange",function(i){ze(n);let o=me();return Ut(o.newTemplate.requiresManager,i)||(o.newTemplate.requiresManager=i),Re(i)}),ce(10,"Requires Manager"),F()(),Je(11,oSe,2,1,"div",35),F()(),D(12,"div",36)(13,"div",37)(14,"div",38),Xe("dndDrop",function(i){ze(n);let o=me();return Re(o.onDrop(i,o.draggableListRight))}),D(15,"div",39)(16,"div",40),ce(17," Drop Here "),F()(),Je(18,wSe,59,27,"div",41),F()()(),D(19,"div",42)(20,"button",43),Xe("click",function(){ze(n);let i=me();return Re(i.previewForm())}),xe(21,"span",44),ce(22," Preview "),F()()()()}if(e&2){let n=me();$(4),qt("ngModel",n.newTemplate.title),$(2),qt("ngModel",n.newTemplate.description),$(3),qt("ngModel",n.newTemplate.requiresManager),$(2),oe("ngIf",n.newTemplate.requiresManager),$(2),oe("ngClass",n.draggableListRight.length>0?"dropzone-added-space":""),$(),pb("horizontal",n.layout.dndHorizontal),oe("dndHorizontal",n.layout.dndHorizontal),$(4),oe("ngForOf",n.draggableListRight)}}function CSe(e,t){if(e&1&&xe(0,"nz-option",120),e&2){let n=t.$implicit;oe("nzValue",n)("nzLabel",n.name)}}function OSe(e,t){if(e&1){let n=pt();D(0,"div")(1,"h5"),ce(2),F(),D(3,"div",104)(4,"nz-select",105),Xe("ngModelChange",function(i){let o=ze(n).index,a=me(2);return Re(a.updateApprovers(o,i))}),Je(5,CSe,1,2,"nz-option",106),F()(),D(6,"div",107)(7,"div",8)(8,"nz-select",108),Xe("ngModelChange",function(i){let o=ze(n).index,a=me(2);return Re(a.updateRole(o,i))}),xe(9,"nz-option",109)(10,"nz-option",110)(11,"nz-option",111)(12,"nz-option",112)(13,"nz-option",113)(14,"nz-option",114)(15,"nz-option",115)(16,"nz-option",116)(17,"nz-option",117),F()(),D(18,"div",33)(19,"nz-input-number-group",118)(20,"nz-input-number",119),Xe("ngModelChange",function(i){let o=ze(n).index,a=me(2);return Re(a.updateTime(o,i))}),F()()()(),D(21,"div",62),xe(22,"hr"),F()()}if(e&2){let n=t.$implicit,r=t.index,i=me(2);$(2),Wt("Approver(s) Level ",r,""),$(2),oe("ngModel",n.approvers),$(),oe("ngForOf",i.users),$(3),oe("ngModel",n.role),$(12),oe("nzStep",1)("ngModel",n.time)}}function MSe(e,t){if(e&1){let n=pt();D(0,"div"),Je(1,OSe,23,6,"div",41),D(2,"div",62)(3,"div")(4,"button",43),Xe("click",function(){ze(n);let i=me();return Re(i.addNewList())}),ce(5," Add New List "),F()()()()}if(e&2){let n=me();$(),oe("ngForOf",n.groupOfApprovers)}}function kSe(e,t){if(e&1){let n=pt();D(0,"afc-button",18),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.next())}),F()}e&2&&(br("cancel"),oe("label","Next")("disableButton",!1)("loading",!1))}function ESe(e,t){if(e&1){let n=pt();D(0,"afc-button",18),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.done())}),F()}if(e&2){let n=me();br("primary"),oe("label","Submit")("disableButton",!1)("loading",n.createTemplateLoader)}}function ASe(e,t){e&1&&uv(0)}function TSe(e,t){if(e&1){let n=pt();D(0,"li",121),Xe("click",function(){let i=ze(n).index,o=me();return Re(o.selectEditOption(i))}),Je(1,ASe,1,0,"ng-container",122),F()}if(e&2){let n=t.$implicit,r=t.index,i=me();oe("ngClass",i.currentEditOption==r?"authorise-edit-tab-li-active":""),$(),oe("ngTemplateOutlet",i.getEditOption(n.name))}}function PSe(e,t){e&1&&(Ct(),D(0,"svg",123),xe(1,"path",124)(2,"path",125),F())}function NSe(e,t){e&1&&(Ct(),D(0,"svg",123),xe(1,"path",126),F())}function LSe(e,t){e&1&&(Ct(),D(0,"svg",123),xe(1,"circle",127)(2,"ellipse",128)(3,"path",129),F())}function ISe(e,t){e&1&&(Ct(),D(0,"svg",123)(1,"defs")(2,"mask",130)(3,"g",51),xe(4,"path",131)(5,"path",132),F()()(),xe(6,"path",133),F())}function DSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",51),xe(3,"path",74)(4,"path",75),F()()())}function zSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",51),xe(3,"path",76)(4,"path",77),F()()())}function RSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",51),xe(3,"path",78)(4,"path",79)(5,"path",80),F()()())}function FSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"circle",82)(4,"path",83),F()()())}function BSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",84)(4,"path",85)(5,"path",86)(6,"path",87),F()()())}function jSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",88)(4,"path",89),F()()())}function VSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",89)(4,"path",90),F()()())}function HSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"circle",82)(4,"path",90),F()()())}function WSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50)(2,"g",81),xe(3,"path",91)(4,"path",92),F()()())}function qSe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50),xe(2,"path",93),F()())}function USe(e,t){e&1&&(D(0,"span"),Ct(),D(1,"svg",50),xe(2,"path",94),F()())}function GSe(e,t){if(e&1){let n=pt();D(0,"div",141),Xe("dndCanceled",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListLeft,"none"))})("dndCopied",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListLeft,"copy"))})("dndEnd",function(i){ze(n);let o=me(2);return Re(o.onDragEnd(i))})("dndLinked",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListLeft,"link"))})("dndMoved",function(){let i=ze(n).$implicit,o=me(2);return Re(o.onDragged(i,o.draggableListLeft,"move"))})("dndStart",function(i){ze(n);let o=me(2);return Re(o.onDragStart(i))}),D(1,"div",142)(2,"div",56)(3,"div",59)(4,"span",143),Ct(),D(5,"svg",50)(6,"g",51),xe(7,"path",52)(8,"path",53),F()()()(),Yn(),D(9,"div",59)(10,"div",144),Je(11,DSe,5,0,"span",15)(12,zSe,5,0,"span",15)(13,RSe,6,0,"span",15)(14,FSe,5,0,"span",15)(15,BSe,7,0,"span",15)(16,jSe,5,0,"span",15)(17,VSe,5,0,"span",15)(18,HSe,5,0,"span",15)(19,WSe,5,0,"span",15)(20,qSe,3,0,"span",15)(21,USe,3,0,"span",15),F()(),D(22,"div",54)(23,"p",145),ce(24),F(),D(25,"p",146),ce(26," This is some descriptive text "),F()()()()()}if(e&2){let n=t.$implicit,r=me(2);oe("dndDisableIf",n.disable)("dndDraggable",n)("dndEffectAllowed",n.effectAllowed),$(11),oe("ngIf",n.content==="short-text"),$(),oe("ngIf",n.content==="long-text"),$(),oe("ngIf",n.content==="date"),$(),oe("ngIf",n.content==="time"),$(),oe("ngIf",n.content==="date-time"),$(),oe("ngIf",n.content==="number"),$(),oe("ngIf",n.content==="checkbox"),$(),oe("ngIf",n.content==="radio"),$(),oe("ngIf",n.content==="email"),$(),oe("ngIf",n.content==="select"),$(),oe("ngIf",n.content==="upload"),$(3),Wt(" ",r.formatText(n.content)," ")}}function $Se(e,t){if(e&1){let n=pt();D(0,"div")(1,"h5",134),ce(2,"Fields"),F(),D(3,"p",135),ce(4," Drag and Drop Field Elements to Create the Form "),D(5,"span",136),Ct(),D(6,"svg",123),xe(7,"path",137),F()()(),Yn(),D(8,"div",138),Xe("dndDrop",function(i){ze(n);let o=me();return Re(o.onDrop(i,o.draggableListLeft))}),xe(9,"div",139),Je(10,GSe,27,15,"div",140),F()()}if(e&2){let n=me();$(8),pb("horizontal",n.layout.dndHorizontal),oe("dndHorizontal",n.layout.dndHorizontal),$(2),oe("ngForOf",n.draggableListLeft)}}function YSe(e,t){e&1&&(D(0,"div")(1,"h5",134),ce(2,"Actioners"),F(),D(3,"p",135),ce(4," Select the actioners for the template "),D(5,"span",147),Ct(),D(6,"svg",123),xe(7,"path",137),F()()()())}function XSe(e,t){}function KSe(e,t){if(e&1&&(D(0,"h1"),ce(1),F(),D(2,"p"),ce(3),F(),D(4,"div"),xe(5,"app-form-preview",148),F()),e&2){let n=me();$(),Yt(n.newTemplate.title),$(2),Yt(n.newTemplate.description),$(2),oe("fields",n.formPreview)}}function ZSe(e,t){}var mg=(()=>{let t=class t{constructor(r,i,o,a){this.routingService=r,this.usersService=i,this.templatesService=o,this.notificationService=a,this.onCreateTemplateSuccess=new Ja,this.draggableListLeft=[],this.draggableListRight=[],this.horizontalLayoutActive=!1,this.verticalLayout={container:"row",list:"column",dndHorizontal:!1},this.layout=this.verticalLayout,this.horizontalLayout={container:"row",list:"row wrap",dndHorizontal:!0},this.documentEditOptions=[{name:"fields"},{name:"actioners"}],this.currentEditOption=0,this.createTemplateLoader=!1,this.getUsersLoader=!1,this.subs=new ci,this.html="",this.selectedNode=null,this.parent="",this.groupOfApprovers=[{approvers:[],role:"",time:0}],this.fullTemplate={title:"",description:"",form:{}},this.isVisible=!1,this.isConfirmLoading=!1,this.formPreview=[],this.newTemplate={title:"",description:"",subCategoryId:this.subcategoryId,generic:!1,requiresManager:!1,managersTime:10,actioners:[],form:{time:0,includeRichTextEditor:!1,blocks:[]}}}ngOnChanges(r){this.newTemplate.subCategoryId=this.subcategoryId}ngOnDestroy(){this.editor.destroy(),this.subs.dispose()}setHorizontalLayout(r){this.layout=r?this.horizontalLayout:this.verticalLayout}onDragStart(r){this.currentDragEffectMsg="",this.currentDraggableEvent=r}onDragged(r,i,o){if(this.currentDragEffectMsg=`Drag ended with effect "${o}"!`,o==="move"){let a=i.indexOf(r);i.splice(a,1)}}initialiseDraggables(){this.draggableListLeft=[{content:"short-text",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:""}},{content:"long-text",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:""}},{content:"number",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:""}},{content:"checkbox",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:""}},{content:"email",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:""}},{content:"select",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:""}},{content:"upload",effectAllowed:"move",disable:!1,handle:!1,fieldName:"",helpText:"",options:[],comment:"",validation:{required:!1,minLength:"",maxLength:"",min:"",max:"",pattern:"",fileTypes:[{label:"images",value:"images",checked:!1},{label:"document",value:"document",checked:!1},{label:"spreadsheet",value:"spreadsheet",checked:!1},{label:"audio",value:"audio",checked:!1},{label:"video",value:"video",checked:!1},{label:"zip",value:"zip",checked:!1}]}}]}log(r){console.log(r)}onDragEnd(r){this.currentDraggableEvent=r,console.log("The drag event has ended"),this.initialiseDraggables()}onDrop(r,i){if(i&&(r.dropEffect==="copy"||r.dropEffect==="move")){let o=r.index;typeof o>"u"&&(o=i.length),i.splice(o,0,r.data)}}formatText(r){return r.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}removeDropzone(r){this.draggableListRight.splice(r,1)}getEditOption(r){switch(r){case"fields":return this.fieldsTemplate;case"actioners":return this.actionersTemplate;default:return null}}selectEditOption(r){this.currentEditOption=r}pre(){this.currentEditOption-=1}next(){this.currentEditOption+=1}done(){this.formatForm(),this.newTemplate.form.blocks=this.formPreview,this.handleActioners(),console.log(this.newTemplate),this.submitCreateTemplate()}submitCreateTemplate(){this.createTemplateLoader=!0,this.templatesService.createTemplate(this.newTemplate)}handleActioners(){this.newTemplate.actioners=[],this.groupOfApprovers.forEach((r,i)=>{r.approvers.forEach(o=>{let a={assignedUser:o.email,escalationUser:o.manager,role:r.role,index:i,time:r.time};this.newTemplate.actioners.push(a)})})}onGetUsersResponse(r){console.log(r),r.success&&(this.users=r.data)}getUsers(){this.getUsersLoader=!0,this.usersService.getUsers()}ngOnInit(){this.editor=new vm,this.initialiseDraggables(),this.getUsers(),this.subs.add=this.usersService.getUsersResponse$.subscribe(r=>{this.onGetUsersResponse(r),this.getUsersLoader=!1}),this.subs.add=this.templatesService.createTemplateResponse$.subscribe(r=>{this.onCreateTemplate(r)})}onCreateTemplate(r){r.success?(this.notificationService.create("success","Success",r.message),this.createTemplateLoader=!1,this.onCreateTemplateSuccess.emit(r)):this.notificationService.create("error","Failed",r.message)}addNewList(){this.groupOfApprovers.push({approvers:[],role:"",time:0})}updateApprovers(r,i){this.groupOfApprovers[r].approvers=i}updateRole(r,i){this.groupOfApprovers[r].role=i}updateTime(r,i){this.groupOfApprovers[r].time=i}logList(){console.log(this.groupOfApprovers)}onBack(){this.routingService.navigateByUrl("authorise/templates/all")}formatFieldName(r){return r.toLowerCase().replace(/\s+/g,"-")}formatForm(){this.formPreview=[],console.log("Draggable list: ",this.draggableListRight);for(let r of this.draggableListRight){let i=[];if(r.content=="checkbox")for(let a of r.options){let s={label:a,value:a,checked:!1};i.push(s)}else i.push(r);let o=[{type:r.content,label:r.fieldName,name:this.formatFieldName(r.fieldName),id:this.formatFieldName(r.fieldName),value:null,options:i,validations:r.validation,help:r.helpText,comment:r.comment}];this.formPreview?.push(o)}}previewForm(){this.formPreview=[],this.formatForm(),console.log("Form Preview: ",this.formPreview),this.showModal()}showModal(){this.isVisible=!0}handleOk(){this.isConfirmLoading=!0,setTimeout(()=>{this.isVisible=!1,this.isConfirmLoading=!1},1e3)}handleCancel(){this.isVisible=!1}};t.\u0275fac=function(i){return new(i||t)(ht(cr),ht(QC),ht($1),ht(Zi))},t.\u0275cmp=tn({type:t,selectors:[["app-create-template"]],viewQuery:function(i,o){if(i&1&&(Qa(J3e,7),Qa(Q3e,7)),i&2){let a;es(a=ts())&&(o.fieldsTemplate=a.first),es(a=ts())&&(o.actionersTemplate=a.first)}},inputs:{subcategoryId:"subcategoryId"},outputs:{onCreateTemplateSuccess:"onCreateTemplateSuccess"},features:[cv],decls:39,vars:17,consts:[["slaTemplate",""],["fieldsTemplate",""],["actionersTemplate",""],["additionalTemplate",""],["modalTitle",""],["modalContent",""],["modalFooter",""],[1,"row"],[1,"col-md-8"],[3,"nzCurrent"],["nzTitle","Form"],["nzTitle","Actioners"],[1,"steps-content"],[1,"authorise-document-a4-page"],[1,"authorise-document-content"],[4,"ngIf"],[1,"steps-action","row",2,"padding","10px 0"],[1,"col","d-flex","justify-content-start"],[3,"buttonClick","label","disableButton","loading"],[1,"col","d-flex","justify-content-end"],[3,"label","disableButton","loading","style","buttonClick",4,"ngIf"],[1,"col-md-4","authorise-document-edit-tools-container"],[1,"row","h-100"],[1,"col","content-tabs"],[1,"authorise-edit-tabs"],["class","authorise-edit-tab-li",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col","authorise-form-builder-tools-content"],["nzWidth","210mm",3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter"],[1,"d-flex","justify-content-center"],["nz-input","","placeholder","Template Title",1,"authorise-template-title-input",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center","mt-3"],["rows","2","nz-input","","placeholder","Template Description",1,"authorise-template-description-input",3,"ngModelChange","ngModel"],[1,"row","mt-3"],[1,"col-md-4"],["nz-checkbox","",3,"ngModelChange","ngModel"],["class","col-md-4",4,"ngIf"],[1,"authorise-form-content-container"],[1,"authorise-form-content",3,"ngClass"],["dndDropzone","","dndEffectAllowed","copyMove",1,"dndList","gap-3","flex-grow-1","d-flex","flex-column",2,"min-height","82px",3,"dndDrop","dndHorizontal"],["dndPlaceholderRef","",1,"dndPlaceholder","h-100","border","rounded-1","bg-white","bg-opacity-25",2,"min-height","82px"],[1,"d-flex","justify-content-center","align-items-center","h-100"],[4,"ngFor","ngForOf"],[1,"mt-3","d-flex","justify-content-center"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","eye"],["nzMin","1","nz-input","","placeholder","Template Title",1,"authorise-template-title-input",3,"ngModelChange","ngModel"],[3,"dndCanceled","dndCopied","dndEnd","dndLinked","dndMoved","dndStart","dndDraggable"],[1,"d-flex","justify-content-between","align-items-center","mt-3","authorise-dropzone-form-element-area"],[1,"ml-2"],["nzTooltipTitle","Drag","nzTooltipPlacement","left","nz-button","","nz-tooltip","",1,"dropzone-drag-icon"],["xmlns","http://www.w3.org/2000/svg","width","3em","height","3em","viewBox","0 0 24 24"],["fill","none"],["d","M24 0v24H0V0zM12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"],["fill","currentColor","d","M9 4.5a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3m1.5 7.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m0 6a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m6-6a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0M15 16.5a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3M16.5 6a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0"],[1,"flex-grow-1"],[1,"authorise-form-element"],[1,"d-flex"],[1,"authorise-document-edit-icon"],[1,"authorise-document-edit-text"],[1,"ml-2","d-flex","align-items-center"],[1,"authorise-mark-as-required-text"],["nzSize","small",3,"ngModelChange","ngModel"],[1,"mt-3"],["nzAddOnBefore","Field Name: "],["type","text","nz-input","",1,"authorise-meta-data-form-input",3,"ngModelChange","ngModel"],["nzHeader","Additional Settings","nzActive","false"],["class","row mt-3",4,"ngIf"],["class","mt-3",4,"ngIf"],["nzAddOnBefore","Help Text (Optional): "],["nzAddOnBefore","Comment: "],["rows","2","type","number","nz-input","",1,"authorise-meta-data-form-input",3,"ngModelChange","ngModel"],["nzTooltipTitle","Delete","nzTooltipPlacement","left","nz-button","","nz-tooltip","",1,"dropzone-delete-icon",3,"click"],["fill","currentColor","d","M11.607 22h.787c2.707 0 4.06 0 4.941-.863c.88-.864.97-2.28 1.15-5.111l.26-4.081c.098-1.537.147-2.305-.295-2.792c-.442-.487-1.187-.487-2.679-.487H8.23c-1.491 0-2.237 0-2.679.487c-.441.487-.392 1.255-.295 2.792l.26 4.08c.18 2.833.27 4.248 1.15 5.112C7.545 22 8.9 22 11.607 22","opacity","0.5"],["fill","currentColor","d","M3 6.524c0-.395.327-.714.73-.714h4.788c.006-.842.098-1.995.932-2.793A3.68 3.68 0 0 1 12 2a3.68 3.68 0 0 1 2.55 1.017c.834.798.926 1.951.932 2.793h4.788c.403 0 .73.32.73.714a.722.722 0 0 1-.73.714H3.73A.722.722 0 0 1 3 6.524"],["fill","currentColor","d","M8.25 15.5a.75.75 0 0 0 1.5 0zm3.414-6.748l.498-.56zm-.414 1.673a.75.75 0 0 0 1.5 0zm.498-1.59l.56-.497zm-5.412-.083l-.498-.56zM5.25 10.425a.75.75 0 0 0 1.5 0zm1.002-1.59l-.56-.497zM7 14.75a.75.75 0 0 0 0 1.5zm4 1.5a.75.75 0 0 0 0-1.5zm-3.075-7H9v-1.5H7.925zM9 9.25h1.075v-1.5H9zm.75 6.25v-7h-1.5v7zm.325-6.25c.455 0 .726.001.922.026c.177.022.186.052.17.037l.995-1.121c-.3-.268-.651-.364-.98-.405c-.31-.038-.691-.037-1.107-.037zm2.675 1.175c0-.416.001-.797-.037-1.107c-.041-.329-.137-.68-.405-.98l-1.121.996c-.015-.017.015-.008.037.17c.025.195.026.466.026.921zm-1.584-1.112a.25.25 0 0 1 .02.02l1.122-.995a1.737 1.737 0 0 0-.146-.146zM7.925 7.75c-.416 0-.797-.001-1.107.037c-.329.041-.68.137-.98.405l.996 1.121c-.017.015-.008-.015.17-.037c.195-.025.466-.026.921-.026zM6.75 10.425c0-.455.001-.726.026-.922c.022-.177.052-.186.037-.17l-1.121-.995c-.268.3-.364.651-.405.98c-.038.31-.037.691-.037 1.107zm-.912-2.233c-.052.046-.1.094-.146.146l1.121.996a.252.252 0 0 1 .02-.02zM7 16.25h4v-1.5H7z"],["stroke","currentColor","stroke-linecap","round","stroke-width","1.5","d","M12 4h-2C6.229 4 4.343 4 3.172 5.172C2 6.343 2 8.229 2 12c0 3.771 0 5.657 1.172 6.828C4.343 20 6.229 20 10 20h2m3-16c3.114.01 4.765.108 5.828 1.172C22 6.343 22 8.229 22 12c0 3.771 0 5.657-1.172 6.828C19.765 19.892 18.114 19.99 15 20m0-18v20"],["stroke","currentColor","stroke-linecap","round","stroke-width","1.5","d","M13 7H3m7 5H3m5 5H3"],["fill","currentColor","d","M11.316 16.692a.75.75 0 1 0 1.368.616zM16.5 7l.684-.308a.75.75 0 0 0-1.368 0zm3.816 10.308a.75.75 0 1 0 1.368-.616zm-.952-3.944l.684-.308zm-5.728-.75a.75.75 0 0 0 0 1.5zm-.952 4.694l4.5-10l-1.368-.616l-4.5 10zm9-.616l-1.636-3.636l-1.368.615l1.636 3.637zm-1.636-3.636l-2.864-6.364l-1.368.616l2.864 6.363zm-.684-.442h-5.728v1.5h5.728z"],["stroke","currentColor","stroke-width","1.5","d","M2 12c0-3.771 0-5.657 1.172-6.828C4.343 4 6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172C22 6.343 22 8.229 22 12v2c0 3.771 0 5.657-1.172 6.828C19.657 22 17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172C2 19.657 2 17.771 2 14z"],["stroke","currentColor","stroke-linecap","round","stroke-width","1.5","d","M7 4V2.5M17 4V2.5M2.5 9h19"],["fill","currentColor","d","M18 17a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0-4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-5 4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0-4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-5 4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0-4a1 1 0 1 1-2 0a1 1 0 0 1 2 0"],["fill","none","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","12","r","10"],["stroke-linecap","round","stroke-linejoin","round","d","M12 8v4l2.5 2.5"],["d","M2 12c0-3.771 0-5.657 1.172-6.828C4.343 4 6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172C22 6.343 22 8.229 22 12v2c0 3.771 0 5.657-1.172 6.828C19.657 22 17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172C2 19.657 2 17.771 2 14z"],["stroke-linecap","round","d","M7 4V2.5M17 4V2.5"],["stroke-linecap","round","stroke-linejoin","round","d","m9 14.5l1.5-1.5v4"],["stroke-linecap","round","d","M13 16v-2a1 1 0 1 1 2 0v2a1 1 0 1 1-2 0ZM2.5 9h19"],["stroke-linecap","round","stroke-linejoin","round","d","M11 7L8 17m8-10l-3 10m5-7H7m10 4H6"],["d","M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"],["stroke-linecap","round","stroke-linejoin","round","d","m8.5 12.5l2 2l5-5"],["d","M2 12c0-3.771 0-5.657 1.172-6.828C4.343 4 6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172C22 6.343 22 8.229 22 12c0 3.771 0 5.657-1.172 6.828C19.657 20 17.771 20 14 20h-4c-3.771 0-5.657 0-6.828-1.172C2 17.657 2 15.771 2 12Z"],["stroke-linecap","round","d","m6 8l2.159 1.8c1.837 1.53 2.755 2.295 3.841 2.295c1.086 0 2.005-.765 3.841-2.296L18 8"],["fill","currentColor","fill-rule","evenodd","d","M8.048 2.488a.75.75 0 0 1-.036 1.06l-4.286 4a.75.75 0 0 1-1.095-.076l-1.214-1.5a.75.75 0 0 1 1.166-.944l.708.875l3.697-3.451a.75.75 0 0 1 1.06.036M11.25 5a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75M8.048 9.488a.75.75 0 0 1-.036 1.06l-4.286 4a.75.75 0 0 1-1.095-.076l-1.214-1.5a.75.75 0 1 1 1.166-.944l.708.875l3.697-3.451a.75.75 0 0 1 1.06.036M11.25 12a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75m-3.202 4.488a.75.75 0 0 1-.036 1.06l-4.286 4a.75.75 0 0 1-1.095-.076l-1.214-1.5a.75.75 0 1 1 1.166-.944l.708.875l3.697-3.451a.75.75 0 0 1 1.06.036M11.25 19a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75","clip-rule","evenodd"],["fill","currentColor","fill-rule","evenodd","d","M11.244 1.955c1.7-.94 3.79-.94 5.49 0c.63.348 1.218.91 2.173 1.825l.093.09l.098.093c.95.91 1.54 1.475 1.906 2.081a5.14 5.14 0 0 1 0 5.337c-.366.607-.955 1.17-1.906 2.08l-.098.095l-7.457 7.14c-.53.506-.96.92-1.34 1.226c-.393.316-.78.561-1.235.692a3.5 3.5 0 0 1-1.937 0c-.454-.13-.841-.376-1.234-.692c-.38-.307-.811-.72-1.34-1.226l-.048-.046c-.529-.507-.96-.92-1.28-1.283c-.33-.376-.592-.753-.733-1.201a3.2 3.2 0 0 1 0-1.907c.14-.448.402-.825.733-1.2c.32-.364.751-.777 1.28-1.284l7.35-7.038l.079-.075c.369-.354.68-.654 1.041-.82a2.4 2.4 0 0 1 2.007 0c.36.166.672.466 1.041.82l.079.075l.08.078c.367.35.683.651.86 1.003a2.21 2.21 0 0 1 0 1.994a2.3 2.3 0 0 1-.391.538c-.142.152-.323.326-.535.529l-7.394 7.08a.75.75 0 0 1-1.038-1.083l7.38-7.067c.23-.22.38-.364.488-.48a1 1 0 0 0 .15-.191a.71.71 0 0 0 0-.646c-.044-.088-.143-.198-.638-.671c-.492-.471-.61-.57-.71-.617a.9.9 0 0 0-.75 0c-.101.047-.22.146-.711.617L5.47 14.836c-.558.535-.943.904-1.215 1.213c-.267.304-.376.496-.428.66a1.7 1.7 0 0 0 0 1.008c.052.163.16.355.428.659c.272.31.657.678 1.215 1.213c.56.535.945.904 1.269 1.165c.316.255.523.365.707.418c.361.104.747.104 1.108 0c.184-.053.391-.163.707-.418c.324-.261.71-.63 1.269-1.165l7.433-7.117c1.08-1.034 1.507-1.453 1.756-1.866a3.65 3.65 0 0 0 0-3.787c-.249-.413-.676-.832-1.756-1.866c-1.079-1.032-1.518-1.444-1.954-1.685a4.2 4.2 0 0 0-4.039 0c-.437.24-.876.653-1.954 1.685l-5.99 5.735A.75.75 0 0 1 2.99 9.605L8.98 3.87l.093-.09c.955-.914 1.543-1.477 2.172-1.825","clip-rule","evenodd"],["nzMode","tags","nzPlaceHolder","Please select",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"col-md-6"],["nzAddOnBefore","Minimum Length: "],["type","number","nz-input","",1,"authorise-meta-data-form-input",3,"ngModelChange","ngModel"],["nzAddOnBefore","Maximum Length: "],["nzAddOnBefore","Minimum: "],["nzAddOnBefore","Maximum: "],["nzAddOnBefore","Pattern (Regex): "],[1,"mt-3","container-fluid"],["nzMode","multiple","nzPlaceHolder","Select approvers",2,"width","100%",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"mt-3","row","container-fluid"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select role",3,"ngModelChange","ngModel"],["nzLabel","AUTHORISER","nzValue","AUTHORISER"],["nzLabel","APPROVER","nzValue","APPROVER"],["nzLabel","INPUTTER","nzValue","INPUTTER"],["nzLabel","IMPLEMENTER","nzValue","IMPLEMENTER"],["nzLabel","AUDITOR","nzValue","AUDITOR"],["nzLabel","TELLER","nzValue","TELLER"],["nzLabel","MANAGER","nzValue","MANAGER"],["nzLabel","DATA CAPTURER","nzValue","DATA_CAPTURER"],["nzLabel","ADMIN","nzValue","ADMIN"],["nzAddOnAfter","minutes"],[3,"ngModelChange","nzStep","ngModel"],[3,"nzValue","nzLabel"],[1,"authorise-edit-tab-li",3,"click","ngClass"],[4,"ngTemplateOutlet"],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","currentColor","fill-rule","evenodd","d","M2 6.634a4.634 4.634 0 1 1 9.268 0a4.634 4.634 0 0 1-9.268 0m10.732 10.732a4.634 4.634 0 1 1 9.268 0a4.634 4.634 0 0 1-9.268 0","clip-rule","evenodd"],["fill","currentColor","d","M2 17.5c0-2.121 0-3.182.659-3.841C3.318 13 4.379 13 6.5 13c2.121 0 3.182 0 3.841.659c.659.659.659 1.72.659 3.841c0 2.121 0 3.182-.659 3.841C9.682 22 8.621 22 6.5 22c-2.121 0-3.182 0-3.841-.659C2 20.682 2 19.621 2 17.5m11-11c0-2.121 0-3.182.659-3.841C14.318 2 15.379 2 17.5 2c2.121 0 3.182 0 3.841.659C22 3.318 22 4.379 22 6.5c0 2.121 0 3.182-.659 3.841c-.659.659-1.72.659-3.841.659c-2.121 0-3.182 0-3.841-.659C13 9.682 13 8.621 13 6.5"],["fill","currentColor","fill-rule","evenodd","d","M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10m.75-13a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25z","clip-rule","evenodd"],["cx","9.001","cy","6","r","4","fill","currentColor"],["cx","9.001","cy","17.001","fill","currentColor","rx","7","ry","4"],["fill","currentColor","d","M21 17c0 1.657-2.036 3-4.521 3c.732-.8 1.236-1.805 1.236-2.998c0-1.195-.505-2.2-1.239-3.001C18.962 14 21 15.344 21 17M18 6a3 3 0 0 1-4.029 2.82A5.688 5.688 0 0 0 14.714 6c0-1.025-.27-1.987-.742-2.819A3 3 0 0 1 18 6.001"],["id","solarCardBold0"],["fill","#fff","d","M14 4h-4C6.229 4 4.343 4 3.172 5.172c-.844.843-1.08 2.057-1.146 4.078h19.948c-.066-2.021-.302-3.235-1.146-4.078C19.657 4 17.771 4 14 4m-4 16h4c3.771 0 5.657 0 6.828-1.172C22 17.657 22 15.771 22 12c0-.442 0-.858-.002-1.25H2.002C2 11.142 2 11.558 2 12c0 3.771 0 5.657 1.172 6.828C4.343 20 6.229 20 10 20"],["fill","#000","fill-rule","evenodd","d","M5.25 16a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75m6.5 0a.75.75 0 0 1 .75-.75H14a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75","clip-rule","evenodd"],["fill","currentColor","d","M0 0h24v24H0z","mask","url(#solarCardBold0)"],[1,"authorise-form-builder-tools-heading"],[1,"authorise-form-builder-tools-details"],["nzTooltipTitle","Select the form elements from the list below and drag them into the drop zone on the left","nzTooltipPlacement","topRight","nz-button","","nz-tooltip","",1,"authorise-helper-text"],["fill","currentColor","fill-rule","evenodd","d","M12 2.75a9.25 9.25 0 1 0 0 18.5a9.25 9.25 0 0 0 0-18.5M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12S17.937 22.75 12 22.75S1.25 17.937 1.25 12M12 7.75c-.621 0-1.125.504-1.125 1.125a.75.75 0 0 1-1.5 0a2.625 2.625 0 1 1 3.96 2.26a1.9 1.9 0 0 0-.465.369c-.102.12-.12.2-.12.246V13a.75.75 0 0 1-1.5 0v-1.25c0-.506.222-.916.477-1.217c.252-.297.566-.524.845-.689A1.124 1.124 0 0 0 12 7.75M12 17a1 1 0 1 0 0-2a1 1 0 0 0 0 2","clip-rule","evenodd"],["dndDropzone","","dndEffectAllowed","copyMove",1,"dndList","gap-1","d-flex","flex-column",3,"dndDrop","dndHorizontal"],["dndPlaceholderRef","",1,"dndPlaceholder"],[3,"dndDisableIf","dndDraggable","dndEffectAllowed","dndCanceled","dndCopied","dndEnd","dndLinked","dndMoved","dndStart",4,"ngFor","ngForOf"],[3,"dndCanceled","dndCopied","dndEnd","dndLinked","dndMoved","dndStart","dndDisableIf","dndDraggable","dndEffectAllowed"],[1,"authorise-draggable-item"],["nzTooltipTitle","Drag","nzTooltipPlacement","left","nz-button","","nz-tooltip","",1,"draggable-drag-icon"],[1,"authorise-draggable-icon"],[1,"authorise-draggable-heading"],[1,"authorise-draggable-content"],["nzTooltipTitle","You can select multiple approvers at the same level to create a collaborative group","nzTooltipPlacement","topRight","nz-button","","nz-tooltip","",1,"authorise-helper-text"],[3,"fields"]],template:function(i,o){if(i&1){let a=pt();D(0,"div",7)(1,"div",8)(2,"nz-steps",9),xe(3,"nz-step",10)(4,"nz-step",11),F(),D(5,"div",12)(6,"div",13)(7,"div",14),Je(8,SSe,23,9,"div",15)(9,MSe,6,1,"div",15),F()()(),D(10,"div",16)(11,"div",17)(12,"afc-button",18),Xe("buttonClick",function(){return ze(a),Re(o.pre())}),F()(),D(13,"div",19),Je(14,kSe,1,5,"afc-button",20)(15,ESe,1,5,"afc-button",20),F()()(),D(16,"div",21)(17,"div",22)(18,"div",23)(19,"ul",24),Je(20,TSe,2,2,"li",25)(21,PSe,3,0,"ng-template",null,0,dn)(23,NSe,2,0,"ng-template",null,1,dn)(25,LSe,4,0,"ng-template",null,2,dn)(27,ISe,7,0,"ng-template",null,3,dn),F()(),D(29,"div",26),Je(30,$Se,11,4,"div",15)(31,YSe,8,0,"div",15),F()()()(),D(32,"nz-modal",27),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(33,XSe,0,0,"ng-template",null,4,dn)(35,KSe,6,3,"ng-template",null,5,dn)(37,ZSe,0,0,"ng-template",null,6,dn),F()}if(i&2){let a=bn(34),s=bn(36),l=bn(38);$(2),oe("nzCurrent",o.currentEditOption),$(6),oe("ngIf",o.currentEditOption==0),$(),oe("ngIf",o.currentEditOption==1),$(3),br("cancel"),oe("label","Previous")("disableButton",o.currentEditOption==0)("loading",!1),$(2),oe("ngIf",o.currentEditOption<1),$(),oe("ngIf",o.currentEditOption===1),$(5),oe("ngForOf",o.documentEditOptions),$(10),oe("ngIf",o.currentEditOption==0),$(),oe("ngIf",o.currentEditOption==1),$(),qt("nzVisible",o.isVisible),oe("nzTitle",a)("nzContent",s)("nzFooter",l)}},dependencies:[Jm,Xi,Ki,vb,Ji,Hc,Kn,Vc,Xn,ss,Ml,ra,RI,FI,ls,as,i0,Tb,Ab,Nb,Pb,El,Cb,UI,t9,n9,Cl,t0,yo,is,o9,s9,a9,UO],styles:[".authorise-template-title-input[_ngcontent-%COMP%]{font-size:20px;text-align:center;border:1px solid #efefef;border-radius:8px;font-weight:600}.authorise-template-title-input[_ngcontent-%COMP%]:hover{border:1px solid #2ab347}.authorise-template-description-input[_ngcontent-%COMP%]{font-size:16px;text-align:center;border:1px solid #efefef;border-radius:8px}.authorise-template-description-input[_ngcontent-%COMP%]:hover{border:1px solid #2ab347}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.content-tabs[_ngcontent-%COMP%]{max-width:fit-content;padding:0;margin-left:10px;border-right:1px solid #dee2e6}.authorise-document-a4-page[_ngcontent-%COMP%]{padding:10px;margin:auto;border-radius:4px;background-color:#fffc;box-shadow:0 0 2rem #33475005;overflow-y:scroll;overflow-x:hidden;height:calc(100vh - 220px)}.authorise-draggable-item[_ngcontent-%COMP%]{background:#fff;padding:10px 5px;border-radius:4px;border:1px solid #efefef;transition-duration:.5s}.authorise-draggable-item[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #68c27a;box-shadow:#0000001a 0 4px 12px}.authorise-draggable-item[_ngcontent-%COMP%]:hover   .authorise-draggable-heading[_ngcontent-%COMP%]{font-weight:900;color:#2ab347}.authorise-dropzone[_ngcontent-%COMP%]{padding:10px;border-radius:8px;background:#fafafa;border:1px dashed #d9d9d9}.authorise-form-element[_ngcontent-%COMP%]{padding:10px}.authorise-document-edit-tools-container[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:10px;border-radius:8px;max-height:calc(100vh - 250px);margin-top:42px}.authorise-edit-tab-li[_ngcontent-%COMP%]{padding:10px;border-right:5px solid transparent;transition-duration:.5s;color:#393842}.authorise-edit-tab-li[_ngcontent-%COMP%]:hover{color:#2ab347;cursor:pointer}.authorise-edit-tab-li-active[_ngcontent-%COMP%]{border-right:5px solid #2ab347;color:#2ab347}.my-dropzone[_ngcontent-%COMP%]{padding:20px}.dropzone-icon[_ngcontent-%COMP%]{color:#2ab347}.dropzone-delete-icon[_ngcontent-%COMP%]{color:#ff4d4f;font-size:8px;margin-left:20px}.dropzone-delete-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.dropzone-edit-icon[_ngcontent-%COMP%]{color:#949494;margin-left:20px}.dropzone-edit-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.dropzone-header[_ngcontent-%COMP%]{font-weight:600;font-size:22px}.dropzone-content[_ngcontent-%COMP%]{font-weight:200;font-size:16px;margin-top:6px}.ant-picker[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%}.authorise-form-element-name-input[_ngcontent-%COMP%]{border:none}.authorise-document-edit-icon[_ngcontent-%COMP%]{padding:8px;font-size:6px;background:#f2f2f2;border-radius:4px;display:inline-table}.authorise-draggable-icon[_ngcontent-%COMP%]{padding:8px;font-size:6px;background:#f2f2f2;border-radius:4px;display:inline-table;margin:0 10px;color:#868f99}.authorise-document-edit-text[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:10px;font-size:14px;font-weight:600}.authorise-mark-as-required-text[_ngcontent-%COMP%]{margin-right:10px;font-size:14px}.authorise-dropzone-form-element-area[_ngcontent-%COMP%]{padding:10px;margin:10px;border-radius:8px;border:1px solid #efefef;transition-duration:.5s;background:#fff}.authorise-dropzone-form-element-area[_ngcontent-%COMP%]:hover{box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}.dropzone-drag-icon[_ngcontent-%COMP%]{font-size:12px;color:#d8d8d8}.draggable-drag-icon[_ngcontent-%COMP%]{font-size:8px;color:#d8d8d8}  .ant-input-group-addon{border:1px solid #d9d9d9;border-right:none;padding:0 0 0 10px;background:transparent;font-size:12px;font-weight:600}.authorise-meta-data-form-input[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-left:none;margin:0;font-size:12px}.authorise-draggable-heading[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:14px;transition-duration:.5s}.authorise-draggable-content[_ngcontent-%COMP%]{margin:0;font-size:12px}[_nghost-%COMP%]{display:block}pre[_ngcontent-%COMP%]{text-align:center;padding:8px}.dndList[_ngcontent-%COMP%]{transition:all .3s ease;padding:5px}.dndList[_ngcontent-%COMP%]:not(.horizontal).dndDragover{padding-top:12px;padding-bottom:12px}.dndList.horizontal.dndDragover[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;padding-bottom:12px}.dndList.horizontal[_ngcontent-%COMP%]   .mat-mdc-list-item[_ngcontent-%COMP%]{max-width:120px;margin:2px}.dndDragging[_ngcontent-%COMP%]{border:1px solid #90d39d;border-radius:4px}.dndDraggingSource[_ngcontent-%COMP%]{display:none}.dndPlaceholder[_ngcontent-%COMP%]{min-height:72px}.authorise-form-content-container[_ngcontent-%COMP%]{height:calc(100vh - 464px);overflow:scroll}.authorise-form-content[_ngcontent-%COMP%]{padding:10px;border-radius:8px;background:#fafafa;border:1px dashed #d9d9d9;margin-top:20px}.steps-content[_ngcontent-%COMP%]{margin-top:10px}.my-modal[_ngcontent-%COMP%]{width:210mm!important}.ant-collapse[_ngcontent-%COMP%]{margin-top:15px}.dropzone-added-space[_ngcontent-%COMP%]{padding-bottom:150px}.authorise-form-builder-tools-content[_ngcontent-%COMP%]{max-height:calc(100vh - 270px);overflow-y:scroll}.ant-collapse[_ngcontent-%COMP%] > .ant-collapse-item[_ngcontent-%COMP%] > .ant-collapse-header[_ngcontent-%COMP%]{font-size:12px}.authorise-form-builder-tools-heading[_ngcontent-%COMP%]{font-size:16px;margin:10px 0 15px;font-weight:600}.authorise-form-builder-tools-details[_ngcontent-%COMP%]{font-size:14px;color:#818a8e;margin-bottom:10px;font-weight:600}.authorise-helper-text[_ngcontent-%COMP%]{font-size:20px;transition-duration:.5s}.authorise-helper-text[_ngcontent-%COMP%]:hover{color:#2ab347;cursor:pointer}nz-input-group[_ngcontent-%COMP%]{margin-bottom:8px}  .highlight{color:#f50}.selected-node[_ngcontent-%COMP%]{background-color:#2ab347;color:#fff}.ant-select[_ngcontent-%COMP%]{width:100%}"]});let e=t;return e})();var JSe=["childRef"],QSe=()=>({top:"20px"});function e4e(e,t){e&1&&(D(0,"span",31),Ct(),D(1,"svg",32)(2,"g",33),xe(3,"path",34)(4,"path",35),F()()(),ce(5," Form "))}function t4e(e,t){e&1&&(D(0,"div"),xe(1,"nz-skeleton",36),F()),e&2&&($(),oe("nzActive",!0))}function n4e(e,t){if(e&1&&(D(0,"div")(1,"div",37)(2,"div",38)(3,"div")(4,"div",39)(5,"p",40),ce(6,' This is just the form preview. Click "Next" if this is the correct form. '),F()(),D(7,"div",39)(8,"h1"),ce(9),F()(),D(10,"div",39)(11,"p"),ce(12),F()(),D(13,"div"),xe(14,"app-form-preview",41),F()()()()()),e&2){let n=me(2);$(9),Yt(n.template.title),$(3),Yt(n.template.description),$(2),oe("fields",n.template.form.blocks)}}function r4e(e,t){e&1&&(D(0,"div"),xe(1,"nz-empty"),F())}function i4e(e,t){e&1&&(D(0,"span",31),Ct(),D(1,"svg",32),xe(2,"path",42),F()(),ce(3," Collaborators "))}function o4e(e,t){e&1&&(D(0,"div"),xe(1,"nz-skeleton",36),F()),e&2&&($(),oe("nzActive",!0))}function a4e(e,t){if(e&1&&(D(0,"div",46),xe(1,"nz-avatar",47),ce(2),xe(3,"br"),F()),e&2){let n=t.$implicit;$(2),Wt(" ",n.assignedUser," ")}}function s4e(e,t){if(e&1&&(D(0,"div",44)(1,"h5"),ce(2),F(),Je(3,a4e,4,1,"div",45),F()),e&2){let n=t.$implicit;$(2),db(" Level ",n[0].index+1," - ",n[0].role," ( ",n[0].time," minutes ) "),$(),oe("ngForOf",n)}}function l4e(e,t){if(e&1&&(D(0,"div")(1,"div"),Je(2,s4e,4,4,"div",43),F()()),e&2){let n=me(2);$(2),oe("ngForOf",n.groupedActioners)}}function c4e(e,t){e&1&&(D(0,"div"),xe(1,"nz-empty"),F())}function u4e(e,t){if(e&1){let n=pt();D(0,"div",26)(1,"div",27)(2,"afc-button",22),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.openGenericFormModal())}),F()(),D(3,"div",26)(4,"nz-cascader",28),Gt("ngModelChange",function(i){ze(n);let o=me();return Ut(o.selectedTemplate,i)||(o.selectedTemplate=i),Re(i)}),Xe("ngModelChange",function(i){ze(n);let o=me();return Re(o.onSelectTemplate(i))}),F()(),D(5,"div")(6,"nz-tabset")(7,"nz-tab",29),Je(8,e4e,6,0,"ng-template",null,3,dn)(10,t4e,2,1,"div",30)(11,n4e,15,3,"div",30)(12,r4e,2,0,"div",30),F(),D(13,"nz-tab",29),Je(14,i4e,4,0,"ng-template",null,4,dn)(16,o4e,2,1,"div",30)(17,l4e,3,1,"div",30)(18,c4e,2,0,"div",30),F()()()()}if(e&2){let n=bn(9),r=bn(15),i=me();$(2),br("primary"),oe("label","Create Generic Form")("disableButton",!1)("loading",!1)("size","sm"),$(2),oe("nzExpandTrigger","hover")("nzOptions",i.categoriesList),qt("ngModel",i.selectedTemplate),$(3),oe("nzTitle",n),$(3),oe("ngIf",i.getTemplateLoader),$(),oe("ngIf",i.template&&!i.getTemplateLoader),$(),oe("ngIf",!i.template&&!i.getTemplateLoader),$(),oe("nzTitle",r),$(3),oe("ngIf",i.getSlaLoader),$(),oe("ngIf",i.agreement&&!i.getSlaLoader),$(),oe("ngIf",!i.agreement&&!i.getSlaLoader)}}function f4e(e,t){if(e&1){let n=pt();D(0,"div",26)(1,"div",48)(2,"div",38)(3,"div")(4,"div",39)(5,"h1"),ce(6),F()(),D(7,"div",39)(8,"p"),ce(9),F()()(),D(10,"app-dynamic-form",49,5),Xe("formDataEmitter",function(i){ze(n);let o=me();return Re(o.receiveFormData(i))}),F()()()()}if(e&2){let n=me();$(6),Yt(n.template.title),$(3),Yt(n.template.description),$(),oe("fields",n.form)}}function p4e(e,t){if(e&1&&(D(0,"div")(1,"b"),ce(2),F(),ce(3),F()),e&2){let n=me().$implicit;$(2),Wt("",n.id,": "),$(),Wt(" ",n.value," ")}}function d4e(e,t){if(e&1){let n=pt();D(0,"label",53),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.checked,i)||(o.checked=i),Re(i)}),ce(1),F()}if(e&2){let n=t.$implicit,r=me(2).$implicit;oe("disabled",!0),qt("ngModel",n.checked),oe("name",r.id),$(),Yt(n.label)}}function h4e(e,t){if(e&1&&(D(0,"div")(1,"b"),ce(2),F(),Je(3,d4e,2,4,"label",52),F()),e&2){let n=me().$implicit;$(2),Wt("",n.id,": "),$(),oe("ngForOf",n.options)}}function m4e(e,t){if(e&1&&(D(0,"div",26),Je(1,p4e,4,2,"div",30)(2,h4e,4,2,"div",30),F()),e&2){let n=t.$implicit;$(),oe("ngIf",n.type!="checkbox"),$(),oe("ngIf",n.type=="checkbox")}}function g4e(e,t){if(e&1&&(D(0,"div",48)(1,"div",50)(2,"div")(3,"div",39)(4,"h1"),ce(5),F()(),D(6,"div",39)(7,"p"),ce(8),F()()(),Je(9,m4e,3,2,"div",51),F()()),e&2){let n=me();$(5),Yt(n.template.title),$(3),Yt(n.template.description),$(),oe("ngForOf",n.form)}}function v4e(e,t){if(e&1){let n=pt();D(0,"afc-button",22),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.next())}),F()}if(e&2){let n=me();br("cancel"),oe("label","Next")("disableButton",n.current===0&&(!n.template||!n.agreement))("loading",!1)("size","sm")}}function y4e(e,t){if(e&1){let n=pt();D(0,"afc-button",22),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.done())}),F()}if(e&2){let n=me();br("primary"),oe("label","Done")("disableButton",!1)("loading",n.createNewDocumentLoader)("size","sm")}}function x4e(e,t){}function b4e(e,t){if(e&1){let n=pt();D(0,"app-create-template",54),Xe("onCreateTemplateSuccess",function(i){ze(n);let o=me();return Re(o.onCreateTemplateSuccess(i))}),F()}if(e&2){let n=me();oe("subcategoryId",n.genericFormSubcategoryId)}}function _4e(e,t){}var gZ=(()=>{let t=class t{constructor(r,i,o,a,s,l){this.documentsService=r,this.routingService=i,this.categoriesService=o,this.notificationService=a,this.templatesService=s,this.cdnService=l,this.subs=new ci,this.getCategoriesLoader=!1,this.createNewDocumentLoader=!1,this.form=[],this.current=0,this.newDocument={templateId:"",form:{},mediaIds:[]},this.selectTemplateLoader=!1,this.getTemplateLoader=!1,this.getSlaLoader=!1,this.genericFormSubcategoryId=252,this.isVisible=!1}ngOnInit(){this.getCategories(),this.subs.add=this.categoriesService.getCategoriesResponse$.subscribe(r=>{this.onGetCategories(r)}),this.subs.add=this.templatesService.getTemplateResponse$.subscribe(r=>{this.onGetTemplate(r)}),this.subs.add=this.templatesService.getSlaAgreementResponse$.subscribe(r=>{this.onGetSlaAgreement(r)}),this.subs.add=this.documentsService.newDocumentResponse$.subscribe(r=>{this.onCreateNewDocument(r)})}onBack(){this.routingService.navigateByUrl("authorise/documents/all")}onCreateNewDocument(r){console.log(r),r.success?(this.notificationService.create("success","Success",r.message),this.routingService.navigateByUrl("authorise/documents/all")):this.notificationService.create("error","Error",r.message),this.createNewDocumentLoader=!1}onGetTemplate(r){console.log(r),r.success?(this.template=r.data,this.getSlaAgreement(this.template.slaAgreementId),this.formatForm()):this.notificationService.create("error","Error",r.message),this.getTemplateLoader=!1}onGetSlaAgreement(r){console.log(r),r.success?(this.agreement=r.data,this.group()):this.notificationService.create("error","Error",r.message),this.getSlaLoader=!1,this.selectTemplateLoader=!1}formatForm(){this.form=[];for(let r of this.template.form.blocks){console.log("------------------"),console.log(r),console.log("------------------");let i=[{type:r[0].type,label:r[0].label,name:r.name,id:r[0].id,value:r[0].value,options:r[0].options,validations:r[0].validations,comments:r[0].comments}];this.form?.push(i)}this.form=this.rawJsonFlatten(this.form),console.log("The form: ",this.form)}group(){let r=this.agreement.agreementDetails.reduce((o,a)=>(a.index===-1||(o[a.index]||(o[a.index]=[]),o[a.index].push(a)),o),{}),i=Object.entries(r).map(([o,a])=>({index:Number(o),items:a}));this.groupedActioners=Object.values(r),console.log("Grouped Actioners: ",this.groupedActioners)}rawJsonFlatten(r){return r.flat()}pre(){this.current-=1}next(){this.current==1&&this.child.emitFormData(),this.current+=1}done(){console.log("done"),this.createNewDocument()}receiveFormData(r){console.log("Received data from child:",r),this.form=r,console.log("The update form: ",this.form)}createNewDocument(){this.createNewDocumentLoader=!0,console.log("Form: ",this.form);let r=[];this.form.forEach((i,o)=>{if(i.type==="upload"&&Array.isArray(i.value)){let a=new FormData;i.value.forEach(l=>{l.originFileObj&&a.append("files",l.originFileObj)}),a.append("owner","WEB"),a.append("operation","UPLOAD"),a.append("path","authorise"),a.append("data","{}");let s=new Promise((l,c)=>{this.cdnService.uploadFile(a).subscribe({next:u=>{console.log("Upload successful",u),i.value=u.data,l()},error:u=>{console.error("Error uploading files",u),c(u)}})});r.push(s)}}),Promise.all(r).then(()=>{console.log("All uploads complete."),console.log("Form after uploading: ",this.form),this.newDocument.templateId=this.selectedTemplate,this.newDocument.form={time:new Date().toLocaleTimeString(),blocks:this.form},this.documentsService.newDocument(this.newDocument)}).catch(i=>{console.error("Error in one or more uploads:",i)})}getCategories(){this.getCategoriesLoader=!0,this.categoriesService.getCategories()}onGetCategories(r){r.success?(this.categories=r.data,console.log(this.categories),this.createCategoriesList(this.categories)):(this.categories=null,this.notificationService.create("error","Error","Failed to fetch categories")),setTimeout(()=>this.getCategoriesLoader=!1,800)}createCategoriesList(r){this.categoriesList=[];for(let i of r){console.log(i);let o={value:i.name,label:i.name,children:[]};for(let a of i.subCategories){console.log(a);let s={value:a.name,label:a.name,children:[]};for(let l of a.templates){console.log(l);let c={value:l.id,label:l.title,isLeaf:!0};s.children.push(c)}o.children.push(s)}this.categoriesList.push(o)}}onSelectTemplate(r){this.template=null,this.agreement=null,this.selectTemplateLoader=!0,console.log("The selected value: ",r),this.selectedTemplate=r[2],console.log(this.selectedTemplate),this.getSelectedTemplate(r[2])}getSelectedTemplate(r){this.getTemplateLoader=!0,console.log("Getting template"),this.templatesService.getTemplate(r)}getSlaAgreement(r){this.getSlaLoader=!0,this.templatesService.getSlaAgreement(r)}openGenericFormModal(){this.showModal()}showModal(){this.isVisible=!0}handleCancel(){this.isVisible=!1}onCreateTemplateSuccess(r){console.log(r),this.selectedTemplate=r.data.id,this.getSelectedTemplate(this.selectedTemplate),this.handleCancel()}ngOnDestroy(){this.subs.dispose()}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr),ht(e0),ht(Zi),ht($1),ht(Y1))},t.\u0275cmp=tn({type:t,selectors:[["app-create-document"]],viewQuery:function(i,o){if(i&1&&Qa(JSe,5),i&2){let a;es(a=ts())&&(o.child=a.first)}},decls:34,vars:18,consts:[["modalTitle",""],["modalContent",""],["modalFooter",""],["formTemplate",""],["collaboratorsTemplate",""],["childRef",""],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to view all documents",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../workspace"],["nz-icon","","nzType","home"],["routerLink","../all"],[1,"page-card","d-flex","flex-column"],[3,"nzCurrent"],["nzTitle","Category"],["nzTitle","Form"],["nzTitle","Confirm"],[1,"steps-content","flex-grow-1"],["class","mt-3",4,"ngIf"],["class","authorise-document-a4-page-container",4,"ngIf"],[1,"steps-action"],[1,"steps-action","row",2,"padding","10px 0"],[1,"col","d-flex","justify-content-start"],[3,"buttonClick","label","disableButton","loading","size"],[1,"col","d-flex","justify-content-end"],[3,"label","disableButton","loading","style","size","buttonClick",4,"ngIf"],["nzWidth","90vw","nzDraggable","",3,"nzVisibleChange","nzOnCancel","nzStyle","nzVisible","nzTitle","nzContent","nzFooter"],[1,"mt-3"],[1,"mt-3","d-flex","justify-content-end"],[3,"ngModelChange","nzExpandTrigger","nzOptions","ngModel"],[3,"nzTitle"],[4,"ngIf"],["nz-icon",""],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","color","currentColor"],["d","M15 2.5V4c0 1.414 0 2.121.44 2.56C15.878 7 16.585 7 18 7h1.5"],["d","M4 16V8c0-2.828 0-4.243.879-5.121C5.757 2 7.172 2 10 2h4.172c.408 0 .613 0 .797.076c.183.076.328.22.617.51l3.828 3.828c.29.29.434.434.51.618c.076.183.076.388.076.796V16c0 2.828 0 4.243-.879 5.121C18.243 22 16.828 22 14 22h-4c-2.828 0-4.243 0-5.121-.879C4 20.243 4 18.828 4 16m4-5h8m-8 3h8m-8 3h4.17"],[3,"nzActive"],[1,"authorise-document-a4-page-container-alt"],["id","authorise-document",1,"authorise-document-a4-page"],[1,"d-flex","justify-content-center"],[1,"form-preview-notification"],[3,"fields"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M20.774 18c.75 0 1.345-.471 1.88-1.13c1.096-1.35-.703-2.43-1.389-2.957c-.697-.537-1.476-.842-2.265-.913m-1-2a2.5 2.5 0 0 0 0-5M3.226 18c-.75 0-1.345-.471-1.88-1.13c-1.096-1.35.703-2.43 1.389-2.957C3.432 13.376 4.21 13.07 5 13m.5-2a2.5 2.5 0 0 1 0-5m2.584 9.111c-1.022.632-3.701 1.922-2.07 3.536C6.813 19.436 7.7 20 8.817 20h6.368c1.117 0 2.004-.564 2.801-1.353c1.632-1.614-1.047-2.904-2.069-3.536a7.46 7.46 0 0 0-7.832 0M15.5 7.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0","color","currentColor"],["class","mb-5",4,"ngFor","ngForOf"],[1,"mb-5"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],["nzIcon","user",2,"background-color","#87d068"],[1,"authorise-document-a4-page-container"],[3,"formDataEmitter","fields"],[1,"authorise-document-a4-page"],["class","mt-3",4,"ngFor","ngForOf"],["nz-checkbox","",3,"disabled","ngModel","name","ngModelChange",4,"ngFor","ngForOf"],["nz-checkbox","",3,"ngModelChange","disabled","ngModel","name"],[3,"onCreateTemplateSuccess","subcategoryId"]],template:function(i,o){if(i&1){let a=pt();D(0,"div")(1,"nz-page-header",6),Xe("nzBack",function(){return ze(a),Re(o.onBack())}),D(2,"nz-breadcrumb",7)(3,"nz-breadcrumb-item",8),xe(4,"span",9),F(),D(5,"nz-breadcrumb-item")(6,"a",10),ce(7,"All Documents"),F()(),D(8,"nz-breadcrumb-item"),ce(9,"Create Document"),F()()()(),D(10,"div",11)(11,"div")(12,"nz-steps",12),xe(13,"nz-step",13)(14,"nz-step",14)(15,"nz-step",15),F()(),D(16,"div",16),Je(17,u4e,19,17,"div",17)(18,f4e,12,3,"div",17)(19,g4e,10,3,"div",18),F(),D(20,"div",19)(21,"div",20)(22,"div",21)(23,"afc-button",22),Xe("buttonClick",function(){return ze(a),Re(o.pre())}),F()(),D(24,"div",23),Je(25,v4e,1,6,"afc-button",24)(26,y4e,1,6,"afc-button",24),F()()()(),D(27,"nz-modal",25),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(28,x4e,0,0,"ng-template",null,0,dn)(30,b4e,1,1,"ng-template",null,1,dn)(32,_4e,0,0,"ng-template",null,2,dn),F()}if(i&2){let a=bn(29),s=bn(31),l=bn(33);$(12),oe("nzCurrent",o.current),$(5),oe("ngIf",o.current==0),$(),oe("ngIf",o.current==1),$(),oe("ngIf",o.current==2),$(4),br("cancel"),oe("label","Previous")("disableButton",!(o.current>0))("loading",!1)("size","sm"),$(2),oe("ngIf",o.current<2),$(),oe("ngIf",o.current===2),$(),oe("nzStyle",Yi(17,QSe)),qt("nzVisible",o.isVisible),oe("nzTitle",a)("nzContent",s)("nzFooter",l)}},dependencies:[Xi,Ki,ei,Ji,Kn,qr,Wr,Xn,ui,wi,kl,Wc,ls,Sb,wb,qc,Tb,Ab,El,QI,yo,is,pZ,mg,UO],styles:[".page-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;transition-duration:.8s;height:calc(100vh - 180px);overflow-y:scroll}.authorise-document-a4-page[_ngcontent-%COMP%]{padding:10px 20px;margin:auto;border-radius:4px;background-color:#fffc;box-shadow:0 0 2rem #33475005;overflow-x:hidden;height:calc(100vh - 250px);max-width:210mm;max-height:297mm;overflow-y:scroll}.authorise-document-a4-page-container[_ngcontent-%COMP%]{max-height:calc(100vh - 320px);overflow-x:hidden;overflow-y:scroll}.authorise-document-a4-page-container-alt[_ngcontent-%COMP%]{max-height:calc(100vh - 418px);overflow-x:hidden;overflow-y:scroll}.authorise-document-a4-page[_ngcontent-%COMP%]{padding:12mm 10mm!important;margin:auto;border-radius:2px;background-color:#fff;box-shadow:0 0 2rem #33475005;height:297mm;min-height:297mm;max-width:21cm;border:1px solid transparent;page-break-after:always}.authorise-document-a4-page[_ngcontent-%COMP%]:active{border:1px solid #d7f2de}.form-preview-notification[_ngcontent-%COMP%]{font-family:Space Mono,monospace;padding:10px;background:#fafafa;border:1px dashed;color:#2ab347;border-radius:2px}"]});let e=t;return e})();function _g(e){let t=e.length;for(;--t>=0;)e[t]=0}var w4e=0,tJ=1,S4e=2,C4e=3,O4e=258,aL=29,Sx=256,mx=Sx+1+aL,yg=30,sL=19,nJ=2*mx+1,ym=15,RN=16,M4e=7,lL=256,rJ=16,iJ=17,oJ=18,ZN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),QO=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),k4e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),aJ=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E4e=512,Nf=new Array((mx+2)*2);_g(Nf);var px=new Array(yg*2);_g(px);var gx=new Array(E4e);_g(gx);var vx=new Array(O4e-C4e+1);_g(vx);var cL=new Array(aL);_g(cL);var eM=new Array(yg);_g(eM);function FN(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var sJ,lJ,cJ;function BN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var uJ=e=>e<256?gx[e]:gx[256+(e>>>7)],yx=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},ks=(e,t,n)=>{e.bi_valid>RN-n?(e.bi_buf|=t<<e.bi_valid&65535,yx(e,e.bi_buf),e.bi_buf=t>>RN-e.bi_valid,e.bi_valid+=n-RN):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ou=(e,t,n)=>{ks(e,n[t*2],n[t*2+1])},fJ=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},A4e=e=>{e.bi_valid===16?(yx(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},T4e=(e,t)=>{let n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length,c,u,f,p,d,h,m=0;for(p=0;p<=ym;p++)e.bl_count[p]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<nJ;c++)u=e.heap[c],p=n[n[u*2+1]*2+1]+1,p>l&&(p=l,m++),n[u*2+1]=p,!(u>r)&&(e.bl_count[p]++,d=0,u>=s&&(d=a[u-s]),h=n[u*2],e.opt_len+=h*(p+d),o&&(e.static_len+=h*(i[u*2+1]+d)));if(m!==0){do{for(p=l-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(p=l;p!==0;p--)for(u=e.bl_count[p];u!==0;)f=e.heap[--c],!(f>r)&&(n[f*2+1]!==p&&(e.opt_len+=(p-n[f*2+1])*n[f*2],n[f*2+1]=p),u--)}},pJ=(e,t,n)=>{let r=new Array(ym+1),i=0,o,a;for(o=1;o<=ym;o++)i=i+n[o-1]<<1,r[o]=i;for(a=0;a<=t;a++){let s=e[a*2+1];s!==0&&(e[a*2]=fJ(r[s]++,s))}},P4e=()=>{let e,t,n,r,i,o=new Array(ym+1);for(n=0,r=0;r<aL-1;r++)for(cL[r]=n,e=0;e<1<<ZN[r];e++)vx[n++]=r;for(vx[n-1]=r,i=0,r=0;r<16;r++)for(eM[r]=i,e=0;e<1<<QO[r];e++)gx[i++]=r;for(i>>=7;r<yg;r++)for(eM[r]=i<<7,e=0;e<1<<QO[r]-7;e++)gx[256+i++]=r;for(t=0;t<=ym;t++)o[t]=0;for(e=0;e<=143;)Nf[e*2+1]=8,e++,o[8]++;for(;e<=255;)Nf[e*2+1]=9,e++,o[9]++;for(;e<=279;)Nf[e*2+1]=7,e++,o[7]++;for(;e<=287;)Nf[e*2+1]=8,e++,o[8]++;for(pJ(Nf,mx+1,o),e=0;e<yg;e++)px[e*2+1]=5,px[e*2]=fJ(e,5);sJ=new FN(Nf,ZN,Sx+1,mx,ym),lJ=new FN(px,QO,0,yg,ym),cJ=new FN(new Array(0),k4e,0,sL,M4e)},dJ=e=>{let t;for(t=0;t<mx;t++)e.dyn_ltree[t*2]=0;for(t=0;t<yg;t++)e.dyn_dtree[t*2]=0;for(t=0;t<sL;t++)e.bl_tree[t*2]=0;e.dyn_ltree[lL*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},hJ=e=>{e.bi_valid>8?yx(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},vZ=(e,t,n,r)=>{let i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},jN=(e,t,n)=>{let r=e.heap[n],i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&vZ(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!vZ(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},yZ=(e,t,n)=>{let r,i,o=0,a,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+o++]&255,r+=(e.pending_buf[e.sym_buf+o++]&255)<<8,i=e.pending_buf[e.sym_buf+o++],r===0?Ou(e,i,t):(a=vx[i],Ou(e,a+Sx+1,t),s=ZN[a],s!==0&&(i-=cL[a],ks(e,i,s)),r--,a=uJ(r),Ou(e,a,n),s=QO[a],s!==0&&(r-=eM[a],ks(e,r,s)));while(o<e.sym_next);Ou(e,lL,t)},JN=(e,t)=>{let n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,l=-1,c;for(e.heap_len=0,e.heap_max=nJ,a=0;a<o;a++)n[a*2]!==0?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)jN(e,n,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],jN(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[c*2]=n[a*2]+n[s*2],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[a*2+1]=n[s*2+1]=c,e.heap[1]=c++,jN(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],T4e(e,t),pJ(n,l,e.bl_count)},xZ=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],s=0,l=7,c=4;for(a===0&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=a,a=t[(r+1)*2+1],!(++s<l&&o===a)&&(s<c?e.bl_tree[o*2]+=s:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[rJ*2]++):s<=10?e.bl_tree[iJ*2]++:e.bl_tree[oJ*2]++,s=0,i=o,a===0?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4))},bZ=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],s=0,l=7,c=4;for(a===0&&(l=138,c=3),r=0;r<=n;r++)if(o=a,a=t[(r+1)*2+1],!(++s<l&&o===a)){if(s<c)do Ou(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==i&&(Ou(e,o,e.bl_tree),s--),Ou(e,rJ,e.bl_tree),ks(e,s-3,2)):s<=10?(Ou(e,iJ,e.bl_tree),ks(e,s-3,3)):(Ou(e,oJ,e.bl_tree),ks(e,s-11,7));s=0,i=o,a===0?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4)}},N4e=e=>{let t;for(xZ(e,e.dyn_ltree,e.l_desc.max_code),xZ(e,e.dyn_dtree,e.d_desc.max_code),JN(e,e.bl_desc),t=sL-1;t>=3&&e.bl_tree[aJ[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},L4e=(e,t,n,r)=>{let i;for(ks(e,t-257,5),ks(e,n-1,5),ks(e,r-4,4),i=0;i<r;i++)ks(e,e.bl_tree[aJ[i]*2+1],3);bZ(e,e.dyn_ltree,t-1),bZ(e,e.dyn_dtree,n-1)},I4e=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(n=32;n<Sx;n++)if(e.dyn_ltree[n*2]!==0)return 1;return 0},_Z=!1,D4e=e=>{_Z||(P4e(),_Z=!0),e.l_desc=new BN(e.dyn_ltree,sJ),e.d_desc=new BN(e.dyn_dtree,lJ),e.bl_desc=new BN(e.bl_tree,cJ),e.bi_buf=0,e.bi_valid=0,dJ(e)},mJ=(e,t,n,r)=>{ks(e,(w4e<<1)+(r?1:0),3),hJ(e),yx(e,n),yx(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},z4e=e=>{ks(e,tJ<<1,3),Ou(e,lL,Nf),A4e(e)},R4e=(e,t,n,r)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=I4e(e)),JN(e,e.l_desc),JN(e,e.d_desc),a=N4e(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?mJ(e,t,n,r):e.strategy===4||o===i?(ks(e,(tJ<<1)+(r?1:0),3),yZ(e,Nf,px)):(ks(e,(S4e<<1)+(r?1:0),3),L4e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),yZ(e,e.dyn_ltree,e.dyn_dtree)),dJ(e),r&&hJ(e)},F4e=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(vx[n]+Sx+1)*2]++,e.dyn_dtree[uJ(t)*2]++),e.sym_next===e.sym_end),B4e=D4e,j4e=mJ,V4e=R4e,H4e=F4e,W4e=z4e,q4e={_tr_init:B4e,_tr_stored_block:j4e,_tr_flush_block:V4e,_tr_tally:H4e,_tr_align:W4e},U4e=(e,t,n,r)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},xx=U4e,G4e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},$4e=new Uint32Array(G4e()),Y4e=(e,t,n,r)=>{let i=$4e,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1},Do=Y4e,_m={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wg={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:X4e,_tr_stored_block:QN,_tr_flush_block:K4e,_tr_tally:cd,_tr_align:Z4e}=q4e,{Z_NO_FLUSH:ud,Z_PARTIAL_FLUSH:J4e,Z_FULL_FLUSH:Q4e,Z_FINISH:Jl,Z_BLOCK:wZ,Z_OK:Qo,Z_STREAM_END:SZ,Z_STREAM_ERROR:Mu,Z_DATA_ERROR:eCe,Z_BUF_ERROR:VN,Z_DEFAULT_COMPRESSION:tCe,Z_FILTERED:nCe,Z_HUFFMAN_ONLY:YO,Z_RLE:rCe,Z_FIXED:iCe,Z_DEFAULT_STRATEGY:oCe,Z_UNKNOWN:aCe,Z_DEFLATED:rM}=wg,sCe=9,lCe=15,cCe=8,uCe=29,fCe=256,eL=fCe+1+uCe,pCe=30,dCe=19,hCe=2*eL+1,mCe=15,ar=3,ld=258,ku=ld+ar+1,gCe=32,xg=42,uL=57,tL=69,nL=73,rL=91,iL=103,xm=113,ux=666,Ua=1,Sg=2,wm=3,Cg=4,vCe=3,bm=(e,t)=>(e.msg=_m[t],t),CZ=e=>e*2-(e>4?9:0),sd=e=>{let t=e.length;for(;--t>=0;)e[t]=0},yCe=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},xCe=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,fd=xCe,al=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},sl=(e,t)=>{K4e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,al(e.strm)},Mr=(e,t)=>{e.pending_buf[e.pending++]=t},cx=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},oL=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=xx(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Do(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},gJ=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,o,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ku?e.strstart-(e.w_size-ku):0,c=e.window,u=e.w_mask,f=e.prev,p=e.strstart+ld,d=c[r+a-1],h=c[r+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(c[i+a]!==h||c[i+a-1]!==d||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<p);if(o=ld-(p-r),r=p-ld,o>a){if(e.match_start=t,a=o,o>=s)break;d=c[r+a-1],h=c[r+a]}}while((t=f[t&u])>l&&--n!==0);return a<=e.lookahead?a:e.lookahead},bg=e=>{let t=e.w_size,n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ku)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),yCe(e),r+=t),e.strm.avail_in===0)break;if(n=oL(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=ar)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=fd(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=fd(e,e.ins_h,e.window[i+ar-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<ar)););}while(e.lookahead<ku&&e.strm.avail_in!==0)},vJ=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,o,a=0,s=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>o&&(r=o),r<n&&(r===0&&t!==Jl||t===ud||r!==i+e.strm.avail_in)))break;a=t===Jl&&r===i+e.strm.avail_in?1:0,QN(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,al(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(oL(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?Cg:t!==ud&&t!==Jl&&e.strm.avail_in===0&&e.strstart===e.block_start?Sg:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(oL(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,n=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=n||(i||t===Jl)&&t!==ud&&e.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,a=t===Jl&&e.strm.avail_in===0&&r===i?1:0,QN(e,e.block_start,r,a),e.block_start+=r,al(e.strm)),a?wm:Ua)},HN=(e,t)=>{let n,r;for(;;){if(e.lookahead<ku){if(bg(e),e.lookahead<ku&&t===ud)return Ua;if(e.lookahead===0)break}if(n=0,e.lookahead>=ar&&(e.ins_h=fd(e,e.ins_h,e.window[e.strstart+ar-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ku&&(e.match_length=gJ(e,n)),e.match_length>=ar)if(r=cd(e,e.strstart-e.match_start,e.match_length-ar),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ar){e.match_length--;do e.strstart++,e.ins_h=fd(e,e.ins_h,e.window[e.strstart+ar-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=fd(e,e.ins_h,e.window[e.strstart+1]);else r=cd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(sl(e,!1),e.strm.avail_out===0))return Ua}return e.insert=e.strstart<ar-1?e.strstart:ar-1,t===Jl?(sl(e,!0),e.strm.avail_out===0?wm:Cg):e.sym_next&&(sl(e,!1),e.strm.avail_out===0)?Ua:Sg},gg=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ku){if(bg(e),e.lookahead<ku&&t===ud)return Ua;if(e.lookahead===0)break}if(n=0,e.lookahead>=ar&&(e.ins_h=fd(e,e.ins_h,e.window[e.strstart+ar-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ar-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ku&&(e.match_length=gJ(e,n),e.match_length<=5&&(e.strategy===nCe||e.match_length===ar&&e.strstart-e.match_start>4096)&&(e.match_length=ar-1)),e.prev_length>=ar&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ar,r=cd(e,e.strstart-1-e.prev_match,e.prev_length-ar),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=fd(e,e.ins_h,e.window[e.strstart+ar-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=ar-1,e.strstart++,r&&(sl(e,!1),e.strm.avail_out===0))return Ua}else if(e.match_available){if(r=cd(e,0,e.window[e.strstart-1]),r&&sl(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ua}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=cd(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ar-1?e.strstart:ar-1,t===Jl?(sl(e,!0),e.strm.avail_out===0?wm:Cg):e.sym_next&&(sl(e,!1),e.strm.avail_out===0)?Ua:Sg},bCe=(e,t)=>{let n,r,i,o,a=e.window;for(;;){if(e.lookahead<=ld){if(bg(e),e.lookahead<=ld&&t===ud)return Ua;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ar&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+ld;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=ld-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ar?(n=cd(e,1,e.match_length-ar),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=cd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(sl(e,!1),e.strm.avail_out===0))return Ua}return e.insert=0,t===Jl?(sl(e,!0),e.strm.avail_out===0?wm:Cg):e.sym_next&&(sl(e,!1),e.strm.avail_out===0)?Ua:Sg},_Ce=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(bg(e),e.lookahead===0)){if(t===ud)return Ua;break}if(e.match_length=0,n=cd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(sl(e,!1),e.strm.avail_out===0))return Ua}return e.insert=0,t===Jl?(sl(e,!0),e.strm.avail_out===0?wm:Cg):e.sym_next&&(sl(e,!1),e.strm.avail_out===0)?Ua:Sg};function Cu(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var fx=[new Cu(0,0,0,0,vJ),new Cu(4,4,8,4,HN),new Cu(4,5,16,8,HN),new Cu(4,6,32,32,HN),new Cu(4,4,16,16,gg),new Cu(8,16,32,32,gg),new Cu(8,16,128,128,gg),new Cu(8,32,128,256,gg),new Cu(32,128,258,1024,gg),new Cu(32,258,258,4096,gg)],wCe=e=>{e.window_size=2*e.w_size,sd(e.head),e.max_lazy_match=fx[e.level].max_lazy,e.good_match=fx[e.level].good_length,e.nice_match=fx[e.level].nice_length,e.max_chain_length=fx[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ar-1,e.match_available=0,e.ins_h=0};function SCe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rM,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(hCe*2),this.dyn_dtree=new Uint16Array((2*pCe+1)*2),this.bl_tree=new Uint16Array((2*dCe+1)*2),sd(this.dyn_ltree),sd(this.dyn_dtree),sd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(mCe+1),this.heap=new Uint16Array(2*eL+1),sd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*eL+1),sd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Cx=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==xg&&t.status!==uL&&t.status!==tL&&t.status!==nL&&t.status!==rL&&t.status!==iL&&t.status!==xm&&t.status!==ux?1:0},yJ=e=>{if(Cx(e))return bm(e,Mu);e.total_in=e.total_out=0,e.data_type=aCe;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?uL:t.wrap?xg:xm,e.adler=t.wrap===2?0:1,t.last_flush=-2,X4e(t),Qo},xJ=e=>{let t=yJ(e);return t===Qo&&wCe(e.state),t},CCe=(e,t)=>Cx(e)||e.state.wrap!==2?Mu:(e.state.gzhead=t,Qo),bJ=(e,t,n,r,i,o)=>{if(!e)return Mu;let a=1;if(t===tCe&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>sCe||n!==rM||r<8||r>15||t<0||t>9||o<0||o>iCe||r===8&&a!==1)return bm(e,Mu);r===8&&(r=9);let s=new SCe;return e.state=s,s.strm=e,s.status=xg,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+ar-1)/ar),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=n,xJ(e)},OCe=(e,t)=>bJ(e,t,rM,lCe,cCe,oCe),MCe=(e,t)=>{if(Cx(e)||t>wZ||t<0)return e?bm(e,Mu):Mu;let n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===ux&&t!==Jl)return bm(e,e.avail_out===0?VN:Mu);let r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(al(e),e.avail_out===0)return n.last_flush=-1,Qo}else if(e.avail_in===0&&CZ(t)<=CZ(r)&&t!==Jl)return bm(e,VN);if(n.status===ux&&e.avail_in!==0)return bm(e,VN);if(n.status===xg&&n.wrap===0&&(n.status=xm),n.status===xg){let i=rM+(n.w_bits-8<<4)<<8,o=-1;if(n.strategy>=YO||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,i|=o<<6,n.strstart!==0&&(i|=gCe),i+=31-i%31,cx(n,i),n.strstart!==0&&(cx(n,e.adler>>>16),cx(n,e.adler&65535)),e.adler=1,n.status=xm,al(e),n.pending!==0)return n.last_flush=-1,Qo}if(n.status===uL){if(e.adler=0,Mr(n,31),Mr(n,139),Mr(n,8),n.gzhead)Mr(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Mr(n,n.gzhead.time&255),Mr(n,n.gzhead.time>>8&255),Mr(n,n.gzhead.time>>16&255),Mr(n,n.gzhead.time>>24&255),Mr(n,n.level===9?2:n.strategy>=YO||n.level<2?4:0),Mr(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Mr(n,n.gzhead.extra.length&255),Mr(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Do(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=tL;else if(Mr(n,0),Mr(n,0),Mr(n,0),Mr(n,0),Mr(n,0),Mr(n,n.level===9?2:n.strategy>=YO||n.level<2?4:0),Mr(n,vCe),n.status=xm,al(e),n.pending!==0)return n.last_flush=-1,Qo}if(n.status===tL){if(n.gzhead.extra){let i=n.pending,o=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=Do(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,al(e),n.pending!==0)return n.last_flush=-1,Qo;i=0,o-=s}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=Do(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=nL}if(n.status===nL){if(n.gzhead.name){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Do(e.adler,n.pending_buf,n.pending-i,i)),al(e),n.pending!==0)return n.last_flush=-1,Qo;i=0}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,Mr(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Do(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=rL}if(n.status===rL){if(n.gzhead.comment){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Do(e.adler,n.pending_buf,n.pending-i,i)),al(e),n.pending!==0)return n.last_flush=-1,Qo;i=0}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,Mr(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Do(e.adler,n.pending_buf,n.pending-i,i))}n.status=iL}if(n.status===iL){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(al(e),n.pending!==0))return n.last_flush=-1,Qo;Mr(n,e.adler&255),Mr(n,e.adler>>8&255),e.adler=0}if(n.status=xm,al(e),n.pending!==0)return n.last_flush=-1,Qo}if(e.avail_in!==0||n.lookahead!==0||t!==ud&&n.status!==ux){let i=n.level===0?vJ(n,t):n.strategy===YO?_Ce(n,t):n.strategy===rCe?bCe(n,t):fx[n.level].func(n,t);if((i===wm||i===Cg)&&(n.status=ux),i===Ua||i===wm)return e.avail_out===0&&(n.last_flush=-1),Qo;if(i===Sg&&(t===J4e?Z4e(n):t!==wZ&&(QN(n,0,0,!1),t===Q4e&&(sd(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),al(e),e.avail_out===0))return n.last_flush=-1,Qo}return t!==Jl?Qo:n.wrap<=0?SZ:(n.wrap===2?(Mr(n,e.adler&255),Mr(n,e.adler>>8&255),Mr(n,e.adler>>16&255),Mr(n,e.adler>>24&255),Mr(n,e.total_in&255),Mr(n,e.total_in>>8&255),Mr(n,e.total_in>>16&255),Mr(n,e.total_in>>24&255)):(cx(n,e.adler>>>16),cx(n,e.adler&65535)),al(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Qo:SZ)},kCe=e=>{if(Cx(e))return Mu;let t=e.state.status;return e.state=null,t===xm?bm(e,eCe):Qo},ECe=(e,t)=>{let n=t.length;if(Cx(e))return Mu;let r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==xg||r.lookahead)return Mu;if(i===1&&(e.adler=xx(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(sd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}let o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,bg(r);r.lookahead>=ar;){let l=r.strstart,c=r.lookahead-(ar-1);do r.ins_h=fd(r,r.ins_h,r.window[l+ar-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=ar-1,bg(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ar-1,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,Qo},ACe=OCe,TCe=bJ,PCe=xJ,NCe=yJ,LCe=CCe,ICe=MCe,DCe=kCe,zCe=ECe,RCe="pako deflate (from Nodeca project)",dx={deflateInit:ACe,deflateInit2:TCe,deflateReset:PCe,deflateResetKeep:NCe,deflateSetHeader:LCe,deflate:ICe,deflateEnd:DCe,deflateSetDictionary:zCe,deflateInfo:RCe},FCe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),BCe=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(let r in n)FCe(n,r)&&(e[r]=n[r])}}return e},jCe=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;let n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let a=e[r];n.set(a,i),i+=a.length}return n},iM={assign:BCe,flattenChunks:jCe},_J=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_J=!1}var bx=new Uint8Array(256);for(let e=0;e<256;e++)bx[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;bx[254]=bx[254]=1;var VCe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t},HCe=(e,t)=>{if(t<65534&&e.subarray&&_J)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n},WCe=(e,t)=>{let n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i,o=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){o[i++]=a;continue}let s=bx[a];if(s>4){o[i++]=65533,r+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&r<n;)a=a<<6|e[r++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return HCe(o,i)},qCe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+bx[e[n]]>t?n:t},_x={string2buf:VCe,buf2string:WCe,utf8border:qCe};function UCe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var wJ=UCe,SJ=Object.prototype.toString,{Z_NO_FLUSH:GCe,Z_SYNC_FLUSH:$Ce,Z_FULL_FLUSH:YCe,Z_FINISH:XCe,Z_OK:tM,Z_STREAM_END:KCe,Z_DEFAULT_COMPRESSION:ZCe,Z_DEFAULT_STRATEGY:JCe,Z_DEFLATED:QCe}=wg;function Ox(e){this.options=iM.assign({level:ZCe,method:QCe,chunkSize:16384,windowBits:15,memLevel:8,strategy:JCe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wJ,this.strm.avail_out=0;let n=dx.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tM)throw new Error(_m[n]);if(t.header&&dx.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=_x.string2buf(t.dictionary):SJ.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=dx.deflateSetDictionary(this.strm,r),n!==tM)throw new Error(_m[n]);this._dict_set=!0}}Ox.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?XCe:GCe,typeof e=="string"?n.input=_x.string2buf(e):SJ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===$Ce||o===YCe)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=dx.deflate(n,o),i===KCe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=dx.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===tM;if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Ox.prototype.onData=function(e){this.chunks.push(e)};Ox.prototype.onEnd=function(e){e===tM&&(this.result=iM.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function fL(e,t){let n=new Ox(t);if(n.push(e,!0),n.err)throw n.msg||_m[n.err];return n.result}function eOe(e,t){return t=t||{},t.raw=!0,fL(e,t)}function tOe(e,t){return t=t||{},t.gzip=!0,fL(e,t)}var nOe=Ox,rOe=fL,iOe=eOe,oOe=tOe,aOe=wg,sOe={Deflate:nOe,deflate:rOe,deflateRaw:iOe,gzip:oOe,constants:aOe},XO=16209,lOe=16191,cOe=function(t,n){let r,i,o,a,s,l,c,u,f,p,d,h,m,g,v,y,x,_,w,S,M,O,E,P,k=t.state;r=t.next_in,E=t.input,i=r+(t.avail_in-5),o=t.next_out,P=t.output,a=o-(n-t.avail_out),s=o+(t.avail_out-257),l=k.dmax,c=k.wsize,u=k.whave,f=k.wnext,p=k.window,d=k.hold,h=k.bits,m=k.lencode,g=k.distcode,v=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),x=m[d&v];t:for(;;){if(_=x>>>24,d>>>=_,h-=_,_=x>>>16&255,_===0)P[o++]=x&65535;else if(_&16){w=x&65535,_&=15,_&&(h<_&&(d+=E[r++]<<h,h+=8),w+=d&(1<<_)-1,d>>>=_,h-=_),h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),x=g[d&y];n:for(;;){if(_=x>>>24,d>>>=_,h-=_,_=x>>>16&255,_&16){if(S=x&65535,_&=15,h<_&&(d+=E[r++]<<h,h+=8,h<_&&(d+=E[r++]<<h,h+=8)),S+=d&(1<<_)-1,S>l){t.msg="invalid distance too far back",k.mode=XO;break e}if(d>>>=_,h-=_,_=o-a,S>_){if(_=S-_,_>u&&k.sane){t.msg="invalid distance too far back",k.mode=XO;break e}if(M=0,O=p,f===0){if(M+=c-_,_<w){w-=_;do P[o++]=p[M++];while(--_);M=o-S,O=P}}else if(f<_){if(M+=c+f-_,_-=f,_<w){w-=_;do P[o++]=p[M++];while(--_);if(M=0,f<w){_=f,w-=_;do P[o++]=p[M++];while(--_);M=o-S,O=P}}}else if(M+=f-_,_<w){w-=_;do P[o++]=p[M++];while(--_);M=o-S,O=P}for(;w>2;)P[o++]=O[M++],P[o++]=O[M++],P[o++]=O[M++],w-=3;w&&(P[o++]=O[M++],w>1&&(P[o++]=O[M++]))}else{M=o-S;do P[o++]=P[M++],P[o++]=P[M++],P[o++]=P[M++],w-=3;while(w>2);w&&(P[o++]=P[M++],w>1&&(P[o++]=P[M++]))}}else if(_&64){t.msg="invalid distance code",k.mode=XO;break e}else{x=g[(x&65535)+(d&(1<<_)-1)];continue n}break}}else if(_&64)if(_&32){k.mode=lOe;break e}else{t.msg="invalid literal/length code",k.mode=XO;break e}else{x=m[(x&65535)+(d&(1<<_)-1)];continue t}break}}while(r<i&&o<s);w=h>>3,r-=w,h-=w<<3,d&=(1<<h)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<s?257+(s-o):257-(o-s),k.hold=d,k.bits=h},vg=15,OZ=852,MZ=592,kZ=0,WN=1,EZ=2,uOe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fOe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pOe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dOe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),hOe=(e,t,n,r,i,o,a,s)=>{let l=s.bits,c=0,u=0,f=0,p=0,d=0,h=0,m=0,g=0,v=0,y=0,x,_,w,S,M,O=null,E,P=new Uint16Array(vg+1),k=new Uint16Array(vg+1),A=null,N,L,z;for(c=0;c<=vg;c++)P[c]=0;for(u=0;u<r;u++)P[t[n+u]]++;for(d=l,p=vg;p>=1&&P[p]===0;p--);if(d>p&&(d=p),p===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(f=1;f<p&&P[f]===0;f++);for(d<f&&(d=f),g=1,c=1;c<=vg;c++)if(g<<=1,g-=P[c],g<0)return-1;if(g>0&&(e===kZ||p!==1))return-1;for(k[1]=0,c=1;c<vg;c++)k[c+1]=k[c]+P[c];for(u=0;u<r;u++)t[n+u]!==0&&(a[k[t[n+u]]++]=u);if(e===kZ?(O=A=a,E=20):e===WN?(O=uOe,A=fOe,E=257):(O=pOe,A=dOe,E=0),y=0,u=0,c=f,M=o,h=d,m=0,w=-1,v=1<<d,S=v-1,e===WN&&v>OZ||e===EZ&&v>MZ)return 1;for(;;){N=c-m,a[u]+1<E?(L=0,z=a[u]):a[u]>=E?(L=A[a[u]-E],z=O[a[u]-E]):(L=96,z=0),x=1<<c-m,_=1<<h,f=_;do _-=x,i[M+(y>>m)+_]=N<<24|L<<16|z|0;while(_!==0);for(x=1<<c-1;y&x;)x>>=1;if(x!==0?(y&=x-1,y+=x):y=0,u++,--P[c]===0){if(c===p)break;c=t[n+a[u]]}if(c>d&&(y&S)!==w){for(m===0&&(m=d),M+=f,h=c-m,g=1<<h;h+m<p&&(g-=P[h+m],!(g<=0));)h++,g<<=1;if(v+=1<<h,e===WN&&v>OZ||e===EZ&&v>MZ)return 1;w=y&S,i[w]=d<<24|h<<16|M-o|0}}return y!==0&&(i[M+y]=c-m<<24|64<<16|0),s.bits=d,0},hx=hOe,mOe=0,CJ=1,OJ=2,{Z_FINISH:AZ,Z_BLOCK:gOe,Z_TREES:KO,Z_OK:Sm,Z_STREAM_END:vOe,Z_NEED_DICT:yOe,Z_STREAM_ERROR:Ql,Z_DATA_ERROR:MJ,Z_MEM_ERROR:kJ,Z_BUF_ERROR:xOe,Z_DEFLATED:TZ}=wg,oM=16180,PZ=16181,NZ=16182,LZ=16183,IZ=16184,DZ=16185,zZ=16186,RZ=16187,FZ=16188,BZ=16189,nM=16190,Pf=16191,qN=16192,jZ=16193,UN=16194,VZ=16195,HZ=16196,WZ=16197,qZ=16198,ZO=16199,JO=16200,UZ=16201,GZ=16202,$Z=16203,YZ=16204,XZ=16205,GN=16206,KZ=16207,ZZ=16208,di=16209,EJ=16210,AJ=16211,bOe=852,_Oe=592,wOe=15,SOe=wOe,JZ=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function COe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Cm=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<oM||t.mode>AJ?1:0},TJ=e=>{if(Cm(e))return Ql;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=oM,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(bOe),t.distcode=t.distdyn=new Int32Array(_Oe),t.sane=1,t.back=-1,Sm},PJ=e=>{if(Cm(e))return Ql;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,TJ(e)},NJ=(e,t)=>{let n;if(Cm(e))return Ql;let r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ql:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,PJ(e))},LJ=(e,t)=>{if(!e)return Ql;let n=new COe;e.state=n,n.strm=e,n.window=null,n.mode=oM;let r=NJ(e,t);return r!==Sm&&(e.state=null),r},OOe=e=>LJ(e,SOe),QZ=!0,$N,YN,MOe=e=>{if(QZ){$N=new Int32Array(512),YN=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(hx(CJ,e.lens,0,288,$N,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;hx(OJ,e.lens,0,32,YN,0,e.work,{bits:5}),QZ=!1}e.lencode=$N,e.lenbits=9,e.distcode=YN,e.distbits=5},IJ=(e,t,n,r)=>{let i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),r-=i,r?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},kOe=(e,t)=>{let n,r,i,o,a,s,l,c,u,f,p,d,h,m,g=0,v,y,x,_,w,S,M,O,E=new Uint8Array(4),P,k,A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Cm(e)||!e.output||!e.input&&e.avail_in!==0)return Ql;n=e.state,n.mode===Pf&&(n.mode=qN),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,f=s,p=l,O=Sm;e:for(;;)switch(n.mode){case oM:if(n.wrap===0){n.mode=qN;break}for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,E[0]=c&255,E[1]=c>>>8&255,n.check=Do(n.check,E,2,0),c=0,u=0,n.mode=PZ;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=di;break}if((c&15)!==TZ){e.msg="unknown compression method",n.mode=di;break}if(c>>>=4,u-=4,M=(c&15)+8,n.wbits===0&&(n.wbits=M),M>15||M>n.wbits){e.msg="invalid window size",n.mode=di;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?BZ:Pf,c=0,u=0;break;case PZ:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==TZ){e.msg="unknown compression method",n.mode=di;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=di;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,n.check=Do(n.check,E,2,0)),c=0,u=0,n.mode=NZ;case NZ:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,n.check=Do(n.check,E,4,0)),c=0,u=0,n.mode=LZ;case LZ:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,n.check=Do(n.check,E,2,0)),c=0,u=0,n.mode=IZ;case IZ:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,n.check=Do(n.check,E,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=DZ;case DZ:if(n.flags&1024&&(d=n.length,d>s&&(d=s),d&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+d),M)),n.flags&512&&n.wrap&4&&(n.check=Do(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=zZ;case zZ:if(n.flags&2048){if(s===0)break e;d=0;do M=r[o+d++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M));while(M&&d<s);if(n.flags&512&&n.wrap&4&&(n.check=Do(n.check,r,d,o)),s-=d,o+=d,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=RZ;case RZ:if(n.flags&4096){if(s===0)break e;d=0;do M=r[o+d++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M));while(M&&d<s);if(n.flags&512&&n.wrap&4&&(n.check=Do(n.check,r,d,o)),s-=d,o+=d,M)break e}else n.head&&(n.head.comment=null);n.mode=FZ;case FZ:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=di;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Pf;break;case BZ:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.adler=n.check=JZ(c),c=0,u=0,n.mode=nM;case nM:if(n.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,yOe;e.adler=n.check=1,n.mode=Pf;case Pf:if(t===gOe||t===KO)break e;case qN:if(n.last){c>>>=u&7,u-=u&7,n.mode=GN;break}for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=jZ;break;case 1:if(MOe(n),n.mode=ZO,t===KO){c>>>=2,u-=2;break e}break;case 2:n.mode=HZ;break;case 3:e.msg="invalid block type",n.mode=di}c>>>=2,u-=2;break;case jZ:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=di;break}if(n.length=c&65535,c=0,u=0,n.mode=UN,t===KO)break e;case UN:n.mode=VZ;case VZ:if(d=n.length,d){if(d>s&&(d=s),d>l&&(d=l),d===0)break e;i.set(r.subarray(o,o+d),a),s-=d,o+=d,l-=d,a+=d,n.length-=d;break}n.mode=Pf;break;case HZ:for(;u<14;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=di;break}n.have=0,n.mode=WZ;case WZ:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.lens[A[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},O=hx(mOe,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,O){e.msg="invalid code lengths set",n.mode=di;break}n.have=0,n.mode=qZ;case qZ:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[c&(1<<n.lenbits)-1],v=g>>>24,y=g>>>16&255,x=g&65535,!(v<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(x<16)c>>>=v,u-=v,n.lens[n.have++]=x;else{if(x===16){for(k=v+2;u<k;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(c>>>=v,u-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=di;break}M=n.lens[n.have-1],d=3+(c&3),c>>>=2,u-=2}else if(x===17){for(k=v+3;u<k;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=v,u-=v,M=0,d=3+(c&7),c>>>=3,u-=3}else{for(k=v+7;u<k;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=v,u-=v,M=0,d=11+(c&127),c>>>=7,u-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=di;break}for(;d--;)n.lens[n.have++]=M}}if(n.mode===di)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=di;break}if(n.lenbits=9,P={bits:n.lenbits},O=hx(CJ,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,O){e.msg="invalid literal/lengths set",n.mode=di;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},O=hx(OJ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,O){e.msg="invalid distances set",n.mode=di;break}if(n.mode=ZO,t===KO)break e;case ZO:n.mode=JO;case JO:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,cOe(e,p),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===Pf&&(n.back=-1);break}for(n.back=0;g=n.lencode[c&(1<<n.lenbits)-1],v=g>>>24,y=g>>>16&255,x=g&65535,!(v<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(y&&!(y&240)){for(_=v,w=y,S=x;g=n.lencode[S+((c&(1<<_+w)-1)>>_)],v=g>>>24,y=g>>>16&255,x=g&65535,!(_+v<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=v,u-=v,n.back+=v,n.length=x,y===0){n.mode=XZ;break}if(y&32){n.back=-1,n.mode=Pf;break}if(y&64){e.msg="invalid literal/length code",n.mode=di;break}n.extra=y&15,n.mode=UZ;case UZ:if(n.extra){for(k=n.extra;u<k;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=GZ;case GZ:for(;g=n.distcode[c&(1<<n.distbits)-1],v=g>>>24,y=g>>>16&255,x=g&65535,!(v<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(!(y&240)){for(_=v,w=y,S=x;g=n.distcode[S+((c&(1<<_+w)-1)>>_)],v=g>>>24,y=g>>>16&255,x=g&65535,!(_+v<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=v,u-=v,n.back+=v,y&64){e.msg="invalid distance code",n.mode=di;break}n.offset=x,n.extra=y&15,n.mode=$Z;case $Z:if(n.extra){for(k=n.extra;u<k;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=di;break}n.mode=YZ;case YZ:if(l===0)break e;if(d=p-l,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=di;break}d>n.wnext?(d-=n.wnext,h=n.wsize-d):h=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,h=a-n.offset,d=n.length;d>l&&(d=l),l-=d,n.length-=d;do i[a++]=m[h++];while(--d);n.length===0&&(n.mode=JO);break;case XZ:if(l===0)break e;i[a++]=n.length,l--,n.mode=JO;break;case GN:if(n.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[o++]<<u,u+=8}if(p-=l,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Do(n.check,i,p,a-p):xx(n.check,i,p,a-p)),p=l,n.wrap&4&&(n.flags?c:JZ(c))!==n.check){e.msg="incorrect data check",n.mode=di;break}c=0,u=0}n.mode=KZ;case KZ:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=di;break}c=0,u=0}n.mode=ZZ;case ZZ:O=vOe;break e;case di:O=MJ;break e;case EJ:return kJ;case AJ:default:return Ql}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<di&&(n.mode<GN||t!==AZ))&&IJ(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Do(n.check,i,p,e.next_out-p):xx(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Pf?128:0)+(n.mode===ZO||n.mode===UN?256:0),(f===0&&p===0||t===AZ)&&O===Sm&&(O=xOe),O},EOe=e=>{if(Cm(e))return Ql;let t=e.state;return t.window&&(t.window=null),e.state=null,Sm},AOe=(e,t)=>{if(Cm(e))return Ql;let n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Sm):Ql},TOe=(e,t)=>{let n=t.length,r,i,o;return Cm(e)||(r=e.state,r.wrap!==0&&r.mode!==nM)?Ql:r.mode===nM&&(i=1,i=xx(i,t,n,0),i!==r.check)?MJ:(o=IJ(e,t,n,n),o?(r.mode=EJ,kJ):(r.havedict=1,Sm))},POe=PJ,NOe=NJ,LOe=TJ,IOe=OOe,DOe=LJ,zOe=kOe,ROe=EOe,FOe=AOe,BOe=TOe,jOe="pako inflate (from Nodeca project)",Lf={inflateReset:POe,inflateReset2:NOe,inflateResetKeep:LOe,inflateInit:IOe,inflateInit2:DOe,inflate:zOe,inflateEnd:ROe,inflateGetHeader:FOe,inflateSetDictionary:BOe,inflateInfo:jOe};function VOe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var HOe=VOe,DJ=Object.prototype.toString,{Z_NO_FLUSH:WOe,Z_FINISH:qOe,Z_OK:wx,Z_STREAM_END:XN,Z_NEED_DICT:KN,Z_STREAM_ERROR:UOe,Z_DATA_ERROR:eJ,Z_MEM_ERROR:GOe}=wg;function Mx(e){this.options=iM.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wJ,this.strm.avail_out=0;let n=Lf.inflateInit2(this.strm,t.windowBits);if(n!==wx)throw new Error(_m[n]);if(this.header=new HOe,Lf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=_x.string2buf(t.dictionary):DJ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Lf.inflateSetDictionary(this.strm,t.dictionary),n!==wx)))throw new Error(_m[n])}Mx.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?qOe:WOe,DJ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=Lf.inflate(n,a),o===KN&&i&&(o=Lf.inflateSetDictionary(n,i),o===wx?o=Lf.inflate(n,a):o===eJ&&(o=KN));n.avail_in>0&&o===XN&&n.state.wrap>0&&e[n.next_in]!==0;)Lf.inflateReset(n),o=Lf.inflate(n,a);switch(o){case UOe:case eJ:case KN:case GOe:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||o===XN))if(this.options.to==="string"){let l=_x.utf8border(n.output,n.next_out),c=n.next_out-l,u=_x.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===wx&&s===0)){if(o===XN)return o=Lf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Mx.prototype.onData=function(e){this.chunks.push(e)};Mx.prototype.onEnd=function(e){e===wx&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iM.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function pL(e,t){let n=new Mx(t);if(n.push(e),n.err)throw n.msg||_m[n.err];return n.result}function $Oe(e,t){return t=t||{},t.raw=!0,pL(e,t)}var YOe=Mx,XOe=pL,KOe=$Oe,ZOe=pL,JOe=wg,QOe={Inflate:YOe,inflate:XOe,inflateRaw:KOe,ungzip:ZOe,constants:JOe},{Deflate:DOt,deflate:eMe,deflateRaw:zOt,gzip:ROt}=sOe,{Inflate:FOt,inflate:tMe,inflateRaw:BOt,ungzip:jOt}=QOe;var zJ=eMe;var RJ=tMe;var PQ=Ym(Lee());var xa=Uint8Array,ll=Uint16Array,bL=Int32Array,aM=new xa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sM=new xa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gL=new xa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VJ=function(e,t){for(var n=new ll(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new bL(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},HJ=VJ(aM,2),WJ=HJ.b,vL=HJ.r;WJ[28]=258,vL[258]=28;var qJ=VJ(sM,0),rMe=qJ.b,FJ=qJ.r,yL=new ll(32768);for(kr=0;kr<32768;++kr)If=(kr&43690)>>1|(kr&21845)<<1,If=(If&52428)>>2|(If&13107)<<2,If=(If&61680)>>4|(If&3855)<<4,yL[kr]=((If&65280)>>8|(If&255)<<8)>>1;var If,kr,Eu=function(e,t,n){for(var r=e.length,i=0,o=new ll(t);i<r;++i)e[i]&&++o[e[i]-1];var a=new ll(t);for(i=1;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(n){s=new ll(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],f=a[e[i]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)s[yL[f]>>l]=c}else for(s=new ll(r),i=0;i<r;++i)e[i]&&(s[i]=yL[a[e[i]-1]++]>>15-e[i]);return s},pd=new xa(288);for(kr=0;kr<144;++kr)pd[kr]=8;var kr;for(kr=144;kr<256;++kr)pd[kr]=9;var kr;for(kr=256;kr<280;++kr)pd[kr]=7;var kr;for(kr=280;kr<288;++kr)pd[kr]=8;var kr,Ax=new xa(32);for(kr=0;kr<32;++kr)Ax[kr]=5;var kr,iMe=Eu(pd,9,0),oMe=Eu(pd,9,1),aMe=Eu(Ax,5,0),sMe=Eu(Ax,5,1),dL=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ec=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},hL=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},_L=function(e){return(e+7)/8|0},UJ=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new xa(e.subarray(t,n))};var lMe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ac=function(e,t,n){var r=new Error(t||lMe[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ac),!n)throw r;return r},cMe=function(e,t,n,r){var i=e.length,o=r?r.length:0;if(!i||t.f&&!t.l)return n||new xa(0);var a=!n,s=a||t.i!=2,l=t.i;a&&(n=new xa(i*3));var c=function(we){var De=n.length;if(we>De){var Ve=new xa(Math.max(De*2,we));Ve.set(n),n=Ve}},u=t.f||0,f=t.p||0,p=t.b||0,d=t.l,h=t.d,m=t.m,g=t.n,v=i*8;do{if(!d){u=Ec(e,f,1);var y=Ec(e,f+1,3);if(f+=3,y)if(y==1)d=oMe,h=sMe,m=9,g=5;else if(y==2){var S=Ec(e,f,31)+257,M=Ec(e,f+10,15)+4,O=S+Ec(e,f+5,31)+1;f+=14;for(var E=new xa(O),P=new xa(19),k=0;k<M;++k)P[gL[k]]=Ec(e,f+k*3,7);f+=M*3;for(var A=dL(P),N=(1<<A)-1,L=Eu(P,A,1),k=0;k<O;){var z=L[Ec(e,f,N)];f+=z&15;var x=z>>4;if(x<16)E[k++]=x;else{var B=0,H=0;for(x==16?(H=3+Ec(e,f,3),f+=2,B=E[k-1]):x==17?(H=3+Ec(e,f,7),f+=3):x==18&&(H=11+Ec(e,f,127),f+=7);H--;)E[k++]=B}}var j=E.subarray(0,S),W=E.subarray(S);m=dL(j),g=dL(W),d=Eu(j,m,1),h=Eu(W,g,1)}else Ac(1);else{var x=_L(f)+4,_=e[x-4]|e[x-3]<<8,w=x+_;if(w>i){l&&Ac(0);break}s&&c(p+_),n.set(e.subarray(x,w),p),t.b=p+=_,t.p=f=w*8,t.f=u;continue}if(f>v){l&&Ac(0);break}}s&&c(p+131072);for(var Z=(1<<m)-1,ie=(1<<g)-1,R=f;;R=f){var B=d[hL(e,f)&Z],q=B>>4;if(f+=B&15,f>v){l&&Ac(0);break}if(B||Ac(2),q<256)n[p++]=q;else if(q==256){R=f,d=null;break}else{var J=q-254;if(q>264){var k=q-257,te=aM[k];J=Ec(e,f,(1<<te)-1)+WJ[k],f+=te}var ae=h[hL(e,f)&ie],le=ae>>4;ae||Ac(3),f+=ae&15;var W=rMe[le];if(le>3){var te=sM[le];W+=hL(e,f)&(1<<te)-1,f+=te}if(f>v){l&&Ac(0);break}s&&c(p+131072);var ue=p+J;if(p<W){var ye=o-W,Me=Math.min(W,ue);for(ye+p<0&&Ac(3);p<Me;++p)n[p]=r[ye+p]}for(;p<ue;++p)n[p]=n[p-W]}}t.l=d,t.p=R,t.b=p,t.f=u,d&&(u=1,t.m=m,t.d=h,t.n=g)}while(!u);return p!=n.length&&a?UJ(n,0,p):n.subarray(0,p)},Df=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},kx=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},mL=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:$J,l:0};if(i==1){var a=new xa(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(w,S){return w.f-S.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var p=o[0].s,r=1;r<i;++r)o[r].s>p&&(p=o[r].s);var d=new ll(p+1),h=xL(n[u-1],d,0);if(h>t){var r=0,m=0,g=h-t,v=1<<g;for(o.sort(function(S,M){return d[M.s]-d[S.s]||S.f-M.f});r<i;++r){var y=o[r].s;if(d[y]>t)m+=v-(1<<h-d[y]),d[y]=t;else break}for(m>>=g;m>0;){var x=o[r].s;d[x]<t?m-=1<<t-d[x]++-1:++r}for(;r>=0&&m;--r){var _=o[r].s;d[_]==t&&(--d[_],++m)}h=t}return{t:new xa(d),l:h}},xL=function(e,t,n){return e.s==-1?Math.max(xL(e.l,t,n+1),xL(e.r,t,n+1)):t[e.s]=n},BJ=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ll(++t),r=0,i=e[0],o=1,a=function(l){n[r++]=l},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return{c:n.subarray(0,r),n:t}},Ex=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},GJ=function(e,t,n){var r=n.length,i=_L(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<r;++o)e[i+o+4]=n[o];return(i+4+r)*8},jJ=function(e,t,n,r,i,o,a,s,l,c,u){Df(t,u++,n),++i[256];for(var f=mL(i,15),p=f.t,d=f.l,h=mL(o,15),m=h.t,g=h.l,v=BJ(p),y=v.c,x=v.n,_=BJ(m),w=_.c,S=_.n,M=new ll(19),O=0;O<y.length;++O)++M[y[O]&31];for(var O=0;O<w.length;++O)++M[w[O]&31];for(var E=mL(M,7),P=E.t,k=E.l,A=19;A>4&&!P[gL[A-1]];--A);var N=c+5<<3,L=Ex(i,pd)+Ex(o,Ax)+a,z=Ex(i,p)+Ex(o,m)+a+14+3*A+Ex(M,P)+2*M[16]+3*M[17]+7*M[18];if(l>=0&&N<=L&&N<=z)return GJ(t,u,e.subarray(l,l+c));var B,H,j,W;if(Df(t,u,1+(z<L)),u+=2,z<L){B=Eu(p,d,0),H=p,j=Eu(m,g,0),W=m;var Z=Eu(P,k,0);Df(t,u,x-257),Df(t,u+5,S-1),Df(t,u+10,A-4),u+=14;for(var O=0;O<A;++O)Df(t,u+3*O,P[gL[O]]);u+=3*A;for(var ie=[y,w],R=0;R<2;++R)for(var q=ie[R],O=0;O<q.length;++O){var J=q[O]&31;Df(t,u,Z[J]),u+=P[J],J>15&&(Df(t,u,q[O]>>5&127),u+=q[O]>>12)}}else B=iMe,H=pd,j=aMe,W=Ax;for(var O=0;O<s;++O){var te=r[O];if(te>255){var J=te>>18&31;kx(t,u,B[J+257]),u+=H[J+257],J>7&&(Df(t,u,te>>23&31),u+=aM[J]);var ae=te&31;kx(t,u,j[ae]),u+=W[ae],ae>3&&(kx(t,u,te>>5&8191),u+=sM[ae])}else kx(t,u,B[te]),u+=H[te]}return kx(t,u,B[256]),u+H[256]},uMe=new bL([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$J=new xa(0),fMe=function(e,t,n,r,i,o){var a=o.z||e.length,s=new xa(r+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(r,s.length-i),c=o.l,u=(o.r||0)&7;if(t){u&&(l[0]=o.r>>3);for(var f=uMe[t-1],p=f>>13,d=f&8191,h=(1<<n)-1,m=o.p||new ll(32768),g=o.h||new ll(h+1),v=Math.ceil(n/3),y=2*v,x=function(Ze){return(e[Ze]^e[Ze+1]<<v^e[Ze+2]<<y)&h},_=new bL(25e3),w=new ll(288),S=new ll(32),M=0,O=0,E=o.i||0,P=0,k=o.w||0,A=0;E+2<a;++E){var N=x(E),L=E&32767,z=g[N];if(m[L]=z,g[N]=L,k<=E){var B=a-E;if((M>7e3||P>24576)&&(B>423||!c)){u=jJ(e,l,0,_,w,S,O,P,A,E-A,u),P=M=O=0,A=E;for(var H=0;H<286;++H)w[H]=0;for(var H=0;H<30;++H)S[H]=0}var j=2,W=0,Z=d,ie=L-z&32767;if(B>2&&N==x(E-ie))for(var R=Math.min(p,B)-1,q=Math.min(32767,E),J=Math.min(258,B);ie<=q&&--Z&&L!=z;){if(e[E+j]==e[E+j-ie]){for(var te=0;te<J&&e[E+te]==e[E+te-ie];++te);if(te>j){if(j=te,W=ie,te>R)break;for(var ae=Math.min(ie,te-2),le=0,H=0;H<ae;++H){var ue=E-ie+H&32767,ye=m[ue],Me=ue-ye&32767;Me>le&&(le=Me,z=ue)}}}L=z,z=m[L],ie+=L-z&32767}if(W){_[P++]=268435456|vL[j]<<18|FJ[W];var we=vL[j]&31,De=FJ[W]&31;O+=aM[we]+sM[De],++w[257+we],++S[De],k=E+j,++M}else _[P++]=e[E],++w[e[E]]}}for(E=Math.max(E,k);E<a;++E)_[P++]=e[E],++w[e[E]];u=jJ(e,l,c,_,w,S,O,P,A,E-A,u),c||(o.r=u&7|l[u/8|0]<<3,u-=7,o.h=g,o.p=m,o.i=E,o.w=k)}else{for(var E=o.w||0;E<a+c;E+=65535){var Ve=E+65535;Ve>=a&&(l[u/8|0]=c,Ve=a),u=GJ(l,u+1,e.subarray(E,Ve))}o.i=a}return UJ(s,0,r+_L(u)+i)};var YJ=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length|0,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},pMe=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new xa(o.length+e.length);a.set(o),a.set(e,o.length),e=a,i.w=o.length}return fMe(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)};var XJ=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};var dMe=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=YJ();i.p(t.dictionary),XJ(e,2,i.d())}},hMe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ac(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Ac(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function lM(e,t){t||(t={});var n=YJ();n.p(e);var r=pMe(e,t,t.dictionary?6:2,4);return dMe(r,t),XJ(r,r.length-4,n.d()),r}function KJ(e,t){return cMe(e.subarray(hMe(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var mMe=typeof TextDecoder<"u"&&new TextDecoder,gMe=0;try{mMe.decode($J,{stream:!0}),gMe=1}catch{}var wn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function wL(){wn.console&&typeof wn.console.log=="function"&&wn.console.log.apply(wn.console,arguments)}var Kr={log:wL,warn:function(e){wn.console&&(typeof wn.console.warn=="function"?wn.console.warn.apply(wn.console,arguments):wL.call(null,arguments))},error:function(e){wn.console&&(typeof wn.console.error=="function"?wn.console.error.apply(wn.console,arguments):wL(e))}};function SL(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Om(r.response,t,n)},r.onerror=function(){Kr.error("could not download file")},r.send()}function ZJ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function cM(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Tx,EL,Om=wn.saveAs||((typeof window>"u"?"undefined":Hr(window))!=="object"||window!==wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=wn.URL||wn.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?ZJ(i.href)?SL(e,t,n):cM(i,i.target="_blank"):cM(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){cM(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(ZJ(e))SL(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){cM(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Hr(o)!=="object"&&(Kr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return SL(e,t,n);var i=e.type==="application/octet-stream",o=/constructor/i.test(wn.HTMLElement)||wn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&(typeof FileReader>"u"?"undefined":Hr(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},s.readAsDataURL(e)}else{var l=wn.URL||wn.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function hQ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}function CL(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=ba(n,r,i,o,t[0],7,-680876936),o=ba(o,n,r,i,t[1],12,-389564586),i=ba(i,o,n,r,t[2],17,606105819),r=ba(r,i,o,n,t[3],22,-1044525330),n=ba(n,r,i,o,t[4],7,-176418897),o=ba(o,n,r,i,t[5],12,1200080426),i=ba(i,o,n,r,t[6],17,-1473231341),r=ba(r,i,o,n,t[7],22,-45705983),n=ba(n,r,i,o,t[8],7,1770035416),o=ba(o,n,r,i,t[9],12,-1958414417),i=ba(i,o,n,r,t[10],17,-42063),r=ba(r,i,o,n,t[11],22,-1990404162),n=ba(n,r,i,o,t[12],7,1804603682),o=ba(o,n,r,i,t[13],12,-40341101),i=ba(i,o,n,r,t[14],17,-1502002290),n=_a(n,r=ba(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=_a(o,n,r,i,t[6],9,-1069501632),i=_a(i,o,n,r,t[11],14,643717713),r=_a(r,i,o,n,t[0],20,-373897302),n=_a(n,r,i,o,t[5],5,-701558691),o=_a(o,n,r,i,t[10],9,38016083),i=_a(i,o,n,r,t[15],14,-660478335),r=_a(r,i,o,n,t[4],20,-405537848),n=_a(n,r,i,o,t[9],5,568446438),o=_a(o,n,r,i,t[14],9,-1019803690),i=_a(i,o,n,r,t[3],14,-187363961),r=_a(r,i,o,n,t[8],20,1163531501),n=_a(n,r,i,o,t[13],5,-1444681467),o=_a(o,n,r,i,t[2],9,-51403784),i=_a(i,o,n,r,t[7],14,1735328473),n=wa(n,r=_a(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=wa(o,n,r,i,t[8],11,-2022574463),i=wa(i,o,n,r,t[11],16,1839030562),r=wa(r,i,o,n,t[14],23,-35309556),n=wa(n,r,i,o,t[1],4,-1530992060),o=wa(o,n,r,i,t[4],11,1272893353),i=wa(i,o,n,r,t[7],16,-155497632),r=wa(r,i,o,n,t[10],23,-1094730640),n=wa(n,r,i,o,t[13],4,681279174),o=wa(o,n,r,i,t[0],11,-358537222),i=wa(i,o,n,r,t[3],16,-722521979),r=wa(r,i,o,n,t[6],23,76029189),n=wa(n,r,i,o,t[9],4,-640364487),o=wa(o,n,r,i,t[12],11,-421815835),i=wa(i,o,n,r,t[15],16,530742520),n=Sa(n,r=wa(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=Sa(o,n,r,i,t[7],10,1126891415),i=Sa(i,o,n,r,t[14],15,-1416354905),r=Sa(r,i,o,n,t[5],21,-57434055),n=Sa(n,r,i,o,t[12],6,1700485571),o=Sa(o,n,r,i,t[3],10,-1894986606),i=Sa(i,o,n,r,t[10],15,-1051523),r=Sa(r,i,o,n,t[1],21,-2054922799),n=Sa(n,r,i,o,t[8],6,1873313359),o=Sa(o,n,r,i,t[15],10,-30611744),i=Sa(i,o,n,r,t[6],15,-1560198380),r=Sa(r,i,o,n,t[13],21,1309151649),n=Sa(n,r,i,o,t[4],6,-145523070),o=Sa(o,n,r,i,t[11],10,-1120210379),i=Sa(i,o,n,r,t[2],15,718787259),r=Sa(r,i,o,n,t[9],21,-343485551),e[0]=hd(n,e[0]),e[1]=hd(r,e[1]),e[2]=hd(i,e[2]),e[3]=hd(o,e[3])}function xM(e,t,n,r,i,o){return t=hd(hd(t,e),hd(r,o)),hd(t<<i|t>>>32-i,n)}function ba(e,t,n,r,i,o,a){return xM(t&n|~t&r,e,t,i,o,a)}function _a(e,t,n,r,i,o,a){return xM(t&r|n&~r,e,t,i,o,a)}function wa(e,t,n,r,i,o,a){return xM(t^n^r,e,t,i,o,a)}function Sa(e,t,n,r,i,o,a){return xM(n^(t|~r),e,t,i,o,a)}function mQ(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)CL(r,vMe(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(CL(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,CL(r,i),r}function vMe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Tx=wn.atob.bind(wn),EL=wn.btoa.bind(wn);var JJ="0123456789abcdef".split("");function yMe(e){for(var t="",n=0;n<4;n++)t+=JJ[e>>8*n+4&15]+JJ[e>>8*n&15];return t}function xMe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function AL(e){return mQ(e).map(xMe).join("")}var bMe=function(e){for(var t=0;t<e.length;t++)e[t]=yMe(e[t]);return e.join("")}(mQ("hello"))!="5d41402abc4b2a76b9719d911017c592";function hd(e,t){if(bMe){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function TL(e,t){var n,r,i,o;if(e!==n){for(var a=(i=e,o=1+(256/e.length>>0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+a.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,r=s}else s=r;var f=t.length,p=0,d=0,h="";for(l=0;l<f;l++)d=(d+(u=s[p=(p+1)%256]))%256,s[p]=s[d],s[d]=u,a=s[(s[p]+s[d])%256],h+=String.fromCharCode(t.charCodeAt(l)^a);return h}var QJ={print:4,modify:8,copy:16,"annot-forms":32};function kg(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(s){if(QJ.perm!==void 0)throw new Error("Invalid permission: "+s);i+=QJ[s]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=AL(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=TL(this.encryptionKey,this.padding)}function Eg(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function eQ(e){if(Hr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,r)}catch(s){wn.console&&Kr.error("jsPDF PubSub Error",s.message,s)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function vM(e){if(!(this instanceof vM))return new vM(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function gQ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Mm(e,t,n,r,i){if(!(this instanceof Mm))return new Mm(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,gQ.call(this,r,i)}function Ag(e,t,n,r,i){if(!(this instanceof Ag))return new Ag(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,gQ.call(this,r,i)}function xn(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,c="S",u=null;Hr(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(o===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},d={internal:{},__private__:{}};d.__private__.PubSub=eQ;var h="1.3",m=d.__private__.getPdfVersion=function(){return h};d.__private__.setPdfVersion=function(T){h=T};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return g};var v=d.__private__.getPageFormat=function(T){return g[T]};i=i||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},x=y.COMPAT;function _(){this.saveGraphicsState(),pe(new fn(We,0,0,-We,0,jf()*We).toString()+" cm"),this.setFontSize(this.getFontSize()/We),c="n",x=y.ADVANCED}function w(){this.restoreGraphicsState(),c="S",x=y.COMPAT}var S=d.__private__.combineFontStyleAndFontWeight=function(T,K){if(T=="bold"&&K=="normal"||T=="bold"&&K==400||T=="normal"&&K=="italic"||T=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(T=K==400||K==="normal"?T==="italic"?"italic":"normal":K!=700&&K!=="bold"||T!=="normal"?(K==700?"bold":K)+""+T:"bold"),T};d.advancedAPI=function(T){var K=x===y.COMPAT;return K&&_.call(this),typeof T!="function"||(T(this),K&&w.call(this)),this},d.compatAPI=function(T){var K=x===y.ADVANCED;return K&&w.call(this),typeof T!="function"||(T(this),K&&_.call(this)),this},d.isAdvancedAPI=function(){return x===y.ADVANCED};var M,O=function(T){if(x!==y.ADVANCED)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=d.roundToPrecision=d.__private__.roundToPrecision=function(T,K){var de=t||K;if(isNaN(T)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(de).replace(/0+$/,"")};M=d.hpf=d.__private__.hpf=typeof l=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return E(T,l)}:l==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return E(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return E(T,16)};var P=d.f2=d.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return E(T,2)},k=d.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return E(T,3)},A=d.scale=d.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return x===y.COMPAT?T*We:x===y.ADVANCED?T:void 0},N=function(T){return x===y.COMPAT?jf()-T:x===y.ADVANCED?T:void 0},L=function(T){return A(N(T))};d.__private__.setPrecision=d.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(t=parseInt(T,10))};var z,B="00000000000000000000000000000000",H=d.__private__.getFileId=function(){return B},j=d.__private__.setFileId=function(T){return B=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(xi=new kg(u.userPermissions,u.userPassword,u.ownerPassword,B)),B};d.setFileId=function(T){return j(T),this},d.getFileId=function(){return H()};var W=d.__private__.convertDateToPDFDate=function(T){var K=T.getTimezoneOffset(),de=K<0?"+":"-",be=Math.floor(Math.abs(K/60)),Ie=Math.abs(K%60),Ye=[de,J(be),"'",J(Ie),"'"].join("");return["D:",T.getFullYear(),J(T.getMonth()+1),J(T.getDate()),J(T.getHours()),J(T.getMinutes()),J(T.getSeconds()),Ye].join("")},Z=d.__private__.convertPDFDateToDate=function(T){var K=parseInt(T.substr(2,4),10),de=parseInt(T.substr(6,2),10)-1,be=parseInt(T.substr(8,2),10),Ie=parseInt(T.substr(10,2),10),Ye=parseInt(T.substr(12,2),10),dt=parseInt(T.substr(14,2),10);return new Date(K,de,be,Ie,Ye,dt,0)},ie=d.__private__.setCreationDate=function(T){var K;if(T===void 0&&(T=new Date),T instanceof Date)K=W(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=T}return z=K},R=d.__private__.getCreationDate=function(T){var K=z;return T==="jsDate"&&(K=Z(z)),K};d.setCreationDate=function(T){return ie(T),this},d.getCreationDate=function(T){return R(T)};var q,J=d.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},te=d.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},ae=0,le=[],ue=[],ye=0,Me=[],we=[],De=!1,Ve=ue,Ze=function(){ae=0,ye=0,ue=[],le=[],Me=[],Ga=si(),Ts=si()};d.__private__.setCustomOutputDestination=function(T){De=!0,Ve=T};var Ae=function(T){De||(Ve=T)};d.__private__.resetCustomOutputDestination=function(){De=!1,Ve=ue};var pe=d.__private__.out=function(T){return T=T.toString(),ye+=T.length+1,Ve.push(T),Ve},ft=d.__private__.write=function(T){return pe(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},nt=d.__private__.getArrayBuffer=function(T){for(var K=T.length,de=new ArrayBuffer(K),be=new Uint8Array(de);K--;)be[K]=T.charCodeAt(K);return de},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return $e};var at=e.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(T){return at=x===y.ADVANCED?T/We:T,this};var mt,lt=d.__private__.getFontSize=d.getFontSize=function(){return x===y.COMPAT?at:at*We},Et=e.R2L||!1;d.__private__.setR2L=d.setR2L=function(T){return Et=T,this},d.__private__.getR2L=d.getR2L=function(){return Et};var Rt,Qt=d.__private__.setZoomMode=function(T){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))mt=T;else if(isNaN(T)){if(K.indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');mt=T}else mt=parseInt(T,10)};d.__private__.getZoomMode=function(){return mt};var It,Kt=d.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');Rt=T};d.__private__.getPageMode=function(){return Rt};var Sn=d.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');It=T};d.__private__.getLayoutMode=function(){return It},d.__private__.setDisplayMode=d.setDisplayMode=function(T,K,de){return Qt(T),Sn(K),Kt(de),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(T){if(Object.keys(Dt).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[T]},d.__private__.getDocumentProperties=function(){return Dt},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(T){for(var K in Dt)Dt.hasOwnProperty(K)&&T[K]&&(Dt[K]=T[K]);return this},d.__private__.setDocumentProperty=function(T,K){if(Object.keys(Dt).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[T]=K};var ot,We,Zt,Tt,zn,an={},Jt={},yr=[],Cn={},yi={},xr={},to={},Ti=null,jr=0,vn=[],$n=new eQ(d),As=e.hotfixes||[],Pi={},sr={},po=[],fn=function T(K,de,be,Ie,Ye,dt){if(!(this instanceof T))return new T(K,de,be,Ie,Ye,dt);isNaN(K)&&(K=1),isNaN(de)&&(de=0),isNaN(be)&&(be=0),isNaN(Ie)&&(Ie=1),isNaN(Ye)&&(Ye=0),isNaN(dt)&&(dt=0),this._matrix=[K,de,be,Ie,Ye,dt]};Object.defineProperty(fn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(fn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(fn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(fn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(fn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(fn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(fn.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(fn.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(fn.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(fn.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(fn.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(fn.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(fn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(fn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(fn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(fn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),fn.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(T)},fn.prototype.multiply=function(T){var K=T.sx*this.sx+T.shy*this.shx,de=T.sx*this.shy+T.shy*this.sy,be=T.shx*this.sx+T.sy*this.shx,Ie=T.shx*this.shy+T.sy*this.sy,Ye=T.tx*this.sx+T.ty*this.shx+this.tx,dt=T.tx*this.shy+T.ty*this.sy+this.ty;return new fn(K,de,be,Ie,Ye,dt)},fn.prototype.decompose=function(){var T=this.sx,K=this.shy,de=this.shx,be=this.sy,Ie=this.tx,Ye=this.ty,dt=Math.sqrt(T*T+K*K),zt=(T/=dt)*de+(K/=dt)*be;de-=T*zt,be-=K*zt;var pn=Math.sqrt(de*de+be*be);return zt/=pn,T*(be/=pn)<K*(de/=pn)&&(T=-T,K=-K,zt=-zt,dt=-dt),{scale:new fn(dt,0,0,pn,0,0),translate:new fn(1,0,0,1,Ie,Ye),rotate:new fn(T,K,-K,T,0,0),skew:new fn(1,0,zt,1,0,0)}},fn.prototype.toString=function(T){return this.join(" ")},fn.prototype.inversed=function(){var T=this.sx,K=this.shy,de=this.shx,be=this.sy,Ie=this.tx,Ye=this.ty,dt=1/(T*be-K*de),zt=be*dt,pn=-K*dt,jn=-de*dt,Rn=T*dt;return new fn(zt,pn,jn,Rn,-zt*Ie-jn*Ye,-pn*Ie-Rn*Ye)},fn.prototype.applyToPoint=function(T){var K=T.x*this.sx+T.y*this.shx+this.tx,de=T.x*this.shy+T.y*this.sy+this.ty;return new Nm(K,de)},fn.prototype.applyToRectangle=function(T){var K=this.applyToPoint(T),de=this.applyToPoint(new Nm(T.x+T.w,T.y+T.h));return new Hg(K.x,K.y,de.x-K.x,de.y-K.y)},fn.prototype.clone=function(){var T=this.sx,K=this.shy,de=this.shx,be=this.sy,Ie=this.tx,Ye=this.ty;return new fn(T,K,de,be,Ie,Ye)},d.Matrix=fn;var no=d.matrixMult=function(T,K){return K.multiply(T)},Hi=new fn(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Hi;var ro=function(T,K){if(!yi[T]){var de=(K instanceof Mm?"Sh":"P")+(Object.keys(Cn).length+1).toString(10);K.id=de,yi[T]=de,Cn[de]=K,$n.publish("addPattern",K)}};d.ShadingPattern=Mm,d.TilingPattern=Ag,d.addShadingPattern=function(T,K){return O("addShadingPattern()"),ro(T,K),this},d.beginTilingPattern=function(T){O("beginTilingPattern()"),Bx(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},d.endTilingPattern=function(T,K){O("endTilingPattern()"),K.stream=we[q].join(`
`),ro(T,K),$n.publish("endTilingPattern",K),po.pop().restore()};var hi=d.__private__.newObject=function(){var T=si();return io(T,!0),T},si=d.__private__.newObjectDeferred=function(){return ae++,le[ae]=function(){return ye},ae},io=function(T,K){return K=typeof K=="boolean"&&K,le[T]=ye,K&&pe(T+" 0 obj"),T},cl=d.__private__.newAdditionalObject=function(){var T={objId:si(),content:""};return Me.push(T),T},Ga=si(),Ts=si(),Ps=d.__private__.decodeColorString=function(T){var K=T.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var de=parseFloat(K[0]);K=[de,de,de,"r"]}for(var be="#",Ie=0;Ie<3;Ie++)be+=("0"+Math.floor(255*parseFloat(K[Ie])).toString(16)).slice(-2);return be},Ns=d.__private__.encodeColorString=function(T){var K;typeof T=="string"&&(T={ch1:T});var de=T.ch1,be=T.ch2,Ie=T.ch3,Ye=T.ch4,dt=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var zt=new hQ(de);if(zt.ok)de=zt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var pn=parseInt(de.substr(1),16);de=pn>>16&255,be=pn>>8&255,Ie=255&pn}if(be===void 0||Ye===void 0&&de===be&&be===Ie)if(typeof de=="string")K=de+" "+dt[0];else switch(T.precision){case 2:K=P(de/255)+" "+dt[0];break;case 3:default:K=k(de/255)+" "+dt[0]}else if(Ye===void 0||Hr(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return K=["1.","1.","1.",dt[1]].join(" ");if(typeof de=="string")K=[de,be,Ie,dt[1]].join(" ");else switch(T.precision){case 2:K=[P(de/255),P(be/255),P(Ie/255),dt[1]].join(" ");break;default:case 3:K=[k(de/255),k(be/255),k(Ie/255),dt[1]].join(" ")}}else if(typeof de=="string")K=[de,be,Ie,Ye,dt[2]].join(" ");else switch(T.precision){case 2:K=[P(de),P(be),P(Ie),P(Ye),dt[2]].join(" ");break;case 3:default:K=[k(de),k(be),k(Ie),k(Ye),dt[2]].join(" ")}return K},ul=d.__private__.getFilters=function(){return a},$a=d.__private__.putStream=function(T){var K=(T=T||{}).data||"",de=T.filters||ul(),be=T.alreadyAppliedFilters||[],Ie=T.addLength1||!1,Ye=K.length,dt=T.objectId,zt=function(na){return na};if(u!==null&&dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(zt=xi.encryptor(dt,0));var pn={};de===!0&&(de=["FlateEncode"]);var jn=T.additionalKeyValues||[],Rn=(pn=xn.API.processDataByFilters!==void 0?xn.API.processDataByFilters(K,de):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(pn.data.length!==0&&(jn.push({key:"Length",value:pn.data.length}),Ie===!0&&jn.push({key:"Length1",value:Ye})),Rn.length!=0)if(Rn.split("/").length-1==1)jn.push({key:"Filter",value:Rn});else{jn.push({key:"Filter",value:"["+Rn+"]"});for(var lr=0;lr<jn.length;lr+=1)if(jn[lr].key==="DecodeParms"){for(var mi=[],bi=0;bi<pn.reverseChain.split("/").length-1;bi+=1)mi.push("null");mi.push(jn[lr].value),jn[lr].value="["+mi.join(" ")+"]"}}pe("<<");for(var qi=0;qi<jn.length;qi++)pe("/"+jn[qi].key+" "+jn[qi].value);pe(">>"),pn.data.length!==0&&(pe("stream"),pe(zt(pn.data)),pe("endstream"))},fl=d.__private__.putPage=function(T){var K=T.number,de=T.data,be=T.objId,Ie=T.contentsObjId;io(be,!0),pe("<</Type /Page"),pe("/Parent "+T.rootDictionaryObjId+" 0 R"),pe("/Resources "+T.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(M(T.mediaBox.bottomLeftX))+" "+parseFloat(M(T.mediaBox.bottomLeftY))+" "+M(T.mediaBox.topRightX)+" "+M(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&pe("/CropBox ["+M(T.cropBox.bottomLeftX)+" "+M(T.cropBox.bottomLeftY)+" "+M(T.cropBox.topRightX)+" "+M(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&pe("/BleedBox ["+M(T.bleedBox.bottomLeftX)+" "+M(T.bleedBox.bottomLeftY)+" "+M(T.bleedBox.topRightX)+" "+M(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&pe("/TrimBox ["+M(T.trimBox.bottomLeftX)+" "+M(T.trimBox.bottomLeftY)+" "+M(T.trimBox.topRightX)+" "+M(T.trimBox.topRightY)+"]"),T.artBox!==null&&pe("/ArtBox ["+M(T.artBox.bottomLeftX)+" "+M(T.artBox.bottomLeftY)+" "+M(T.artBox.topRightX)+" "+M(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&pe("/UserUnit "+T.userUnit),$n.publish("putPage",{objId:be,pageContext:vn[K],pageNumber:K,page:de}),pe("/Contents "+Ie+" 0 R"),pe(">>"),pe("endobj");var Ye=de.join(`
`);return x===y.ADVANCED&&(Ye+=`
Q`),io(Ie,!0),$a({data:Ye,filters:ul(),objectId:Ie}),pe("endobj"),be},Nu=d.__private__.putPages=function(){var T,K,de=[];for(T=1;T<=jr;T++)vn[T].objId=si(),vn[T].contentsObjId=si();for(T=1;T<=jr;T++)de.push(fl({number:T,data:we[T],objId:vn[T].objId,contentsObjId:vn[T].contentsObjId,mediaBox:vn[T].mediaBox,cropBox:vn[T].cropBox,bleedBox:vn[T].bleedBox,trimBox:vn[T].trimBox,artBox:vn[T].artBox,userUnit:vn[T].userUnit,rootDictionaryObjId:Ga,resourceDictionaryObjId:Ts}));io(Ga,!0),pe("<</Type /Pages");var be="/Kids [";for(K=0;K<jr;K++)be+=de[K]+" 0 R ";pe(be+"]"),pe("/Count "+jr),pe(">>"),pe("endobj"),$n.publish("postPutPages")},zf=function(T){$n.publish("putFont",{font:T,out:pe,newObject:hi,putStream:$a}),T.isAlreadyPutted!==!0&&(T.objectNumber=hi(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+Eg(T.postScriptName)),pe("/Subtype /Type1"),typeof T.encoding=="string"&&pe("/Encoding /"+T.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},Ni=function(){for(var T in an)an.hasOwnProperty(T)&&(f===!1||f===!0&&p.hasOwnProperty(T))&&zf(an[T])},Li=function(T){T.objectNumber=hi();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[M(T.x),M(T.y),M(T.x+T.width),M(T.y+T.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var de=T.pages[1].join(`
`);$a({data:de,additionalKeyValues:K,objectId:T.objectNumber}),pe("endobj")},U=function(){for(var T in Pi)Pi.hasOwnProperty(T)&&Li(Pi[T])},Y=function(T,K){var de,be=[],Ie=1/(K-1);for(de=0;de<1;de+=Ie)be.push(de);if(be.push(1),T[0].offset!=0){var Ye={offset:0,color:T[0].color};T.unshift(Ye)}if(T[T.length-1].offset!=1){var dt={offset:1,color:T[T.length-1].color};T.push(dt)}for(var zt="",pn=0,jn=0;jn<be.length;jn++){for(de=be[jn];de>T[pn+1].offset;)pn++;var Rn=T[pn].offset,lr=(de-Rn)/(T[pn+1].offset-Rn),mi=T[pn].color,bi=T[pn+1].color;zt+=te(Math.round((1-lr)*mi[0]+lr*bi[0]).toString(16))+te(Math.round((1-lr)*mi[1]+lr*bi[1]).toString(16))+te(Math.round((1-lr)*mi[2]+lr*bi[2]).toString(16))}return zt.trim()},se=function(T,K){K||(K=21);var de=hi(),be=Y(T.colors,K),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+K+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$a({data:be,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),pe("endobj"),T.objectNumber=hi(),pe("<< /ShadingType "+T.type),pe("/ColorSpace /DeviceRGB");var Ye="/Coords ["+M(parseFloat(T.coords[0]))+" "+M(parseFloat(T.coords[1]))+" ";T.type===2?Ye+=M(parseFloat(T.coords[2]))+" "+M(parseFloat(T.coords[3])):Ye+=M(parseFloat(T.coords[2]))+" "+M(parseFloat(T.coords[3]))+" "+M(parseFloat(T.coords[4]))+" "+M(parseFloat(T.coords[5])),pe(Ye+="]"),T.matrix&&pe("/Matrix ["+T.matrix.toString()+"]"),pe("/Function "+de+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},he=function(T,K){var de=si(),be=hi();K.push({resourcesOid:de,objectOid:be}),T.objectNumber=be;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+T.boundingBox.map(M).join(" ")+"]"}),Ie.push({key:"XStep",value:M(T.xStep)}),Ie.push({key:"YStep",value:M(T.yStep)}),Ie.push({key:"Resources",value:de+" 0 R"}),T.matrix&&Ie.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),$a({data:T.stream,additionalKeyValues:Ie,objectId:T.objectNumber}),pe("endobj")},Oe=function(T){var K;for(K in Cn)Cn.hasOwnProperty(K)&&(Cn[K]instanceof Mm?se(Cn[K]):Cn[K]instanceof Ag&&he(Cn[K],T))},ke=function(T){for(var K in T.objectNumber=hi(),pe("<<"),T)switch(K){case"opacity":pe("/ca "+P(T[K]));break;case"stroke-opacity":pe("/CA "+P(T[K]))}pe(">>"),pe("endobj")},ve=function(){var T;for(T in xr)xr.hasOwnProperty(T)&&ke(xr[T])},ge=function(){for(var T in pe("/XObject <<"),Pi)Pi.hasOwnProperty(T)&&Pi[T].objectNumber>=0&&pe("/"+T+" "+Pi[T].objectNumber+" 0 R");$n.publish("putXobjectDict"),pe(">>")},Le=function(){xi.oid=hi(),pe("<<"),pe("/Filter /Standard"),pe("/V "+xi.v),pe("/R "+xi.r),pe("/U <"+xi.toHexString(xi.U)+">"),pe("/O <"+xi.toHexString(xi.O)+">"),pe("/P "+xi.P),pe(">>"),pe("endobj")},Fe=function(){for(var T in pe("/Font <<"),an)an.hasOwnProperty(T)&&(f===!1||f===!0&&p.hasOwnProperty(T))&&pe("/"+T+" "+an[T].objectNumber+" 0 R");pe(">>")},vt=function(){if(Object.keys(Cn).length>0){for(var T in pe("/Shading <<"),Cn)Cn.hasOwnProperty(T)&&Cn[T]instanceof Mm&&Cn[T].objectNumber>=0&&pe("/"+T+" "+Cn[T].objectNumber+" 0 R");$n.publish("putShadingPatternDict"),pe(">>")}},yt=function(T){if(Object.keys(Cn).length>0){for(var K in pe("/Pattern <<"),Cn)Cn.hasOwnProperty(K)&&Cn[K]instanceof d.TilingPattern&&Cn[K].objectNumber>=0&&Cn[K].objectNumber<T&&pe("/"+K+" "+Cn[K].objectNumber+" 0 R");$n.publish("putTilingPatternDict"),pe(">>")}},Ft=function(){if(Object.keys(xr).length>0){var T;for(T in pe("/ExtGState <<"),xr)xr.hasOwnProperty(T)&&xr[T].objectNumber>=0&&pe("/"+T+" "+xr[T].objectNumber+" 0 R");$n.publish("putGStateDict"),pe(">>")}},it=function(T){io(T.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fe(),vt(),yt(T.objectOid),Ft(),ge(),pe(">>"),pe("endobj")},At=function(){var T=[];Ni(),ve(),U(),Oe(T),$n.publish("putResources"),T.forEach(it),it({resourcesOid:Ts,objectOid:Number.MAX_SAFE_INTEGER}),$n.publish("postPutResources")},Ot=function(){$n.publish("putAdditionalObjects");for(var T=0;T<Me.length;T++){var K=Me[T];io(K.objId,!0),pe(K.content),pe("endobj")}$n.publish("postPutAdditionalObjects")},ct=function(T){Jt[T.fontName]=Jt[T.fontName]||{},Jt[T.fontName][T.fontStyle]=T.id},en=function(T,K,de,be,Ie){var Ye={id:"F"+(Object.keys(an).length+1).toString(10),postScriptName:T,fontName:K,fontStyle:de,encoding:be,isStandardFont:Ie||!1,metadata:{}};return $n.publish("addFont",{font:Ye,instance:this}),an[Ye.id]=Ye,ct(Ye),Ye.id},Nt=function(T){for(var K=0,de=$e.length;K<de;K++){var be=en.call(this,T[K][0],T[K][1],T[K][2],$e[K][3],!0);f===!1&&(p[be]=!0);var Ie=T[K][0].split("-");ct({id:be,fontName:Ie[0],fontStyle:Ie[1]||""})}$n.publish("addFonts",{fonts:an,dictionary:Jt})},Ht=function(T){return T.foo=function(){try{return T.apply(this,arguments)}catch(be){var K=be.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var de="Error in function "+K.split(`
`)[0].split("<")[0]+": "+be.message;if(!wn.console)throw new Error(de);wn.console.error(de,be),wn.alert&&alert(de)}},T.foo.bar=T,T.foo},St=function(T,K){var de,be,Ie,Ye,dt,zt,pn,jn,Rn;if(Ie=(K=K||{}).sourceEncoding||"Unicode",dt=K.outputEncoding,(K.autoencode||dt)&&an[ot].metadata&&an[ot].metadata[Ie]&&an[ot].metadata[Ie].encoding&&(Ye=an[ot].metadata[Ie].encoding,!dt&&an[ot].encoding&&(dt=an[ot].encoding),!dt&&Ye.codePages&&(dt=Ye.codePages[0]),typeof dt=="string"&&(dt=Ye[dt]),dt)){for(pn=!1,zt=[],de=0,be=T.length;de<be;de++)(jn=dt[T.charCodeAt(de)])?zt.push(String.fromCharCode(jn)):zt.push(T[de]),zt[de].charCodeAt(0)>>8&&(pn=!0);T=zt.join("")}for(de=T.length;pn===void 0&&de!==0;)T.charCodeAt(de-1)>>8&&(pn=!0),de--;if(!pn)return T;for(zt=K.noBOM?[]:[254,255],de=0,be=T.length;de<be;de++){if((Rn=(jn=T.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+T+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(Rn),zt.push(jn-(Rn<<8))}return String.fromCharCode.apply(void 0,zt)},Lt=d.__private__.pdfEscape=d.pdfEscape=function(T,K){return St(T,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ln=d.__private__.beginPage=function(T){we[++jr]=[],vn[jr]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},Wi(jr),Ae(we[q])},ho=function(T,K){var de,be,Ie;switch(n=K||n,typeof T=="string"&&(de=v(T.toLowerCase()),Array.isArray(de)&&(be=de[0],Ie=de[1])),Array.isArray(T)&&(be=T[0]*We,Ie=T[1]*We),isNaN(be)&&(be=i[0],Ie=i[1]),(be>14400||Ie>14400)&&(Kr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ie=Math.min(14400,Ie)),i=[be,Ie],n.substr(0,1)){case"l":Ie>be&&(i=[Ie,be]);break;case"p":be>Ie&&(i=[Ie,be])}Ln(i),Ix(Fg),pe(ec),jg!==0&&pe(jg+" J"),Vg!==0&&pe(Vg+" j"),$n.publish("addPage",{pageNumber:jr})},ea=function(T){T>0&&T<=jr&&(we.splice(T,1),vn.splice(T,1),jr--,q>jr&&(q=jr),this.setPage(q))},Wi=function(T){T>0&&T<=jr&&(q=T)},Ro=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return we.length-1},ta=function(T,K,de){var be,Ie=void 0;return de=de||{},T=T!==void 0?T:an[ot].fontName,K=K!==void 0?K:an[ot].fontStyle,be=T.toLowerCase(),Jt[be]!==void 0&&Jt[be][K]!==void 0?Ie=Jt[be][K]:Jt[T]!==void 0&&Jt[T][K]!==void 0?Ie=Jt[T][K]:de.disableWarning===!1&&Kr.warn("Unable to look up font label for font '"+T+"', '"+K+"'. Refer to getFontList() for available fonts."),Ie||de.noFallback||(Ie=Jt.times[K])==null&&(Ie=Jt.times.normal),Ie},Zr=d.__private__.putInfo=function(){var T=hi(),K=function(be){return be};for(var de in u!==null&&(K=xi.encryptor(T,0)),pe("<<"),pe("/Producer ("+Lt(K("jsPDF "+xn.version))+")"),Dt)Dt.hasOwnProperty(de)&&Dt[de]&&pe("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+Lt(K(Dt[de]))+")");pe("/CreationDate ("+Lt(K(z))+")"),pe(">>"),pe("endobj")},Er=d.__private__.putCatalog=function(T){var K=(T=T||{}).rootDictionaryObjId||Ga;switch(hi(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+K+" 0 R"),mt||(mt="fullwidth"),mt){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+mt;de.substr(de.length-1)==="%"&&(mt=parseInt(mt)/100),typeof mt=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+P(mt)+"]")}switch(It||(It="continuous"),It){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}Rt&&pe("/PageMode /"+Rt),$n.publish("putCatalog"),pe(">>"),pe("endobj")},Rf=d.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(ae+1)),pe("/Root "+ae+" 0 R"),pe("/Info "+(ae-1)+" 0 R"),u!==null&&pe("/Encrypt "+xi.oid+" 0 R"),pe("/ID [ <"+B+"> <"+B+"> ]"),pe(">>")},Dg=d.__private__.putHeader=function(){pe("%PDF-"+h),pe("%\xBA\xDF\xAC\xE0")},Lu=d.__private__.putXRef=function(){var T="0000000000";pe("xref"),pe("0 "+(ae+1)),pe("0000000000 65535 f ");for(var K=1;K<=ae;K++)typeof le[K]=="function"?pe((T+le[K]()).slice(-10)+" 00000 n "):le[K]!==void 0?pe((T+le[K]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},oo=d.__private__.buildDocument=function(){Ze(),Ae(ue),$n.publish("buildDocument"),Dg(),Nu(),Ot(),At(),u!==null&&Le(),Zr(),Er();var T=ye;return Lu(),Rf(),pe("startxref"),pe(""+T),pe("%%EOF"),Ae(we[q]),ue.join(`
`)},li=d.__private__.getBlob=function(T){return new Blob([nt(T)],{type:"application/pdf"})},pl=d.output=d.__private__.output=Ht(function(T,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",T){case void 0:return oo();case"save":d.save(K.filename);break;case"arraybuffer":return nt(oo());case"blob":return li(oo());case"bloburi":case"bloburl":if(wn.URL!==void 0&&typeof wn.URL.createObjectURL=="function")return wn.URL&&wn.URL.createObjectURL(li(oo()))||void 0;Kr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",be=oo();try{de=EL(be)}catch{de=EL(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+K.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Ie=K.pdfObjectUrl,Ye="");var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",zt=wn.open();return zt!==null&&zt.document.write(dt),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',jn=wn.open();if(jn!==null){jn.document.write(pn);var Rn=this;jn.document.documentElement.querySelector("#pdfViewer").onload=function(){jn.document.title=K.filename,jn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rn.output("bloburl"))}}return jn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',mi=wn.open();if(mi!==null&&(mi.document.write(lr),mi.document.title=K.filename),mi||typeof safari>"u")return mi;break;case"datauri":case"dataurl":return wn.document.location.href=this.output("datauristring",K);default:return null}}),Lc=function(T){return Array.isArray(As)===!0&&As.indexOf(T)>-1};switch(r){case"pt":We=1;break;case"mm":We=72/25.4;break;case"cm":We=72/2.54;break;case"in":We=72;break;case"px":We=Lc("px_scaling")==1?.75:96/72;break;case"pc":case"em":We=12;break;case"ex":We=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);We=r}var xi=null;ie(),j();var dl=function(T){return u!==null?xi.encryptor(T,0):function(K){return K}},Px=d.__private__.getPageInfo=d.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vn[T].objId,pageNumber:T,pageContext:vn[T]}},In=d.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in vn)if(vn[K].objId===T)break;return Px(K)},CM=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:vn[q].objId,pageNumber:q,pageContext:vn[q]}};d.addPage=function(){return ho.apply(this,arguments),this},d.setPage=function(){return Wi.apply(this,arguments),Ae.call(this,we[q]),this},d.insertPage=function(T){return this.addPage(),this.movePage(q,T),this},d.movePage=function(T,K){var de,be;if(T>K){de=we[T],be=vn[T];for(var Ie=T;Ie>K;Ie--)we[Ie]=we[Ie-1],vn[Ie]=vn[Ie-1];we[K]=de,vn[K]=be,this.setPage(K)}else if(T<K){de=we[T],be=vn[T];for(var Ye=T;Ye<K;Ye++)we[Ye]=we[Ye+1],vn[Ye]=vn[Ye+1];we[K]=de,vn[K]=be,this.setPage(K)}return this},d.deletePage=function(){return ea.apply(this,arguments),this},d.__private__.text=d.text=function(T,K,de,be,Ie){var Ye,dt,zt,pn,jn,Rn,lr,mi,bi,qi=(be=be||{}).scope||this;if(typeof T=="number"&&typeof K=="number"&&(typeof de=="string"||Array.isArray(de))){var na=de;de=K,K=T,T=na}if(arguments[3]instanceof fn?(O("The transform parameter of text() with a Matrix value"),bi=Ie):(zt=arguments[4],pn=arguments[5],Hr(lr=arguments[3])==="object"&&lr!==null||(typeof zt=="string"&&(pn=zt,zt=null),typeof lr=="string"&&(pn=lr,lr=null),typeof lr=="number"&&(zt=lr,lr=null),be={flags:lr,angle:zt,align:pn})),isNaN(K)||isNaN(de)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return qi;var mo="",tc=!1,Ls=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:vd,zc=qi.internal.scaleFactor;function jx(Jr){return Jr=Jr.split("	").join(Array(be.TabLen||9).join(" ")),Lt(Jr,lr)}function Gg(Jr){for(var Qr,Di=Jr.concat(),ao=[],Fu=Di.length;Fu--;)typeof(Qr=Di.shift())=="string"?ao.push(Qr):Array.isArray(Jr)&&(Qr.length===1||Qr[1]===void 0&&Qr[2]===void 0)?ao.push(Qr[0]):ao.push([Qr[0],Qr[1],Qr[2]]);return ao}function $g(Jr,Qr){var Di;if(typeof Jr=="string")Di=Qr(Jr)[0];else if(Array.isArray(Jr)){for(var ao,Fu,tv=Jr.concat(),Wm=[],Ux=tv.length;Ux--;)typeof(ao=tv.shift())=="string"?Wm.push(Qr(ao)[0]):Array.isArray(ao)&&typeof ao[0]=="string"&&(Fu=Qr(ao[0],ao[1],ao[2]),Wm.push([Fu[0],Fu[1],Fu[2]]));Di=Wm}return Di}var Im=!1,Yg=!0;if(typeof T=="string")Im=!0;else if(Array.isArray(T)){var Xg=T.concat();dt=[];for(var Dm,Fo=Xg.length;Fo--;)(typeof(Dm=Xg.shift())!="string"||Array.isArray(Dm)&&typeof Dm[0]!="string")&&(Yg=!1);Im=Yg}if(Im===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var zm=at/qi.internal.scaleFactor,Rm=zm*(Ls-1);switch(be.baseline){case"bottom":de-=Rm;break;case"top":de+=zm-Rm;break;case"hanging":de+=zm-2*Rm;break;case"middle":de+=zm/2-Rm}if((Rn=be.maxWidth||0)>0&&(typeof T=="string"?T=qi.splitTextToSize(T,Rn):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(Jr,Qr){return Jr.concat(qi.splitTextToSize(Qr,Rn))},[]))),Ye={text:T,x:K,y:de,options:be,mutex:{pdfEscape:Lt,activeFontKey:ot,fonts:an,activeFontSize:at}},$n.publish("preProcessText",Ye),T=Ye.text,zt=(be=Ye.options).angle,!(bi instanceof fn)&&zt&&typeof zt=="number"){zt*=Math.PI/180,be.rotationDirection===0&&(zt=-zt),x===y.ADVANCED&&(zt=-zt);var Fm=Math.cos(zt),Kg=Math.sin(zt);bi=new fn(Fm,Kg,-Kg,Fm,0,0)}else zt&&zt instanceof fn&&(bi=zt);x!==y.ADVANCED||bi||(bi=Hi),(jn=be.charSpace||Pm)!==void 0&&(mo+=M(A(jn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mi=be.horizontalScale)!==void 0&&(mo+=M(100*mi)+` Tz
`),be.lang;var Ya=-1,IM=be.renderingMode!==void 0?be.renderingMode:be.stroke,Zg=qi.internal.getCurrentPageInfo().pageContext;switch(IM){case 0:case!1:case"fill":Ya=0;break;case 1:case!0:case"stroke":Ya=1;break;case 2:case"fillThenStroke":Ya=2;break;case 3:case"invisible":Ya=3;break;case 4:case"fillAndAddForClipping":Ya=4;break;case 5:case"strokeAndAddPathForClipping":Ya=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ya=6;break;case 7:case"addToPathForClipping":Ya=7}var Vx=Zg.usedRenderingMode!==void 0?Zg.usedRenderingMode:-1;Ya!==-1?mo+=Ya+` Tr
`:Vx!==-1&&(mo+=`0 Tr
`),Ya!==-1&&(Zg.usedRenderingMode=Ya),pn=be.align||"left";var hl,Bm=at*Ls,Hx=qi.internal.pageSize.getWidth(),Wx=an[ot];jn=be.charSpace||Pm,Rn=be.maxWidth||0,lr=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Vf=[],bd=function(Jr){return qi.getStringUnitWidth(Jr,{font:Wx,charSpace:jn,fontSize:at,doKerning:!1})*at/zc};if(Object.prototype.toString.call(T)==="[object Array]"){var Xa;dt=Gg(T),pn!=="left"&&(hl=dt.map(bd));var Ca,Hf=0;if(pn==="right"){K-=hl[0],T=[],Fo=dt.length;for(var Du=0;Du<Fo;Du++)Du===0?(Ca=Dc(K),Xa=Iu(de)):(Ca=A(Hf-hl[Du]),Xa=-Bm),T.push([dt[Du],Ca,Xa]),Hf=hl[Du]}else if(pn==="center"){K-=hl[0]/2,T=[],Fo=dt.length;for(var zu=0;zu<Fo;zu++)zu===0?(Ca=Dc(K),Xa=Iu(de)):(Ca=A((Hf-hl[zu])/2),Xa=-Bm),T.push([dt[zu],Ca,Xa]),Hf=hl[zu]}else if(pn==="left"){T=[],Fo=dt.length;for(var jm=0;jm<Fo;jm++)T.push(dt[jm])}else if(pn==="justify"&&Wx.encoding==="Identity-H"){T=[],Fo=dt.length,Rn=Rn!==0?Rn:Hx;for(var Ru=0,Ii=0;Ii<Fo;Ii++)if(Xa=Ii===0?Iu(de):-Bm,Ca=Ii===0?Dc(K):Ru,Ii<Fo-1){var Jg=A((Rn-hl[Ii])/(dt[Ii].split(" ").length-1)),Oa=dt[Ii].split(" ");T.push([Oa[0]+" ",Ca,Xa]),Ru=0;for(var ml=1;ml<Oa.length;ml++){var Vm=(bd(Oa[ml-1]+" "+Oa[ml])-bd(Oa[ml]))*zc+Jg;ml==Oa.length-1?T.push([Oa[ml],Vm,0]):T.push([Oa[ml]+" ",Vm,0]),Ru-=Vm}}else T.push([dt[Ii],Ca,Xa]);T.push(["",Ru,0])}else{if(pn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(T=[],Fo=dt.length,Rn=Rn!==0?Rn:Hx,Ii=0;Ii<Fo;Ii++)Xa=Ii===0?Iu(de):-Bm,Ca=Ii===0?Dc(K):0,Ii<Fo-1?Vf.push(M(A((Rn-hl[Ii])/(dt[Ii].split(" ").length-1)))):Vf.push(0),T.push([dt[Ii],Ca,Xa])}}var qx=typeof be.R2L=="boolean"?be.R2L:Et;qx===!0&&(T=$g(T,function(Jr,Qr,Di){return[Jr.split("").reverse().join(""),Qr,Di]})),Ye={text:T,x:K,y:de,options:be,mutex:{pdfEscape:Lt,activeFontKey:ot,fonts:an,activeFontSize:at}},$n.publish("postProcessText",Ye),T=Ye.text,tc=Ye.mutex.isHex||!1;var Qg=an[ot].encoding;Qg!=="WinAnsiEncoding"&&Qg!=="StandardEncoding"||(T=$g(T,function(Jr,Qr,Di){return[jx(Jr),Qr,Di]})),dt=Gg(T),T=[];for(var _d,wd,Wf,Sd=0,Hm=1,Cd=Array.isArray(dt[0])?Hm:Sd,qf="",ev=function(Jr,Qr,Di){var ao="";return Di instanceof fn?(Di=typeof be.angle=="number"?no(Di,new fn(1,0,0,1,Jr,Qr)):no(new fn(1,0,0,1,Jr,Qr),Di),x===y.ADVANCED&&(Di=no(new fn(1,0,0,-1,0,0),Di)),ao=Di.join(" ")+` Tm
`):ao=M(Jr)+" "+M(Qr)+` Td
`,ao},gl=0;gl<dt.length;gl++){switch(qf="",Cd){case Hm:Wf=(tc?"<":"(")+dt[gl][0]+(tc?">":")"),_d=parseFloat(dt[gl][1]),wd=parseFloat(dt[gl][2]);break;case Sd:Wf=(tc?"<":"(")+dt[gl]+(tc?">":")"),_d=Dc(K),wd=Iu(de)}Vf!==void 0&&Vf[gl]!==void 0&&(qf=Vf[gl]+` Tw
`),gl===0?T.push(qf+ev(_d,wd,bi)+Wf):Cd===Sd?T.push(qf+Wf):Cd===Hm&&T.push(qf+ev(_d,wd,bi)+Wf)}T=Cd===Sd?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var vl=`BT
/`;return vl+=ot+" "+at+` Tf
`,vl+=M(at*Ls)+` TL
`,vl+=yd+`
`,vl+=mo,vl+=T,pe(vl+="ET"),p[ot]=!0,qi};var OM=d.__private__.clip=d.clip=function(T){return pe(T==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return OM("evenodd")},d.__private__.discardPath=d.discardPath=function(){return pe("n"),this};var Ic=d.__private__.isValidStyle=function(T){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(K=!0),K};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(T){return Ic(T)&&(c=T),this};var Nx=d.__private__.getStyle=d.getStyle=function(T){var K=c;switch(T){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=T}return K},Lx=d.close=function(){return pe("h"),this};d.stroke=function(){return pe("S"),this},d.fill=function(T){return Am("f",T),this},d.fillEvenOdd=function(T){return Am("f*",T),this},d.fillStroke=function(T){return Am("B",T),this},d.fillStrokeEvenOdd=function(T){return Am("B*",T),this};var Am=function(T,K){Hr(K)==="object"?kM(K,T):pe(T)},zg=function(T){T===null||x===y.ADVANCED&&T===void 0||(T=Nx(T),pe(T))};function MM(T,K,de,be,Ie){var Ye=new Ag(K||this.boundingBox,de||this.xStep,be||this.yStep,this.gState,Ie||this.matrix);Ye.stream=this.stream;var dt=T+"$$"+this.cloneIndex+++"$$";return ro(dt,Ye),Ye}var kM=function(T,K){var de=yi[T.key],be=Cn[de];if(be instanceof Mm)pe("q"),pe(EM(K)),be.gState&&d.setGState(be.gState),pe(T.matrix.toString()+" cm"),pe("/"+de+" sh"),pe("Q");else if(be instanceof Ag){var Ie=new fn(1,0,0,-1,0,jf());T.matrix&&(Ie=Ie.multiply(T.matrix||Hi),de=MM.call(be,T.key,T.boundingBox,T.xStep,T.yStep,Ie).id),pe("q"),pe("/Pattern cs"),pe("/"+de+" scn"),be.gState&&d.setGState(be.gState),pe(K),pe("Q")}},EM=function(T){switch(T){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Rg=d.moveTo=function(T,K){return pe(M(A(T))+" "+M(L(K))+" m"),this},gd=d.lineTo=function(T,K){return pe(M(A(T))+" "+M(L(K))+" l"),this},Ff=d.curveTo=function(T,K,de,be,Ie,Ye){return pe([M(A(T)),M(L(K)),M(A(de)),M(L(be)),M(A(Ie)),M(L(Ye)),"c"].join(" ")),this};d.__private__.line=d.line=function(T,K,de,be,Ie){if(isNaN(T)||isNaN(K)||isNaN(de)||isNaN(be)||!Ic(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return x===y.COMPAT?this.lines([[de-T,be-K]],T,K,[1,1],Ie||"S"):this.lines([[de-T,be-K]],T,K,[1,1]).stroke()},d.__private__.lines=d.lines=function(T,K,de,be,Ie,Ye){var dt,zt,pn,jn,Rn,lr,mi,bi,qi,na,mo,tc;if(typeof T=="number"&&(tc=de,de=K,K=T,T=tc),be=be||[1,1],Ye=Ye||!1,isNaN(K)||isNaN(de)||!Array.isArray(T)||!Array.isArray(be)||!Ic(Ie)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Rg(K,de),dt=be[0],zt=be[1],jn=T.length,na=K,mo=de,pn=0;pn<jn;pn++)(Rn=T[pn]).length===2?(na=Rn[0]*dt+na,mo=Rn[1]*zt+mo,gd(na,mo)):(lr=Rn[0]*dt+na,mi=Rn[1]*zt+mo,bi=Rn[2]*dt+na,qi=Rn[3]*zt+mo,na=Rn[4]*dt+na,mo=Rn[5]*zt+mo,Ff(lr,mi,bi,qi,na,mo));return Ye&&Lx(),zg(Ie),this},d.path=function(T){for(var K=0;K<T.length;K++){var de=T[K],be=de.c;switch(de.op){case"m":Rg(be[0],be[1]);break;case"l":gd(be[0],be[1]);break;case"c":Ff.apply(this,be);break;case"h":Lx()}}return this},d.__private__.rect=d.rect=function(T,K,de,be,Ie){if(isNaN(T)||isNaN(K)||isNaN(de)||isNaN(be)||!Ic(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return x===y.COMPAT&&(be=-be),pe([M(A(T)),M(L(K)),M(A(de)),M(A(be)),"re"].join(" ")),zg(Ie),this},d.__private__.triangle=d.triangle=function(T,K,de,be,Ie,Ye,dt){if(isNaN(T)||isNaN(K)||isNaN(de)||isNaN(be)||isNaN(Ie)||isNaN(Ye)||!Ic(dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-T,be-K],[Ie-de,Ye-be],[T-Ie,K-Ye]],T,K,[1,1],dt,!0),this},d.__private__.roundedRect=d.roundedRect=function(T,K,de,be,Ie,Ye,dt){if(isNaN(T)||isNaN(K)||isNaN(de)||isNaN(be)||isNaN(Ie)||isNaN(Ye)||!Ic(dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*de),Ye=Math.min(Ye,.5*be),this.lines([[de-2*Ie,0],[Ie*zt,0,Ie,Ye-Ye*zt,Ie,Ye],[0,be-2*Ye],[0,Ye*zt,-Ie*zt,Ye,-Ie,Ye],[2*Ie-de,0],[-Ie*zt,0,-Ie,-Ye*zt,-Ie,-Ye],[0,2*Ye-be],[0,-Ye*zt,Ie*zt,-Ye,Ie,-Ye]],T+Ie,K,[1,1],dt,!0),this},d.__private__.ellipse=d.ellipse=function(T,K,de,be,Ie){if(isNaN(T)||isNaN(K)||isNaN(de)||isNaN(be)||!Ic(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*de,dt=4/3*(Math.SQRT2-1)*be;return Rg(T+de,K),Ff(T+de,K-dt,T+Ye,K-be,T,K-be),Ff(T-Ye,K-be,T-de,K-dt,T-de,K),Ff(T-de,K+dt,T-Ye,K+be,T,K+be),Ff(T+Ye,K+be,T+de,K+dt,T+de,K),zg(Ie),this},d.__private__.circle=d.circle=function(T,K,de,be){if(isNaN(T)||isNaN(K)||isNaN(de)||!Ic(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,K,de,de,be)},d.setFont=function(T,K,de){return de&&(K=S(K,de)),ot=ta(T,K,{disableWarning:!1}),this};var AM=d.__private__.getFont=d.getFont=function(){return an[ta.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var T,K,de={};for(T in Jt)if(Jt.hasOwnProperty(T))for(K in de[T]=[],Jt[T])Jt[T].hasOwnProperty(K)&&de[T].push(K);return de},d.addFont=function(T,K,de,be,Ie){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(de=S(de,be)),Ie=Ie||"Identity-H",en.call(this,T,K,de,Ie)};var vd,Fg=e.lineWidth||.200025,Tm=d.__private__.getLineWidth=d.getLineWidth=function(){return Fg},Ix=d.__private__.setLineWidth=d.setLineWidth=function(T){return Fg=T,pe(M(A(T))+" w"),this};d.__private__.setLineDash=xn.API.setLineDash=xn.API.setLineDashPattern=function(T,K){if(T=T||[],K=K||0,isNaN(K)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(de){return M(A(de))}).join(" "),K=M(A(K)),pe("["+T+"] "+K+" d"),this};var Dx=d.__private__.getLineHeight=d.getLineHeight=function(){return at*vd};d.__private__.getLineHeight=d.getLineHeight=function(){return at*vd};var zx=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(vd=T),this},Rx=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return vd};zx(e.lineHeight);var Dc=d.__private__.getHorizontalCoordinate=function(T){return A(T)},Iu=d.__private__.getVerticalCoordinate=function(T){return x===y.ADVANCED?T:vn[q].mediaBox.topRightY-vn[q].mediaBox.bottomLeftY-A(T)},TM=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(T){return M(Dc(T))},Bf=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(T){return M(Iu(T))},ec=e.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return Ps(ec)},d.__private__.setStrokeColor=d.setDrawColor=function(T,K,de,be){return ec=Ns({ch1:T,ch2:K,ch3:de,ch4:be,pdfColorType:"draw",precision:2}),pe(ec),this};var Bg=e.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return Ps(Bg)},d.__private__.setFillColor=d.setFillColor=function(T,K,de,be){return Bg=Ns({ch1:T,ch2:K,ch3:de,ch4:be,pdfColorType:"fill",precision:2}),pe(Bg),this};var yd=e.textColor||"0 g",PM=d.__private__.getTextColor=d.getTextColor=function(){return Ps(yd)};d.__private__.setTextColor=d.setTextColor=function(T,K,de,be){return yd=Ns({ch1:T,ch2:K,ch3:de,ch4:be,pdfColorType:"text",precision:3}),this};var Pm=e.charSpace,NM=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Pm||0)};d.__private__.setCharSpace=d.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pm=T,this};var jg=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(T){var K=d.CapJoinStyles[T];if(K===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jg=K,pe(K+" J"),this};var Vg=0;d.__private__.setLineJoin=d.setLineJoin=function(T){var K=d.CapJoinStyles[T];if(K===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vg=K,pe(K+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(M(A(T))+" M"),this},d.GState=vM,d.setGState=function(T){(T=typeof T=="string"?xr[to[T]]:Fx(null,T)).equals(Ti)||(pe("/"+T.id+" gs"),Ti=T)};var Fx=function(T,K){if(!T||!to[T]){var de=!1;for(var be in xr)if(xr.hasOwnProperty(be)&&xr[be].equals(K)){de=!0;break}if(de)K=xr[be];else{var Ie="GS"+(Object.keys(xr).length+1).toString(10);xr[Ie]=K,K.id=Ie}return T&&(to[T]=K.id),$n.publish("addGState",K),K}};d.addGState=function(T,K){return Fx(T,K),this},d.saveGraphicsState=function(){return pe("q"),yr.push({key:ot,size:at,color:yd}),this},d.restoreGraphicsState=function(){pe("Q");var T=yr.pop();return ot=T.key,at=T.size,yd=T.color,Ti=null,this},d.setCurrentTransformationMatrix=function(T){return pe(T.toString()+" cm"),this},d.comment=function(T){return pe("#"+T),this};var Nm=function(T,K){var de=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Ye){isNaN(Ye)||(de=parseFloat(Ye))}});var be=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ye){isNaN(Ye)||(be=parseFloat(Ye))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(Ye){Ie=Ye.toString()}}),this},Hg=function(T,K,de,be){Nm.call(this,T,K),this.type="rect";var Ie=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(dt){isNaN(dt)||(Ie=parseFloat(dt))}});var Ye=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(dt){isNaN(dt)||(Ye=parseFloat(dt))}}),this},Wg=function(){this.page=jr,this.currentPage=q,this.pages=we.slice(0),this.pagesContext=vn.slice(0),this.x=Zt,this.y=Tt,this.matrix=zn,this.width=xd(q),this.height=jf(q),this.outputDestination=Ve,this.id="",this.objectNumber=-1};Wg.prototype.restore=function(){jr=this.page,q=this.currentPage,vn=this.pagesContext,we=this.pages,Zt=this.x,Tt=this.y,zn=this.matrix,qg(q,this.width),Ug(q,this.height),Ve=this.outputDestination};var Bx=function(T,K,de,be,Ie){po.push(new Wg),jr=q=0,we=[],Zt=T,Tt=K,zn=Ie,Ln([de,be])},LM=function(T){if(sr[T])po.pop().restore();else{var K=new Wg,de="Xo"+(Object.keys(Pi).length+1).toString(10);K.id=de,sr[T]=de,Pi[de]=K,$n.publish("addFormObject",K),po.pop().restore()}};for(var Lm in d.beginFormObject=function(T,K,de,be,Ie){return Bx(T,K,de,be,Ie),this},d.endFormObject=function(T){return LM(T),this},d.doFormObject=function(T,K){var de=Pi[sr[T]];return pe("q"),pe(K.toString()+" cm"),pe("/"+de.id+" Do"),pe("Q"),this},d.getFormObject=function(T){var K=Pi[sr[T]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},d.save=function(T,K){return T=T||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Om(li(oo()),T),typeof Om.unload=="function"&&wn.setTimeout&&setTimeout(Om.unload,911),this):new Promise(function(de,be){try{var Ie=Om(li(oo()),T);typeof Om.unload=="function"&&wn.setTimeout&&setTimeout(Om.unload,911),de(Ie)}catch(Ye){be(Ye.message)}})},xn.API)xn.API.hasOwnProperty(Lm)&&(Lm==="events"&&xn.API.events.length?function(T,K){var de,be,Ie;for(Ie=K.length-1;Ie!==-1;Ie--)de=K[Ie][0],be=K[Ie][1],T.subscribe.apply(T,[de].concat(typeof be=="function"?[be]:be))}($n,xn.API.events):d[Lm]=xn.API[Lm]);var xd=d.getPageWidth=function(T){return(vn[T=T||q].mediaBox.topRightX-vn[T].mediaBox.bottomLeftX)/We},qg=d.setPageWidth=function(T,K){vn[T].mediaBox.topRightX=K*We+vn[T].mediaBox.bottomLeftX},jf=d.getPageHeight=function(T){return(vn[T=T||q].mediaBox.topRightY-vn[T].mediaBox.bottomLeftY)/We},Ug=d.setPageHeight=function(T,K){vn[T].mediaBox.topRightY=K*We+vn[T].mediaBox.bottomLeftY};return d.internal={pdfEscape:Lt,getStyle:Nx,getFont:AM,getFontSize:lt,getCharSpace:NM,getTextColor:PM,getLineHeight:Dx,getLineHeightFactor:Rx,getLineWidth:Tm,write:ft,getHorizontalCoordinate:Dc,getVerticalCoordinate:Iu,getCoordinateString:TM,getVerticalCoordinateString:Bf,collections:{},newObject:hi,newAdditionalObject:cl,newObjectDeferred:si,newObjectDeferredBegin:io,getFilters:ul,putStream:$a,events:$n,scaleFactor:We,pageSize:{getWidth:function(){return xd(q)},setWidth:function(T){qg(q,T)},getHeight:function(){return jf(q)},setHeight:function(T){Ug(q,T)}},encryptionOptions:u,encryption:xi,getEncryptor:dl,output:pl,getNumberOfPages:Ro,pages:we,out:pe,f2:P,f3:k,getPageInfo:Px,getPageInfoByObjId:In,getCurrentPageInfo:CM,getPDFVersion:m,Point:Nm,Rectangle:Hg,Matrix:fn,hasHotfix:Lc},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return xd(q)},set:function(T){qg(q,T)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return jf(q)},set:function(T){Ug(q,T)},enumerable:!0,configurable:!0}),Nt.call(d,$e),ot="F1",ho(i,n),$n.publish("initialized"),d}kg.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},kg.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},kg.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},kg.prototype.processOwnerPassword=function(e,t){return TL(AL(t).substr(0,5),e)},kg.prototype.encryptor=function(e,t){var n=AL(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return TL(n,r)}},vM.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Hr(e)!==Hr(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},xn.API={events:[]},xn.version="2.5.2";var Ai=xn.API,IL=1,Em=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Og=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bn=function(e){return e.toFixed(2)},dd=function(e){return e.toFixed(5)};Ai.__acroform__={};var Es=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},tQ=function(e){return e*IL},Au=function(e){var t=new yQ,n=Xt.internal.getHeight(e)||0,r=Xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Bn(r)),Number(Bn(n))],t},_Me=Ai.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},wMe=Ai.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},SMe=Ai.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Bi=Ai.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SMe(e,t-1)},ji=Ai.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _Me(e,t-1)},Vi=Ai.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return wMe(e,t-1)},CMe=Ai.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],a=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(o)||0,[Number(Bn(l.lowerLeft_X)),Number(Bn(l.lowerLeft_Y)),Number(Bn(l.upperRight_X)),Number(Bn(l.upperRight_Y))]},OMe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=PL(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Bn(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Au(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},PL=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var o=n,a=Xt.internal.getHeight(e)||0;a=a<0?-a:a;var s=Xt.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(k,A,N){if(k+1<i.length){var L=A+" "+i[k+1][0];return uM(L,e,N).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var c,u,f=uM("3",e,o).height,p=e.multiline?a-o:(a-f)/2,d=p+=2,h=0,m=0,g=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+uM(t,e,o=12).width+", FieldWidth:"+s+`
`;break}for(var v="",y=0,x=0;x<i.length;x++)if(i.hasOwnProperty(x)){var _=!1;if(i[x].length!==1&&g!==i[x].length-1){if((f+2)*(y+2)+2>a)continue e;v+=i[x][g],_=!0,m=x,x--}else{v=(v+=i[x][g]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var w=parseInt(x),S=l(w,v,o),M=x>=i.length-1;if(S&&!M){v+=" ",g=0;continue}if(S||M){if(M)m=w;else if(e.multiline&&(f+2)*(y+2)+2>a)continue e}else{if(!e.multiline||(f+2)*(y+2)+2>a)continue e;m=w}}for(var O="",E=h;E<=m;E++){var P=i[E];if(e.multiline){if(E===m){O+=P[g]+" ",g=(g+1)%P.length;continue}if(E===h){O+=P[P.length-1]+" ";continue}}O+=P[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,u=uM(O,e,o).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;case"left":default:c=2}t+=Bn(c)+" "+Bn(d)+` Td
`,t+="("+Em(O)+`) Tj
`,t+=-Bn(c)+` 0 Td
`,d=-(o+2),u=0,h=_?m:m+1,y++,v=""}break}return r.text=t,r.fontSize=o,r},uM=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},MMe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kMe=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},EMe=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Hr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},AMe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Pc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(MMe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");IL=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new xQ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&kMe(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var o=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var s=r[a],l=[],c=s.Rect;if(s.Rect&&(s.Rect=CMe(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Xt.createDefaultAppearanceStream(s),Hr(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=OMe(s);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var f="";for(var p in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(p)){var d=s.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var h=d[a];typeof h=="function"&&(h=h.call(i,s)),f+="/"+a+" "+h+" ",i.internal.acroformPlugin.xForms.indexOf(h)>=0||i.internal.acroformPlugin.xForms.push(h)}}else typeof(h=d)=="function"&&(h=h.call(i,s)),f+="/"+a+" "+h,i.internal.acroformPlugin.xForms.indexOf(h)>=0||i.internal.acroformPlugin.xForms.push(h);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}o&&EMe(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},vQ=Ai.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),Hr(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Em(r(e[o].toString()))+")"):i+=e[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},OL=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Em(r(e))+")"},Tu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Tu.prototype.toString=function(){return this.objId+" 0 R"},Tu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Tu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:vQ(i,this.objId,this.scope)}):i instanceof Tu?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var yQ=function(){Tu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Es(yQ,Tu);var xQ=function(){Tu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Em(n(e))+")"}},set:function(n){e=n}})};Es(xQ,Tu);var Pc=function e(){Tu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bi(t,3)},set:function(v){v?this.F=ji(t,3):this.F=Vi(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof yM)return;o="FieldObject"+e.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Em(v(o))+")"},set:function(v){o=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(v){o=v}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(v){s=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/IL:c},set:function(v){c=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof yM||this instanceof km))return OL(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof zo?p:OL(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof zo?v:v.substr(0,1)==="("?Og(v.substr(1,v.length-2)):Og(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof zo?Og(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof zo?"/"+v:v}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof zo?d:OL(d,this.objId,this.scope)},set:function(v){v=v.toString(),d=this instanceof zo?v:v.substr(0,1)==="("?Og(v.substr(1,v.length-2)):Og(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof zo?Og(d.substr(1,d.length-1)):d},set:function(v){v=v.toString(),d=this instanceof zo?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var h,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(v){v=!!v,m=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(h)return h},set:function(v){h=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,1)},set:function(v){v?this.Ff=ji(this.Ff,1):this.Ff=Vi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,2)},set:function(v){v?this.Ff=ji(this.Ff,2):this.Ff=Vi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,3)},set:function(v){v?this.Ff=ji(this.Ff,3):this.Ff=Vi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');g=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(g){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};Es(Pc,Tu);var Tg=function(){Pc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vQ(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(o,a,s){s||(s=1);for(var l,c=[];l=a.exec(o);)c.push(l[s]);return c}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,18)},set:function(n){n?this.Ff=ji(this.Ff,18):this.Ff=Vi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ji(this.Ff,19):this.Ff=Vi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,20)},set:function(n){n?(this.Ff=ji(this.Ff,20),t.sort()):this.Ff=Vi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,22)},set:function(n){n?this.Ff=ji(this.Ff,22):this.Ff=Vi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,23)},set:function(n){n?this.Ff=ji(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,27)},set:function(n){n?this.Ff=ji(this.Ff,27):this.Ff=Vi(this.Ff,27)}}),this.hasAppearanceStream=!1};Es(Tg,Pc);var Pg=function(){Tg.call(this),this.fontName="helvetica",this.combo=!1};Es(Pg,Tg);var Ng=function(){Pg.call(this),this.combo=!0};Es(Ng,Pg);var dM=function(){Ng.call(this),this.edit=!0};Es(dM,Ng);var zo=function(){Pc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,15)},set:function(n){n?this.Ff=ji(this.Ff,15):this.Ff=Vi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,16)},set:function(n){n?this.Ff=ji(this.Ff,16):this.Ff=Vi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,17)},set:function(n){n?this.Ff=ji(this.Ff,17):this.Ff=Vi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,26)},set:function(n){n?this.Ff=ji(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Em(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Hr(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Es(zo,Pc);var hM=function(){zo.call(this),this.pushButton=!0};Es(hM,zo);var Lg=function(){zo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Es(Lg,zo);var yM=function(){var e,t;Pc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),r)a.push("/"+o+" ("+Em(i(r[o]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Hr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Es(yM,Pc),Lg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Lg.prototype.createOption=function(e){var t=new yM;return t.Parent=this,t.optionName=e,this.Kids.push(t),TMe.call(this.scope,t),t};var mM=function(){zo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xt.CheckBox.createAppearanceStream()};Es(mM,zo);var km=function(){Pc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,13)},set:function(t){t?this.Ff=ji(this.Ff,13):this.Ff=Vi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,21)},set:function(t){t?this.Ff=ji(this.Ff,21):this.Ff=Vi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,23)},set:function(t){t?this.Ff=ji(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,24)},set:function(t){t?this.Ff=ji(this.Ff,24):this.Ff=Vi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,25)},set:function(t){t?this.Ff=ji(this.Ff,25):this.Ff=Vi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,26)},set:function(t){t?this.Ff=ji(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Es(km,Pc);var gM=function(){km.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,14)},set:function(e){e?this.Ff=ji(this.Ff,14):this.Ff=Vi(this.Ff,14)}}),this.password=!0};Es(gM,km);var Xt={CheckBox:{createAppearanceStream:function(){return{N:{On:Xt.CheckBox.YesNormal},D:{On:Xt.CheckBox.YesPushDown,Off:Xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Au(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=PL(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Bn(Xt.internal.getWidth(e))+" "+Bn(Xt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Bn(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Au(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=Xt.internal.getHeight(e),a=Xt.internal.getWidth(e),s=PL(e,e.caption);return i.push("1 g"),i.push("0 0 "+Bn(a)+" "+Bn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Bn(a-1)+" "+Bn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Bn(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Au(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Bn(Xt.internal.getWidth(e))+" "+Bn(Xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Xt.RadioButton.Circle.YesNormal,t.D[e]=Xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Au(e);t.scope=e.scope;var n=[],r=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Xt.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+dd(Xt.internal.getWidth(e)/2)+" "+dd(Xt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Au(e);t.scope=e.scope;var n=[],r=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Xt.internal.Bezier_C).toFixed(5)),a=Number((r*Xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+dd(Xt.internal.getWidth(e)/2)+" "+dd(Xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+dd(Xt.internal.getWidth(e)/2)+" "+dd(Xt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Au(e);t.scope=e.scope;var n=[],r=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+dd(Xt.internal.getWidth(e)/2)+" "+dd(Xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Xt.RadioButton.Cross.YesNormal,t.D[e]=Xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Au(e);t.scope=e.scope;var n=[],r=Xt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Bn(Xt.internal.getWidth(e)-2)+" "+Bn(Xt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Bn(r.x1.x)+" "+Bn(r.x1.y)+" m"),n.push(Bn(r.x2.x)+" "+Bn(r.x2.y)+" l"),n.push(Bn(r.x4.x)+" "+Bn(r.x4.y)+" m"),n.push(Bn(r.x3.x)+" "+Bn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Au(e);t.scope=e.scope;var n=Xt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Bn(Xt.internal.getWidth(e))+" "+Bn(Xt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Bn(Xt.internal.getWidth(e)-2)+" "+Bn(Xt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Bn(n.x1.x)+" "+Bn(n.x1.y)+" m"),r.push(Bn(n.x2.x)+" "+Bn(n.x2.y)+" l"),r.push(Bn(n.x4.x)+" "+Bn(n.x4.y)+" m"),r.push(Bn(n.x3.x)+" "+Bn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Au(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Bn(Xt.internal.getWidth(e))+" "+Bn(Xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Xt.internal.getWidth(e),n=Xt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Xt.internal.getWidth=function(e){var t=0;return Hr(e)==="object"&&(t=tQ(e.Rect[2])),t},Xt.internal.getHeight=function(e){var t=0;return Hr(e)==="object"&&(t=tQ(e.Rect[3])),t};var TMe=Ai.addField=function(e){if(AMe(this,e),!(e instanceof Pc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ai.AcroFormChoiceField=Tg,Ai.AcroFormListBox=Pg,Ai.AcroFormComboBox=Ng,Ai.AcroFormEditBox=dM,Ai.AcroFormButton=zo,Ai.AcroFormPushButton=hM,Ai.AcroFormRadioButton=Lg,Ai.AcroFormCheckBox=mM,Ai.AcroFormTextField=km,Ai.AcroFormPasswordField=gM,Ai.AcroFormAppearance=Xt,Ai.AcroForm={ChoiceField:Tg,ListBox:Pg,ComboBox:Ng,EditBox:dM,Button:zo,PushButton:hM,RadioButton:Lg,CheckBox:mM,TextField:km,PasswordField:gM,Appearance:Xt},xn.AcroForm={ChoiceField:Tg,ListBox:Pg,ComboBox:Ng,EditBox:dM,Button:zo,PushButton:hM,RadioButton:Lg,CheckBox:mM,TextField:km,PasswordField:gM,Appearance:Xt};var qOt=xn.AcroForm;function bQ(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(k,A){var N,L,z,B,H,j=t;if((A=A||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(S(k))for(H in n)for(z=n[H],N=0;N<z.length;N+=1){for(B=!0,L=0;L<z[N].length;L+=1)if(z[N][L]!==void 0&&z[N][L]!==k[L]){B=!1;break}if(B===!0){j=H;break}}else for(H in n)for(z=n[H],N=0;N<z.length;N+=1){for(B=!0,L=0;L<z[N].length;L+=1)if(z[N][L]!==void 0&&z[N][L]!==k.charCodeAt(L)){B=!1;break}if(B===!0){j=H;break}}return j===t&&A!==t&&(j=A),j},i=function k(A){for(var N=this.internal.write,L=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:A.width}),B.push({key:"Height",value:A.height}),A.colorSpace===g.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===g.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var H="",j=0,W=A.transparency.length;j<W;j++)H+=A.transparency[j]+" "+A.transparency[j]+" ";B.push({key:"Mask",value:"["+H+"]"})}A.sMask!==void 0&&B.push({key:"SMask",value:A.objectId+1+" 0 R"});var Z=A.filter!==void 0?["/"+A.filter]:void 0;if(L({data:A.data,additionalKeyValues:B,alreadyAppliedFilters:Z,objectId:A.objectId}),N("endobj"),"sMask"in A&&A.sMask!==void 0){var ie="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,R={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:ie,data:A.sMask};"filter"in A&&(R.filter=A.filter),k.call(this,R)}if(A.colorSpace===g.INDEXED){var q=this.internal.newObject();L({data:O(new Uint8Array(A.palette)),objectId:q}),N("endobj")}},o=function(){var k=this.internal.collections.addImage_images;for(var A in k)i.call(this,k[A])},a=function(){var k,A=this.internal.collections.addImage_images,N=this.internal.write;for(var L in A)N("/I"+(k=A[L]).index,k.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var k=this.internal.collections.addImage_images;return s.call(this),k},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(k){return typeof e["process"+k.toUpperCase()]=="function"},f=function(k){return Hr(k)==="object"&&k.nodeType===1},p=function(k,A){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var N=""+k.getAttribute("src");if(N.indexOf("data:image/")===0)return Tx(unescape(N).split("base64,").pop());var L=e.loadFile(N,!0);if(L!==void 0)return L}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var z;switch(A){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;case"JPEG":case"JPG":default:z="image/jpeg"}return Tx(k.toDataURL(z,1).split("base64,").pop())}},d=function(k){var A=this.internal.collections.addImage_images;if(A){for(var N in A)if(k===A[N].alias)return A[N]}},h=function(k,A,N){return k||A||(k=-96,A=-96),k<0&&(k=-1*N.width*72/k/this.internal.scaleFactor),A<0&&(A=-1*N.height*72/A/this.internal.scaleFactor),k===0&&(k=A*N.width/N.height),A===0&&(A=k*N.height/N.width),[k,A]},m=function(k,A,N,L,z,B){var H=h.call(this,N,L,z),j=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,Z=l.call(this);if(N=H[0],L=H[1],Z[z.index]=z,B){B*=Math.PI/180;var ie=Math.cos(B),R=Math.sin(B),q=function(te){return te.toFixed(4)},J=[q(ie),q(R),q(-1*R),q(ie),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,j(k),W(A+L),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([j(N),"0","0",j(L),"0","0","cm"].join(" "))):this.internal.write([j(N),"0","0",j(L),j(k),W(A+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(k){var A,N,L=0;if(typeof k=="string")for(N=k.length,A=0;A<N;A++)L=(L<<5)-L+k.charCodeAt(A),L|=0;else if(S(k))for(N=k.byteLength/2,A=0;A<N;A++)L=(L<<5)-L+k[A],L|=0;return L},x=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var A=!0;return k.length===0&&(A=!1),k.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(A=!1),A},_=e.__addimage__.extractImageFromDataUrl=function(k){var A=(k=k||"").split("base64,"),N=null;if(A.length===2){var L=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(L)&&(N={mimeType:L[1],charset:L[2],data:A[1]})}return N},w=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(k){return w()&&k instanceof ArrayBuffer};var S=e.__addimage__.isArrayBufferView=function(k){return w()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},M=e.__addimage__.binaryStringToUint8Array=function(k){for(var A=k.length,N=new Uint8Array(A),L=0;L<A;L++)N[L]=k.charCodeAt(L);return N},O=e.__addimage__.arrayBufferToBinaryString=function(k){for(var A="",N=S(k)?k:new Uint8Array(k),L=0;L<N.length;L+=8192)A+=String.fromCharCode.apply(null,N.subarray(L,L+8192));return A};e.addImage=function(){var k,A,N,L,z,B,H,j,W;if(typeof arguments[1]=="number"?(A=t,N=arguments[1],L=arguments[2],z=arguments[3],B=arguments[4],H=arguments[5],j=arguments[6],W=arguments[7]):(A=arguments[1],N=arguments[2],L=arguments[3],z=arguments[4],B=arguments[5],H=arguments[6],j=arguments[7],W=arguments[8]),Hr(k=arguments[0])==="object"&&!f(k)&&"imageData"in k){var Z=k;k=Z.imageData,A=Z.format||A||t,N=Z.x||N||0,L=Z.y||L||0,z=Z.w||Z.width||z,B=Z.h||Z.height||B,H=Z.alias||H,j=Z.compression||j,W=Z.rotation||Z.angle||W}var ie=this.internal.getFilters();if(j===void 0&&ie.indexOf("FlateEncode")!==-1&&(j="SLOW"),isNaN(N)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var R=E.call(this,k,A,H,j);return m.call(this,N,L,z,B,R,W),this};var E=function(k,A,N,L){var z,B,H;if(typeof k=="string"&&r(k)===t){k=unescape(k);var j=P(k,!1);(j!==""||(j=e.loadFile(k,!0))!==void 0)&&(k=j)}if(f(k)&&(k=p(k,A)),A=r(k,A),!u(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((H=N)==null||H.length===0)&&(N=function(W){return typeof W=="string"||S(W)?y(W):S(W.data)?y(W.data):null}(k)),(z=d.call(this,N))||(w()&&(k instanceof Uint8Array||A==="RGBA"||(B=k,k=M(k))),z=this["process"+A.toUpperCase()](k,c.call(this),N,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in e.image_compression?W:v.NONE}(L),B)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},P=e.__addimage__.convertBase64ToBinaryString=function(k,A){var N;A=typeof A!="boolean"||A;var L,z="";if(typeof k=="string"){L=(N=_(k))!==null?N.data:k;try{z=Tx(L)}catch(B){if(A)throw x(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};e.getImageProperties=function(k){var A,N,L="";if(f(k)&&(k=p(k)),typeof k=="string"&&r(k)===t&&((L=P(k,!1))===""&&(L=e.loadFile(k)||""),k=L),N=r(k),!u(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(!w()||k instanceof Uint8Array||(k=M(k)),!(A=this["process"+N.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=N,A}})(xn.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};xn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,o,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,f=0;f<c.length&&!u;f++)switch((r=c[f]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){r=c[p];var d=this.internal.pdfEscape,h=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(m.objId),y=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+d(v(r.contents))+")",o+=" /Popup "+g.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+d(v(y))+") >>",m.content=o;var x=m.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+x,r.open&&(o+=" /Open true"),o+=" >>",g.content=o,this.internal.write(m.objId,"0 R",g.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var _=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(h(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var w=this.annotations._nameMap[r.options.name];r.options.pageNumber=w.page,r.options.top=w.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(h(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var S=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+S+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,o,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+o)},options:a,type:"link"})},e.textWithLink=function(n,r,i,o){var a,s,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var u=this.splitTextToSize(n,s).length;a=Math.ceil(c*u)}else s=l,a=c;return this.text(n,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,s,a,o),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(xn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(m){return t[m.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},s=e.__arabicParser__.isArabicEndLetter=function(m){return a(m)&&o(m)&&t[m.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(m){return a(m)&&i.indexOf(m.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return a(m)&&o(m)&&t[m.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(m){return a(m)&&o(m)&&t[m.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(m){return a(m)&&o(m)&&t[m.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(m){return a(m)&&o(m)&&t[m.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(m){var g=0,v=n,y="",x=0;for(g=0;g<m.length;g+=1)v[m.charCodeAt(g)]!==void 0?(x++,typeof(v=v[m.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(v),v=n,x=0),g===m.length-1&&(v=n,y+=m.charAt(g-(x-1)),g-=x-1,x=0)):(v=n,y+=m.charAt(g-x),g-=x,x=0);return y};e.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(m,g,v){return a(m)?o(m)===!1?-1:!c(m)||!a(g)&&!a(v)||!a(v)&&s(g)||s(m)&&!a(g)||s(m)&&l(g)||s(m)&&s(g)?0:u(m)&&a(g)&&!s(g)&&a(v)&&c(v)?3:s(m)||!a(v)?1:2:-1},d=function(m){var g=0,v=0,y=0,x="",_="",w="",S=(m=m||"").split("\\s+"),M=[];for(g=0;g<S.length;g+=1){for(M.push(""),v=0;v<S[g].length;v+=1)x=S[g][v],_=S[g][v-1],w=S[g][v+1],a(x)?(y=p(x,_,w),M[g]+=y!==-1?String.fromCharCode(t[x.charCodeAt(0)][y]):x):M[g]+=x;M[g]=f(M[g])}return M.join(" ")},h=e.__arabicParser__.processArabic=e.processArabic=function(){var m,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(g)){var y=0;for(v=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?v.push([d(g[y][0]),g[y][1],g[y][2]]):v.push([d(g[y])]);m=v}else m=d(g);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};e.events.push(["preProcessText",h])}(xn.API),xn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(s){n=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(xn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(m){p=m}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var h=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return h},set:function(m){h=m}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,d=0,h=0,m=0,g=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,_){return x.concat(g.splitTextToSize(_,v))},[])):l=Array.isArray(l)?l:[l];for(var y=0;y<l.length;y++)d<(m=this.getStringUnitWidth(l[y],{font:f})*u)&&(d=m);return d!==0&&(h=l.length),{w:d/=p,h:Math.max((h*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,d&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,f,p){if(r.call(this),!u)throw new Error("No data for PDF table.");var d,h,m,g,v=[],y=[],x=[],_={},w={},S=[],M=[],O=(p=p||{}).autoSize||!1,E=p.printHeaders!==!1,P=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},t),A=typeof p.padding=="number"?p.padding:3,N=p.headerBackgroundColor||"#c8c8c8",L=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=L,this.setFontSize(P),f==null)y=v=Object.keys(u[0]),x=v.map(function(){return"left"});else if(Array.isArray(f)&&Hr(f[0])==="object")for(v=f.map(function(Z){return Z.name}),y=f.map(function(Z){return Z.prompt||Z.name||""}),x=f.map(function(Z){return Z.align||"left"}),d=0;d<f.length;d+=1)w[f[d].name]=f[d].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(y=v=f,x=v.map(function(){return"left"}));if(O||Array.isArray(f)&&typeof f[0]=="string")for(d=0;d<v.length;d+=1){for(_[g=v[d]]=u.map(function(Z){return Z[g]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(y[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=_[g],this.setFont(void 0,"normal"),m=0;m<h.length;m+=1)S.push(this.getTextDimensions(h[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);w[g]=Math.max.apply(null,S)+A+A,S=[]}if(E){var z={};for(d=0;d<v.length;d+=1)z[v[d]]={},z[v[d]].text=y[d],z[v[d]].align=x[d];var B=s.call(this,z,w);M=v.map(function(Z){return new o(l,c,w[Z],B,z[Z].text,void 0,z[Z].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var H=f.reduce(function(Z,ie){return Z[ie.name]=ie.align,Z},{});for(d=0;d<u.length;d+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:d,data:u[d]},this);var j=s.call(this,u[d],w);for(m=0;m<v.length;m+=1){var W=u[d][v[m]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:d,col:m,data:W},this),a.call(this,new o(l,c,w[v[m]],j,W,d+2,H[v[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(d){var h=l[d];return this.splitTextToSize(h.hasOwnProperty("text")?h.text:h,c[d]-u-u)},this).map(function(d){return this.getLineHeightFactor()*d.length*f/p+u+u},this).reduce(function(d,h){return Math.max(d,h)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){u=this.internal.__cell__.tableHeaderRow[d].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=l;var h=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(h)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(xn.API);var _Q={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},wQ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],NL=bQ(wQ),SQ=[100,200,300,400,500,600,700,800,900],PMe=bQ(SQ);function LL(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return _Q[o=o||"normal"]?o:"normal"}(e.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(o){return typeof NL[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function nQ(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var NMe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},rQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function iQ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function LMe(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},NMe,n.genericFontFamilies||{}),o=null,a=null,s=0;s<t.length;++s)if(i[(o=LL(t[s])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){a=e[o.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+iQ(o)+"' and default family '"+r+"'.");if(a=function(l,c){if(c[l])return c[l];var u=NL[l],f=u<=NL.normal?-1:1,p=nQ(c,wQ,u,f);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(o.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=_Q[l],f=0;f<u.length;++f)if(c[u[f]])return c[u[f]];throw new Error("Could not find a matching font-style for "+l)}(o.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=PMe[l],f=nQ(c,SQ,u,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+iQ(o)+"'.");return a}function oQ(e){return e.trimLeft()}function IMe(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function DMe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var fM,aQ,sQ,ML=["times"];(function(e){var t,n,r,i,o,a,s,l,c,u=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new l,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new a,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new a,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=R;Object.defineProperty(this,"pdf",{get:function(){return q}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Ae){J=!!Ae}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Ae){te=!!Ae}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Ae){isNaN(Ae)||(ae=Ae)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Ae){isNaN(Ae)||(le=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ae){var pe;typeof Ae=="number"?pe=[Ae,Ae,Ae,Ae]:((pe=new Array(4))[0]=Ae[0],pe[1]=Ae.length>=2?Ae[1]:pe[0],pe[2]=Ae.length>=3?Ae[2]:pe[0],pe[3]=Ae.length>=4?Ae[3]:pe[1]),c.margin=pe}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(Ae){ue=Ae}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(Ae){ye=Ae}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(Ae){Me=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ae){Ae instanceof u&&(c=Ae)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ae){c.path=Ae}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Ae){we=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var pe;pe=p(Ae),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var pe=p(Ae);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var De=null;function Ve(Ae,pe){if(De===null){var ft=function(nt){var $e=[];return Object.keys(nt).forEach(function(at){nt[at].forEach(function(mt){var lt=null;switch(mt){case"bold":lt={family:at,weight:"bold"};break;case"italic":lt={family:at,style:"italic"};break;case"bolditalic":lt={family:at,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:at}}lt!==null&&(lt.ref={name:at,style:mt},$e.push(lt))})}),$e}(Ae.getFontList());De=function(nt){for(var $e={},at=0;at<nt.length;++at){var mt=LL(nt[at]),lt=mt.family,Et=mt.stretch,Rt=mt.style,Qt=mt.weight;$e[lt]=$e[lt]||{},$e[lt][Et]=$e[lt][Et]||{},$e[lt][Et][Rt]=$e[lt][Et][Rt]||{},$e[lt][Et][Rt][Qt]=mt}return $e}(ft.concat(pe))}return De}var Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(Ae){De=null,Ze=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var pe;if(this.ctx.font=Ae,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var ft=pe[1],nt=(pe[2],pe[3]),$e=pe[4],at=(pe[5],pe[6]),mt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(mt==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:mt==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var lt=function(Dt){var ot,We,Zt=[],Tt=Dt.trim();if(Tt==="")return ML;if(Tt in rQ)return[rQ[Tt]];for(;Tt!=="";){switch(We=null,ot=(Tt=oQ(Tt)).charAt(0)){case'"':case"'":We=IMe(Tt.substring(1),ot);break;default:We=DMe(Tt)}if(We===null||(Zt.push(We[0]),(Tt=oQ(We[1]))!==""&&Tt.charAt(0)!==","))return ML;Tt=Tt.replace(/^,/,"")}return Zt}(at);if(this.fontFaces){var Et=LMe(Ve(this.pdf,this.fontFaces),lt.map(function(Dt){return{family:Dt,stretch:"normal",weight:nt,style:ft}}));this.pdf.setFont(Et.ref.name,Et.ref.style)}else{var Rt="";(nt==="bold"||parseInt(nt,10)>=700||ft==="bold")&&(Rt="bold"),ft==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Qt="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Kt=0;Kt<lt.length;Kt++){if(this.pdf.internal.getFont(lt[Kt],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Qt=lt[Kt];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(lt[Kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qt=lt[Kt],Rt="bold";else if(this.pdf.internal.getFont(lt[Kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qt=lt[Kt],Rt="normal";break}}if(Qt===""){for(var Sn=0;Sn<lt.length;Sn++)if(It[lt[Sn]]){Qt=It[lt[Sn]];break}}Qt=Qt===""?"Times":Qt,this.pdf.setFont(Qt,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,q){if(isNaN(R)||isNaN(q))throw Kr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new a(R,q));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(R,q)},f.prototype.closePath=function(){var R=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Hr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){R=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(R.x,R.y)},f.prototype.lineTo=function(R,q){if(isNaN(R)||isNaN(q))throw Kr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new a(R,q));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,q,J,te){if(isNaN(J)||isNaN(te)||isNaN(R)||isNaN(q))throw Kr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new a(J,te)),le=this.ctx.transform.applyToPoint(new a(R,q));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},f.prototype.bezierCurveTo=function(R,q,J,te,ae,le){if(isNaN(ae)||isNaN(le)||isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Kr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(ae,le)),ye=this.ctx.transform.applyToPoint(new a(R,q)),Me=this.ctx.transform.applyToPoint(new a(J,te));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:Me.x,y2:Me.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},f.prototype.arc=function(R,q,J,te,ae,le){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te)||isNaN(ae))throw Kr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(R,q));R=ue.x,q=ue.y;var ye=this.ctx.transform.applyToPoint(new a(0,J)),Me=this.ctx.transform.applyToPoint(new a(0,0));J=Math.sqrt(Math.pow(ye.x-Me.x,2)+Math.pow(ye.y-Me.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:R,y:q,radius:J,startAngle:te,endAngle:ae,counterclockwise:le})},f.prototype.arcTo=function(R,q,J,te,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Kr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,q),this.lineTo(R+J,q),this.lineTo(R+J,q+te),this.lineTo(R,q+te),this.lineTo(R,q),this.lineTo(R+J,q),this.lineTo(R,q)},f.prototype.fillRect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Kr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,q,J,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Kr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");h.call(this)||(this.beginPath(),this.rect(R,q,J,te),this.stroke())},f.prototype.clearRect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Kr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,q,J,te))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(q),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(R){var q,J,te,ae;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))q=0,J=0,te=0,ae=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(le!==null)q=parseInt(le[1]),J=parseInt(le[2]),te=parseInt(le[3]),ae=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)q=parseInt(le[1]),J=parseInt(le[2]),te=parseInt(le[3]),ae=parseFloat(le[4]);else{if(ae=1,typeof R=="string"&&R.charAt(0)!=="#"){var ue=new hQ(R);R=ue.ok?ue.toHex():"#000000"}R.length===4?(q=R.substring(1,2),q+=q,J=R.substring(2,3),J+=J,te=R.substring(3,4),te+=te):(q=R.substring(1,3),J=R.substring(3,5),te=R.substring(5,7)),q=parseInt(q,16),J=parseInt(J,16),te=parseInt(te,16)}}return{r:q,g:J,b:te,a:ae,style:R}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},h=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,q,J,te){if(isNaN(q)||isNaN(J)||typeof R!="string")throw Kr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!d.call(this)){var ae=j(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;A.call(this,{text:R,x:q,y:J,scale:le,angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(R,q,J,te){if(isNaN(q)||isNaN(J)||typeof R!="string")throw Kr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!h.call(this)){te=isNaN(te)?void 0:te;var ae=j(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;A.call(this,{text:R,x:q,y:J,scale:le,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Kr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,J=this.pdf.internal.scaleFactor,te=q.internal.getFontSize(),ae=q.getStringUnitWidth(R)*te/q.internal.scaleFactor,le=function(ue){var ye=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this};return new le({width:ae*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(R,q){if(isNaN(R)||isNaN(q))throw Kr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(R,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(R){if(isNaN(R))throw Kr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(R,q){if(isNaN(R)||isNaN(q))throw Kr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,R,q);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(R,q,J,te,ae,le){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te)||isNaN(ae)||isNaN(le))throw Kr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(R,q,J,te,ae,le);this.ctx.transform=this.ctx.transform.multiply(ue)},f.prototype.setTransform=function(R,q,J,te,ae,le){R=isNaN(R)?1:R,q=isNaN(q)?0:q,J=isNaN(J)?0:J,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,le=isNaN(le)?0:le,this.ctx.transform=new l(R,q,J,te,ae,le)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,q,J,te,ae,le,ue,ye,Me){var we=this.pdf.getImageProperties(R),De=1,Ve=1,Ze=1,Ae=1;te!==void 0&&ye!==void 0&&(Ze=ye/te,Ae=Me/ae,De=we.width/te*ye/te,Ve=we.height/ae*Me/ae),le===void 0&&(le=q,ue=J,q=0,J=0),te!==void 0&&ye===void 0&&(ye=te,Me=ae),te===void 0&&ye===void 0&&(ye=we.width,Me=we.height);for(var pe,ft=this.ctx.transform.decompose(),nt=j(ft.rotate.shx),$e=new l,at=($e=($e=($e=$e.multiply(ft.translate)).multiply(ft.skew)).multiply(ft.scale)).applyToRectangle(new s(le-q*Ze,ue-J*Ae,te*De,ae*Ve)),mt=g.call(this,at),lt=[],Et=0;Et<mt.length;Et+=1)lt.indexOf(mt[Et])===-1&&lt.push(mt[Et]);if(x(lt),this.autoPaging)for(var Rt=lt[0],Qt=lt[lt.length-1],It=Rt;It<Qt+1;It++){this.pdf.setPage(It);var Kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Sn=It===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=It===1?0:Dt+(It-2)*ot;if(this.ctx.clip_path.length!==0){var Zt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(pe,this.posX+this.margin[3],-We+Sn+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=Zt}var Tt=JSON.parse(JSON.stringify(at));Tt=y([Tt],this.posX+this.margin[3],-We+Sn+this.ctx.prevPageLastElemOffset)[0];var zn=(It>Rt||It<Qt)&&m.call(this);zn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,ot,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,nt),zn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",at.x,at.y,at.w,at.h,null,null,nt)};var g=function(R,q,J){var te=[];q=q||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":te.push(Math.floor((R.y+ae)/J)+1);break;case"arc":te.push(Math.floor((R.y+ae-R.radius)/J)+1),te.push(Math.floor((R.y+ae+R.radius)/J)+1);break;case"qct":var le=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);te.push(Math.floor((le.y+ae)/J)+1),te.push(Math.floor((le.y+le.h+ae)/J)+1);break;case"bct":var ue=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);te.push(Math.floor((ue.y+ae)/J)+1),te.push(Math.floor((ue.y+ue.h+ae)/J)+1);break;case"rect":te.push(Math.floor((R.y+ae)/J)+1),te.push(Math.floor((R.y+R.h+ae)/J)+1)}for(var ye=0;ye<te.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<te[ye];)v.call(this);return te},v=function(){var R=this.fillStyle,q=this.strokeStyle,J=this.font,te=this.lineCap,ae=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=q,this.font=J,this.lineCap=te,this.lineWidth=ae,this.lineJoin=le},y=function(R,q,J){for(var te=0;te<R.length;te++)switch(R[te].type){case"bct":R[te].x2+=q,R[te].y2+=J;case"qct":R[te].x1+=q,R[te].y1+=J;case"mt":case"lt":case"arc":default:R[te].x+=q,R[te].y+=J}return R},x=function(R){return R.sort(function(q,J){return q-J})},_=function(R,q){for(var J,te,ae=this.fillStyle,le=this.strokeStyle,ue=this.lineCap,ye=this.lineWidth,Me=Math.abs(ye*this.ctx.transform.scaleX),we=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),Ze=[],Ae=0;Ae<Ve.length;Ae++)if(Ve[Ae].x!==void 0)for(var pe=g.call(this,Ve[Ae]),ft=0;ft<pe.length;ft+=1)Ze.indexOf(pe[ft])===-1&&Ze.push(pe[ft]);for(var nt=0;nt<Ze.length;nt++)for(;this.pdf.internal.getNumberOfPages()<Ze[nt];)v.call(this);if(x(Ze),this.autoPaging)for(var $e=Ze[0],at=Ze[Ze.length-1],mt=$e;mt<at+1;mt++){this.pdf.setPage(mt),this.fillStyle=ae,this.strokeStyle=le,this.lineCap=ue,this.lineWidth=Me,this.lineJoin=we;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=mt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=mt===1?0:Rt+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var Kt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(J,this.posX+this.margin[3],-It+Et+this.ctx.prevPageLastElemOffset),w.call(this,R,!0),this.path=Kt}if(te=JSON.parse(JSON.stringify(De)),this.path=y(te,this.posX+this.margin[3],-It+Et+this.ctx.prevPageLastElemOffset),q===!1||mt===0){var Sn=(mt>$e||mt<at)&&m.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Qt,null).clip().discardPath()),w.call(this,R,q),Sn&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}else this.lineWidth=Me,w.call(this,R,q),this.lineWidth=ye;this.path=De},w=function(R,q){if((R!=="stroke"||q||!h.call(this))&&(R==="stroke"||q||!d.call(this))){for(var J,te,ae=[],le=this.path,ue=0;ue<le.length;ue++){var ye=le[ue];switch(ye.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ye,deltas:[],abs:[]});break;case"lt":var Me=ae.length;if(le[ue-1]&&!isNaN(le[ue-1].x)&&(J=[ye.x-le[ue-1].x,ye.y-le[ue-1].y],Me>0)){for(;Me>=0;Me--)if(ae[Me-1].close!==!0&&ae[Me-1].begin!==!0){ae[Me-1].deltas.push(J),ae[Me-1].abs.push(ye);break}}break;case"bct":J=[ye.x1-le[ue-1].x,ye.y1-le[ue-1].y,ye.x2-le[ue-1].x,ye.y2-le[ue-1].y,ye.x-le[ue-1].x,ye.y-le[ue-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var we=le[ue-1].x+2/3*(ye.x1-le[ue-1].x),De=le[ue-1].y+2/3*(ye.y1-le[ue-1].y),Ve=ye.x+2/3*(ye.x1-ye.x),Ze=ye.y+2/3*(ye.y1-ye.y),Ae=ye.x,pe=ye.y;J=[we-le[ue-1].x,De-le[ue-1].y,Ve-le[ue-1].x,Ze-le[ue-1].y,Ae-le[ue-1].x,pe-le[ue-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ye)}}te=q?null:R==="stroke"?"stroke":"fill";for(var ft=!1,nt=0;nt<ae.length;nt++)if(ae[nt].arc)for(var $e=ae[nt].abs,at=0;at<$e.length;at++){var mt=$e[at];mt.type==="arc"?O.call(this,mt.x,mt.y,mt.radius,mt.startAngle,mt.endAngle,mt.counterclockwise,void 0,q,!ft):N.call(this,mt.x,mt.y),ft=!0}else if(ae[nt].close===!0)this.pdf.internal.out("h"),ft=!1;else if(ae[nt].begin!==!0){var lt=ae[nt].start.x,Et=ae[nt].start.y;L.call(this,ae[nt].deltas,lt,Et),ft=!0}te&&E.call(this,te),q&&P.call(this)}},S=function(R){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-J;case"top":return R+q-J;case"hanging":return R+q-2*J;case"middle":return R+q/2-J;case"ideographic":return R;case"alphabetic":default:return R}},M=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(q,J){this.colorStops.push([q,J])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(R,q,J,te,ae,le,ue,ye,Me){for(var we=B.call(this,J,te,ae,le),De=0;De<we.length;De++){var Ve=we[De];De===0&&(Me?k.call(this,Ve.x1+R,Ve.y1+q):N.call(this,Ve.x1+R,Ve.y1+q)),z.call(this,R,q,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}ye?P.call(this):E.call(this,ue)},E=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(R,q){this.pdf.internal.out(n(R)+" "+r(q)+" m")},A=function(R){var q;switch(R.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var J=this.pdf.getTextDimensions(R.text),te=S.call(this,R.y),ae=M.call(this,te)-J.h,le=this.ctx.transform.applyToPoint(new a(R.x,te)),ue=this.ctx.transform.decompose(),ye=new l;ye=(ye=(ye=ye.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var Me,we,De,Ve=this.ctx.transform.applyToRectangle(new s(R.x,te,J.w,J.h)),Ze=ye.applyToRectangle(new s(R.x,ae,J.w,J.h)),Ae=g.call(this,Ze),pe=[],ft=0;ft<Ae.length;ft+=1)pe.indexOf(Ae[ft])===-1&&pe.push(Ae[ft]);if(x(pe),this.autoPaging)for(var nt=pe[0],$e=pe[pe.length-1],at=nt;at<$e+1;at++){this.pdf.setPage(at);var mt=at===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],Rt=Et-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],It=Qt-this.margin[3],Kt=at===1?0:lt+(at-2)*Rt;if(this.ctx.clip_path.length!==0){var Sn=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Me,this.posX+this.margin[3],-1*Kt+mt),w.call(this,"fill",!0),this.path=Sn}var Dt=y([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Kt+mt+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*R.scale),De=this.lineWidth,this.lineWidth=De*R.scale);var ot=this.autoPaging!=="text";if(ot||Dt.y+Dt.h<=Et){if(ot||Dt.y>=mt&&Dt.x<=Qt){var We=ot?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Qt-Dt.x)[0],Zt=y([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Kt+mt+this.ctx.prevPageLastElemOffset)[0],Tt=ot&&(at>nt||at<$e)&&m.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Rt,null).clip().discardPath()),this.pdf.text(We,Zt.x,Zt.y,{angle:R.angle,align:q,renderingMode:R.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else Dt.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-Dt.y);R.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=De)}else R.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*R.scale),De=this.lineWidth,this.lineWidth=De*R.scale),this.pdf.text(R.text,le.x+this.posX,le.y+this.posY,{angle:R.angle,align:q,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=De)},N=function(R,q,J,te){J=J||0,te=te||0,this.pdf.internal.out(n(R+J)+" "+r(q+te)+" l")},L=function(R,q,J){return this.pdf.lines(R,q,J,null,null)},z=function(R,q,J,te,ae,le,ue,ye){this.pdf.internal.out([t(i(J+R)),t(o(te+q)),t(i(ae+R)),t(o(le+q)),t(i(ue+R)),t(o(ye+q)),"c"].join(" "))},B=function(R,q,J,te){for(var ae=2*Math.PI,le=Math.PI/2;q>J;)q-=ae;var ue=Math.abs(J-q);ue<ae&&te&&(ue=ae-ue);for(var ye=[],Me=te?-1:1,we=q;ue>1e-5;){var De=we+Me*Math.min(ue,le);ye.push(H.call(this,R,we,De)),ue-=Math.abs(De-we),we=De}return ye},H=function(R,q,J){var te=(J-q)/2,ae=R*Math.cos(te),le=R*Math.sin(te),ue=ae,ye=-le,Me=ue*ue+ye*ye,we=Me+ue*ae+ye*le,De=4/3*(Math.sqrt(2*Me*we)-we)/(ue*le-ye*ae),Ve=ue-De*ye,Ze=ye+De*ue,Ae=Ve,pe=-Ze,ft=te+q,nt=Math.cos(ft),$e=Math.sin(ft);return{x1:R*Math.cos(q),y1:R*Math.sin(q),x2:Ve*nt-Ze*$e,y2:Ve*$e+Ze*nt,x3:Ae*nt-pe*$e,y3:Ae*$e+pe*nt,x4:R*Math.cos(J),y4:R*Math.sin(J)}},j=function(R){return 180*R/Math.PI},W=function(R,q,J,te,ae,le){var ue=R+.5*(J-R),ye=q+.5*(te-q),Me=ae+.5*(J-ae),we=le+.5*(te-le),De=Math.min(R,ae,ue,Me),Ve=Math.max(R,ae,ue,Me),Ze=Math.min(q,le,ye,we),Ae=Math.max(q,le,ye,we);return new s(De,Ze,Ve-De,Ae-Ze)},Z=function(R,q,J,te,ae,le,ue,ye){var Me,we,De,Ve,Ze,Ae,pe,ft,nt,$e,at,mt,lt,Et,Rt=J-R,Qt=te-q,It=ae-J,Kt=le-te,Sn=ue-ae,Dt=ye-le;for(we=0;we<41;we++)nt=(pe=(De=R+(Me=we/40)*Rt)+Me*((Ze=J+Me*It)-De))+Me*(Ze+Me*(ae+Me*Sn-Ze)-pe),$e=(ft=(Ve=q+Me*Qt)+Me*((Ae=te+Me*Kt)-Ve))+Me*(Ae+Me*(le+Me*Dt-Ae)-ft),we==0?(at=nt,mt=$e,lt=nt,Et=$e):(at=Math.min(at,nt),mt=Math.min(mt,$e),lt=Math.max(lt,nt),Et=Math.max(Et,$e));return new s(Math.round(at),Math.round(mt),Math.round(lt-at),Math.round(Et-mt))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,q,J=(R=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:q}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(xn.API),function(e){var t=function(o){var a,s,l,c,u,f,p,d,h,m;for(/[^\x00-\xFF]/.test(o),s=[],l=0,c=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;c>l;l+=4)(u=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(f=(u=((u=((u=((u=(u-(m=u%85))/85)-(h=u%85))/85)-(d=u%85))/85)-(p=u%85))/85)%85,s.push(f+33,p+33,d+33,h+33,m+33)):s.push(122);return function(g,v){for(var y=v;y>0;y--)g.pop()}(s,a.length),String.fromCharCode.apply(String,s)+"~>"},n=function(o){var a,s,l,c,u,f=String,p="length",d=255,h="charCodeAt",m="slice",g="replace";for(o[m](-2),o=o[m](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),l=[],c=0,u=(o+=a="uuuuu"[m](o[p]%5||5))[p];u>c;c+=5)s=52200625*(o[h](c)-33)+614125*(o[h](c+1)-33)+7225*(o[h](c+2)-33)+85*(o[h](c+3)-33)+(o[h](c+4)-33),l.push(d&s>>24,d&s>>16,d&s>>8,d&s);return function(v,y){for(var x=y;x>0;x--)v.pop()}(l,a[p]),f.fromCharCode.apply(f,l)},r=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var s="",l=0;l<o.length;l+=2)s+=String.fromCharCode("0x"+(o[l]+o[l+1]));return s},i=function(o){for(var a=new Uint8Array(o.length),s=o.length;s--;)a[s]=o.charCodeAt(s);return o=(a=lM(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};e.processDataByFilters=function(o,a){var s=0,l=o||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),s=0;s<a.length;s+=1)switch(a[s]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[s]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(xn.API),function(e){e.loadFile=function(t,n,r){return function(i,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=function(l,c,u){var f=new XMLHttpRequest,p=0,d=function(h){var m=h.length,g=[],v=String.fromCharCode;for(p=0;p<m;p+=1)g.push(v(255&h.charCodeAt(p)));return g.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?u(d(this.responseText)):u(void 0)}),f.send(null),c&&f.status===200)return d(f.responseText)}(i,o,a)}catch{}return s}(t,n,r)},e.loadImageFile=e.loadFile}(xn.API),function(e){function t(){return(wn.html2canvas?Promise.resolve(wn.html2canvas):import("./chunk-7JTV5DUP.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(wn.DOMPurify?Promise.resolve(wn.DOMPurify):import("./chunk-6XAJGDHB.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var s=Hr(a);return s==="undefined"?"undefined":s==="string"||a instanceof String?"string":s==="number"||a instanceof Number?"number":s==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(a,s){var l=document.createElement(a);for(var c in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[c]=s.style[c];return l},o=function a(s){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(s)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,s){return a.__proto__=s||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,s){return this.then(function(){switch(s=s||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(c,u){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(l(p,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(s){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var d=c[p],h=d.src.find(function(m){return m.format==="truetype"});h&&l.addFont(h.url,d.ref.name,d.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),s(this.prop.container,f)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,s):this.outputPdf(a,s)},o.prototype.outputPdf=function(a,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,s)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var s=Object.keys(a||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(s)})},o.prototype.get=function(a,s){return this.then(function(){var l=a in o.template.prop?this.prop[a]:this.opt[a];return s?s(l):l})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function s(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||xn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:s(a.inner.width,a.k),height:s(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,s,l,c){return a!=null&&(this.progress.val=a),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,s,l,c){return this.setProgress(a?this.progress.val+a:null,s||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(a,s){var l=this;return this.thenCore(a,s,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,c),f}).then(c,u).then(function(f){return l.updateProgress(1),f})})},o.prototype.thenCore=function(a,s,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),s&&(s=s.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,s);return o.convert(u,this.__proto__)},o.prototype.thenExternal=function(a,s){return Promise.prototype.then.call(this,a,s)},o.prototype.thenList=function(a){var s=this;return a.forEach(function(l){s=s.thenCore(l)}),s},o.prototype.catch=function(a){a&&(a=a.bind(this));var s=Promise.prototype.catch.call(this,a);return o.convert(s,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,xn.getPageSize=function(a,s,l){if(Hr(a)==="object"){var c=a;a=c.orientation,s=c.unit||s,l=c.format||l}s=s||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,f=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+s}var d,h=0,m=0;if(p.hasOwnProperty(f))h=p[f][1]/u,m=p[f][0]/u;else try{h=l[1],m=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",m>h&&(d=m,m=h,h=d);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",h>m&&(d=m,m=h,h=d)}return{width:m,height:h,unit:s,k:u,orientation:a}},e.html=function(a,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(LL):null;var l=new o(s);return s.worker?l:l.from(a).doCallback()}}(xn.API),xn.API.addJS=function(e){return sQ=e,this.internal.events.subscribe("postPutResources",function(){fM=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fM+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),aQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+sQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fM!==void 0&&aQ!==void 0&&this.internal.out("/Names <</JavaScript "+fM+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var a=i[o],s=r.exec(a);if(s!=null){var l=s[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(o=0;o<c;o++){var f=n.internal.newObject();u.push(f);var p=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var d=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<u.length;o++)n.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+d+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var a={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var a=r.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(xn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,o,a,s){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(f){for(var p,d=256*f.charCodeAt(4)+f.charCodeAt(5),h=f.length,m={width:0,height:0,numcomponents:1},g=4;g<h;g+=2){if(g+=d,t.indexOf(f.charCodeAt(g+1))!==-1){p=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),m={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:p,numcomponents:f.charCodeAt(g+9)};break}d=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return m}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(xn.API);var Mg,pM,lQ,cQ,uQ,zMe=function(){var e,t,n;function r(o){var a,s,l,c,u,f,p,d,h,m,g,v,y,x;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),h=(function(){var _,w;for(w=[],_=0;_<4;++_)w.push(String.fromCharCode(this.data[this.pos++]));return w}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*u/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(h==="fdAT"&&(this.pos+=4,a-=4),o=f?.data||this.imgData,v=0;0<=a?v<a:v>a;0<=a?++v:--v)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((m=l-this.transparency.indexed.length)>0)for(y=0;0<=m?y<m:y>m;0<=m?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":p=(g=this.read(a)).indexOf(0),d=String.fromCharCode.apply(String,g.slice(0,p)),this.text[d]=String.fromCharCode.apply(String,g.slice(p+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var a,s;for(s=[],a=0;0<=o?a<o:a>o;0<=o?++a:--a)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var a=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*a),l=0,c=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function u(f,p,d,h){var m,g,v,y,x,_,w,S,M,O,E,P,k,A,N,L,z,B,H,j,W,Z=Math.ceil((c.width-f)/d),ie=Math.ceil((c.height-p)/h),R=c.width==Z&&c.height==ie;for(A=a*Z,P=R?s:new Uint8Array(A*ie),_=o.length,k=0,g=0;k<ie&&l<_;){switch(o[l++]){case 0:for(y=z=0;z<A;y=z+=1)P[g++]=o[l++];break;case 1:for(y=B=0;B<A;y=B+=1)m=o[l++],x=y<a?0:P[g-a],P[g++]=(m+x)%256;break;case 2:for(y=H=0;H<A;y=H+=1)m=o[l++],v=(y-y%a)/a,N=k&&P[(k-1)*A+v*a+y%a],P[g++]=(N+m)%256;break;case 3:for(y=j=0;j<A;y=j+=1)m=o[l++],v=(y-y%a)/a,x=y<a?0:P[g-a],N=k&&P[(k-1)*A+v*a+y%a],P[g++]=(m+Math.floor((x+N)/2))%256;break;case 4:for(y=W=0;W<A;y=W+=1)m=o[l++],v=(y-y%a)/a,x=y<a?0:P[g-a],k===0?N=L=0:(N=P[(k-1)*A+v*a+y%a],L=v&&P[(k-1)*A+(v-1)*a+y%a]),w=x+N-L,S=Math.abs(w-x),O=Math.abs(w-N),E=Math.abs(w-L),M=S<=O&&S<=E?x:O<=E?N:L,P[g++]=(m+M)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!R){var q=((p+k*h)*c.width+f)*a,J=k*A;for(y=0;y<Z;y+=1){for(var te=0;te<a;te+=1)s[q++]=P[J++];q+=(d-1)*a}}k++}}return o=KJ(o),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),s},r.prototype.decodePalette=function(){var o,a,s,l,c,u,f,p,d;for(s=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+s.length),l=0,o=0,a=f=0,p=s.length;f<p;a=f+=3)c[l++]=s[a],c[l++]=s[a+1],c[l++]=s[a+2],c[l++]=(d=u[o++])!=null?d:255;return c},r.prototype.copyToImageData=function(o,a){var s,l,c,u,f,p,d,h,m,g,v;if(l=this.colors,m=null,s=this.hasAlphaChannel,this.palette.length&&(m=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,s=!0),h=(c=o.data||o).length,f=m||a,u=p=0,l===1)for(;u<h;)d=m?4*a[u/4]:p,g=f[d++],c[u++]=g,c[u++]=g,c[u++]=g,c[u++]=s?f[d++]:255,p=d;else for(;u<h;)d=m?4*a[u/4]:p,c[u++]=f[d++],c[u++]=f[d++],c[u++]=f[d++],c[u++]=s?f[d++]:255,p=d},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(wn)==="[object Window]"){try{t=wn.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(o){var a;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var a,s,l,c,u,f,p,d;if(this.animation){for(d=[],s=u=0,f=(p=this.animation.frames).length;u<f;s=++u)a=p[s],l=o.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,d.push(a.image=e(l));return d}},r.prototype.renderFrame=function(o,a){var s,l,c;return s=(l=this.animation.frames)[a],c=l[a-1],a===0&&o.clearRect(0,0,this.width,this.height),c?.disposeOp===1?o.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&o.putImageData(c.imageData,c.xOffset,c.yOffset),s.blendOp===0&&o.clearRect(s.xOffset,s.yOffset,s.width,s.height),o.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(o){var a,s,l,c,u,f,p=this;return s=0,f=this.animation,c=f.numFrames,l=f.frames,u=f.numPlays,(a=function(){var d,h;if(d=s++%c,h=l[d],p.renderFrame(o,d),c>1&&s/c<u)return p.animation._timeout=setTimeout(a,h.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var a,s;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,a=o.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(s=a.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),a.putImageData(s,0,0))},r}();function RMe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var s=null,l=null;o&&(s=t,l=a,t+=3*a);var c=!0,u=[],f=0,p=null,d=0,h=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var m=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],!(1&m)&&(p=null),d=m>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++],w=_>>6&1,S=1<<(7&_)+1,M=s,O=l,E=!1;_>>7&&(E=!0,M=t,O=S,t+=3*S);var P=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}u.push({x:g,y:v,width:y,height:x,has_local_palette:E,palette_offset:M,palette_size:O,data_offset:P,data_length:t-P,transparent_index:p,interlaced:!!w,delay:f,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return h},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,N){var L=this.frameInfo(A),z=L.width*L.height,B=new Uint8Array(z);fQ(e,L.data_offset,B,z);var H=L.palette_offset,j=L.transparent_index;j===null&&(j=256);var W=L.width,Z=n-W,ie=W,R=4*(L.y*n+L.x),q=4*((L.y+L.height)*n+L.x),J=R,te=4*Z;L.interlaced===!0&&(te+=4*n*7);for(var ae=8,le=0,ue=B.length;le<ue;++le){var ye=B[le];if(ie===0&&(ie=W,(J+=te)>=q&&(te=4*Z+4*n*(ae-1),J=R+(W+Z)*(ae<<1),ae>>=1)),ye===j)J+=4;else{var Me=e[H+3*ye],we=e[H+3*ye+1],De=e[H+3*ye+2];N[J++]=De,N[J++]=we,N[J++]=Me,N[J++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(A,N){var L=this.frameInfo(A),z=L.width*L.height,B=new Uint8Array(z);fQ(e,L.data_offset,B,z);var H=L.palette_offset,j=L.transparent_index;j===null&&(j=256);var W=L.width,Z=n-W,ie=W,R=4*(L.y*n+L.x),q=4*((L.y+L.height)*n+L.x),J=R,te=4*Z;L.interlaced===!0&&(te+=4*n*7);for(var ae=8,le=0,ue=B.length;le<ue;++le){var ye=B[le];if(ie===0&&(ie=W,(J+=te)>=q&&(te=4*Z+4*n*(ae-1),J=R+(W+Z)*(ae<<1),ae>>=1)),ye===j)J+=4;else{var Me=e[H+3*ye],we=e[H+3*ye+1],De=e[H+3*ye+2];N[J++]=Me,N[J++]=we,N[J++]=De,N[J++]=255}--ie}}}function fQ(e,t,n,r){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,l=i+1,c=(1<<l)-1,u=0,f=0,p=0,d=e[t++],h=new Int32Array(4096),m=null;;){for(;u<16&&d!==0;)f|=e[t++]<<u,u+=8,d===1?d=e[t++]:--d;if(u<l)break;var g=f&c;if(f>>=l,u-=l,g!==o){if(g===a)break;for(var v=g<s?g:m,y=0,x=v;x>o;)x=h[x]>>8,++y;var _=x;if(p+y+(v!==g?1:0)>r)return void Kr.log("Warning, gif stream longer than expected.");n[p++]=_;var w=p+=y;for(v!==g&&(n[p++]=_),x=v;y--;)x=h[x],n[--w]=255&x,x>>=8;m!==null&&s<4096&&(h[s++]=m<<8|_,s>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else s=a+1,c=(1<<(l=i+1))-1,m=null}return p!==r&&Kr.log("Warning, gif stream shorter than expected."),n}function kL(e){var t,n,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(65535),p=new Array(65535),d=new Array(64),h=new Array(64),m=[],g=0,v=7,y=new Array(64),x=new Array(64),_=new Array(64),w=new Array(256),S=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(R,q){for(var J=0,te=0,ae=new Array,le=1;le<=16;le++){for(var ue=1;ue<=R[le];ue++)ae[q[te]]=[],ae[q[te]][0]=J,ae[q[te]][1]=le,te++,J++;J*=2}return ae}function H(R){for(var q=R[0],J=R[1]-1;J>=0;)q&1<<J&&(g|=1<<v),J--,--v<0&&(g==255?(j(255),j(0)):j(g),v=7,g=0)}function j(R){m.push(R)}function W(R){j(R>>8&255),j(255&R)}function Z(R,q,J,te,ae){for(var le,ue=ae[0],ye=ae[240],Me=function($e,at){var mt,lt,Et,Rt,Qt,It,Kt,Sn,Dt,ot,We=0;for(Dt=0;Dt<8;++Dt){mt=$e[We],lt=$e[We+1],Et=$e[We+2],Rt=$e[We+3],Qt=$e[We+4],It=$e[We+5],Kt=$e[We+6];var Zt=mt+(Sn=$e[We+7]),Tt=mt-Sn,zn=lt+Kt,an=lt-Kt,Jt=Et+It,yr=Et-It,Cn=Rt+Qt,yi=Rt-Qt,xr=Zt+Cn,to=Zt-Cn,Ti=zn+Jt,jr=zn-Jt;$e[We]=xr+Ti,$e[We+4]=xr-Ti;var vn=.707106781*(jr+to);$e[We+2]=to+vn,$e[We+6]=to-vn;var $n=.382683433*((xr=yi+yr)-(jr=an+Tt)),As=.5411961*xr+$n,Pi=1.306562965*jr+$n,sr=.707106781*(Ti=yr+an),po=Tt+sr,fn=Tt-sr;$e[We+5]=fn+As,$e[We+3]=fn-As,$e[We+1]=po+Pi,$e[We+7]=po-Pi,We+=8}for(We=0,Dt=0;Dt<8;++Dt){mt=$e[We],lt=$e[We+8],Et=$e[We+16],Rt=$e[We+24],Qt=$e[We+32],It=$e[We+40],Kt=$e[We+48];var no=mt+(Sn=$e[We+56]),Hi=mt-Sn,ro=lt+Kt,hi=lt-Kt,si=Et+It,io=Et-It,cl=Rt+Qt,Ga=Rt-Qt,Ts=no+cl,Ps=no-cl,Ns=ro+si,ul=ro-si;$e[We]=Ts+Ns,$e[We+32]=Ts-Ns;var $a=.707106781*(ul+Ps);$e[We+16]=Ps+$a,$e[We+48]=Ps-$a;var fl=.382683433*((Ts=Ga+io)-(ul=hi+Hi)),Nu=.5411961*Ts+fl,zf=1.306562965*ul+fl,Ni=.707106781*(Ns=io+hi),Li=Hi+Ni,U=Hi-Ni;$e[We+40]=U+Nu,$e[We+24]=U-Nu,$e[We+8]=Li+zf,$e[We+56]=Li-zf,We++}for(Dt=0;Dt<64;++Dt)ot=$e[Dt]*at[Dt],d[Dt]=ot>0?ot+.5|0:ot-.5|0;return d}(R,q),we=0;we<64;++we)h[M[we]]=Me[we];var De=h[0]-J;J=h[0],De==0?H(te[0]):(H(te[p[le=32767+De]]),H(f[le]));for(var Ve=63;Ve>0&&h[Ve]==0;)Ve--;if(Ve==0)return H(ue),J;for(var Ze,Ae=1;Ae<=Ve;){for(var pe=Ae;h[Ae]==0&&Ae<=Ve;)++Ae;var ft=Ae-pe;if(ft>=16){Ze=ft>>4;for(var nt=1;nt<=Ze;++nt)H(ye);ft&=15}le=32767+h[Ae],H(ae[(ft<<4)+p[le]]),H(f[le]),Ae++}return Ve!=63&&H(ue),J}function ie(R){R=Math.min(Math.max(R,1),100),o!=R&&(function(q){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=a((J[te]*q+50)/100);ae=Math.min(Math.max(ae,1),255),s[M[te]]=ae}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var ye=a((le[ue]*q+50)/100);ye=Math.min(Math.max(ye,1),255),l[M[ue]]=ye}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,De=0;De<8;De++)for(var Ve=0;Ve<8;Ve++)c[we]=1/(s[M[we]]*Me[De]*Me[Ve]*8),u[we]=1/(l[M[we]]*Me[De]*Me[Ve]*8),we++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),o=R)}this.encode=function(R,q){q&&ie(q),m=new Array,g=0,v=7,W(65496),W(65504),W(16),j(74),j(70),j(73),j(70),j(0),j(1),j(1),j(0),W(1),W(1),j(0),j(0),function(){W(65499),W(132),j(0);for(var lt=0;lt<64;lt++)j(s[lt]);j(1);for(var Et=0;Et<64;Et++)j(l[Et])}(),function(lt,Et){W(65472),W(17),j(8),W(Et),W(lt),j(3),j(1),j(17),j(0),j(2),j(17),j(1),j(3),j(17),j(1)}(R.width,R.height),function(){W(65476),W(418),j(0);for(var lt=0;lt<16;lt++)j(O[lt+1]);for(var Et=0;Et<=11;Et++)j(E[Et]);j(16);for(var Rt=0;Rt<16;Rt++)j(P[Rt+1]);for(var Qt=0;Qt<=161;Qt++)j(k[Qt]);j(1);for(var It=0;It<16;It++)j(A[It+1]);for(var Kt=0;Kt<=11;Kt++)j(N[Kt]);j(17);for(var Sn=0;Sn<16;Sn++)j(L[Sn+1]);for(var Dt=0;Dt<=161;Dt++)j(z[Dt])}(),W(65498),W(12),j(3),j(1),j(0),j(2),j(17),j(3),j(17),j(0),j(63),j(0);var J=0,te=0,ae=0;g=0,v=7,this.encode.displayName="_encode_";for(var le,ue,ye,Me,we,De,Ve,Ze,Ae,pe=R.data,ft=R.width,nt=R.height,$e=4*ft,at=0;at<nt;){for(le=0;le<$e;){for(we=$e*at+le,Ve=-1,Ze=0,Ae=0;Ae<64;Ae++)De=we+(Ze=Ae>>3)*$e+(Ve=4*(7&Ae)),at+Ze>=nt&&(De-=$e*(at+1+Ze-nt)),le+Ve>=$e&&(De-=le+Ve-$e+4),ue=pe[De++],ye=pe[De++],Me=pe[De++],y[Ae]=(S[ue]+S[ye+256>>0]+S[Me+512>>0]>>16)-128,x[Ae]=(S[ue+768>>0]+S[ye+1024>>0]+S[Me+1280>>0]>>16)-128,_[Ae]=(S[ue+1280>>0]+S[ye+1536>>0]+S[Me+1792>>0]>>16)-128;J=Z(y,c,J,t,r),te=Z(x,u,te,n,i),ae=Z(_,u,ae,n,i),le+=32}at+=8}if(v>=0){var mt=[];mt[1]=v+1,mt[0]=(1<<v+1)-1,H(mt)}return W(65497),new Uint8Array(m)},e=e||50,function(){for(var R=String.fromCharCode,q=0;q<256;q++)w[q]=R(q)}(),t=B(O,E),n=B(A,N),r=B(P,k),i=B(L,z),function(){for(var R=1,q=2,J=1;J<=15;J++){for(var te=R;te<q;te++)p[32767+te]=J,f[32767+te]=[],f[32767+te][1]=J,f[32767+te][0]=te;for(var ae=-(q-1);ae<=-R;ae++)p[32767+ae]=J,f[32767+ae]=[],f[32767+ae][1]=J,f[32767+ae][0]=q-1+ae;R<<=1,q<<=1}}(),function(){for(var R=0;R<256;R++)S[R]=19595*R,S[R+256>>0]=38470*R,S[R+512>>0]=7471*R+32768,S[R+768>>0]=-11059*R,S[R+1024>>0]=-21709*R,S[R+1280>>0]=32768*R+8421375,S[R+1536>>0]=-27439*R,S[R+1792>>0]=-5329*R}(),ie(e)}function Tc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function pQ(e){function t(O){if(!O)throw Error("assert :P")}function n(O,E,P){for(var k=0;4>k;k++)if(O[E+k]!=P.charCodeAt(k))return!0;return!1}function r(O,E,P,k,A){for(var N=0;N<A;N++)O[E+N]=P[k+N]}function i(O,E,P,k){for(var A=0;A<k;A++)O[E+A]=P}function o(O){return new Int32Array(O)}function a(O,E){for(var P=[],k=0;k<O;k++)P.push(new E);return P}function s(O,E){var P=[];return function k(A,N,L){for(var z=L[N],B=0;B<z&&(A.push(L.length>N+1?[]:new E),!(L.length<N+1));B++)k(A[B],N+1,L)}(P,0,O),P}var l=function(){var O=this;function E(b,C){for(var I=1<<C-1>>>0;b&I;)I>>>=1;return I?(b&I-1)+I:b}function P(b,C,I,V,X){t(!(V%I));do b[C+(V-=I)]=X;while(0<V)}function k(b,C,I,V,X){if(t(2328>=X),512>=X)var Q=o(512);else if((Q=o(X))==null)return 0;return function(ee,ne,re,fe,Se,Be){var je,Pe,rt=ne,Ue=1<<re,Ce=o(16),Ee=o(16);for(t(Se!=0),t(fe!=null),t(ee!=null),t(0<re),Pe=0;Pe<Se;++Pe){if(15<fe[Pe])return 0;++Ce[fe[Pe]]}if(Ce[0]==Se)return 0;for(Ee[1]=0,je=1;15>je;++je){if(Ce[je]>1<<je)return 0;Ee[je+1]=Ee[je]+Ce[je]}for(Pe=0;Pe<Se;++Pe)je=fe[Pe],0<fe[Pe]&&(Be[Ee[je]++]=Pe);if(Ee[15]==1)return(fe=new A).g=0,fe.value=Be[0],P(ee,rt,1,Ue,fe),Ue;var et,st=-1,tt=Ue-1,Bt=0,kt=1,gn=1,Pt=1<<re;for(Pe=0,je=1,Se=2;je<=re;++je,Se<<=1){if(kt+=gn<<=1,0>(gn-=Ce[je]))return 0;for(;0<Ce[je];--Ce[je])(fe=new A).g=je,fe.value=Be[Pe++],P(ee,rt+Bt,Se,Pt,fe),Bt=E(Bt,je)}for(je=re+1,Se=2;15>=je;++je,Se<<=1){if(kt+=gn<<=1,0>(gn-=Ce[je]))return 0;for(;0<Ce[je];--Ce[je]){if(fe=new A,(Bt&tt)!=st){for(rt+=Pt,et=1<<(st=je)-re;15>st&&!(0>=(et-=Ce[st]));)++st,et<<=1;Ue+=Pt=1<<(et=st-re),ee[ne+(st=Bt&tt)].g=et+re,ee[ne+st].value=rt-ne-st}fe.g=je-re,fe.value=Be[Pe++],P(ee,rt+(Bt>>re),Se,Pt,fe),Bt=E(Bt,je)}}return kt!=2*Ee[15]-1?0:Ue}(b,C,I,V,X,Q)}function A(){this.value=this.g=0}function N(){this.value=this.g=0}function L(){this.G=a(5,A),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Fo,N)}function z(b,C,I,V){t(b!=null),t(C!=null),t(2147483648>V),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=C,b.pa=I,b.Jd=C,b.Yc=I+V,b.Zc=4<=V?I+V-4+1:I,le(b)}function B(b,C){for(var I=0;0<C--;)I|=ye(b,128)<<C;return I}function H(b,C){var I=B(b,C);return ue(b)?-I:I}function j(b,C,I,V){var X,Q=0;for(t(b!=null),t(C!=null),t(4294967288>V),b.Sb=V,b.Ra=0,b.u=0,b.h=0,4<V&&(V=4),X=0;X<V;++X)Q+=C[I+X]<<8*X;b.Ra=Q,b.bb=V,b.oa=C,b.pa=I}function W(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<Fm-8>>>0,++b.bb,b.u-=8;J(b)&&(b.h=1,b.u=0)}function Z(b,C){if(t(0<=C),!b.h&&C<=Rm){var I=q(b)&zm[C];return b.u+=C,W(b),I}return b.h=1,b.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(b){return b.Ra>>>(b.u&Fm-1)>>>0}function J(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>Fm}function te(b,C){b.u=C,b.h=J(b)}function ae(b){b.u>=Kg&&(t(b.u>=Kg),W(b))}function le(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function ue(b){return B(b,1)}function ye(b,C){var I=b.Ca;0>b.b&&le(b);var V=b.b,X=I*C>>>8,Q=(b.I>>>V>X)+0;for(Q?(I-=X,b.I-=X+1<<V>>>0):I=X+1,V=I,X=0;256<=V;)X+=8,V>>=8;return V=7^X+Ya[V],b.b-=V,b.Ca=(I<<V)-1,Q}function Me(b,C,I){b[C+0]=I>>24&255,b[C+1]=I>>16&255,b[C+2]=I>>8&255,b[C+3]=I>>0&255}function we(b,C){return b[C+0]<<0|b[C+1]<<8}function De(b,C){return we(b,C)|b[C+2]<<16}function Ve(b,C){return we(b,C)|we(b,C+2)<<16}function Ze(b,C){var I=1<<C;return t(b!=null),t(0<C),b.X=o(I),b.X==null?0:(b.Mb=32-C,b.Xa=C,1)}function Ae(b,C){t(b!=null),t(C!=null),t(b.Xa==C.Xa),r(C.X,0,b.X,0,1<<C.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function ft(b,C,I,V){t(I!=null),t(V!=null);var X=I[0],Q=V[0];return X==0&&(X=(b*Q+C/2)/C),Q==0&&(Q=(C*X+b/2)/b),0>=X||0>=Q?0:(I[0]=X,V[0]=Q,1)}function nt(b,C){return b+(1<<C)-1>>>C}function $e(b,C){return((4278255360&b)+(4278255360&C)>>>0&4278255360)+((16711935&b)+(16711935&C)>>>0&16711935)>>>0}function at(b,C){O[C]=function(I,V,X,Q,ee,ne,re){var fe;for(fe=0;fe<ee;++fe){var Se=O[b](ne[re+fe-1],X,Q+fe);ne[re+fe]=$e(I[V+fe],Se)}}}function mt(){this.ud=this.hd=this.jd=0}function lt(b,C){return((4278124286&(b^C))>>>1)+(b&C)>>>0}function Et(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Rt(b,C){return Et(b+(b-C+.5>>1))}function Qt(b,C,I){return Math.abs(C-I)-Math.abs(b-I)}function It(b,C,I,V,X,Q,ee){for(V=Q[ee-1],I=0;I<X;++I)Q[ee+I]=V=$e(b[C+I],V)}function Kt(b,C,I,V,X){var Q;for(Q=0;Q<I;++Q){var ee=b[C+Q],ne=ee>>8&255,re=16711935&(re=(re=16711935&ee)+((ne<<16)+ne));V[X+Q]=(4278255360&ee)+re>>>0}}function Sn(b,C){C.jd=b>>0&255,C.hd=b>>8&255,C.ud=b>>16&255}function Dt(b,C,I,V,X,Q){var ee;for(ee=0;ee<V;++ee){var ne=C[I+ee],re=ne>>>8,fe=ne,Se=255&(Se=(Se=ne>>>16)+((b.jd<<24>>24)*(re<<24>>24)>>>5));fe=255&(fe=(fe=fe+((b.hd<<24>>24)*(re<<24>>24)>>>5))+((b.ud<<24>>24)*(Se<<24>>24)>>>5)),X[Q+ee]=(4278255360&ne)+(Se<<16)+fe}}function ot(b,C,I,V,X){O[C]=function(Q,ee,ne,re,fe,Se,Be,je,Pe){for(re=Be;re<je;++re)for(Be=0;Be<Pe;++Be)fe[Se++]=X(ne[V(Q[ee++])])},O[b]=function(Q,ee,ne,re,fe,Se,Be){var je=8>>Q.b,Pe=Q.Ea,rt=Q.K[0],Ue=Q.w;if(8>je)for(Q=(1<<Q.b)-1,Ue=(1<<je)-1;ee<ne;++ee){var Ce,Ee=0;for(Ce=0;Ce<Pe;++Ce)Ce&Q||(Ee=V(re[fe++])),Se[Be++]=X(rt[Ee&Ue]),Ee>>=je}else O["VP8LMapColor"+I](re,fe,rt,Ue,Se,Be,ee,ne,Pe)}}function We(b,C,I,V,X){for(I=C+I;C<I;){var Q=b[C++];V[X++]=Q>>16&255,V[X++]=Q>>8&255,V[X++]=Q>>0&255}}function Zt(b,C,I,V,X){for(I=C+I;C<I;){var Q=b[C++];V[X++]=Q>>16&255,V[X++]=Q>>8&255,V[X++]=Q>>0&255,V[X++]=Q>>24&255}}function Tt(b,C,I,V,X){for(I=C+I;C<I;){var Q=(ee=b[C++])>>16&240|ee>>12&15,ee=ee>>0&240|ee>>28&15;V[X++]=Q,V[X++]=ee}}function zn(b,C,I,V,X){for(I=C+I;C<I;){var Q=(ee=b[C++])>>16&248|ee>>13&7,ee=ee>>5&224|ee>>3&31;V[X++]=Q,V[X++]=ee}}function an(b,C,I,V,X){for(I=C+I;C<I;){var Q=b[C++];V[X++]=Q>>0&255,V[X++]=Q>>8&255,V[X++]=Q>>16&255}}function Jt(b,C,I,V,X,Q){if(Q==0)for(I=C+I;C<I;)Me(V,((Q=b[C++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),X+=32;else r(V,X,b,C,I)}function yr(b,C){O[C][0]=O[b+"0"],O[C][1]=O[b+"1"],O[C][2]=O[b+"2"],O[C][3]=O[b+"3"],O[C][4]=O[b+"4"],O[C][5]=O[b+"5"],O[C][6]=O[b+"6"],O[C][7]=O[b+"7"],O[C][8]=O[b+"8"],O[C][9]=O[b+"9"],O[C][10]=O[b+"10"],O[C][11]=O[b+"11"],O[C][12]=O[b+"12"],O[C][13]=O[b+"13"],O[C][14]=O[b+"0"],O[C][15]=O[b+"0"]}function Cn(b){return b==RM||b==FM||b==Zx||b==BM}function yi(){this.eb=[],this.size=this.A=this.fb=0}function xr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function to(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yi,this.f.kb=new xr,this.sd=null}function Ti(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vn(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function $n(b,C){var I=b.T,V=C.ba.f.RGBA,X=V.eb,Q=V.fb+b.ka*V.A,ee=xl[C.ba.S],ne=b.y,re=b.O,fe=b.f,Se=b.N,Be=b.ea,je=b.W,Pe=C.cc,rt=C.dc,Ue=C.Mc,Ce=C.Nc,Ee=b.ka,et=b.ka+b.T,st=b.U,tt=st+1>>1;for(Ee==0?ee(ne,re,null,null,fe,Se,Be,je,fe,Se,Be,je,X,Q,null,null,st):(ee(C.ec,C.fc,ne,re,Pe,rt,Ue,Ce,fe,Se,Be,je,X,Q-V.A,X,Q,st),++I);Ee+2<et;Ee+=2)Pe=fe,rt=Se,Ue=Be,Ce=je,Se+=b.Rc,je+=b.Rc,Q+=2*V.A,ee(ne,(re+=2*b.fa)-b.fa,ne,re,Pe,rt,Ue,Ce,fe,Se,Be,je,X,Q-V.A,X,Q,st);return re+=b.fa,b.j+et<b.o?(r(C.ec,C.fc,ne,re,st),r(C.cc,C.dc,fe,Se,tt),r(C.Mc,C.Nc,Be,je,tt),I--):1&et||ee(ne,re,null,null,fe,Se,Be,je,fe,Se,Be,je,X,Q+V.A,null,null,st),I}function As(b,C,I){var V=b.F,X=[b.J];if(V!=null){var Q=b.U,ee=C.ba.S,ne=ee==Kx||ee==Zx;C=C.ba.f.RGBA;var re=[0],fe=b.ka;re[0]=b.T,b.Kb&&(fe==0?--re[0]:(--fe,X[0]-=b.width),b.j+b.ka+b.T==b.o&&(re[0]=b.o-b.j-fe));var Se=C.eb;fe=C.fb+fe*C.A,b=Qr(V,X[0],b.width,Q,re,Se,fe+(ne?0:3),C.A),t(I==re),b&&Cn(ee)&&vl(Se,fe,ne,Q,re,C.A)}return 0}function Pi(b){var C=b.ma,I=C.ba.S,V=11>I,X=I==Yx||I==Xx||I==Kx||I==zM||I==12||Cn(I);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!Yg(C.Oa,b,X?11:12))return 0;if(X&&Cn(I)&&dt(),b.da)alert("todo:use_scaling");else{if(V){if(C.Ib=vn,b.Kb){if(I=b.U+1>>1,C.memory=o(b.U+2*I),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+b.U,C.Mc=C.cc,C.Nc=C.dc+I,C.Ib=$n,dt()}}else alert("todo:EmitYUV");X&&(C.Jb=As,V&&Ie())}if(V&&!$L){for(b=0;256>b;++b)hee[b]=89858*(b-128)+Qx>>Jx,vee[b]=-22014*(b-128)+Qx,gee[b]=-45773*(b-128),mee[b]=113618*(b-128)+Qx>>Jx;for(b=rv;b<HM;++b)C=76283*(b-16)+Qx>>Jx,yee[b-rv]=Ls(C,255),xee[b-rv]=Ls(C+8>>4,15);$L=1}return 1}function sr(b){var C=b.ma,I=b.U,V=b.T;return t(!(1&b.ka)),0>=I||0>=V?0:(I=C.Ib(b,C),C.Jb!=null&&C.Jb(b,C,I),C.Dc+=I,1)}function po(b){b.ma.memory=null}function fn(b,C,I,V){return Z(b,8)!=47?0:(C[0]=Z(b,14)+1,I[0]=Z(b,14)+1,V[0]=Z(b,1),Z(b,3)!=0?0:!b.h)}function no(b,C){if(4>b)return b+1;var I=b-2>>1;return(2+(1&b)<<I)+Z(C,I)+1}function Hi(b,C){return 120<C?C-120:1<=(I=((I=eee[C-1])>>4)*b+(8-(15&I)))?I:1;var I}function ro(b,C,I){var V=q(I),X=b[C+=255&V].g-8;return 0<X&&(te(I,I.u+8),V=q(I),C+=b[C].value,C+=V&(1<<X)-1),te(I,I.u+b[C].g),b[C].value}function hi(b,C,I){return I.g+=b.g,I.value+=b.value<<C>>>0,t(8>=I.g),b.g}function si(b,C,I){var V=b.xc;return t((C=V==0?0:b.vc[b.md*(I>>V)+(C>>V)])<b.Wb),b.Ya[C]}function io(b,C,I,V){var X=b.ab,Q=b.c*C,ee=b.C;C=ee+C;var ne=I,re=V;for(V=b.Ta,I=b.Ua;0<X--;){var fe=b.gc[X],Se=ee,Be=C,je=ne,Pe=re,rt=(re=V,ne=I,fe.Ea);switch(t(Se<Be),t(Be<=fe.nc),fe.hc){case 2:Vx(je,Pe,(Be-Se)*rt,re,ne);break;case 0:var Ue=Se,Ce=Be,Ee=re,et=ne,st=(Pt=fe).Ea;Ue==0&&(IM(je,Pe,null,null,1,Ee,et),It(je,Pe+1,0,0,st-1,Ee,et+1),Pe+=st,et+=st,++Ue);for(var tt=1<<Pt.b,Bt=tt-1,kt=nt(st,Pt.b),gn=Pt.K,Pt=Pt.w+(Ue>>Pt.b)*kt;Ue<Ce;){var wr=gn,Dr=Pt,dr=1;for(Zg(je,Pe,Ee,et-st,1,Ee,et);dr<st;){var Qn=(dr&~Bt)+tt;Qn>st&&(Qn=st),(0,Vf[wr[Dr++]>>8&15])(je,Pe+ +dr,Ee,et+dr-st,Qn-dr,Ee,et+dr),dr=Qn}Pe+=st,et+=st,++Ue&Bt||(Pt+=kt)}Be!=fe.nc&&r(re,ne-rt,re,ne+(Be-Se-1)*rt,rt);break;case 1:for(rt=je,Ce=Pe,st=(je=fe.Ea)-(et=je&~(Ee=(Pe=1<<fe.b)-1)),Ue=nt(je,fe.b),tt=fe.K,fe=fe.w+(Se>>fe.b)*Ue;Se<Be;){for(Bt=tt,kt=fe,gn=new mt,Pt=Ce+et,wr=Ce+je;Ce<Pt;)Sn(Bt[kt++],gn),bd(gn,rt,Ce,Pe,re,ne),Ce+=Pe,ne+=Pe;Ce<wr&&(Sn(Bt[kt++],gn),bd(gn,rt,Ce,st,re,ne),Ce+=st,ne+=st),++Se&Ee||(fe+=Ue)}break;case 3:if(je==re&&Pe==ne&&0<fe.b){for(Ce=re,je=rt=ne+(Be-Se)*rt-(et=(Be-Se)*nt(fe.Ea,fe.b)),Pe=re,Ee=ne,Ue=[],et=(st=et)-1;0<=et;--et)Ue[et]=Pe[Ee+et];for(et=st-1;0<=et;--et)Ce[je+et]=Ue[et];hl(fe,Se,Be,re,rt,re,ne)}else hl(fe,Se,Be,je,Pe,re,ne)}ne=V,re=I}re!=I&&r(V,I,ne,re,Q)}function cl(b,C){var I=b.V,V=b.Ba+b.c*b.C,X=C-b.C;if(t(C<=b.l.o),t(16>=X),0<X){var Q=b.l,ee=b.Ta,ne=b.Ua,re=Q.width;if(io(b,X,I,V),X=ne=[ne],t((I=b.C)<(V=C)),t(Q.v<Q.va),V>Q.o&&(V=Q.o),I<Q.j){var fe=Q.j-I;I=Q.j,X[0]+=fe*re}if(I>=V?I=0:(X[0]+=4*Q.v,Q.ka=I-Q.j,Q.U=Q.va-Q.v,Q.T=V-I,I=1),I){if(ne=ne[0],11>(I=b.ca).S){var Se=I.f.RGBA,Be=(V=I.S,X=Q.U,Q=Q.T,fe=Se.eb,Se.A),je=Q;for(Se=Se.fb+b.Ma*Se.A;0<je--;){var Pe=ee,rt=ne,Ue=X,Ce=fe,Ee=Se;switch(V){case $x:Xa(Pe,rt,Ue,Ce,Ee);break;case Yx:Ca(Pe,rt,Ue,Ce,Ee);break;case RM:Ca(Pe,rt,Ue,Ce,Ee),vl(Ce,Ee,0,Ue,1,0);break;case RL:zu(Pe,rt,Ue,Ce,Ee);break;case Xx:Jt(Pe,rt,Ue,Ce,Ee,1);break;case FM:Jt(Pe,rt,Ue,Ce,Ee,1),vl(Ce,Ee,0,Ue,1,0);break;case Kx:Jt(Pe,rt,Ue,Ce,Ee,0);break;case Zx:Jt(Pe,rt,Ue,Ce,Ee,0),vl(Ce,Ee,1,Ue,1,0);break;case zM:Hf(Pe,rt,Ue,Ce,Ee);break;case BM:Hf(Pe,rt,Ue,Ce,Ee),Jr(Ce,Ee,Ue,1,0);break;case FL:Du(Pe,rt,Ue,Ce,Ee);break;default:t(0)}ne+=re,Se+=Be}b.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=I.height)}}b.C=C,t(b.C<=b.i)}function Ga(b){var C;if(0<b.ua)return 0;for(C=0;C<b.Wb;++C){var I=b.Ya[C].G,V=b.Ya[C].H;if(0<I[1][V[1]+0].g||0<I[2][V[2]+0].g||0<I[3][V[3]+0].g)return 0}return 1}function Ts(b,C,I,V,X,Q){if(b.Z!=0){var ee=b.qd,ne=b.rd;for(t(Gf[b.Z]!=null);C<I;++C)Gf[b.Z](ee,ne,V,X,V,X,Q),ee=V,ne=X,X+=Q;b.qd=ee,b.rd=ne}}function Ps(b,C){var I=b.l.ma,V=I.Z==0||I.Z==1?b.l.j:b.C;if(V=b.C<V?V:b.C,t(C<=b.l.o),C>V){var X=b.l.width,Q=I.ca,ee=I.tb+X*V,ne=b.V,re=b.Ba+b.c*V,fe=b.gc;t(b.ab==1),t(fe[0].hc==3),Hx(fe[0],V,C,ne,re,Q,ee),Ts(I,V,C,Q,ee,X)}b.C=b.Ma=C}function Ns(b,C,I,V,X,Q,ee){var ne=b.$/V,re=b.$%V,fe=b.m,Se=b.s,Be=I+b.$,je=Be;X=I+V*X;var Pe=I+V*Q,rt=280+Se.ua,Ue=b.Pb?ne:16777216,Ce=0<Se.ua?Se.Wa:null,Ee=Se.wc,et=Be<Pe?si(Se,re,ne):null;t(b.C<Q),t(Pe<=X);var st=!1;e:for(;;){for(;st||Be<Pe;){var tt=0;if(ne>=Ue){var Bt=Be-I;t((Ue=b).Pb),Ue.wd=Ue.m,Ue.xd=Bt,0<Ue.s.ua&&Ae(Ue.s.Wa,Ue.s.vb),Ue=ne+nee}if(re&Ee||(et=si(Se,re,ne)),t(et!=null),et.Qb&&(C[Be]=et.qb,st=!0),!st)if(ae(fe),et.jc){tt=fe,Bt=C;var kt=Be,gn=et.pd[q(tt)&Fo-1];t(et.jc),256>gn.g?(te(tt,tt.u+gn.g),Bt[kt]=gn.value,tt=0):(te(tt,tt.u+gn.g-256),t(256<=gn.value),tt=gn.value),tt==0&&(st=!0)}else tt=ro(et.G[0],et.H[0],fe);if(fe.h)break;if(st||256>tt){if(!st)if(et.nd)C[Be]=(et.qb|tt<<8)>>>0;else{if(ae(fe),st=ro(et.G[1],et.H[1],fe),ae(fe),Bt=ro(et.G[2],et.H[2],fe),kt=ro(et.G[3],et.H[3],fe),fe.h)break;C[Be]=(kt<<24|st<<16|tt<<8|Bt)>>>0}if(st=!1,++Be,++re>=V&&(re=0,++ne,ee!=null&&ne<=Q&&!(ne%16)&&ee(b,ne),Ce!=null))for(;je<Be;)tt=C[je++],Ce.X[(506832829*tt&4294967295)>>>Ce.Mb]=tt}else if(280>tt){if(tt=no(tt-256,fe),Bt=ro(et.G[4],et.H[4],fe),ae(fe),Bt=Hi(V,Bt=no(Bt,fe)),fe.h)break;if(Be-I<Bt||X-Be<tt)break e;for(kt=0;kt<tt;++kt)C[Be+kt]=C[Be+kt-Bt];for(Be+=tt,re+=tt;re>=V;)re-=V,++ne,ee!=null&&ne<=Q&&!(ne%16)&&ee(b,ne);if(t(Be<=X),re&Ee&&(et=si(Se,re,ne)),Ce!=null)for(;je<Be;)tt=C[je++],Ce.X[(506832829*tt&4294967295)>>>Ce.Mb]=tt}else{if(!(tt<rt))break e;for(st=tt-280,t(Ce!=null);je<Be;)tt=C[je++],Ce.X[(506832829*tt&4294967295)>>>Ce.Mb]=tt;tt=Be,t(!(st>>>(Bt=Ce).Xa)),C[tt]=Bt.X[st],st=!0}st||t(fe.h==J(fe))}if(b.Pb&&fe.h&&Be<X)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Ae(b.s.vb,b.s.Wa);else{if(fe.h)break e;ee?.(b,ne>Q?Q:ne),b.a=0,b.$=Be-I}return 1}return b.a=3,0}function ul(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var C=b.Wa;C!=null&&(C.X=null),b.vb=null,t(b!=null)}function $a(){var b=new LM;return b==null?null:(b.a=0,b.xb=VL,yr("Predictor","VP8LPredictors"),yr("Predictor","VP8LPredictors_C"),yr("PredictorAdd","VP8LPredictorsAdd"),yr("PredictorAdd","VP8LPredictorsAdd_C"),Vx=Kt,bd=Dt,Xa=We,Ca=Zt,Hf=Tt,Du=zn,zu=an,O.VP8LMapColor32b=Bm,O.VP8LMapColor8b=Wx,b)}function fl(b,C,I,V,X){var Q=1,ee=[b],ne=[C],re=V.m,fe=V.s,Se=null,Be=0;e:for(;;){if(I)for(;Q&&Z(re,1);){var je=ee,Pe=ne,rt=V,Ue=1,Ce=rt.m,Ee=rt.gc[rt.ab],et=Z(Ce,2);if(rt.Oc&1<<et)Q=0;else{switch(rt.Oc|=1<<et,Ee.hc=et,Ee.Ea=je[0],Ee.nc=Pe[0],Ee.K=[null],++rt.ab,t(4>=rt.ab),et){case 0:case 1:Ee.b=Z(Ce,3)+2,Ue=fl(nt(Ee.Ea,Ee.b),nt(Ee.nc,Ee.b),0,rt,Ee.K),Ee.K=Ee.K[0];break;case 3:var st,tt=Z(Ce,8)+1,Bt=16<tt?0:4<tt?1:2<tt?2:3;if(je[0]=nt(Ee.Ea,Bt),Ee.b=Bt,st=Ue=fl(tt,1,0,rt,Ee.K)){var kt,gn=tt,Pt=Ee,wr=1<<(8>>Pt.b),Dr=o(wr);if(Dr==null)st=0;else{var dr=Pt.K[0],Qn=Pt.w;for(Dr[0]=Pt.K[0][0],kt=1;kt<1*gn;++kt)Dr[kt]=$e(dr[Qn+kt],Dr[kt-1]);for(;kt<4*wr;++kt)Dr[kt]=0;Pt.K[0]=null,Pt.K[0]=Dr,st=1}}Ue=st;break;case 2:break;default:t(0)}Q=Ue}}if(ee=ee[0],ne=ne[0],Q&&Z(re,1)&&!(Q=1<=(Be=Z(re,4))&&11>=Be)){V.a=3;break e}var Yr;if(Yr=Q)t:{var Vr,Vn,Ui,Ka=V,Gi=ee,Za=ne,zr=Be,Ds=I,zs=Ka.m,go=Ka.s,Bo=[null],Ma=1,bl=0,Rc=tee[zr];n:for(;;){if(Ds&&Z(zs,1)){var vo=Z(zs,3)+2,ju=nt(Gi,vo),Od=nt(Za,vo),qm=ju*Od;if(!fl(ju,Od,0,Ka,Bo))break n;for(Bo=Bo[0],go.xc=vo,Vr=0;Vr<qm;++Vr){var $f=Bo[Vr]>>8&65535;Bo[Vr]=$f,$f>=Ma&&(Ma=$f+1)}}if(zs.h)break n;for(Vn=0;5>Vn;++Vn){var _i=BL[Vn];!Vn&&0<zr&&(_i+=1<<zr),bl<_i&&(bl=_i)}var WM=a(Ma*Rc,A),KL=Ma,ZL=a(KL,L);if(ZL==null)var tb=null;else t(65536>=KL),tb=ZL;var iv=o(bl);if(tb==null||iv==null||WM==null){Ka.a=1;break n}var nb=WM;for(Vr=Ui=0;Vr<Ma;++Vr){var rc=tb[Vr],Um=rc.G,Gm=rc.H,JL=0,rb=1,QL=0;for(Vn=0;5>Vn;++Vn){_i=BL[Vn],Um[Vn]=nb,Gm[Vn]=Ui,!Vn&&0<zr&&(_i+=1<<zr);i:{var ib,qM=_i,ob=Ka,ov=iv,wee=nb,See=Ui,UM=0,Yf=ob.m,Cee=Z(Yf,1);if(i(ov,0,0,qM),Cee){var Oee=Z(Yf,1)+1,Mee=Z(Yf,1),eI=Z(Yf,Mee==0?1:8);ov[eI]=1,Oee==2&&(ov[eI=Z(Yf,8)]=1);var ab=1}else{var tI=o(19),nI=Z(Yf,4)+4;if(19<nI){ob.a=3;var sb=0;break i}for(ib=0;ib<nI;++ib)tI[QQ[ib]]=Z(Yf,3);var GM=void 0,av=void 0,rI=ob,kee=tI,lb=qM,iI=ov,$M=0,Xf=rI.m,oI=8,aI=a(128,A);r:for(;k(aI,0,7,kee,19);){if(Z(Xf,1)){var Eee=2+2*Z(Xf,3);if((GM=2+Z(Xf,Eee))>lb)break r}else GM=lb;for(av=0;av<lb&&GM--;){ae(Xf);var sI=aI[0+(127&q(Xf))];te(Xf,Xf.u+sI.g);var $m=sI.value;if(16>$m)iI[av++]=$m,$m!=0&&(oI=$m);else{var Aee=$m==16,lI=$m-16,Tee=ZQ[lI],cI=Z(Xf,KQ[lI])+Tee;if(av+cI>lb)break r;for(var Pee=Aee?oI:0;0<cI--;)iI[av++]=Pee}}$M=1;break r}$M||(rI.a=3),ab=$M}(ab=ab&&!Yf.h)&&(UM=k(wee,See,8,ov,qM)),ab&&UM!=0?sb=UM:(ob.a=3,sb=0)}if(sb==0)break n;if(rb&&JQ[Vn]==1&&(rb=nb[Ui].g==0),JL+=nb[Ui].g,Ui+=sb,3>=Vn){var sv,YM=iv[0];for(sv=1;sv<_i;++sv)iv[sv]>YM&&(YM=iv[sv]);QL+=YM}}if(rc.nd=rb,rc.Qb=0,rb&&(rc.qb=(Um[3][Gm[3]+0].value<<24|Um[1][Gm[1]+0].value<<16|Um[2][Gm[2]+0].value)>>>0,JL==0&&256>Um[0][Gm[0]+0].value&&(rc.Qb=1,rc.qb+=Um[0][Gm[0]+0].value<<8)),rc.jc=!rc.Qb&&6>QL,rc.jc){var cb,Vu=rc;for(cb=0;cb<Fo;++cb){var Kf=cb,Zf=Vu.pd[Kf],ub=Vu.G[0][Vu.H[0]+Kf];256<=ub.value?(Zf.g=ub.g+256,Zf.value=ub.value):(Zf.g=0,Zf.value=0,Kf>>=hi(ub,8,Zf),Kf>>=hi(Vu.G[1][Vu.H[1]+Kf],16,Zf),Kf>>=hi(Vu.G[2][Vu.H[2]+Kf],0,Zf),hi(Vu.G[3][Vu.H[3]+Kf],24,Zf))}}}go.vc=Bo,go.Wb=Ma,go.Ya=tb,go.yc=WM,Yr=1;break t}Yr=0}if(!(Q=Yr)){V.a=3;break e}if(0<Be){if(fe.ua=1<<Be,!Ze(fe.Wa,Be)){V.a=1,Q=0;break e}}else fe.ua=0;var XM=V,uI=ee,Nee=ne,KM=XM.s,ZM=KM.xc;if(XM.c=uI,XM.i=Nee,KM.md=nt(uI,ZM),KM.wc=ZM==0?-1:(1<<ZM)-1,I){V.xb=cee;break e}if((Se=o(ee*ne))==null){V.a=1,Q=0;break e}Q=(Q=Ns(V,Se,0,ee,ne,ne,null))&&!re.h;break e}return Q?(X!=null?X[0]=Se:(t(Se==null),t(I)),V.$=0,I||ul(fe)):ul(fe),Q}function Nu(b,C){var I=b.c*b.i,V=I+C+16*C;return t(b.c<=C),b.V=o(V),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+I+C,1)}function zf(b,C){var I=b.C,V=C-I,X=b.V,Q=b.Ba+b.c*I;for(t(C<=b.l.o);0<V;){var ee=16<V?16:V,ne=b.l.ma,re=b.l.width,fe=re*ee,Se=ne.ca,Be=ne.tb+re*I,je=b.Ta,Pe=b.Ua;io(b,ee,X,Q),Di(je,Pe,Se,Be,fe),Ts(ne,I,I+ee,Se,Be,re),V-=ee,X+=ee*b.c,I+=ee}t(I==C),b.C=b.Ma=C}function Ni(){this.ub=this.yd=this.td=this.Rb=0}function Li(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function U(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Y(){this.Yb=function(){var b=[];return function C(I,V,X){for(var Q=X[V],ee=0;ee<Q&&(I.push(X.length>V+1?[]:0),!(X.length<V+1));ee++)C(I[ee],V+1,X)}(b,0,[3,11]),b}()}function se(){this.jb=o(3),this.Wc=s([4,8],Y),this.Xc=s([4,17],Y)}function he(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Oe(){this.ld=this.La=this.dd=this.tc=0}function ke(){this.Na=this.la=0}function ve(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ge(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Le(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oe),this.Y=0,this.ya=Array(new ge),this.aa=0,this.l=new yt}function Fe(){this.y=o(16),this.f=o(8),this.ea=o(8)}function vt(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Ni,this.Kc=new Li,this.ed=new he,this.Qa=new U,this.Ic=this.$c=this.Aa=0,this.D=new Le,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,ie),this.ia=0,this.pb=a(4,ve),this.Pa=new se,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fe),this.Hd=0,this.rb=Array(new ke),this.sb=0,this.wa=Array(new Oe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ge),this.L=this.aa=0,this.gd=s([4,2],Oe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function yt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ft(){var b=new vt;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,nv||(nv=ct)),b}function it(b,C,I){return b.a==0&&(b.a=C,b.sc=I,b.cb=0),0}function At(b,C,I){return 3<=I&&b[C+0]==157&&b[C+1]==1&&b[C+2]==42}function Ot(b,C){if(b==null)return 0;if(b.a=0,b.sc="OK",C==null)return it(b,2,"null VP8Io passed to VP8GetHeaders()");var I=C.data,V=C.w,X=C.ha;if(4>X)return it(b,7,"Truncated header.");var Q=I[V+0]|I[V+1]<<8|I[V+2]<<16,ee=b.Od;if(ee.Rb=!(1&Q),ee.td=Q>>1&7,ee.yd=Q>>4&1,ee.ub=Q>>5,3<ee.td)return it(b,3,"Incorrect keyframe parameters.");if(!ee.yd)return it(b,4,"Frame not displayable.");V+=3,X-=3;var ne=b.Kc;if(ee.Rb){if(7>X)return it(b,7,"cannot parse picture header");if(!At(I,V,X))return it(b,3,"Bad code word");ne.c=16383&(I[V+4]<<8|I[V+3]),ne.Td=I[V+4]>>6,ne.i=16383&(I[V+6]<<8|I[V+5]),ne.Ud=I[V+6]>>6,V+=7,X-=7,b.za=ne.c+15>>4,b.Ub=ne.i+15>>4,C.width=ne.c,C.height=ne.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,i((Q=b.Pa).jb,0,255,Q.jb.length),t((Q=b.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,i(Q.Zb,0,0,Q.Zb.length),i(Q.Lb,0,0,Q.Lb)}if(ee.ub>X)return it(b,7,"bad partition length");z(Q=b.m,I,V,ee.ub),V+=ee.ub,X-=ee.ub,ee.Rb&&(ne.Ld=ue(Q),ne.Kd=ue(Q)),ne=b.Qa;var re,fe=b.Pa;if(t(Q!=null),t(ne!=null),ne.Cb=ue(Q),ne.Cb){if(ne.Bb=ue(Q),ue(Q)){for(ne.Fb=ue(Q),re=0;4>re;++re)ne.Zb[re]=ue(Q)?H(Q,7):0;for(re=0;4>re;++re)ne.Lb[re]=ue(Q)?H(Q,6):0}if(ne.Bb)for(re=0;3>re;++re)fe.jb[re]=ue(Q)?B(Q,8):255}else ne.Bb=0;if(Q.Ka)return it(b,3,"cannot parse segment header");if((ne=b.ed).zd=ue(Q),ne.Tb=B(Q,6),ne.wb=B(Q,3),ne.Pc=ue(Q),ne.Pc&&ue(Q)){for(fe=0;4>fe;++fe)ue(Q)&&(ne.vd[fe]=H(Q,6));for(fe=0;4>fe;++fe)ue(Q)&&(ne.od[fe]=H(Q,6))}if(b.L=ne.Tb==0?0:ne.zd?1:2,Q.Ka)return it(b,3,"cannot parse filter header");var Se=X;if(X=re=V,V=re+Se,ne=Se,b.Xb=(1<<B(b.m,2))-1,Se<3*(fe=b.Xb))I=7;else{for(re+=3*fe,ne-=3*fe,Se=0;Se<fe;++Se){var Be=I[X+0]|I[X+1]<<8|I[X+2]<<16;Be>ne&&(Be=ne),z(b.Jc[+Se],I,re,Be),re+=Be,ne-=Be,X+=3}z(b.Jc[+fe],I,re,ne),I=re<V?0:5}if(I!=0)return it(b,I,"cannot parse partitions");for(I=B(re=b.m,7),X=ue(re)?H(re,4):0,V=ue(re)?H(re,4):0,ne=ue(re)?H(re,4):0,fe=ue(re)?H(re,4):0,re=ue(re)?H(re,4):0,Se=b.Qa,Be=0;4>Be;++Be){if(Se.Cb){var je=Se.Zb[Be];Se.Fb||(je+=I)}else{if(0<Be){b.pb[Be]=b.pb[0];continue}je=I}var Pe=b.pb[Be];Pe.Sc[0]=jM[Ls(je+X,127)],Pe.Sc[1]=VM[Ls(je+0,127)],Pe.Eb[0]=2*jM[Ls(je+V,127)],Pe.Eb[1]=101581*VM[Ls(je+ne,127)]>>16,8>Pe.Eb[1]&&(Pe.Eb[1]=8),Pe.Qc[0]=jM[Ls(je+fe,117)],Pe.Qc[1]=VM[Ls(je+re,127)],Pe.lc=je+re}if(!ee.Rb)return it(b,4,"Not a key frame.");for(ue(Q),ee=b.Pa,I=0;4>I;++I){for(X=0;8>X;++X)for(V=0;3>V;++V)for(ne=0;11>ne;++ne)fe=ye(Q,see[I][X][V][ne])?B(Q,8):oee[I][X][V][ne],ee.Wc[I][X].Yb[V][ne]=fe;for(X=0;17>X;++X)ee.Xc[I][X]=ee.Wc[I][lee[X]]}return b.kc=ue(Q),b.kc&&(b.Bd=B(Q,8)),b.cb=1}function ct(b,C,I,V,X,Q,ee){var ne=C[X].Yb[I];for(I=0;16>X;++X){if(!ye(b,ne[I+0]))return X;for(;!ye(b,ne[I+1]);)if(ne=C[++X].Yb[0],I=0,X==16)return 16;var re=C[X+1].Yb;if(ye(b,ne[I+2])){var fe=b,Se=0;if(ye(fe,(je=ne)[(Be=I)+3]))if(ye(fe,je[Be+6])){for(ne=0,Be=2*(Se=ye(fe,je[Be+8]))+(je=ye(fe,je[Be+9+Se])),Se=0,je=ree[Be];je[ne];++ne)Se+=Se+ye(fe,je[ne]);Se+=3+(8<<Be)}else ye(fe,je[Be+7])?(Se=7+2*ye(fe,165),Se+=ye(fe,145)):Se=5+ye(fe,159);else Se=ye(fe,je[Be+4])?3+ye(fe,je[Be+5]):2;ne=re[2]}else Se=1,ne=re[1];re=ee+iee[X],0>(fe=b).b&&le(fe);var Be,je=fe.b,Pe=(Be=fe.Ca>>1)-(fe.I>>je)>>31;--fe.b,fe.Ca+=Pe,fe.Ca|=1,fe.I-=(Be+1&Pe)<<je,Q[re]=((Se^Pe)-Pe)*V[(0<X)+0]}return 16}function en(b){var C=b.rb[b.sb-1];C.la=0,C.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Nt(b,C){if(b==null)return 0;if(C==null)return it(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Ot(b,C))return 0;if(t(b.cb),C.ac==null||C.ac(C)){C.ob&&(b.L=0);var I=eb[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=C.v-I>>4,b.zb=C.j-I>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=C.o+15+I>>4,b.Hb=C.va+15+I>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var V=b.ed;for(I=0;4>I;++I){var X;if(b.Qa.Cb){var Q=b.Qa.Lb[I];b.Qa.Fb||(Q+=V.Tb)}else Q=V.Tb;for(X=0;1>=X;++X){var ee=b.gd[I][X],ne=Q;if(V.Pc&&(ne+=V.vd[0],X&&(ne+=V.od[0])),0<(ne=0>ne?0:63<ne?63:ne)){var re=ne;0<V.wb&&(re=4<V.wb?re>>2:re>>1)>9-V.wb&&(re=9-V.wb),1>re&&(re=1),ee.dd=re,ee.tc=2*ne+re,ee.ld=40<=ne?2:15<=ne?1:0}else ee.tc=0;ee.La=X}}}I=0}else it(b,6,"Frame setup failed"),I=b.a;if(I=I==0){if(I){b.$c=0,0<b.Aa||(b.Ic=_ee);e:{I=b.Ic,V=4*(re=b.za);var fe=32*re,Se=re+1,Be=0<b.L?re*(0<b.Aa?2:1):0,je=(b.Aa==2?2:1)*re;if((ee=V+832+(X=3*(16*I+eb[b.L])/2*fe)+(Q=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=ee)I=0;else{if(ee>b.Vb){if(b.Vb=0,b.Ec=o(ee),b.Fc=0,b.Ec==null){I=it(b,1,"no memory during frame initialization.");break e}b.Vb=ee}ee=b.Ec,ne=b.Fc,b.Ac=ee,b.Bc=ne,ne+=V,b.Gd=a(fe,Fe),b.Hd=0,b.rb=a(Se+1,ke),b.sb=1,b.wa=Be?a(Be,Oe):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=re),t(!0),b.oc=ee,b.pc=ne,ne+=832,b.ya=a(je,ge),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=re),b.R=16*re,b.B=8*re,re=(fe=eb[b.L])*b.R,fe=fe/2*b.B,b.sa=ee,b.ta=ne+re,b.qa=b.sa,b.ra=b.ta+16*I*b.R+fe,b.Ha=b.qa,b.Ia=b.ra+8*I*b.B+fe,b.$c=0,ne+=X,b.mb=Q?ee:null,b.nb=Q?ne:null,t(ne+Q<=b.Fc+b.Vb),en(b),i(b.Ac,b.Bc,0,V),I=1}}if(I){if(C.ka=0,C.y=b.sa,C.O=b.ta,C.f=b.qa,C.N=b.ra,C.ea=b.Ha,C.Vd=b.Ia,C.fa=b.R,C.Rc=b.B,C.F=null,C.J=0,!Ux){for(I=-255;255>=I;++I)ao[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)Fu[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)tv[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)Wm[255+I]=0>I?0:255<I?255:I;Ux=1}jm=Zr,Ru=ea,Jg=Wi,Oa=Ro,ml=ta,Ii=ho,Vm=Bg,qx=yd,Qg=NM,_d=jg,wd=PM,Wf=Pm,Sd=Vg,Hm=Fx,Cd=Rx,qf=Dc,ev=Iu,gl=TM,nc[0]=Ic,nc[1]=Rf,nc[2]=CM,nc[3]=OM,nc[4]=Nx,nc[5]=Am,nc[6]=Lx,nc[7]=zg,nc[8]=kM,nc[9]=MM,Uf[0]=Lc,Uf[1]=Lu,Uf[2]=oo,Uf[3]=li,Uf[4]=xi,Uf[5]=dl,Uf[6]=Px,Bu[0]=Ff,Bu[1]=Dg,Bu[2]=EM,Bu[3]=Rg,Bu[4]=vd,Bu[5]=AM,Bu[6]=Fg,I=1}else I=0}I&&(I=function(Pe,rt){for(Pe.M=0;Pe.M<Pe.Va;++Pe.M){var Ue,Ce=Pe.Jc[Pe.M&Pe.Xb],Ee=Pe.m,et=Pe;for(Ue=0;Ue<et.za;++Ue){var st=Ee,tt=et,Bt=tt.Ac,kt=tt.Bc+4*Ue,gn=tt.zc,Pt=tt.ya[tt.aa+Ue];if(tt.Qa.Bb?Pt.$b=ye(st,tt.Pa.jb[0])?2+ye(st,tt.Pa.jb[2]):ye(st,tt.Pa.jb[1]):Pt.$b=0,tt.kc&&(Pt.Ad=ye(st,tt.Bd)),Pt.Za=!ye(st,145)+0,Pt.Za){var wr=Pt.Ob,Dr=0;for(tt=0;4>tt;++tt){var dr,Qn=gn[0+tt];for(dr=0;4>dr;++dr){Qn=aee[Bt[kt+dr]][Qn];for(var Yr=jL[ye(st,Qn[0])];0<Yr;)Yr=jL[2*Yr+ye(st,Qn[Yr])];Qn=-Yr,Bt[kt+dr]=Qn}r(wr,Dr,Bt,kt,4),Dr+=4,gn[0+tt]=Qn}}else Qn=ye(st,156)?ye(st,128)?1:3:ye(st,163)?2:0,Pt.Ob[0]=Qn,i(Bt,kt,Qn,4),i(gn,0,Qn,4);Pt.Dd=ye(st,142)?ye(st,114)?ye(st,183)?1:3:2:0}if(et.m.Ka)return it(Pe,7,"Premature end-of-partition0 encountered.");for(;Pe.ja<Pe.za;++Pe.ja){if(et=Ce,st=(Ee=Pe).rb[Ee.sb-1],Bt=Ee.rb[Ee.sb+Ee.ja],Ue=Ee.ya[Ee.aa+Ee.ja],kt=Ee.kc?Ue.Ad:0)st.la=Bt.la=0,Ue.Za||(st.Na=Bt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var Vr,Vn;if(st=Bt,Bt=et,kt=Ee.Pa.Xc,gn=Ee.ya[Ee.aa+Ee.ja],Pt=Ee.pb[gn.$b],tt=gn.ad,wr=0,Dr=Ee.rb[Ee.sb-1],Qn=dr=0,i(tt,wr,0,384),gn.Za)var Ui=0,Ka=kt[3];else{Yr=o(16);var Gi=st.Na+Dr.Na;if(Gi=nv(Bt,kt[1],Gi,Pt.Eb,0,Yr,0),st.Na=Dr.Na=(0<Gi)+0,1<Gi)jm(Yr,0,tt,wr);else{var Za=Yr[0]+3>>3;for(Yr=0;256>Yr;Yr+=16)tt[wr+Yr]=Za}Ui=1,Ka=kt[0]}var zr=15&st.la,Ds=15&Dr.la;for(Yr=0;4>Yr;++Yr){var zs=1&Ds;for(Za=Vn=0;4>Za;++Za)zr=zr>>1|(zs=(Gi=nv(Bt,Ka,Gi=zs+(1&zr),Pt.Sc,Ui,tt,wr))>Ui)<<7,Vn=Vn<<2|(3<Gi?3:1<Gi?2:tt[wr+0]!=0),wr+=16;zr>>=4,Ds=Ds>>1|zs<<7,dr=(dr<<8|Vn)>>>0}for(Ka=zr,Ui=Ds>>4,Vr=0;4>Vr;Vr+=2){for(Vn=0,zr=st.la>>4+Vr,Ds=Dr.la>>4+Vr,Yr=0;2>Yr;++Yr){for(zs=1&Ds,Za=0;2>Za;++Za)Gi=zs+(1&zr),zr=zr>>1|(zs=0<(Gi=nv(Bt,kt[2],Gi,Pt.Qc,0,tt,wr)))<<3,Vn=Vn<<2|(3<Gi?3:1<Gi?2:tt[wr+0]!=0),wr+=16;zr>>=2,Ds=Ds>>1|zs<<5}Qn|=Vn<<4*Vr,Ka|=zr<<4<<Vr,Ui|=(240&Ds)<<Vr}st.la=Ka,Dr.la=Ui,gn.Hc=dr,gn.Gc=Qn,gn.ia=43690&Qn?0:Pt.ia,kt=!(dr|Qn)}if(0<Ee.L&&(Ee.wa[Ee.Y+Ee.ja]=Ee.gd[Ue.$b][Ue.Za],Ee.wa[Ee.Y+Ee.ja].La|=!kt),et.Ka)return it(Pe,7,"Premature end-of-file encountered.")}if(en(Pe),Ee=rt,et=1,Ue=(Ce=Pe).D,st=0<Ce.L&&Ce.M>=Ce.zb&&Ce.M<=Ce.Va,Ce.Aa==0)e:{if(Ue.M=Ce.M,Ue.uc=st,$g(Ce,Ue),et=1,Ue=(Vn=Ce.D).Nb,st=(Qn=eb[Ce.L])*Ce.R,Bt=Qn/2*Ce.B,Yr=16*Ue*Ce.R,Za=8*Ue*Ce.B,kt=Ce.sa,gn=Ce.ta-st+Yr,Pt=Ce.qa,tt=Ce.ra-Bt+Za,wr=Ce.Ha,Dr=Ce.Ia-Bt+Za,Ds=(zr=Vn.M)==0,dr=zr>=Ce.Va-1,Ce.Aa==2&&$g(Ce,Vn),Vn.uc)for(zs=(Gi=Ce).D.M,t(Gi.D.uc),Vn=Gi.yb;Vn<Gi.Hb;++Vn){Ui=Vn,Ka=zs;var go=(Bo=(_i=Gi).D).Nb;Vr=_i.R;var Bo=Bo.wa[Bo.Y+Ui],Ma=_i.sa,bl=_i.ta+16*go*Vr+16*Ui,Rc=Bo.dd,vo=Bo.tc;if(vo!=0)if(t(3<=vo),_i.L==1)0<Ui&&qf(Ma,bl,Vr,vo+4),Bo.La&&gl(Ma,bl,Vr,vo),0<Ka&&Cd(Ma,bl,Vr,vo+4),Bo.La&&ev(Ma,bl,Vr,vo);else{var ju=_i.B,Od=_i.qa,qm=_i.ra+8*go*ju+8*Ui,$f=_i.Ha,_i=_i.Ia+8*go*ju+8*Ui;go=Bo.ld,0<Ui&&(qx(Ma,bl,Vr,vo+4,Rc,go),_d(Od,qm,$f,_i,ju,vo+4,Rc,go)),Bo.La&&(Wf(Ma,bl,Vr,vo,Rc,go),Hm(Od,qm,$f,_i,ju,vo,Rc,go)),0<Ka&&(Vm(Ma,bl,Vr,vo+4,Rc,go),Qg(Od,qm,$f,_i,ju,vo+4,Rc,go)),Bo.La&&(wd(Ma,bl,Vr,vo,Rc,go),Sd(Od,qm,$f,_i,ju,vo,Rc,go))}}if(Ce.ia&&alert("todo:DitherRow"),Ee.put!=null){if(Vn=16*zr,zr=16*(zr+1),Ds?(Ee.y=Ce.sa,Ee.O=Ce.ta+Yr,Ee.f=Ce.qa,Ee.N=Ce.ra+Za,Ee.ea=Ce.Ha,Ee.W=Ce.Ia+Za):(Vn-=Qn,Ee.y=kt,Ee.O=gn,Ee.f=Pt,Ee.N=tt,Ee.ea=wr,Ee.W=Dr),dr||(zr-=Qn),zr>Ee.o&&(zr=Ee.o),Ee.F=null,Ee.J=null,Ce.Fa!=null&&0<Ce.Fa.length&&Vn<zr&&(Ee.J=Ug(Ce,Ee,Vn,zr-Vn),Ee.F=Ce.mb,Ee.F==null&&Ee.F.length==0)){et=it(Ce,3,"Could not decode alpha data.");break e}Vn<Ee.j&&(Qn=Ee.j-Vn,Vn=Ee.j,t(!(1&Qn)),Ee.O+=Ce.R*Qn,Ee.N+=Ce.B*(Qn>>1),Ee.W+=Ce.B*(Qn>>1),Ee.F!=null&&(Ee.J+=Ee.width*Qn)),Vn<zr&&(Ee.O+=Ee.v,Ee.N+=Ee.v>>1,Ee.W+=Ee.v>>1,Ee.F!=null&&(Ee.J+=Ee.v),Ee.ka=Vn-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=zr-Vn,et=Ee.put(Ee))}Ue+1!=Ce.Ic||dr||(r(Ce.sa,Ce.ta-st,kt,gn+16*Ce.R,st),r(Ce.qa,Ce.ra-Bt,Pt,tt+8*Ce.B,Bt),r(Ce.Ha,Ce.Ia-Bt,wr,Dr+8*Ce.B,Bt))}if(!et)return it(Pe,6,"Output aborted.")}return 1}(b,C)),C.bc!=null&&C.bc(C),I&=1}return I?(b.cb=0,I):0}function Ht(b,C,I,V,X){X=b[C+I+32*V]+(X>>3),b[C+I+32*V]=-256&X?0>X?0:255:X}function St(b,C,I,V,X,Q){Ht(b,C,0,I,V+X),Ht(b,C,1,I,V+Q),Ht(b,C,2,I,V-Q),Ht(b,C,3,I,V-X)}function Lt(b){return(20091*b>>16)+b}function Ln(b,C,I,V){var X,Q=0,ee=o(16);for(X=0;4>X;++X){var ne=b[C+0]+b[C+8],re=b[C+0]-b[C+8],fe=(35468*b[C+4]>>16)-Lt(b[C+12]),Se=Lt(b[C+4])+(35468*b[C+12]>>16);ee[Q+0]=ne+Se,ee[Q+1]=re+fe,ee[Q+2]=re-fe,ee[Q+3]=ne-Se,Q+=4,C++}for(X=Q=0;4>X;++X)ne=(b=ee[Q+0]+4)+ee[Q+8],re=b-ee[Q+8],fe=(35468*ee[Q+4]>>16)-Lt(ee[Q+12]),Ht(I,V,0,0,ne+(Se=Lt(ee[Q+4])+(35468*ee[Q+12]>>16))),Ht(I,V,1,0,re+fe),Ht(I,V,2,0,re-fe),Ht(I,V,3,0,ne-Se),Q++,V+=32}function ho(b,C,I,V){var X=b[C+0]+4,Q=35468*b[C+4]>>16,ee=Lt(b[C+4]),ne=35468*b[C+1]>>16;St(I,V,0,X+ee,b=Lt(b[C+1]),ne),St(I,V,1,X+Q,b,ne),St(I,V,2,X-Q,b,ne),St(I,V,3,X-ee,b,ne)}function ea(b,C,I,V,X){Ln(b,C,I,V),X&&Ln(b,C+16,I,V+4)}function Wi(b,C,I,V){Ru(b,C+0,I,V,1),Ru(b,C+32,I,V+128,1)}function Ro(b,C,I,V){var X;for(b=b[C+0]+4,X=0;4>X;++X)for(C=0;4>C;++C)Ht(I,V,C,X,b)}function ta(b,C,I,V){b[C+0]&&Oa(b,C+0,I,V),b[C+16]&&Oa(b,C+16,I,V+4),b[C+32]&&Oa(b,C+32,I,V+128),b[C+48]&&Oa(b,C+48,I,V+128+4)}function Zr(b,C,I,V){var X,Q=o(16);for(X=0;4>X;++X){var ee=b[C+0+X]+b[C+12+X],ne=b[C+4+X]+b[C+8+X],re=b[C+4+X]-b[C+8+X],fe=b[C+0+X]-b[C+12+X];Q[0+X]=ee+ne,Q[8+X]=ee-ne,Q[4+X]=fe+re,Q[12+X]=fe-re}for(X=0;4>X;++X)ee=(b=Q[0+4*X]+3)+Q[3+4*X],ne=Q[1+4*X]+Q[2+4*X],re=Q[1+4*X]-Q[2+4*X],fe=b-Q[3+4*X],I[V+0]=ee+ne>>3,I[V+16]=fe+re>>3,I[V+32]=ee-ne>>3,I[V+48]=fe-re>>3,V+=64}function Er(b,C,I){var V,X=C-32,Q=Is,ee=255-b[X-1];for(V=0;V<I;++V){var ne,re=Q,fe=ee+b[C-1];for(ne=0;ne<I;++ne)b[C+ne]=re[fe+b[X+ne]];C+=32}}function Rf(b,C){Er(b,C,4)}function Dg(b,C){Er(b,C,8)}function Lu(b,C){Er(b,C,16)}function oo(b,C){var I;for(I=0;16>I;++I)r(b,C+32*I,b,C-32,16)}function li(b,C){var I;for(I=16;0<I;--I)i(b,C,b[C-1],16),C+=32}function pl(b,C,I){var V;for(V=0;16>V;++V)i(C,I+32*V,b,16)}function Lc(b,C){var I,V=16;for(I=0;16>I;++I)V+=b[C-1+32*I]+b[C+I-32];pl(V>>5,b,C)}function xi(b,C){var I,V=8;for(I=0;16>I;++I)V+=b[C-1+32*I];pl(V>>4,b,C)}function dl(b,C){var I,V=8;for(I=0;16>I;++I)V+=b[C+I-32];pl(V>>4,b,C)}function Px(b,C){pl(128,b,C)}function In(b,C,I){return b+2*C+I+2>>2}function CM(b,C){var I,V=C-32;for(V=new Uint8Array([In(b[V-1],b[V+0],b[V+1]),In(b[V+0],b[V+1],b[V+2]),In(b[V+1],b[V+2],b[V+3]),In(b[V+2],b[V+3],b[V+4])]),I=0;4>I;++I)r(b,C+32*I,V,0,V.length)}function OM(b,C){var I=b[C-1],V=b[C-1+32],X=b[C-1+64],Q=b[C-1+96];Me(b,C+0,16843009*In(b[C-1-32],I,V)),Me(b,C+32,16843009*In(I,V,X)),Me(b,C+64,16843009*In(V,X,Q)),Me(b,C+96,16843009*In(X,Q,Q))}function Ic(b,C){var I,V=4;for(I=0;4>I;++I)V+=b[C+I-32]+b[C-1+32*I];for(V>>=3,I=0;4>I;++I)i(b,C+32*I,V,4)}function Nx(b,C){var I=b[C-1+0],V=b[C-1+32],X=b[C-1+64],Q=b[C-1-32],ee=b[C+0-32],ne=b[C+1-32],re=b[C+2-32],fe=b[C+3-32];b[C+0+96]=In(V,X,b[C-1+96]),b[C+1+96]=b[C+0+64]=In(I,V,X),b[C+2+96]=b[C+1+64]=b[C+0+32]=In(Q,I,V),b[C+3+96]=b[C+2+64]=b[C+1+32]=b[C+0+0]=In(ee,Q,I),b[C+3+64]=b[C+2+32]=b[C+1+0]=In(ne,ee,Q),b[C+3+32]=b[C+2+0]=In(re,ne,ee),b[C+3+0]=In(fe,re,ne)}function Lx(b,C){var I=b[C+1-32],V=b[C+2-32],X=b[C+3-32],Q=b[C+4-32],ee=b[C+5-32],ne=b[C+6-32],re=b[C+7-32];b[C+0+0]=In(b[C+0-32],I,V),b[C+1+0]=b[C+0+32]=In(I,V,X),b[C+2+0]=b[C+1+32]=b[C+0+64]=In(V,X,Q),b[C+3+0]=b[C+2+32]=b[C+1+64]=b[C+0+96]=In(X,Q,ee),b[C+3+32]=b[C+2+64]=b[C+1+96]=In(Q,ee,ne),b[C+3+64]=b[C+2+96]=In(ee,ne,re),b[C+3+96]=In(ne,re,re)}function Am(b,C){var I=b[C-1+0],V=b[C-1+32],X=b[C-1+64],Q=b[C-1-32],ee=b[C+0-32],ne=b[C+1-32],re=b[C+2-32],fe=b[C+3-32];b[C+0+0]=b[C+1+64]=Q+ee+1>>1,b[C+1+0]=b[C+2+64]=ee+ne+1>>1,b[C+2+0]=b[C+3+64]=ne+re+1>>1,b[C+3+0]=re+fe+1>>1,b[C+0+96]=In(X,V,I),b[C+0+64]=In(V,I,Q),b[C+0+32]=b[C+1+96]=In(I,Q,ee),b[C+1+32]=b[C+2+96]=In(Q,ee,ne),b[C+2+32]=b[C+3+96]=In(ee,ne,re),b[C+3+32]=In(ne,re,fe)}function zg(b,C){var I=b[C+0-32],V=b[C+1-32],X=b[C+2-32],Q=b[C+3-32],ee=b[C+4-32],ne=b[C+5-32],re=b[C+6-32],fe=b[C+7-32];b[C+0+0]=I+V+1>>1,b[C+1+0]=b[C+0+64]=V+X+1>>1,b[C+2+0]=b[C+1+64]=X+Q+1>>1,b[C+3+0]=b[C+2+64]=Q+ee+1>>1,b[C+0+32]=In(I,V,X),b[C+1+32]=b[C+0+96]=In(V,X,Q),b[C+2+32]=b[C+1+96]=In(X,Q,ee),b[C+3+32]=b[C+2+96]=In(Q,ee,ne),b[C+3+64]=In(ee,ne,re),b[C+3+96]=In(ne,re,fe)}function MM(b,C){var I=b[C-1+0],V=b[C-1+32],X=b[C-1+64],Q=b[C-1+96];b[C+0+0]=I+V+1>>1,b[C+2+0]=b[C+0+32]=V+X+1>>1,b[C+2+32]=b[C+0+64]=X+Q+1>>1,b[C+1+0]=In(I,V,X),b[C+3+0]=b[C+1+32]=In(V,X,Q),b[C+3+32]=b[C+1+64]=In(X,Q,Q),b[C+3+64]=b[C+2+64]=b[C+0+96]=b[C+1+96]=b[C+2+96]=b[C+3+96]=Q}function kM(b,C){var I=b[C-1+0],V=b[C-1+32],X=b[C-1+64],Q=b[C-1+96],ee=b[C-1-32],ne=b[C+0-32],re=b[C+1-32],fe=b[C+2-32];b[C+0+0]=b[C+2+32]=I+ee+1>>1,b[C+0+32]=b[C+2+64]=V+I+1>>1,b[C+0+64]=b[C+2+96]=X+V+1>>1,b[C+0+96]=Q+X+1>>1,b[C+3+0]=In(ne,re,fe),b[C+2+0]=In(ee,ne,re),b[C+1+0]=b[C+3+32]=In(I,ee,ne),b[C+1+32]=b[C+3+64]=In(V,I,ee),b[C+1+64]=b[C+3+96]=In(X,V,I),b[C+1+96]=In(Q,X,V)}function EM(b,C){var I;for(I=0;8>I;++I)r(b,C+32*I,b,C-32,8)}function Rg(b,C){var I;for(I=0;8>I;++I)i(b,C,b[C-1],8),C+=32}function gd(b,C,I){var V;for(V=0;8>V;++V)i(C,I+32*V,b,8)}function Ff(b,C){var I,V=8;for(I=0;8>I;++I)V+=b[C+I-32]+b[C-1+32*I];gd(V>>4,b,C)}function AM(b,C){var I,V=4;for(I=0;8>I;++I)V+=b[C+I-32];gd(V>>3,b,C)}function vd(b,C){var I,V=4;for(I=0;8>I;++I)V+=b[C-1+32*I];gd(V>>3,b,C)}function Fg(b,C){gd(128,b,C)}function Tm(b,C,I){var V=b[C-I],X=b[C+0],Q=3*(X-V)+DM[1020+b[C-2*I]-b[C+I]],ee=Gx[112+(Q+4>>3)];b[C-I]=Is[255+V+Gx[112+(Q+3>>3)]],b[C+0]=Is[255+X-ee]}function Ix(b,C,I,V){var X=b[C+0],Q=b[C+I];return yl[255+b[C-2*I]-b[C-I]]>V||yl[255+Q-X]>V}function Dx(b,C,I,V){return 4*yl[255+b[C-I]-b[C+0]]+yl[255+b[C-2*I]-b[C+I]]<=V}function zx(b,C,I,V,X){var Q=b[C-3*I],ee=b[C-2*I],ne=b[C-I],re=b[C+0],fe=b[C+I],Se=b[C+2*I],Be=b[C+3*I];return 4*yl[255+ne-re]+yl[255+ee-fe]>V?0:yl[255+b[C-4*I]-Q]<=X&&yl[255+Q-ee]<=X&&yl[255+ee-ne]<=X&&yl[255+Be-Se]<=X&&yl[255+Se-fe]<=X&&yl[255+fe-re]<=X}function Rx(b,C,I,V){var X=2*V+1;for(V=0;16>V;++V)Dx(b,C+V,I,X)&&Tm(b,C+V,I)}function Dc(b,C,I,V){var X=2*V+1;for(V=0;16>V;++V)Dx(b,C+V*I,1,X)&&Tm(b,C+V*I,1)}function Iu(b,C,I,V){var X;for(X=3;0<X;--X)Rx(b,C+=4*I,I,V)}function TM(b,C,I,V){var X;for(X=3;0<X;--X)Dc(b,C+=4,I,V)}function Bf(b,C,I,V,X,Q,ee,ne){for(Q=2*Q+1;0<X--;){if(zx(b,C,I,Q,ee))if(Ix(b,C,I,ne))Tm(b,C,I);else{var re=b,fe=C,Se=I,Be=re[fe-2*Se],je=re[fe-Se],Pe=re[fe+0],rt=re[fe+Se],Ue=re[fe+2*Se],Ce=27*(et=DM[1020+3*(Pe-je)+DM[1020+Be-rt]])+63>>7,Ee=18*et+63>>7,et=9*et+63>>7;re[fe-3*Se]=Is[255+re[fe-3*Se]+et],re[fe-2*Se]=Is[255+Be+Ee],re[fe-Se]=Is[255+je+Ce],re[fe+0]=Is[255+Pe-Ce],re[fe+Se]=Is[255+rt-Ee],re[fe+2*Se]=Is[255+Ue-et]}C+=V}}function ec(b,C,I,V,X,Q,ee,ne){for(Q=2*Q+1;0<X--;){if(zx(b,C,I,Q,ee))if(Ix(b,C,I,ne))Tm(b,C,I);else{var re=b,fe=C,Se=I,Be=re[fe-Se],je=re[fe+0],Pe=re[fe+Se],rt=Gx[112+((Ue=3*(je-Be))+4>>3)],Ue=Gx[112+(Ue+3>>3)],Ce=rt+1>>1;re[fe-2*Se]=Is[255+re[fe-2*Se]+Ce],re[fe-Se]=Is[255+Be+Ue],re[fe+0]=Is[255+je-rt],re[fe+Se]=Is[255+Pe-Ce]}C+=V}}function Bg(b,C,I,V,X,Q){Bf(b,C,I,1,16,V,X,Q)}function yd(b,C,I,V,X,Q){Bf(b,C,1,I,16,V,X,Q)}function PM(b,C,I,V,X,Q){var ee;for(ee=3;0<ee;--ee)ec(b,C+=4*I,I,1,16,V,X,Q)}function Pm(b,C,I,V,X,Q){var ee;for(ee=3;0<ee;--ee)ec(b,C+=4,1,I,16,V,X,Q)}function NM(b,C,I,V,X,Q,ee,ne){Bf(b,C,X,1,8,Q,ee,ne),Bf(I,V,X,1,8,Q,ee,ne)}function jg(b,C,I,V,X,Q,ee,ne){Bf(b,C,1,X,8,Q,ee,ne),Bf(I,V,1,X,8,Q,ee,ne)}function Vg(b,C,I,V,X,Q,ee,ne){ec(b,C+4*X,X,1,8,Q,ee,ne),ec(I,V+4*X,X,1,8,Q,ee,ne)}function Fx(b,C,I,V,X,Q,ee,ne){ec(b,C+4,1,X,8,Q,ee,ne),ec(I,V+4,1,X,8,Q,ee,ne)}function Nm(){this.ba=new to,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hg(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wg(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bx(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new L,this.yc=new A}function LM(){this.xb=this.a=0,this.l=new yt,this.ca=new to,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bx,this.ab=0,this.gc=a(4,Wg),this.Oc=0}function Lm(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new yt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xd(b,C,I,V,X,Q,ee){for(b=b==null?0:b[C+0],C=0;C<ee;++C)X[Q+C]=b+I[V+C]&255,b=X[Q+C]}function qg(b,C,I,V,X,Q,ee){var ne;if(b==null)xd(null,null,I,V,X,Q,ee);else for(ne=0;ne<ee;++ne)X[Q+ne]=b[C+ne]+I[V+ne]&255}function jf(b,C,I,V,X,Q,ee){if(b==null)xd(null,null,I,V,X,Q,ee);else{var ne,re=b[C+0],fe=re,Se=re;for(ne=0;ne<ee;++ne)fe=Se+(re=b[C+ne])-fe,Se=I[V+ne]+(-256&fe?0>fe?0:255:fe)&255,fe=re,X[Q+ne]=Se}}function Ug(b,C,I,V){var X=C.width,Q=C.o;if(t(b!=null&&C!=null),0>I||0>=V||I+V>Q)return null;if(!b.Cc){if(b.ga==null){var ee;if(b.ga=new Lm,(ee=b.ga==null)||(ee=C.width*C.o,t(b.Gb.length==0),b.Gb=o(ee),b.Uc=0,b.Gb==null?ee=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,ee=1),ee=!ee),!ee){ee=b.ga;var ne=b.Fa,re=b.P,fe=b.qc,Se=b.mb,Be=b.nb,je=re+1,Pe=fe-1,rt=ee.l;if(t(ne!=null&&Se!=null&&C!=null),Gf[0]=null,Gf[1]=xd,Gf[2]=qg,Gf[3]=jf,ee.ca=Se,ee.tb=Be,ee.c=C.width,ee.i=C.height,t(0<ee.c&&0<ee.i),1>=fe)C=0;else if(ee.$a=ne[re+0]>>0&3,ee.Z=ne[re+0]>>2&3,ee.Lc=ne[re+0]>>4&3,re=ne[re+0]>>6&3,0>ee.$a||1<ee.$a||4<=ee.Z||1<ee.Lc||re)C=0;else if(rt.put=sr,rt.ac=Pi,rt.bc=po,rt.ma=ee,rt.width=C.width,rt.height=C.height,rt.Da=C.Da,rt.v=C.v,rt.va=C.va,rt.j=C.j,rt.o=C.o,ee.$a)e:{t(ee.$a==1),C=$a();t:for(;;){if(C==null){C=0;break e}if(t(ee!=null),ee.mc=C,C.c=ee.c,C.i=ee.i,C.l=ee.l,C.l.ma=ee,C.l.width=ee.c,C.l.height=ee.i,C.a=0,j(C.m,ne,je,Pe),!fl(ee.c,ee.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&Ga(C.s)?(ee.ic=1,ne=C.c*C.i,C.Ta=null,C.Ua=0,C.V=o(ne),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(ee.ic=0,C=Nu(C,ee.c)),!C))break t;C=1;break e}ee.mc=null,C=0}else C=Pe>=ee.c*ee.i;ee=!C}if(ee)return null;b.ga.Lc!=1?b.Ga=0:V=Q-I}t(b.ga!=null),t(I+V<=Q);e:{if(C=(ne=b.ga).c,Q=ne.l.o,ne.$a==0){if(je=b.rc,Pe=b.Vc,rt=b.Fa,re=b.P+1+I*C,fe=b.mb,Se=b.nb+I*C,t(re<=b.P+b.qc),ne.Z!=0)for(t(Gf[ne.Z]!=null),ee=0;ee<V;++ee)Gf[ne.Z](je,Pe,rt,re,fe,Se,C),je=fe,Pe=Se,Se+=C,re+=C;else for(ee=0;ee<V;++ee)r(fe,Se,rt,re,C),je=fe,Pe=Se,Se+=C,re+=C;b.rc=je,b.Vc=Pe}else{if(t(ne.mc!=null),C=I+V,t((ee=ne.mc)!=null),t(C<=ee.i),ee.C>=C)C=1;else if(ne.ic||Ie(),ne.ic){ne=ee.V,je=ee.Ba,Pe=ee.c;var Ue=ee.i,Ce=(rt=1,re=ee.$/Pe,fe=ee.$%Pe,Se=ee.m,Be=ee.s,ee.$),Ee=Pe*Ue,et=Pe*C,st=Be.wc,tt=Ce<et?si(Be,fe,re):null;t(Ce<=Ee),t(C<=Ue),t(Ga(Be));t:for(;;){for(;!Se.h&&Ce<et;){if(fe&st||(tt=si(Be,fe,re)),t(tt!=null),ae(Se),256>(Ue=ro(tt.G[0],tt.H[0],Se)))ne[je+Ce]=Ue,++Ce,++fe>=Pe&&(fe=0,++re<=C&&!(re%16)&&Ps(ee,re));else{if(!(280>Ue)){rt=0;break t}Ue=no(Ue-256,Se);var Bt,kt=ro(tt.G[4],tt.H[4],Se);if(ae(Se),!(Ce>=(kt=Hi(Pe,kt=no(kt,Se)))&&Ee-Ce>=Ue)){rt=0;break t}for(Bt=0;Bt<Ue;++Bt)ne[je+Ce+Bt]=ne[je+Ce+Bt-kt];for(Ce+=Ue,fe+=Ue;fe>=Pe;)fe-=Pe,++re<=C&&!(re%16)&&Ps(ee,re);Ce<et&&fe&st&&(tt=si(Be,fe,re))}t(Se.h==J(Se))}Ps(ee,re>C?C:re);break t}!rt||Se.h&&Ce<Ee?(rt=0,ee.a=Se.h?5:3):ee.$=Ce,C=rt}else C=Ns(ee,ee.V,ee.Ba,ee.c,ee.i,C,zf);if(!C){V=0;break e}}I+V>=Q&&(b.Cc=1),V=1}if(!V)return null;if(b.Cc&&((V=b.ga)!=null&&(V.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+I*X}function T(b,C,I,V,X,Q){for(;0<X--;){var ee,ne=b,re=C+(I?1:0),fe=b,Se=C+(I?0:3);for(ee=0;ee<V;++ee){var Be=fe[Se+4*ee];Be!=255&&(Be*=32897,ne[re+4*ee+0]=ne[re+4*ee+0]*Be>>23,ne[re+4*ee+1]=ne[re+4*ee+1]*Be>>23,ne[re+4*ee+2]=ne[re+4*ee+2]*Be>>23)}C+=Q}}function K(b,C,I,V,X){for(;0<V--;){var Q;for(Q=0;Q<I;++Q){var ee=b[C+2*Q+0],ne=15&(fe=b[C+2*Q+1]),re=4369*ne,fe=(240&fe|fe>>4)*re>>16;b[C+2*Q+0]=(240&ee|ee>>4)*re>>16&240|(15&ee|ee<<4)*re>>16>>4&15,b[C+2*Q+1]=240&fe|ne}C+=X}}function de(b,C,I,V,X,Q,ee,ne){var re,fe,Se=255;for(fe=0;fe<X;++fe){for(re=0;re<V;++re){var Be=b[C+re];Q[ee+4*re]=Be,Se&=Be}C+=I,ee+=ne}return Se!=255}function be(b,C,I,V,X){var Q;for(Q=0;Q<X;++Q)I[V+Q]=b[C+Q]>>8}function Ie(){vl=T,Jr=K,Qr=de,Di=be}function Ye(b,C,I){O[b]=function(V,X,Q,ee,ne,re,fe,Se,Be,je,Pe,rt,Ue,Ce,Ee,et,st){var tt,Bt=st-1>>1,kt=ne[re+0]|fe[Se+0]<<16,gn=Be[je+0]|Pe[rt+0]<<16;t(V!=null);var Pt=3*kt+gn+131074>>2;for(C(V[X+0],255&Pt,Pt>>16,Ue,Ce),Q!=null&&(Pt=3*gn+kt+131074>>2,C(Q[ee+0],255&Pt,Pt>>16,Ee,et)),tt=1;tt<=Bt;++tt){var wr=ne[re+tt]|fe[Se+tt]<<16,Dr=Be[je+tt]|Pe[rt+tt]<<16,dr=kt+wr+gn+Dr+524296,Qn=dr+2*(wr+gn)>>3;Pt=Qn+kt>>1,kt=(dr=dr+2*(kt+Dr)>>3)+wr>>1,C(V[X+2*tt-1],255&Pt,Pt>>16,Ue,Ce+(2*tt-1)*I),C(V[X+2*tt-0],255&kt,kt>>16,Ue,Ce+(2*tt-0)*I),Q!=null&&(Pt=dr+gn>>1,kt=Qn+Dr>>1,C(Q[ee+2*tt-1],255&Pt,Pt>>16,Ee,et+(2*tt-1)*I),C(Q[ee+2*tt+0],255&kt,kt>>16,Ee,et+(2*tt+0)*I)),kt=wr,gn=Dr}1&st||(Pt=3*kt+gn+131074>>2,C(V[X+st-1],255&Pt,Pt>>16,Ue,Ce+(st-1)*I),Q!=null&&(Pt=3*gn+kt+131074>>2,C(Q[ee+st-1],255&Pt,Pt>>16,Ee,et+(st-1)*I)))}}function dt(){xl[$x]=uee,xl[Yx]=HL,xl[RL]=fee,xl[Xx]=WL,xl[Kx]=qL,xl[zM]=UL,xl[FL]=pee,xl[RM]=HL,xl[FM]=WL,xl[Zx]=qL,xl[BM]=UL}function zt(b){return b&~dee?0>b?0:255:b>>GL}function pn(b,C){return zt((19077*b>>8)+(26149*C>>8)-14234)}function jn(b,C,I){return zt((19077*b>>8)-(6419*C>>8)-(13320*I>>8)+8708)}function Rn(b,C){return zt((19077*b>>8)+(33050*C>>8)-17685)}function lr(b,C,I,V,X){V[X+0]=pn(b,I),V[X+1]=jn(b,C,I),V[X+2]=Rn(b,C)}function mi(b,C,I,V,X){V[X+0]=Rn(b,C),V[X+1]=jn(b,C,I),V[X+2]=pn(b,I)}function bi(b,C,I,V,X){var Q=jn(b,C,I);C=Q<<3&224|Rn(b,C)>>3,V[X+0]=248&pn(b,I)|Q>>5,V[X+1]=C}function qi(b,C,I,V,X){var Q=240&Rn(b,C)|15;V[X+0]=240&pn(b,I)|jn(b,C,I)>>4,V[X+1]=Q}function na(b,C,I,V,X){V[X+0]=255,lr(b,C,I,V,X+1)}function mo(b,C,I,V,X){mi(b,C,I,V,X),V[X+3]=255}function tc(b,C,I,V,X){lr(b,C,I,V,X),V[X+3]=255}function Ls(b,C){return 0>b?0:b>C?C:b}function zc(b,C,I){O[b]=function(V,X,Q,ee,ne,re,fe,Se,Be){for(var je=Se+(-2&Be)*I;Se!=je;)C(V[X+0],Q[ee+0],ne[re+0],fe,Se),C(V[X+1],Q[ee+0],ne[re+0],fe,Se+I),X+=2,++ee,++re,Se+=2*I;1&Be&&C(V[X+0],Q[ee+0],ne[re+0],fe,Se)}}function jx(b,C,I){return I==0?b==0?C==0?6:5:C==0?4:0:I}function Gg(b,C,I,V,X){switch(b>>>30){case 3:Ru(C,I,V,X,0);break;case 2:Ii(C,I,V,X);break;case 1:Oa(C,I,V,X)}}function $g(b,C){var I,V,X=C.M,Q=C.Nb,ee=b.oc,ne=b.pc+40,re=b.oc,fe=b.pc+584,Se=b.oc,Be=b.pc+600;for(I=0;16>I;++I)ee[ne+32*I-1]=129;for(I=0;8>I;++I)re[fe+32*I-1]=129,Se[Be+32*I-1]=129;for(0<X?ee[ne-1-32]=re[fe-1-32]=Se[Be-1-32]=129:(i(ee,ne-32-1,127,21),i(re,fe-32-1,127,9),i(Se,Be-32-1,127,9)),V=0;V<b.za;++V){var je=C.ya[C.aa+V];if(0<V){for(I=-1;16>I;++I)r(ee,ne+32*I-4,ee,ne+32*I+12,4);for(I=-1;8>I;++I)r(re,fe+32*I-4,re,fe+32*I+4,4),r(Se,Be+32*I-4,Se,Be+32*I+4,4)}var Pe=b.Gd,rt=b.Hd+V,Ue=je.ad,Ce=je.Hc;if(0<X&&(r(ee,ne-32,Pe[rt].y,0,16),r(re,fe-32,Pe[rt].f,0,8),r(Se,Be-32,Pe[rt].ea,0,8)),je.Za){var Ee=ee,et=ne-32+16;for(0<X&&(V>=b.za-1?i(Ee,et,Pe[rt].y[15],4):r(Ee,et,Pe[rt+1].y,0,4)),I=0;4>I;I++)Ee[et+128+I]=Ee[et+256+I]=Ee[et+384+I]=Ee[et+0+I];for(I=0;16>I;++I,Ce<<=2)Ee=ee,et=ne+YL[I],nc[je.Ob[I]](Ee,et),Gg(Ce,Ue,16*+I,Ee,et)}else if(Ee=jx(V,X,je.Ob[0]),Uf[Ee](ee,ne),Ce!=0)for(I=0;16>I;++I,Ce<<=2)Gg(Ce,Ue,16*+I,ee,ne+YL[I]);for(I=je.Gc,Ee=jx(V,X,je.Dd),Bu[Ee](re,fe),Bu[Ee](Se,Be),Ce=Ue,Ee=re,et=fe,255&(je=I>>0)&&(170&je?Jg(Ce,256,Ee,et):ml(Ce,256,Ee,et)),je=Se,Ce=Be,255&(I>>=8)&&(170&I?Jg(Ue,320,je,Ce):ml(Ue,320,je,Ce)),X<b.Ub-1&&(r(Pe[rt].y,0,ee,ne+480,16),r(Pe[rt].f,0,re,fe+224,8),r(Pe[rt].ea,0,Se,Be+224,8)),I=8*Q*b.B,Pe=b.sa,rt=b.ta+16*V+16*Q*b.R,Ue=b.qa,je=b.ra+8*V+I,Ce=b.Ha,Ee=b.Ia+8*V+I,I=0;16>I;++I)r(Pe,rt+I*b.R,ee,ne+32*I,16);for(I=0;8>I;++I)r(Ue,je+I*b.B,re,fe+32*I,8),r(Ce,Ee+I*b.B,Se,Be+32*I,8)}}function Im(b,C,I,V,X,Q,ee,ne,re){var fe=[0],Se=[0],Be=0,je=re!=null?re.kd:0,Pe=re??new Hg;if(b==null||12>I)return 7;Pe.data=b,Pe.w=C,Pe.ha=I,C=[C],I=[I],Pe.gb=[Pe.gb];e:{var rt=C,Ue=I,Ce=Pe.gb;if(t(b!=null),t(Ue!=null),t(Ce!=null),Ce[0]=0,12<=Ue[0]&&!n(b,rt[0],"RIFF")){if(n(b,rt[0]+8,"WEBP")){Ce=3;break e}var Ee=Ve(b,rt[0]+4);if(12>Ee||4294967286<Ee){Ce=3;break e}if(je&&Ee>Ue[0]-8){Ce=7;break e}Ce[0]=Ee,rt[0]+=12,Ue[0]-=12}Ce=0}if(Ce!=0)return Ce;for(Ee=0<Pe.gb[0],I=I[0];;){e:{var et=b;Ue=C,Ce=I;var st=fe,tt=Se,Bt=rt=[0];if((Pt=Be=[Be])[0]=0,8>Ce[0])Ce=7;else{if(!n(et,Ue[0],"VP8X")){if(Ve(et,Ue[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var kt=Ve(et,Ue[0]+8),gn=1+De(et,Ue[0]+12);if(2147483648<=gn*(et=1+De(et,Ue[0]+15))){Ce=3;break e}Bt!=null&&(Bt[0]=kt),st!=null&&(st[0]=gn),tt!=null&&(tt[0]=et),Ue[0]+=18,Ce[0]-=18,Pt[0]=1}Ce=0}}if(Be=Be[0],rt=rt[0],Ce!=0)return Ce;if(Ue=!!(2&rt),!Ee&&Be)return 3;if(Q!=null&&(Q[0]=!!(16&rt)),ee!=null&&(ee[0]=Ue),ne!=null&&(ne[0]=0),ee=fe[0],rt=Se[0],Be&&Ue&&re==null){Ce=0;break}if(4>I){Ce=7;break}if(Ee&&Be||!Ee&&!Be&&!n(b,C[0],"ALPH")){I=[I],Pe.na=[Pe.na],Pe.P=[Pe.P],Pe.Sa=[Pe.Sa];e:{kt=b,Ce=C,Ee=I;var Pt=Pe.gb;st=Pe.na,tt=Pe.P,Bt=Pe.Sa,gn=22,t(kt!=null),t(Ee!=null),et=Ce[0];var wr=Ee[0];for(t(st!=null),t(Bt!=null),st[0]=null,tt[0]=null,Bt[0]=0;;){if(Ce[0]=et,Ee[0]=wr,8>wr){Ce=7;break e}var Dr=Ve(kt,et+4);if(4294967286<Dr){Ce=3;break e}var dr=8+Dr+1&-2;if(gn+=dr,0<Pt&&gn>Pt){Ce=3;break e}if(!n(kt,et,"VP8 ")||!n(kt,et,"VP8L")){Ce=0;break e}if(wr[0]<dr){Ce=7;break e}n(kt,et,"ALPH")||(st[0]=kt,tt[0]=et+8,Bt[0]=Dr),et+=dr,wr-=dr}}if(I=I[0],Pe.na=Pe.na[0],Pe.P=Pe.P[0],Pe.Sa=Pe.Sa[0],Ce!=0)break}I=[I],Pe.Ja=[Pe.Ja],Pe.xa=[Pe.xa];e:if(Pt=b,Ce=C,Ee=I,st=Pe.gb[0],tt=Pe.Ja,Bt=Pe.xa,kt=Ce[0],et=!n(Pt,kt,"VP8 "),gn=!n(Pt,kt,"VP8L"),t(Pt!=null),t(Ee!=null),t(tt!=null),t(Bt!=null),8>Ee[0])Ce=7;else{if(et||gn){if(Pt=Ve(Pt,kt+4),12<=st&&Pt>st-12){Ce=3;break e}if(je&&Pt>Ee[0]-8){Ce=7;break e}tt[0]=Pt,Ce[0]+=8,Ee[0]-=8,Bt[0]=gn}else Bt[0]=5<=Ee[0]&&Pt[kt+0]==47&&!(Pt[kt+4]>>5),tt[0]=Ee[0];Ce=0}if(I=I[0],Pe.Ja=Pe.Ja[0],Pe.xa=Pe.xa[0],C=C[0],Ce!=0)break;if(4294967286<Pe.Ja)return 3;if(ne==null||Ue||(ne[0]=Pe.xa?2:1),ee=[ee],rt=[rt],Pe.xa){if(5>I){Ce=7;break}ne=ee,je=rt,Ue=Q,b==null||5>I?b=0:5<=I&&b[C+0]==47&&!(b[C+4]>>5)?(Ee=[0],Pt=[0],st=[0],j(tt=new R,b,C,I),fn(tt,Ee,Pt,st)?(ne!=null&&(ne[0]=Ee[0]),je!=null&&(je[0]=Pt[0]),Ue!=null&&(Ue[0]=st[0]),b=1):b=0):b=0}else{if(10>I){Ce=7;break}ne=rt,b==null||10>I||!At(b,C+3,I-3)?b=0:(je=b[C+0]|b[C+1]<<8|b[C+2]<<16,Ue=16383&(b[C+7]<<8|b[C+6]),b=16383&(b[C+9]<<8|b[C+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=Pe.Ja||!Ue||!b?b=0:(ee&&(ee[0]=Ue),ne&&(ne[0]=b),b=1))}if(!b||(ee=ee[0],rt=rt[0],Be&&(fe[0]!=ee||Se[0]!=rt)))return 3;re!=null&&(re[0]=Pe,re.offset=C-re.w,t(4294967286>C-re.w),t(re.offset==re.ha-I));break}return Ce==0||Ce==7&&Be&&re==null?(Q!=null&&(Q[0]|=Pe.na!=null&&0<Pe.na.length),V!=null&&(V[0]=ee),X!=null&&(X[0]=rt),0):Ce}function Yg(b,C,I){var V=C.width,X=C.height,Q=0,ee=0,ne=V,re=X;if(C.Da=b!=null&&0<b.Da,C.Da&&(ne=b.cd,re=b.bd,Q=b.v,ee=b.j,11>I||(Q&=-2,ee&=-2),0>Q||0>ee||0>=ne||0>=re||Q+ne>V||ee+re>X))return 0;if(C.v=Q,C.j=ee,C.va=Q+ne,C.o=ee+re,C.U=ne,C.T=re,C.da=b!=null&&0<b.da,C.da){if(!ft(ne,re,I=[b.ib],Q=[b.hb]))return 0;C.ib=I[0],C.hb=Q[0]}return C.ob=b!=null&&b.ob,C.Kb=b==null||!b.Sd,C.da&&(C.ob=C.ib<3*V/4&&C.hb<3*X/4,C.Kb=0),1}function Xg(b){if(b==null)return 2;if(11>b.S){var C=b.f.RGBA;C.fb+=(b.height-1)*C.A,C.A=-C.A}else C=b.f.kb,b=b.height,C.O+=(b-1)*C.fa,C.fa=-C.fa,C.N+=(b-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(b-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(b-1)*C.lb,C.lb=-C.lb);return 0}function Dm(b,C,I,V){if(V==null||0>=b||0>=C)return 2;if(I!=null){if(I.Da){var X=I.cd,Q=I.bd,ee=-2&I.v,ne=-2&I.j;if(0>ee||0>ne||0>=X||0>=Q||ee+X>b||ne+Q>C)return 2;b=X,C=Q}if(I.da){if(!ft(b,C,X=[I.ib],Q=[I.hb]))return 2;b=X[0],C=Q[0]}}V.width=b,V.height=C;e:{var re=V.width,fe=V.height;if(b=V.S,0>=re||0>=fe||!(b>=$x&&13>b))b=2;else{if(0>=V.Rd&&V.sd==null){ee=Q=X=C=0;var Se=(ne=re*XL[b])*fe;if(11>b||(Q=(fe+1)/2*(C=(re+1)/2),b==12&&(ee=(X=re)*fe)),(fe=o(Se+2*Q+ee))==null){b=1;break e}V.sd=fe,11>b?((re=V.f.RGBA).eb=fe,re.fb=0,re.A=ne,re.size=Se):((re=V.f.kb).y=fe,re.O=0,re.fa=ne,re.Fd=Se,re.f=fe,re.N=0+Se,re.Ab=C,re.Cd=Q,re.ea=fe,re.W=0+Se+Q,re.Db=C,re.Ed=Q,b==12&&(re.F=fe,re.J=0+Se+2*Q),re.Tc=ee,re.lb=X)}if(C=1,X=V.S,Q=V.width,ee=V.height,X>=$x&&13>X)if(11>X)b=V.f.RGBA,C&=(ne=Math.abs(b.A))*(ee-1)+Q<=b.size,C&=ne>=Q*XL[X],C&=b.eb!=null;else{b=V.f.kb,ne=(Q+1)/2,Se=(ee+1)/2,re=Math.abs(b.fa),fe=Math.abs(b.Ab);var Be=Math.abs(b.Db),je=Math.abs(b.lb),Pe=je*(ee-1)+Q;C&=re*(ee-1)+Q<=b.Fd,C&=fe*(Se-1)+ne<=b.Cd,C=(C&=Be*(Se-1)+ne<=b.Ed)&re>=Q&fe>=ne&Be>=ne,C&=b.y!=null,C&=b.f!=null,C&=b.ea!=null,X==12&&(C&=je>=Q,C&=Pe<=b.Tc,C&=b.F!=null)}else C=0;b=C?0:2}}return b!=0||I!=null&&I.fd&&(b=Xg(V)),b}var Fo=64,zm=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rm=24,Fm=32,Kg=8,Ya=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(b){return b},O.Predictor2=function(b,C,I){return C[I+0]},O.Predictor3=function(b,C,I){return C[I+1]},O.Predictor4=function(b,C,I){return C[I-1]},O.Predictor5=function(b,C,I){return lt(lt(b,C[I+1]),C[I+0])},O.Predictor6=function(b,C,I){return lt(b,C[I-1])},O.Predictor7=function(b,C,I){return lt(b,C[I+0])},O.Predictor8=function(b,C,I){return lt(C[I-1],C[I+0])},O.Predictor9=function(b,C,I){return lt(C[I+0],C[I+1])},O.Predictor10=function(b,C,I){return lt(lt(b,C[I-1]),lt(C[I+0],C[I+1]))},O.Predictor11=function(b,C,I){var V=C[I+0];return 0>=Qt(V>>24&255,b>>24&255,(C=C[I-1])>>24&255)+Qt(V>>16&255,b>>16&255,C>>16&255)+Qt(V>>8&255,b>>8&255,C>>8&255)+Qt(255&V,255&b,255&C)?V:b},O.Predictor12=function(b,C,I){var V=C[I+0];return(Et((b>>24&255)+(V>>24&255)-((C=C[I-1])>>24&255))<<24|Et((b>>16&255)+(V>>16&255)-(C>>16&255))<<16|Et((b>>8&255)+(V>>8&255)-(C>>8&255))<<8|Et((255&b)+(255&V)-(255&C)))>>>0},O.Predictor13=function(b,C,I){var V=C[I-1];return(Rt((b=lt(b,C[I+0]))>>24&255,V>>24&255)<<24|Rt(b>>16&255,V>>16&255)<<16|Rt(b>>8&255,V>>8&255)<<8|Rt(b>>0&255,V>>0&255))>>>0};var IM=O.PredictorAdd0;O.PredictorAdd1=It,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var Zg=O.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Vx,hl=O.ColorIndexInverseTransform,Bm=O.MapARGB,Hx=O.VP8LColorIndexInverseTransformAlpha,Wx=O.MapAlpha,Vf=O.VP8LPredictorsAdd=[];Vf.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var bd,Xa,Ca,Hf,Du,zu,jm,Ru,Ii,Jg,Oa,ml,Vm,qx,Qg,_d,wd,Wf,Sd,Hm,Cd,qf,ev,gl,vl,Jr,Qr,Di,ao=o(511),Fu=o(2041),tv=o(225),Wm=o(767),Ux=0,DM=Fu,Gx=tv,Is=Wm,yl=ao,$x=0,Yx=1,RL=2,Xx=3,Kx=4,zM=5,FL=6,RM=7,FM=8,Zx=9,BM=10,KQ=[2,3,7],ZQ=[3,3,11],BL=[280,256,256,256,40],JQ=[0,1,1,1,0],QQ=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eee=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tee=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nee=8,jM=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],VM=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nv=null,ree=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],iee=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],jL=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oee=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],aee=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],see=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lee=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Uf=[],nc=[],Bu=[],cee=1,VL=2,Gf=[],xl=[];Ye("UpsampleRgbLinePair",lr,3),Ye("UpsampleBgrLinePair",mi,3),Ye("UpsampleRgbaLinePair",tc,4),Ye("UpsampleBgraLinePair",mo,4),Ye("UpsampleArgbLinePair",na,4),Ye("UpsampleRgba4444LinePair",qi,2),Ye("UpsampleRgb565LinePair",bi,2);var uee=O.UpsampleRgbLinePair,fee=O.UpsampleBgrLinePair,HL=O.UpsampleRgbaLinePair,WL=O.UpsampleBgraLinePair,qL=O.UpsampleArgbLinePair,UL=O.UpsampleRgba4444LinePair,pee=O.UpsampleRgb565LinePair,Jx=16,Qx=1<<Jx-1,rv=-227,HM=482,GL=6,dee=(256<<GL)-1,$L=0,hee=o(256),mee=o(256),gee=o(256),vee=o(256),yee=o(HM-rv),xee=o(HM-rv);zc("YuvToRgbRow",lr,3),zc("YuvToBgrRow",mi,3),zc("YuvToRgbaRow",tc,4),zc("YuvToBgraRow",mo,4),zc("YuvToArgbRow",na,4),zc("YuvToRgba4444Row",qi,2),zc("YuvToRgb565Row",bi,2);var YL=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],eb=[0,2,8],bee=[8,7,6,4,4,2,2,2,1,1,1,1],_ee=1;this.WebPDecodeRGBA=function(b,C,I,V,X){var Q=Yx,ee=new Nm,ne=new to;ee.ba=ne,ne.S=Q,ne.width=[ne.width],ne.height=[ne.height];var re=ne.width,fe=ne.height,Se=new Ti;if(Se==null||b==null)var Be=2;else t(Se!=null),Be=Im(b,C,I,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Be!=0?re=0:(re!=null&&(re[0]=Se.width[0]),fe!=null&&(fe[0]=Se.height[0]),re=1),re){ne.width=ne.width[0],ne.height=ne.height[0],V!=null&&(V[0]=ne.width),X!=null&&(X[0]=ne.height);e:{if(V=new yt,(X=new Hg).data=b,X.w=C,X.ha=I,X.kd=1,C=[0],t(X!=null),((b=Im(X.data,X.w,X.ha,null,null,null,C,null,X))==0||b==7)&&C[0]&&(b=4),(C=b)==0){if(t(ee!=null),V.data=X.data,V.w=X.w+X.offset,V.ha=X.ha-X.offset,V.put=sr,V.ac=Pi,V.bc=po,V.ma=ee,X.xa){if((b=$a())==null){ee=1;break e}if(function(je,Pe){var rt=[0],Ue=[0],Ce=[0];t:for(;;){if(je==null)return 0;if(Pe==null)return je.a=2,0;if(je.l=Pe,je.a=0,j(je.m,Pe.data,Pe.w,Pe.ha),!fn(je.m,rt,Ue,Ce)){je.a=3;break t}if(je.xb=VL,Pe.width=rt[0],Pe.height=Ue[0],!fl(rt[0],Ue[0],1,je,null))break t;return 1}return t(je.a!=0),0}(b,V)){if(V=(C=Dm(V.width,V.height,ee.Oa,ee.ba))==0){t:{V=b;n:for(;;){if(V==null){V=0;break t}if(t(V.s.yc!=null),t(V.s.Ya!=null),t(0<V.s.Wb),t((I=V.l)!=null),t((X=I.ma)!=null),V.xb!=0){if(V.ca=X.ba,V.tb=X.tb,t(V.ca!=null),!Yg(X.Oa,I,Xx)){V.a=2;break n}if(!Nu(V,I.width)||I.da)break n;if((I.da||Cn(V.ca.S))&&Ie(),11>V.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),V.ca.f.kb.F!=null&&Ie()),V.Pb&&0<V.s.ua&&V.s.vb.X==null&&!Ze(V.s.vb,V.s.Wa.Xa)){V.a=1;break n}V.xb=0}if(!Ns(V,V.V,V.Ba,V.c,V.i,I.o,cl))break n;X.Dc=V.Ma,V=1;break t}t(V.a!=0),V=0}V=!V}V&&(C=b.a)}else C=b.a}else{if((b=new Ft)==null){ee=1;break e}if(b.Fa=X.na,b.P=X.P,b.qc=X.Sa,Ot(b,V)){if((C=Dm(V.width,V.height,ee.Oa,ee.ba))==0){if(b.Aa=0,I=ee.Oa,t((X=b)!=null),I!=null){if(0<(re=0>(re=I.Md)?0:100<re?255:255*re/100)){for(fe=Se=0;4>fe;++fe)12>(Be=X.pb[fe]).lc&&(Be.ia=re*bee[0>Be.lc?0:Be.lc]>>3),Se|=Be.ia;Se&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=I.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}Nt(b,V)||(C=b.a)}}else C=b.a}C==0&&ee.Oa!=null&&ee.Oa.fd&&(C=Xg(ee.ba))}ee=C}Q=ee!=0?null:11>Q?ne.f.RGBA.eb:ne.f.kb.y}else Q=null;return Q};var XL=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,E){for(var P="",k=0;k<4;k++)P+=String.fromCharCode(O[E++]);return P}function u(O,E){return(O[E+0]<<0|O[E+1]<<8|O[E+2]<<16)>>>0}function f(O,E){return(O[E+0]<<0|O[E+1]<<8|O[E+2]<<16|O[E+3]<<24)>>>0}new l;var p=[0],d=[0],h=[],m=new l,g=e,v=function(O,E){var P={},k=0,A=!1,N=0,L=0;if(P.frames=[],!function(q,J,te,ae){for(var le=0;le<ae;le++)if(q[J+le]!=te.charCodeAt(le))return!0;return!1}(O,E,"RIFF",4)){var z,B;for(f(O,E+=4),E+=8;E<O.length;){var H=c(O,E),j=f(O,E+=4);E+=4;var W=j+(1&j);switch(H){case"VP8 ":case"VP8L":P.frames[k]===void 0&&(P.frames[k]={}),(R=P.frames[k]).src_off=A?L:E-8,R.src_size=N+j+8,k++,A&&(A=!1,N=0,L=0);break;case"VP8X":(R=P.header={}).feature_flags=O[E];var Z=E+4;R.canvas_width=1+u(O,Z),Z+=3,R.canvas_height=1+u(O,Z),Z+=3;break;case"ALPH":A=!0,N=W+8,L=E-8;break;case"ANIM":(R=P.header).bgcolor=f(O,E),Z=E+4,R.loop_count=(z=O)[(B=Z)+0]<<0|z[B+1]<<8,Z+=2;break;case"ANMF":var ie,R;(R=P.frames[k]={}).offset_x=2*u(O,E),E+=3,R.offset_y=2*u(O,E),E+=3,R.width=1+u(O,E),E+=3,R.height=1+u(O,E),E+=3,R.duration=u(O,E),E+=3,ie=O[E++],R.dispose=1&ie,R.blend=ie>>1&1}H!="ANMF"&&(E+=W)}return P}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,x=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,p=[y.canvas_height],d=[y.canvas_width];for(var _=0;_<x.length&&x[_].blend!=0;_++);}var w=x[0],S=m.WebPDecodeRGBA(g,w.src_off,w.src_size,d,p);w.rgba=S,w.imgwidth=d[0],w.imgheight=p[0];for(var M=0;M<d[0]*p[0]*4;M++)h[M]=S[M];return this.width=d,this.height=p,this.data=h,this}(function(e){var t=function(){return typeof lM=="function"},n=function(p,d,h,m){var g=4,v=a;switch(m){case e.image_compression.FAST:g=1,v=o;break;case e.image_compression.MEDIUM:g=6,v=s;break;case e.image_compression.SLOW:g=9,v=l}p=r(p,d,h,v);var y=lM(p,{level:g});return e.__addimage__.arrayBufferToBinaryString(y)},r=function(p,d,h,m){for(var g,v,y,x=p.length/d,_=new Uint8Array(p.length+x),w=u(),S=0;S<x;S+=1){if(y=S*d,g=p.subarray(y,y+d),m)_.set(m(g,h,v),y+S);else{for(var M,O=w.length,E=[];M<O;M+=1)E[M]=w[M](g,h,v);var P=f(E.concat());_.set(E[P],y+S)}v=g}return _},i=function(p){var d=Array.apply([],p);return d.unshift(0),d},o=function(p,d){var h,m=[],g=p.length;m[0]=1;for(var v=0;v<g;v+=1)h=p[v-d]||0,m[v+1]=p[v]-h+256&255;return m},a=function(p,d,h){var m,g=[],v=p.length;g[0]=2;for(var y=0;y<v;y+=1)m=h&&h[y]||0,g[y+1]=p[y]-m+256&255;return g},s=function(p,d,h){var m,g,v=[],y=p.length;v[0]=3;for(var x=0;x<y;x+=1)m=p[x-d]||0,g=h&&h[x]||0,v[x+1]=p[x]+256-(m+g>>>1)&255;return v},l=function(p,d,h){var m,g,v,y,x=[],_=p.length;x[0]=4;for(var w=0;w<_;w+=1)m=p[w-d]||0,g=h&&h[w]||0,v=h&&h[w-d]||0,y=c(m,g,v),x[w+1]=p[w]-y+256&255;return x},c=function(p,d,h){if(p===d&&d===h)return p;var m=Math.abs(d-h),g=Math.abs(p-h),v=Math.abs(p+d-h-h);return m<=g&&m<=v?p:g<=v?d:h},u=function(){return[i,o,a,s,l]},f=function(p){var d=p.map(function(h){return h.reduce(function(m,g){return m+Math.abs(g)},0)});return d.indexOf(Math.min.apply(null,d))};e.processPNG=function(p,d,h,m){var g,v,y,x,_,w,S,M,O,E,P,k,A,N,L,z=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(y=new zMe(p)).imgData,v=y.bits,g=y.colorSpace,_=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){O=(M=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,P=new Uint8Array(O*y.colors),E=new Uint8Array(O);var H,j=y.pixelBitlength-y.bits;for(N=0,L=0;N<O;N++){for(A=M[N],H=0;H<j;)P[L++]=A>>>H&255,H+=y.bits;E[N]=A>>>H&255}}if(y.bits===16){O=(M=new Uint32Array(y.decodePixels().buffer)).length,P=new Uint8Array(O*(32/y.pixelBitlength)*y.colors),E=new Uint8Array(O*(32/y.pixelBitlength)),k=y.colors>1,N=0,L=0;for(var W=0;N<O;)A=M[N++],P[L++]=A>>>0&255,k&&(P[L++]=A>>>16&255,A=M[N++],P[L++]=A>>>0&255),E[W++]=A>>>16&255;v=8}m!==e.image_compression.NONE&&t()?(p=n(P,y.width*y.colors,y.colors,m),S=n(E,y.width,1,m)):(p=P,S=E,z=void 0)}if(y.colorType===3&&(g=this.color_spaces.INDEXED,w=y.palette,y.transparency.indexed)){var Z=y.transparency.indexed,ie=0;for(N=0,O=Z.length;N<O;++N)ie+=Z[N];if((ie/=255)===O-1&&Z.indexOf(0)!==-1)x=[Z.indexOf(0)];else if(ie!==O){for(M=y.decodePixels(),E=new Uint8Array(M.length),N=0,O=M.length;N<O;N++)E[N]=Z[M[N]];S=n(E,y.width,1)}}var R=function(q){var J;switch(q){case e.image_compression.FAST:J=11;break;case e.image_compression.MEDIUM:J=13;break;case e.image_compression.SLOW:J=14;break;default:J=12}return J}(m);return z===this.decode.FLATE_DECODE&&(B="/Predictor "+R+" "),B+="/Colors "+_+" /BitsPerComponent "+v+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(S&&this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),{alias:h,data:p,index:d,filter:z,decodeParameters:B,transparency:x,palette:w,sMask:S,predictor:R,width:y.width,height:y.height,bitsPerComponent:v,colorSpace:g}}}})(xn.API),function(e){e.processGIF89A=function(t,n,r,i){var o=new RMe(t),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},u=new kL(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(xn.API),Tc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Tc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Kr.log("bit decode error:"+n)}},Tc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}n!==0&&(this.pos+=4-n)}},Tc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Tc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Tc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,c=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},Tc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=i*this.width*4+4*o;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},Tc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Tc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},Tc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var o=new Tc(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new kL(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(xn.API),pQ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var o=new pQ(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new kL(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(xn.API),xn.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=r[c],f=r[c+1],p=r[c+2],d=r[c+3];o[s++]=u,o[s++]=f,o[s++]=p,a[l++]=d}var h=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:h,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},xn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mg=xn.API,pM=Mg.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,f=t.doKerning!==!1,p=0,d=e.length,h=0,m=s[0]||l,g=[];for(n=0;n<d;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(p=f&&Hr(c[r])==="object"&&!isNaN(parseInt(c[r][h],10))?c[r][h]/u:0,g.push((s[r]||m)/l+p)),h=r;return g},lQ=Mg.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Mg.processArabic&&(e=Mg.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:pM.apply(this,arguments).reduce(function(o,a){return o+a},0)},cQ=function(e,t,n,r){for(var i=[],o=0,a=e.length,s=0;o!==a&&s+t[o]<n;)s+=t[o],o++;i.push(e.slice(0,o));var l=o;for(s=0;o!==a;)s+t[o]>r&&(i.push(e.slice(l,o)),s=0,l=o),s+=t[o],o++;return l!==o&&i.push(e.slice(l,o)),i},uQ=function(e,t,n){n||(n={});var r,i,o,a,s,l,c,u=[],f=[u],p=n.textIndent||0,d=0,h=0,m=e.split(" "),g=pM.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?m[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),y=[];m.map(function(_){(_=_.split(/\s*\n/)).length>1?y=y.concat(_.map(function(w,S){return(S&&w.length?`
`:"")+w})):y.push(_[0])}),m=y,l=lQ.apply(this,[v,n])}for(o=0,a=m.length;o<a;o++){var x=0;if(r=m[o],l&&r[0]==`
`&&(r=r.substr(1),x=1),p+d+(h=(i=pM.apply(this,[r,n])).reduce(function(_,w){return _+w},0))>t||x){if(h>t){for(s=cQ.apply(this,[r,i,t-(p+d),t]),u.push(s.shift()),u=[s.pop()];s.length;)f.push([s.shift()]);h=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(_,w){return _+w},0)}else u=[r];f.push(u),p=h+l,d=g}else u.push(r),p+=d+h,d=g}return c=l?function(_,w){return(w?v:"")+_.join(" ")}:function(_){return _.join(" ")},f.map(c)},Mg.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=r.length;s<l;s++)c=c.concat(uQ.apply(this,[r[s],a,o]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var o=function(f){return"0x"+parseInt(f,10).toString(16)},a=e.__fontmetrics__.compress=function(f){var p,d,h,m,g=["{"];for(var v in f){if(p=f[v],isNaN(parseInt(v,10))?d="'"+v+"'":(v=parseInt(v,10),d=(d=o(v).slice(2)).slice(0,-1)+r[d.slice(-1)]),typeof p=="number")p<0?(h=o(p).slice(3),m="-"):(h=o(p).slice(2),m=""),h=m+h.slice(0,-1)+r[h.slice(-1)];else{if(Hr(p)!=="object")throw new Error("Don't know what to do with value type "+Hr(p)+".");h=a(p)}g.push(d+h)}return g.push("}"),g.join("")},s=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,d,h,m,g={},v=1,y=g,x=[],_="",w="",S=f.length-1,M=1;M<S;M+=1)(m=f[M])=="'"?p?(h=p.join(""),p=void 0):p=[]:p?p.push(m):m=="{"?(x.push([y,h]),y={},h=void 0):m=="}"?((d=x.pop())[0][d[1]]=y,h=void 0,y=d[0]):m=="-"?v=-1:h===void 0?n.hasOwnProperty(m)?(_+=n[m],h=parseInt(_,16)*v,v=1,_=""):_+=m:n.hasOwnProperty(m)?(w+=n[m],y[h]=parseInt(w,16)*v,v=1,h=void 0,w=""):w+=m;return g},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var p=f.font,d=u.Unicode[p.postScriptName];d&&(p.metadata.Unicode={},p.metadata.Unicode.widths=d.widths,p.metadata.Unicode.kerning=d.kerning);var h=c.Unicode[p.postScriptName];h&&(p.metadata.Unicode.encoding=h,p.encoding=h.codePages[0])}])}(xn.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(Tx(s)),a.metadata=e.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(xn),function(e){function t(){return(wn.canvg?Promise.resolve(wn.canvg):import("./chunk-IJVAX6AA.js")).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}xn.API.addSvgAsImage=function(n,r,i,o,a,s,l,c){if(isNaN(r)||isNaN(i))throw Kr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw Kr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=o,u.height=a;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return t().then(function(h){return h.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(p)}).then(function(){d.addImage(u.toDataURL("image/jpeg",1),r,i,o,a,l,c)})}}(),xn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},xn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,u=0,f=0;function p(h,m){var g,v=!1;for(g=0;g<h.length;g+=1)h[g]===m&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var d=s.length;for(f=0;f<d;f+=1)n[s[f]].value=n[s[f]].defaultValue,n[s[f]].explicitSet=!1}if(Hr(e)==="object"){for(i in e)if(o=e[i],p(s,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&p(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(u=0;u<o[c].length;u+=1)typeof o[c][u]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var h,m=[];for(h in n)n[h].explicitSet===!0&&(n[h].type==="name"?m.push("/"+h+" /"+n[h].value):m.push("/"+h+" "+n[h].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+a.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+a+s+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(xn.API),function(e){var t=e.API,n=t.pdfEscape16=function(o,a){for(var s,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],f=0,p=o.length;f<p;++f){if(s=a.metadata.characterToGlyph(o.charCodeAt(f)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=o.charCodeAt(f),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(c[4-s.length],s)}return u.join("")},r=function(o){var a,s,l,c,u,f,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,p=(s=Object.keys(o).sort(function(d,h){return d-h})).length;f<p;f++)a=s[f],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(c=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var f=s.metadata.Unicode.widths,p=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),d="",h=0;h<p.length;h++)d+=String.fromCharCode(p[h]);var m=c();u({data:d,addLength1:!0,objectId:m}),l("endobj");var g=c();u({data:r(s.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Eg(s.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var y=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Eg(s.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+g+" 0 R"),l("/BaseFont /"+Eg(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+y+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var f=s.metadata.rawData,p="",d=0;d<f.length;d++)p+=String.fromCharCode(f[d]);var h=c();u({data:p,addLength1:!0,objectId:h}),l("endobj");var m=c();u({data:r(s.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var g=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+h+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+Eg(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var v=0;v<s.metadata.hmtx.widths.length;v++)s.metadata.hmtx.widths[v]=parseInt(s.metadata.hmtx.widths[v]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Eg(s.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]);var i=function(o){var a,s=o.text||"",l=o.x,c=o.y,u=o.options||{},f=o.mutex||{},p=f.pdfEscape,d=f.activeFontKey,h=f.fonts,m=d,g="",v=0,y="",x=h[m].encoding;if(h[m].encoding!=="Identity-H")return{text:s,x:l,y:c,options:u,mutex:f};for(y=s,m=d,Array.isArray(s)&&(y=s[0]),v=0;v<y.length;v+=1)h[m].metadata.hasOwnProperty("cmap")&&(a=h[m].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),a||y[v].charCodeAt(0)<256&&h[m].metadata.hasOwnProperty("Unicode")?g+=y[v]:g+="";var _="";return parseInt(m.slice(1))<14||x==="WinAnsiEncoding"?_=p(g,m).split("").map(function(w){return w.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(_=n(g,h[m])),f.isHex=!0,{text:_,x:l,y:c,options:u,mutex:f}};t.events.push(["postProcessText",function(o){var a=o.text||"",s=[],l={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?s.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):s.push(i(Object.assign({},l,{text:a[c]})).text);o.text=s}else o.text=i(Object.assign({},l,{text:a})).text}])}(xn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(xn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,o,a,s,l,c,u,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,x=0;this.__bidiEngine__={};var _=function(k){var A=k.charCodeAt(),N=A>>8,L=m[N];return L!==void 0?f[256*L+(255&A)]:N===252||N===253?"AL":v.test(N)?"L":N===8?"R":"N"},w=function(k){for(var A,N=0;N<k.length;N++){if((A=_(k.charAt(N)))==="L")return!1;if(A==="R")return!0}return!1},S=function(k,A,N,L){var z,B,H,j,W=A[L];switch(W){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(W="AN");break;case"AL":y=!0,W="R";break;case"WS":W="N";break;case"CS":L<1||L+1>=A.length||(z=N[L-1])!=="EN"&&z!=="AN"||(B=A[L+1])!=="EN"&&B!=="AN"?W="N":y&&(B="AN"),W=B===z?B:"N";break;case"ES":W=(z=L>0?N[L-1]:"B")==="EN"&&L+1<A.length&&A[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&N[L-1]==="EN"){W="EN";break}if(y){W="N";break}for(H=L+1,j=A.length;H<j&&A[H]==="ET";)H++;W=H<j&&A[H]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(j=A.length,H=L+1;H<j&&A[H]==="NSM";)H++;if(H<j){var Z=k[L],ie=Z>=1425&&Z<=2303||Z===64286;if(z=A[H],ie&&(z==="R"||z==="AL")){W="R";break}}}W=L<1||(z=A[L-1])==="B"?"N":N[L-1];break;case"B":y=!1,i=!0,W=x;break;case"S":o=!0,W="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":W="N"}return W},M=function(k,A,N){var L=k.split("");return N&&O(L,N,{hiLevel:x}),L.reverse(),A&&A.reverse(),L.join("")},O=function(k,A,N){var L,z,B,H,j,W=-1,Z=k.length,ie=0,R=[],q=x?d:p,J=[];for(y=!1,i=!1,o=!1,z=0;z<Z;z++)J[z]=_(k[z]);for(B=0;B<Z;B++){if(j=ie,R[B]=S(k,J,R,B),L=240&(ie=q[j][h[R[B]]]),ie&=15,A[B]=H=q[ie][5],L>0)if(L===16){for(z=W;z<B;z++)A[z]=1;W=-1}else W=-1;if(q[ie][6])W===-1&&(W=B);else if(W>-1){for(z=W;z<B;z++)A[z]=H;W=-1}J[B]==="B"&&(A[B]=0),N.hiLevel|=H}o&&function(te,ae,le){for(var ue=0;ue<le;ue++)if(te[ue]==="S"){ae[ue]=x;for(var ye=ue-1;ye>=0&&te[ye]==="WS";ye--)ae[ye]=x}}(J,A,Z)},E=function(k,A,N,L,z){if(!(z.hiLevel<k)){if(k===1&&x===1&&!i)return A.reverse(),void(N&&N.reverse());for(var B,H,j,W,Z=A.length,ie=0;ie<Z;){if(L[ie]>=k){for(j=ie+1;j<Z&&L[j]>=k;)j++;for(W=ie,H=j-1;W<H;W++,H--)B=A[W],A[W]=A[H],A[H]=B,N&&(B=N[W],N[W]=N[H],N[H]=B);ie=j}ie++}}},P=function(k,A,N){var L=k.split(""),z={hiLevel:x};return N||(N=[]),O(L,N,z),function(B,H,j){if(j.hiLevel!==0&&u)for(var W,Z=0;Z<B.length;Z++)H[Z]===1&&(W=g.indexOf(B[Z]))>=0&&(B[Z]=g[W+1])}(L,N,z),E(2,L,A,N,z),E(1,L,A,N,z),L.join("")};return this.__bidiEngine__.doBidiReorder=function(k,A,N){if(function(z,B){if(B)for(var H=0;H<z.length;H++)B[H]=H;s===void 0&&(s=w(z)),c===void 0&&(c=w(z))}(k,A),a||!l||c)if(a&&l&&s^c)x=s?1:0,k=M(k,A,N);else if(!a&&l&&c)x=s?1:0,k=P(k,A,N),k=M(k,A);else if(!a||s||l||c){if(a&&!l&&s^c)k=M(k,A),s?(x=0,k=P(k,A,N)):(x=1,k=P(k,A,N),k=M(k,A));else if(a&&s&&!l&&c)x=1,k=P(k,A,N),k=M(k,A);else if(!a&&!l&&s^c){var L=u;s?(x=1,k=P(k,A,N),x=0,u=!1,k=P(k,A,N),u=L):(x=0,k=P(k,A,N),k=M(k,A),x=1,u=!1,k=P(k,A,N),u=L,k=M(k,A))}}else x=0,k=P(k,A,N);else x=s?1:0,k=P(k,A,N);return k},this.__bidiEngine__.setOptions=function(k){k&&(a=k.isInputVisual,l=k.isOutputVisual,s=k.isInputRtl,c=k.isOutputRtl,u=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),a=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(a=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?a.push([n.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):a.push([n.doBidiReorder(i[s])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(xn),xn.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new md(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new JMe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new FMe(this.contents),this.head=new jMe(this),this.name=new UMe(this),this.cmap=new CQ(this),this.toUnicode={},this.hhea=new VMe(this),this.maxp=new GMe(this),this.hmtx=new $Me(this),this.post=new WMe(this),this.os2=new HMe(this),this.loca=new ZMe(this),this.glyf=new YMe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,s,l,c;for(c=[],a=0,s=(l=this.bbox).length;a<s;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,o,a,s;for(a=0,o=0,s=(t=""+t).length;0<=s?o<s:o>s;o=0<=s?++o:--o)i=t.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Nc,md=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,o,a,s,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*a+256*s+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(this.writeByte(n));return o},e}(),FMe=function(){var e;function t(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,o,a,s,l,c,u,f,p,d,h,m;for(m in d=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(d)/l),a=Math.floor(f/l),u=16*d-f,(i=new md).writeInt(this.scalarType),i.writeShort(d),i.writeShort(f),i.writeShort(a),i.writeShort(u),o=16*d,c=i.pos+o,s=null,h=[],n)for(p=n[m],i.writeString(m),i.writeInt(e(p)),i.writeInt(c),i.writeInt(p.length),h=h.concat(p),m==="head"&&(s=c),c+=p.length;c%4;)h.push(0),c++;return i.write(h),r=2981146554-e(i.data),i.pos=s+8,i.writeUInt32(r),i.data},e=function(n){var r,i,o,a;for(n=OQ.call(n);n.length%4;)n.push(0);for(o=new md(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=o.readUInt32();return 4294967295&i},t}(),BMe={}.hasOwnProperty,Pu=function(e,t){for(var n in t)BMe.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Nc=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var jMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new md).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),dQ=function(){function e(t,n){var r,i,o,a,s,l,c,u,f,p,d,h,m,g,v,y,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(d=t.readUInt16(),p=d/2,t.pos+=6,o=function(){var _,w;for(w=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)w.push(t.readUInt16());return w}(),t.pos+=2,m=function(){var _,w;for(w=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)w.push(t.readUInt16());return w}(),c=function(){var _,w;for(w=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)w.push(t.readUInt16());return w}(),u=function(){var _,w;for(w=[],l=_=0;0<=p?_<p:_>p;l=0<=p?++_:--_)w.push(t.readUInt16());return w}(),i=(this.length-t.pos+this.offset)/2,s=function(){var _,w;for(w=[],l=_=0;0<=i?_<i:_>i;l=0<=i?++_:--_)w.push(t.readUInt16());return w}(),l=v=0,x=o.length;v<x;l=++v)for(g=o[l],r=y=h=m[l];h<=g?y<=g:y>=g;r=h<=g?++y:--y)u[l]===0?a=r+c[l]:(a=s[u[l]/2+(r-h)-(p-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}t.pos=f}return e.encode=function(t,n){var r,i,o,a,s,l,c,u,f,p,d,h,m,g,v,y,x,_,w,S,M,O,E,P,k,A,N,L,z,B,H,j,W,Z,ie,R,q,J,te,ae,le,ue,ye,Me,we,De;switch(L=new md,a=Object.keys(t).sort(function(Ve,Ze){return Ve-Ze}),n){case"macroman":for(m=0,g=function(){var Ve=[];for(h=0;h<256;++h)Ve.push(0);return Ve}(),y={0:0},o={},z=0,W=a.length;z<W;z++)y[ye=t[i=a[z]]]==null&&(y[ye]=++m),o[i]={old:t[i],new:y[t[i]]},g[i]=y[t[i]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(g),{charMap:o,subtable:L.data,maxGlyphID:m+1};case"unicode":for(A=[],f=[],x=0,y={},r={},v=c=null,B=0,Z=a.length;B<Z;B++)y[w=t[i=a[B]]]==null&&(y[w]=++x),r[i]={old:w,new:y[w]},s=y[w]-i,v!=null&&s===c||(v&&f.push(v),A.push(i),c=s),v=i;for(v&&f.push(v),f.push(65535),A.push(65535),P=2*(E=A.length),O=2*Math.pow(Math.log(E)/Math.LN2,2),p=Math.log(O/2)/Math.LN2,M=2*E-O,l=[],S=[],d=[],h=H=0,ie=A.length;H<ie;h=++H){if(k=A[h],u=f[h],k===65535){l.push(0),S.push(0);break}if(k-(N=r[k].new)>=32768)for(l.push(0),S.push(2*(d.length+E-h)),i=j=k;k<=u?j<=u:j>=u;i=k<=u?++j:--j)d.push(r[i].new);else l.push(N-k),S.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*E+2*d.length),L.writeUInt16(0),L.writeUInt16(P),L.writeUInt16(O),L.writeUInt16(p),L.writeUInt16(M),le=0,R=f.length;le<R;le++)i=f[le],L.writeUInt16(i);for(L.writeUInt16(0),ue=0,q=A.length;ue<q;ue++)i=A[ue],L.writeUInt16(i);for(Me=0,J=l.length;Me<J;Me++)s=l[Me],L.writeUInt16(s);for(we=0,te=S.length;we<te;we++)_=S[we],L.writeUInt16(_);for(De=0,ae=d.length;De<ae;De++)m=d[De],L.writeUInt16(m);return{charMap:r,subtable:L.data,maxGlyphID:x+1}}},e}(),CQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new dQ(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=dQ.encode(n,r),(o=new md).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},t}(),VMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),HMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),WMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var s,l,c;for(c=[],a=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;a=0<=l?++s:--s)c.push(n.readUInt32());return c}).call(this)}},t}(),qMe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},UMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,o,a,s,l,c,u,f,p,d;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},a=f=0,p=i.length;f<p;a=++f)o=i[a],n.pos=o.offset,u=n.readString(o.length),s=new qMe(u,o),c[d=o.nameID]==null&&(c[d]=[]),c[o.nameID].push(s);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),GMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),$Me=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,o,a,s,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,f;for(f=[],r=u=0;0<=o?u<o:u>o;r=0<=o?++u:--u)f.push(n.readInt16());return f}(),this.widths=(function(){var u,f,p,d;for(d=[],u=0,f=(p=this.metrics).length;u<f;u++)a=p[u],d.push(a.advance);return d}).call(this),i=this.widths[this.widths.length-1],c=[],r=s=0;0<=o?s<o:s>o;r=0<=o?++s:--s)c.push(this.widths.push(i));return c},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),OQ=[].slice,YMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,o,a,s,l,c,u,f,p;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(o=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,s=(l=new md(r.read(o))).readShort(),u=l.readShort(),p=l.readShort(),c=l.readShort(),f=l.readShort(),this.cache[n]=s===-1?new KMe(l,u,p,c,f):new XMe(l,s,u,p,c,f),this.cache[n]))},t.prototype.encode=function(n,r,i){var o,a,s,l,c;for(s=[],a=[],l=0,c=r.length;l<c;l++)o=n[r[l]],a.push(s.length),o&&(s=s.concat(o.encode(i)));return a.push(s.length),{table:s,offsets:a}},t}(),XMe=function(){function e(t,n,r,i,o,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),KMe=function(){function e(t,n,r,i,o){var a,s;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new md(OQ.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),ZMe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pu(t,Nc),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,a=0,s=0;s<i.length;++s)if(i[s]=o,a<r.length&&r[a]==s){++a,i[s]=o;var l=this.offsets[s],c=this.offsets[s+1]-l;c>0&&(o+=c)}for(var u=new Array(4*i.length),f=0;f<i.length;++f)u[4*f+3]=255&i[f],u[4*f+2]=(65280&i[f])>>8,u[4*f+1]=(16711680&i[f])>>16,u[4*f]=(4278190080&i[f])>>24;return u},t}(),JMe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)r=o[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,o,a,s,l;for(i={},a=0,s=t.length;a<s;a++)i[o=t[a]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))r=l[o],i[o]=r;return i},e.prototype.encode=function(t,n){var r,i,o,a,s,l,c,u,f,p,d,h,m,g,v;for(i in r=CQ.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),d={0:0},v=r.charMap)d[(l=v[i]).old]=l.new;for(h in p=r.maxGlyphID,a)h in d||(d[h]=p++);return u=function(y){var x,_;for(x in _={},y)_[y[x]]=x;return _}(d),f=Object.keys(u).sort(function(y,x){return y-x}),m=function(){var y,x,_;for(_=[],y=0,x=f.length;y<x;y++)s=f[y],_.push(u[s]);return _}(),o=this.font.glyf.encode(a,m,d),c=this.font.loca.encode(o.offsets,m),g={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e}();xn.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var s,l,c;for(c=[],s=0,l=n.length;s<l;s++)r=n[s],c.push(t.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+t.convert(a));return o.push(">>"),o.join(`
`)}return""+n},t}();var MQ=xn;function e6e(e,t){if(e&1){let n=pt();D(0,"div")(1,"button",6)(2,"span",7),Ct(),D(3,"svg",8),xe(4,"path",9),F()()(),Yn(),D(5,"button",10),Xe("click",function(){ze(n);let i=me(2),o=i.$implicit,a=i.index,s=me(2);return Re(s.addComment(o,a))}),D(6,"span",7),Ct(),D(7,"svg",8)(8,"g",11),xe(9,"path",12)(10,"path",13),F()()()()()}}function t6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div",5),ce(5),F(),Je(6,e6e,11,0,"ng-template",null,0,dn),F()()),e&2){let n=bn(7),r=me().$implicit;$(3),Wt("",r.label,":"),$(),oe("nzPopoverContent",n),$(),Wt(" ",r.value," ")}}function n6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function r6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function i6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function o6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function a6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function s6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function l6e(e,t){if(e&1){let n=pt();D(0,"label",15),Gt("ngModelChange",function(i){let o=ze(n).$implicit;return Ut(o.checked,i)||(o.checked=i),Re(i)}),ce(1),F()}if(e&2){let n=t.$implicit,r=me(2).$implicit;oe("disabled",!0),qt("ngModel",n.checked),oe("name",r.label),$(),Yt(n.label)}}function c6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F(),D(6,"div"),Je(7,l6e,2,4,"label",14),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value),$(2),oe("ngForOf",n.options)}}function u6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function f6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function p6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),ce(5),F()()()),e&2){let n=me().$implicit;$(3),Wt("",n.label,":"),$(2),Yt(n.value)}}function d6e(e,t){if(e&1){let n=pt();D(0,"div")(1,"div",16)(2,"button",17),Xe("click",function(){ze(n);let i=me(2).$implicit,o=me(2);return Re(o.openFile(i.value))}),xe(3,"span",18),ce(4," Open File "),F(),D(5,"button",19),Xe("click",function(){ze(n);let i=me(2).$implicit,o=me(2);return Re(o.downloadFile(i.value))}),xe(6,"span",20),ce(7," Download File "),F()()()}}function h6e(e,t){if(e&1){let n=pt();D(0,"span")(1,"button",21),Xe("click",function(){let i=ze(n).$implicit,o=me(5);return Re(o.downloadFile(i.id))}),xe(2,"span",20),ce(3),F()()}if(e&2){let n=t.$implicit;$(3),Wt(" Download ",n.metadata.extension," ")}}function m6e(e,t){if(e&1&&(D(0,"div"),Je(1,h6e,4,1,"span",2),F()),e&2){let n=me(2).$implicit;$(),oe("ngForOf",n.value)}}function g6e(e,t){if(e&1&&(D(0,"div")(1,"div",3)(2,"div",4),ce(3),F(),D(4,"div"),Je(5,d6e,8,0,"div",1)(6,m6e,2,1,"div",1),F()()()),e&2){let n=me().$implicit,r=me(2);$(3),Wt("",n.label,":"),$(2),oe("ngIf",r.isString(n.value)),$(),oe("ngIf",!r.isString(n.value))}}function v6e(e,t){if(e&1&&(D(0,"div"),Je(1,t6e,8,3,"div",1)(2,n6e,6,2,"div",1)(3,r6e,6,2,"div",1)(4,i6e,6,2,"div",1)(5,o6e,6,2,"div",1)(6,a6e,6,2,"div",1)(7,s6e,6,2,"div",1)(8,c6e,8,3,"div",1)(9,u6e,6,2,"div",1)(10,f6e,6,2,"div",1)(11,p6e,6,2,"div",1)(12,g6e,7,3,"div",1),F()),e&2){let n=t.$implicit;$(),oe("ngIf",n.type=="short-text"),$(),oe("ngIf",n.type=="long-text"),$(),oe("ngIf",n.type=="rich-text"),$(),oe("ngIf",n.type=="number"),$(),oe("ngIf",n.type=="date"),$(),oe("ngIf",n.type=="time"),$(),oe("ngIf",n.type=="date-time"),$(),oe("ngIf",n.type=="checkbox"),$(),oe("ngIf",n.type=="radio"),$(),oe("ngIf",n.type=="email"),$(),oe("ngIf",n.type=="select"),$(),oe("ngIf",n.type=="upload")}}function y6e(e,t){if(e&1&&(D(0,"div"),Je(1,v6e,13,12,"div",2),F()),e&2){let n=me();$(),oe("ngForOf",n.blocks)}}var bM=(()=>{let t=class t{constructor(r,i){this.sanitizer=r,this.cdnService=i,this.selectInputValue=new Ja,this.loadedForm=!1,this.subs=new ci,this.originalText="Hello, welcome to Angular!",this.parts=[],this.downloadFileLoader=!1,this.splitText(this.originalText,"Angular")}ngOnChanges(r){r.blocks?.currentValue&&(console.log("Original Blocks: ",this.blocks),this.blocks=this.blocks.flat(),console.log("Updated blocks: ",this.blocks),this.loadedForm=!0,this.splitText(this.originalText,"Angular"))}isString(r){return typeof r=="string"}splitText(r,i){let o=new RegExp(`(${i})`,"gi"),a=r.split(o);this.parts=a.map(s=>({text:s,isHighlighted:s.toLowerCase()===i.toLowerCase()}))}addComment(r,i){let o={block:r,index:i};this.selectInputValue.emit(o)}ngOnInit(){this.subs.add=this.cdnService.downloadResponse$.subscribe(r=>{this.onDownloadFile(r)}),this.subs.add=this.cdnService.openResponse$.subscribe(r=>{this.onOpenFile(r)})}openFile(r){this.downloadFileLoader=!0,this.fileName=r,this.cdnService.openFile(r)}onOpenFile(r){console.log(r);let i=new Blob([r.body],{type:r.body.type}),o=URL.createObjectURL(i);window.open(o,"_blank"),setTimeout(()=>{URL.revokeObjectURL(o)},5e3),this.downloadFileLoader=!1}onDownloadFile(r){console.log(r);let i=new Blob([r.body],{type:r.body.type}),o=r.headers.get("Content-Disposition"),a=this.fileName;if(o&&o.indexOf("attachment")!==-1){let c=/filename="([^"]*)"/.exec(o);c&&c[1]&&(a=c[1])}let s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.target="_blank",l.download=a,l.click(),setTimeout(()=>{URL.revokeObjectURL(s)},1e3),this.downloadFileLoader=!1}downloadFile(r){this.downloadFileLoader=!0,this.fileName=r,this.cdnService.downloadFile(r)}ngOnDestroy(){}};t.\u0275fac=function(i){return new(i||t)(ht(Qm),ht(Y1))},t.\u0275cmp=tn({type:t,selectors:[["app-form-view"]],inputs:{blocks:"blocks"},outputs:{selectInputValue:"selectInputValue"},features:[cv],decls:1,vars:1,consts:[["contentTemplate",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"authorise-form-label"],["nz-popover","","nzPopoverTrigger","click",1,"authorise-form-input",3,"nzPopoverContent"],["nzTooltipTitle","View Revision History","nzTooltipPlacement","top","nz-tooltip","","nz-button","",1,"authorise-editor-button"],["nz-icon",""],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","currentColor","fill-rule","evenodd","d","M5.079 5.069c3.795-3.79 9.965-3.75 13.783.069c3.82 3.82 3.86 9.993.064 13.788s-9.968 3.756-13.788-.064a9.81 9.81 0 0 1-2.798-8.28a.75.75 0 1 1 1.487.203a8.31 8.31 0 0 0 2.371 7.017c3.245 3.244 8.468 3.263 11.668.064c3.199-3.2 3.18-8.423-.064-11.668c-3.243-3.242-8.463-3.263-11.663-.068l.748.003a.75.75 0 1 1-.007 1.5l-2.546-.012a.75.75 0 0 1-.746-.747L3.575 4.33a.75.75 0 1 1 1.5-.008zm6.92 2.18a.75.75 0 0 1 .75.75v3.69l2.281 2.28a.75.75 0 1 1-1.06 1.061l-2.72-2.72V8a.75.75 0 0 1 .75-.75","clip-rule","evenodd"],["nzTooltipTitle","Comment Form Input","nzTooltipPlacement","top","nz-tooltip","","nz-button","",1,"authorise-editor-button",3,"click"],["fill","none"],["fill","currentColor","d","m13.087 21.388l.645.382zm.542-.916l-.646-.382zm-3.258 0l-.645.382zm.542.916l.646-.382zm-8.532-5.475l.693-.287zm5.409 3.078l-.013.75zm-2.703-.372l-.287.693zm16.532-2.706l.693.287zm-5.409 3.078l-.012-.75zm2.703-.372l.287.693zm.7-15.882l-.392.64zm1.65 1.65l.64-.391zM4.388 2.738l-.392-.64zm-1.651 1.65l-.64-.391zM9.403 19.21l.377-.649zm4.33 2.56l.541-.916l-1.29-.764l-.543.916zm-4.007-.916l.542.916l1.29-.764l-.541-.916zm2.715.152a.52.52 0 0 1-.882 0l-1.291.764c.773 1.307 2.69 1.307 3.464 0zM10.5 2.75h3v-1.5h-3zm10.75 7.75v1h1.5v-1zm-18.5 1v-1h-1.5v1zm-1.5 0c0 1.155 0 2.058.05 2.787c.05.735.153 1.347.388 1.913l1.386-.574c-.147-.352-.233-.782-.278-1.441c-.046-.666-.046-1.51-.046-2.685zm6.553 6.742c-1.256-.022-1.914-.102-2.43-.316L4.8 19.313c.805.334 1.721.408 2.977.43zM1.688 16.2A5.75 5.75 0 0 0 4.8 19.312l.574-1.386a4.25 4.25 0 0 1-2.3-2.3zm19.562-4.7c0 1.175 0 2.019-.046 2.685c-.045.659-.131 1.089-.277 1.441l1.385.574c.235-.566.338-1.178.389-1.913c.05-.729.049-1.632.049-2.787zm-5.027 8.241c1.256-.021 2.172-.095 2.977-.429l-.574-1.386c-.515.214-1.173.294-2.428.316zm4.704-4.115a4.25 4.25 0 0 1-2.3 2.3l.573 1.386a5.75 5.75 0 0 0 3.112-3.112zM13.5 2.75c1.651 0 2.837 0 3.762.089c.914.087 1.495.253 1.959.537l.783-1.279c-.739-.452-1.577-.654-2.6-.752c-1.012-.096-2.282-.095-3.904-.095zm9.25 7.75c0-1.622 0-2.891-.096-3.904c-.097-1.023-.299-1.862-.751-2.6l-1.28.783c.285.464.451 1.045.538 1.96c.088.924.089 2.11.089 3.761zm-3.53-7.124a4.25 4.25 0 0 1 1.404 1.403l1.279-.783a5.75 5.75 0 0 0-1.899-1.899zM10.5 1.25c-1.622 0-2.891 0-3.904.095c-1.023.098-1.862.3-2.6.752l.783 1.28c.464-.285 1.045-.451 1.96-.538c.924-.088 2.11-.089 3.761-.089zM2.75 10.5c0-1.651 0-2.837.089-3.762c.087-.914.253-1.495.537-1.959l-1.279-.783c-.452.738-.654 1.577-.752 2.6C1.25 7.61 1.25 8.878 1.25 10.5zm1.246-8.403a5.75 5.75 0 0 0-1.899 1.899l1.28.783a4.25 4.25 0 0 1 1.402-1.403zm7.02 17.993c-.202-.343-.38-.646-.554-.884a2.2 2.2 0 0 0-.682-.645l-.754 1.297c.047.028.112.078.224.232c.121.166.258.396.476.764zm-3.24-.349c.44.008.718.014.93.037c.198.022.275.054.32.08l.754-1.297a2.2 2.2 0 0 0-.909-.274c-.298-.033-.657-.038-1.069-.045zm6.498 1.113c.218-.367.355-.598.476-.764c.112-.154.177-.204.224-.232l-.754-1.297c-.29.17-.5.395-.682.645c-.173.238-.352.54-.555.884zm1.924-2.612c-.412.007-.771.012-1.069.045c-.311.035-.616.104-.909.274l.754 1.297c.045-.026.122-.058.32-.08c.212-.023.49-.03.93-.037z"],["stroke","currentColor","stroke-linecap","round","stroke-width","1.5","d","M8 9h8m-8 3.5h5.5"],["nz-checkbox","",3,"disabled","ngModel","name","ngModelChange",4,"ngFor","ngForOf"],["nz-checkbox","",3,"ngModelChange","disabled","ngModel","name"],[1,"d-flex","mb-3"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","export"],["nz-button","","nzType","primary",1,"ms-3",3,"click"],["nz-icon","","nzType","download"],["nz-button","","nzType","primary",3,"click"]],template:function(i,o){i&1&&Je(0,y6e,2,1,"div",1),i&2&&oe("ngIf",o.loadedForm)},dependencies:[Xi,Ki,Hc,Kn,Vc,Xn,ra,El,Lb,yo,is],styles:[".authorise-form-label[_ngcontent-%COMP%]{font-weight:600;text-transform:capitalize}.commented-section[_ngcontent-%COMP%]{background:#fff16159;color:#48420559;font-weight:500;padding:0 5px}.authorise-form-input[_ngcontent-%COMP%]{transition-duration:.5s}.authorise-form-input[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:600}.authorise-editor-button[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;cursor:default;font-size:inherit;line-height:1;min-height:2.3em;min-width:2.3em;text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap;color:#333;transition-duration:.5s}.authorise-editor-button[_ngcontent-%COMP%]:hover{background:#f0f0f0;cursor:pointer}"]});let e=t;return e})();var Ig=class{constructor(t,n,r,i){if(isNaN(t)||isNaN(n))throw new Error(`Point is invalid: (${t}, ${n})`);this.x=+t,this.y=+n,this.pressure=r||0,this.time=i||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}},DL=class e{constructor(t,n,r,i,o,a){this.startPoint=t,this.control2=n,this.control1=r,this.endPoint=i,this.startWidth=o,this.endWidth=a}static fromPoints(t,n){let r=this.calculateControlPoints(t[0],t[1],t[2]).c2,i=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new e(t[1],r,i,t[2],n.start,n.end)}static calculateControlPoints(t,n,r){let i=t.x-n.x,o=t.y-n.y,a=n.x-r.x,s=n.y-r.y,l={x:(t.x+n.x)/2,y:(t.y+n.y)/2},c={x:(n.x+r.x)/2,y:(n.y+r.y)/2},u=Math.sqrt(i*i+o*o),f=Math.sqrt(a*a+s*s),p=l.x-c.x,d=l.y-c.y,h=f/(u+f),m={x:c.x+p*h,y:c.y+d*h},g=n.x-m.x,v=n.y-m.y;return{c1:new Ig(l.x+g,l.y+v),c2:new Ig(c.x+g,c.y+v)}}length(){let n=0,r,i;for(let o=0;o<=10;o+=1){let a=o/10,s=this.point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this.point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){let c=s-r,u=l-i;n+=Math.sqrt(c*c+u*u)}r=s,i=l}return n}point(t,n,r,i,o){return n*(1-t)*(1-t)*(1-t)+3*r*(1-t)*(1-t)*t+3*i*(1-t)*t*t+o*t*t*t}},zL=class{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,n,r){this._et.addEventListener(t,n,r)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,n,r){this._et.removeEventListener(t,n,r)}};function x6e(e,t=250){let n=0,r=null,i,o,a,s=()=>{n=Date.now(),r=null,i=e.apply(o,a),r||(o=null,a=[])};return function(...c){let u=Date.now(),f=t-(u-n);return o=this,a=c,f<=0||f>t?(r&&(clearTimeout(r),r=null),n=u,i=e.apply(o,a),r||(o=null,a=[])):r||(r=window.setTimeout(s,f)),i}}var _M=class e extends zL{constructor(t,n={}){super(),this.canvas=t,this._handleMouseDown=r=>{r.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(r))},this._handleMouseMove=r=>{this._drawningStroke&&this._strokeMoveUpdate(r)},this._handleMouseUp=r=>{r.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(r))},this._handleTouchStart=r=>{if(r.cancelable&&r.preventDefault(),r.targetTouches.length===1){let i=r.changedTouches[0];this._strokeBegin(i)}},this._handleTouchMove=r=>{r.cancelable&&r.preventDefault();let i=r.targetTouches[0];this._strokeMoveUpdate(i)},this._handleTouchEnd=r=>{if(r.target===this.canvas){r.cancelable&&r.preventDefault();let o=r.changedTouches[0];this._strokeEnd(o)}},this._handlePointerStart=r=>{this._drawningStroke=!0,r.preventDefault(),this._strokeBegin(r)},this._handlePointerMove=r=>{this._drawningStroke&&(r.preventDefault(),this._strokeMoveUpdate(r))},this._handlePointerEnd=r=>{this._drawningStroke&&(r.preventDefault(),this._drawningStroke=!1,this._strokeEnd(r))},this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.dotSize=n.dotSize||0,this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?x6e(e.prototype._strokeUpdate,this.throttle):e.prototype._strokeUpdate,this._ctx=t.getContext("2d"),this.clear(),this.on()}clear(){let{_ctx:t,canvas:n}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,n={}){return new Promise((r,i)=>{let o=new Image,a=n.ratio||window.devicePixelRatio||1,s=n.width||this.canvas.width/a,l=n.height||this.canvas.height/a,c=n.xOffset||0,u=n.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,c,u,s,l),r()},o.onerror=f=>{i(f)},o.crossOrigin="anonymous",o.src=t,this._isEmpty=!1})}toDataURL(t="image/png",n){switch(t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,n)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:n=!0}={}){n&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight}}_strokeBegin(t){this.dispatchEvent(new CustomEvent("beginStroke",{detail:t}));let n=this._getPointGroupOptions(),r=Object.assign(Object.assign({},n),{points:[]});this._data.push(r),this._reset(n),this._strokeUpdate(t)}_strokeUpdate(t){if(this._data.length===0){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));let n=t.clientX,r=t.clientY,i=t.pressure!==void 0?t.pressure:t.force!==void 0?t.force:0,o=this._createPoint(n,r,i),a=this._data[this._data.length-1],s=a.points,l=s.length>0&&s[s.length-1],c=l?o.distanceTo(l)<=this.minDistance:!1,u=this._getPointGroupOptions(a);if(!l||!(l&&c)){let f=this._addPoint(o,u);l?f&&this._drawCurve(f,u):this._drawDot(o,u),s.push({time:o.time,x:o.x,y:o.y,pressure:o.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t){this._strokeUpdate(t),this.dispatchEvent(new CustomEvent("endStroke",{detail:t}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor}_createPoint(t,n,r){let i=this.canvas.getBoundingClientRect();return new Ig(t-i.left,n-i.top,r,new Date().getTime())}_addPoint(t,n){let{_lastPoints:r}=this;if(r.push(t),r.length>2){r.length===3&&r.unshift(r[0]);let i=this._calculateCurveWidths(r[1],r[2],n),o=DL.fromPoints(r,i);return r.shift(),o}return null}_calculateCurveWidths(t,n,r){let i=r.velocityFilterWeight*n.velocityFrom(t)+(1-r.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i,r),a={end:o,start:this._lastWidth};return this._lastVelocity=i,this._lastWidth=o,a}_strokeWidth(t,n){return Math.max(n.maxWidth/(t+1),n.minWidth)}_drawCurveSegment(t,n,r){let i=this._ctx;i.moveTo(t,n),i.arc(t,n,r,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,n){let r=this._ctx,i=t.endWidth-t.startWidth,o=Math.ceil(t.length())*2;r.beginPath(),r.fillStyle=n.penColor;for(let a=0;a<o;a+=1){let s=a/o,l=s*s,c=l*s,u=1-s,f=u*u,p=f*u,d=p*t.startPoint.x;d+=3*f*s*t.control1.x,d+=3*u*l*t.control2.x,d+=c*t.endPoint.x;let h=p*t.startPoint.y;h+=3*f*s*t.control1.y,h+=3*u*l*t.control2.y,h+=c*t.endPoint.y;let m=Math.min(t.startWidth+c*i,n.maxWidth);this._drawCurveSegment(d,h,m)}r.closePath(),r.fill()}_drawDot(t,n){let r=this._ctx,i=n.dotSize>0?n.dotSize:(n.minWidth+n.maxWidth)/2;r.beginPath(),this._drawCurveSegment(t.x,t.y,i),r.closePath(),r.fillStyle=n.penColor,r.fill()}_fromData(t,n,r){for(let i of t){let{points:o}=i,a=this._getPointGroupOptions(i);if(o.length>1)for(let s=0;s<o.length;s+=1){let l=o[s],c=new Ig(l.x,l.y,l.pressure,l.time);s===0&&this._reset(a);let u=this._addPoint(c,a);u&&n(u,a)}else this._reset(a),r(o[0],a)}}_toSVG(){let t=this._data,n=Math.max(window.devicePixelRatio||1,1),r=0,i=0,o=this.canvas.width/n,a=this.canvas.height/n,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width",this.canvas.width.toString()),s.setAttribute("height",this.canvas.height.toString()),this._fromData(t,(d,{penColor:h})=>{let m=document.createElement("path");if(!isNaN(d.control1.x)&&!isNaN(d.control1.y)&&!isNaN(d.control2.x)&&!isNaN(d.control2.y)){let g=`M ${d.startPoint.x.toFixed(3)},${d.startPoint.y.toFixed(3)} C ${d.control1.x.toFixed(3)},${d.control1.y.toFixed(3)} ${d.control2.x.toFixed(3)},${d.control2.y.toFixed(3)} ${d.endPoint.x.toFixed(3)},${d.endPoint.y.toFixed(3)}`;m.setAttribute("d",g),m.setAttribute("stroke-width",(d.endWidth*2.25).toFixed(3)),m.setAttribute("stroke",h),m.setAttribute("fill","none"),m.setAttribute("stroke-linecap","round"),s.appendChild(m)}},(d,{penColor:h,dotSize:m,minWidth:g,maxWidth:v})=>{let y=document.createElement("circle"),x=m>0?m:(g+v)/2;y.setAttribute("r",x.toString()),y.setAttribute("cx",d.x.toString()),y.setAttribute("cy",d.y.toString()),y.setAttribute("fill",h),s.appendChild(y)});let l="data:image/svg+xml;base64,",c=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="${r} ${i} ${o} ${a}" width="${o}" height="${a}">`,u=s.innerHTML;if(u===void 0){let d=document.createElement("dummy"),h=s.childNodes;d.innerHTML="";for(let m=0;m<h.length;m+=1)d.appendChild(h[m].cloneNode(!0));u=d.innerHTML}let p=c+u+"</svg>";return l+btoa(p)}};var EQ=(()=>{class e{constructor(n){this.elementRef=n,this.options=this.options||{},this.drawStart=new Ja,this.drawBeforeUpdate=new Ja,this.drawAfterUpdate=new Ja,this.drawEnd=new Ja}ngAfterContentInit(){let n=this.getCanvas();this.options.canvasHeight&&(n.height=this.options.canvasHeight),this.options.canvasWidth&&(n.width=this.options.canvasWidth),this.signaturePad=new _M(n,this.options),this.signaturePad.addEventListener("beginStroke",r=>this.beginStroke(r.detail)),this.signaturePad.addEventListener("beforeUpdateStroke",r=>this.beforeUpdateStroke(r.detail)),this.signaturePad.addEventListener("afterUpdateStroke",r=>this.afterUpdateStroke(r.detail)),this.signaturePad.addEventListener("endStroke",r=>this.endStroke(r.detail))}ngOnDestroy(){let n=this.getCanvas();n.width=0,n.height=0}redrawCanvas(){let n=this.getCanvas(),r=Math.max(window.devicePixelRatio||1,1);n.width=n.offsetWidth*r,n.height=n.offsetHeight*r,n.getContext("2d").scale(r,r),this.signaturePad.clear()}toData(){return this.signaturePad?this.signaturePad.toData():[]}fromData(n){this.signaturePad.fromData(n)}toDataURL(n,r){return this.signaturePad.toDataURL(n,r)}fromDataURL(n,r={}){!r.hasOwnProperty("height")&&this.options.canvasHeight&&(r.height=this.options.canvasHeight),!r.hasOwnProperty("width")&&this.options.canvasWidth&&(r.width=this.options.canvasWidth),this.signaturePad.fromDataURL(n,r)}clear(){this.signaturePad.clear()}isEmpty(){return this.signaturePad.isEmpty()}off(){this.signaturePad.off()}on(){this.signaturePad.on()}set(n,r){let i=this.getCanvas();switch(n){case"canvasHeight":i.height=r;break;case"canvasWidth":i.width=r;break;default:this.signaturePad[n]=r}}beginStroke(n){this.drawStart.emit(n)}beforeUpdateStroke(n){this.drawBeforeUpdate.emit(n)}afterUpdateStroke(n){this.drawAfterUpdate.emit(n)}endStroke(n){this.drawEnd.emit(n)}getSignaturePad(){return this.signaturePad}getCanvas(){return this.elementRef.nativeElement.querySelector("canvas")}}return e.\u0275fac=function(n){return new(n||e)(ht(JM))},e.\u0275cmp=tn({type:e,selectors:[["signature-pad"]],inputs:{options:"options"},outputs:{drawStart:"drawStart",drawBeforeUpdate:"drawBeforeUpdate",drawAfterUpdate:"drawAfterUpdate",drawEnd:"drawEnd"},decls:1,vars:0,consts:[[1,"signature-pad-canvas"]],template:function(n,r){n&1&&xe(0,"canvas",0)},styles:["[_nghost-%COMP%]{background:antiquewhite;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .signature-pad-canvas[_ngcontent-%COMP%]{border:1px solid gray}"]}),e})(),AQ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=qu({type:e}),e.\u0275inj=Wu({}),e})();var _6e=["signature"],TQ=(()=>{let t=class t{constructor(){this.signatureChanged=new Ja,this.signaturePadOptions={minWidth:2,canvasWidth:500,canvasHeight:300}}ngAfterViewInit(){this.signaturePad.set("minWidth",2),this.signaturePad.clear()}drawComplete(r){this.signatureChanged.emit(this.signaturePad.toDataURL())}drawStart(r){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-signature"]],viewQuery:function(i,o){if(i&1&&Qa(_6e,5),i&2){let a;es(a=ts())&&(o.signaturePad=a.first)}},outputs:{signatureChanged:"signatureChanged"},decls:2,vars:1,consts:[["signature",""],[1,"authorise-signature-pad",3,"drawStart","drawEnd","options"]],template:function(i,o){if(i&1){let a=pt();D(0,"signature-pad",1,0),Xe("drawStart",function(l){return ze(a),Re(o.drawStart(l))})("drawEnd",function(l){return ze(a),Re(o.drawComplete(l))}),F()}i&2&&oe("options",o.signaturePadOptions)},dependencies:[EQ]});let e=t;return e})();var S6e=["commentTemplate"],C6e=["collaboratorsTemplate"],O6e=["commentsTemplate"],M6e=["linkedDocumentsTemplate"],k6e=["activityDocumentsTemplate"],E6e=(e,t)=>({color:e,backgroundColor:t});function A6e(e,t){if(e&1){let n=pt();D(0,"div")(1,"div")(2,"button",45),Xe("click",function(){ze(n);let i=me();return Re(i.showModal("approve"))}),D(3,"span",27),Ct(),D(4,"svg",28)(5,"g",46),xe(6,"circle",47)(7,"path",48),F()()(),ce(8," Approve "),F(),Yn(),D(9,"button",45),Xe("click",function(){ze(n);let i=me();return Re(i.showModal("decline"))}),D(10,"span",27),Ct(),D(11,"svg",28)(12,"g",46),xe(13,"circle",47)(14,"path",49),F()()(),ce(15," Decline "),F(),Yn(),D(16,"button",45),Xe("click",function(){ze(n);let i=me();return Re(i.showModal("pause"))}),D(17,"span",27),Ct(),D(18,"svg",28)(19,"g",46),xe(20,"circle",47)(21,"path",50),F()()(),ce(22," Pause "),F()()()}if(e&2){let n=me();$(2),oe("disabled",!n.document.nextActioners.includes(n.user.email)),$(7),oe("disabled",!n.document.nextActioners.includes(n.user.email)),$(7),oe("disabled",!n.document.nextActioners.includes(n.user.email))}}function T6e(e,t){e&1&&(D(0,"div"),xe(1,"nz-skeleton",51),F()),e&2&&($(),oe("nzActive",!0))}function P6e(e,t){if(e&1){let n=pt();D(0,"div",59)(1,"textarea",60),Gt("ngModelChange",function(i){ze(n);let o=me(2);return Ut(o.commentText,i)||(o.commentText=i),Re(i)}),F(),D(2,"button",61),Xe("click",function(){ze(n);let i=me(2);return Re(i.saveComment())}),ce(3,"Save"),F()()}if(e&2){let n=me(2);$(),qt("ngModel",n.commentText)}}function N6e(e,t){if(e&1){let n=pt();D(0,"div",64)(1,"app-form-view",65),Xe("selectInputValue",function(i){ze(n);let o=me(3);return Re(o.logSelectedText(i))}),F()()}if(e&2){let n=me(3);$(),oe("blocks",n.document.form.blocks)}}function L6e(e,t){if(e&1&&(D(0,"div")(1,"div")(2,"div",57)(3,"h1"),ce(4),F()(),D(5,"div",57)(6,"p"),ce(7),F()(),D(8,"div",57),xe(9,"authorise-doc-status",62),F()(),xe(10,"hr"),Je(11,N6e,2,1,"div",63),F()),e&2){let n=me(2);$(4),Yt(n.document.template.title),$(3),Yt(n.document.template.description),$(2),oe("status",n.document.status),$(2),oe("ngIf",n.document&&!n.getDocumentLoader)}}function I6e(e,t){if(e&1&&(D(0,"div"),xe(1,"img",67)(2,"br"),ce(3),F()),e&2){let n=me().$implicit;$(),oe("src",n.signature,Xm),$(2),Wt(" ",n.actioner," ")}}function D6e(e,t){if(e&1&&(D(0,"div",37),Je(1,I6e,4,2,"div",35),F()),e&2){let n=t.$implicit;$(),oe("ngIf",n.signature)}}function z6e(e,t){if(e&1&&(D(0,"div"),Je(1,D6e,2,1,"div",66),F()),e&2){let n=me(2);$(),oe("ngForOf",n.document.actioners)}}function R6e(e,t){if(e&1&&(D(0,"div")(1,"div",52)(2,"div",53)(3,"div",54)(4,"div",55)(5,"div",56)(6,"div"),Je(7,P6e,4,1,"ng-template",null,10,dn)(9,L6e,12,4,"div",35),F(),D(10,"div")(11,"div",22),Je(12,z6e,2,1,"div",35),F()()()()(),D(13,"div"),xe(14,"hr"),D(15,"div",57)(16,"p",58),ce(17," This document was generated by AuthOrise \xA9 "),F()()()()()()),e&2){let n=me();$(9),oe("ngIf",!n.getDocumentLoader&&n.document),$(3),oe("ngIf",n.document)}}function F6e(e,t){e&1&&xe(0,"span",76)}function B6e(e,t){if(e&1&&Je(0,F6e,1,0,"span",75),e&2){let n=me().$implicit;oe("ngIf",n.signature)}}function j6e(e,t){e&1&&xe(0,"span",77)}function V6e(e,t){if(e&1&&(D(0,"div",69)(1,"div",70)(2,"div")(3,"nz-badge",71),xe(4,"nz-avatar",72),F(),Je(5,B6e,1,1,"ng-template",null,11,dn)(7,j6e,1,0,"ng-template",null,12,dn),F(),D(9,"div",73)(10,"div")(11,"div"),ce(12),F(),D(13,"div")(14,"nz-tag",74),ce(15),F()()()()()()),e&2){let n=t.$implicit,r=bn(6),i=bn(8);$(),oe("ngClass",n.role=="OWNER"?"doc-owner-space":""),$(2),oe("nzCount",n.role!=="OWNER"?r:i),$(),oe("nzSize",50)("nzText",n.actioner.substring(0,2).toUpperCase())("ngStyle",e6(9,E6e,n.role==="OWNER"?"rgb(207, 19, 34)":"#f56a00",n.role==="OWNER"?"rgb(255, 241, 240)":"#fde3cf")),$(8),Yt(n.actioner),$(2),oe("nzColor",n.role==="OWNER"?"red":"orange")("nzBordered",!1),$(),Yt(n.role)}}function H6e(e,t){if(e&1&&(D(0,"div")(1,"h5"),ce(2,"Collaborators"),F(),D(3,"div",64),Je(4,V6e,16,12,"div",68),F()()),e&2){let n=me(2);$(4),oe("ngForOf",n.document.actioners)}}function W6e(e,t){if(e&1&&(D(0,"div"),Je(1,H6e,5,1,"div",35),F()),e&2){let n=me();$(),oe("ngIf",n.document)}}function q6e(e,t){e&1&&(D(0,"div"),xe(1,"nz-empty"),F())}function U6e(e,t){if(e&1&&(D(0,"div")(1,"nz-comment",84),xe(2,"nz-avatar",85),D(3,"nz-comment-content")(4,"p"),ce(5),F()()()()),e&2){let n=t.$implicit;$(),oe("nzAuthor",n.author)("nzDatetime",n.createdAt),$(),oe("nzText",n.author.substring(0,2).toUpperCase()),$(3),Wt(" ",n.message," ")}}function G6e(e,t){if(e&1&&(D(0,"div"),Je(1,U6e,6,4,"div",83),F()),e&2){let n=me(3);$(),oe("ngForOf",n.document.comments)}}function $6e(e,t){if(e&1&&(D(0,"div")(1,"h5"),ce(2,"Comments"),F(),D(3,"div",80)(4,"div",81),Je(5,q6e,2,0,"div",35)(6,G6e,2,1,"div",35),F(),xe(7,"div",82),F()()),e&2){let n=me(2);$(5),oe("ngIf",n.document.comments.length==0),$(),oe("ngIf",n.document.comments.length>0)}}function Y6e(e,t){e&1&&ce(0,"Add an attachment")}function X6e(e,t){if(e&1){let n=pt();D(0,"nz-upload",87),Gt("nzFileListChange",function(i){ze(n);let o=me(3);return Ut(o.fileList,i)||(o.fileList=i),Re(i)}),D(1,"p",88),xe(2,"span",89),F(),D(3,"p",90),ce(4,"Click to upload"),F()()}if(e&2){let n=me(3);oe("nzMultiple",!0),qt("nzFileList",n.fileList),oe("nzBeforeUpload",n.beforeUpload)}}function K6e(e,t){if(e&1&&(xe(0,"span",86),Je(1,Y6e,1,0,"ng-template",null,15,dn)(3,X6e,5,3,"ng-template",null,16,dn)),e&2){let n=bn(2),r=bn(4);oe("nzPopoverTitle",n)("nzPopoverContent",r)}}function Z6e(e,t){if(e&1){let n=pt();D(0,"button",91),Xe("click",function(){ze(n);let i=me(2);return Re(i.commentDocument())}),D(1,"span",27),Ct(),D(2,"svg",28),xe(3,"path",92),F()()()}}function J6e(e,t){if(e&1){let n=pt();D(0,"div"),Je(1,$6e,8,2,"div",35),D(2,"div")(3,"nz-input-group",78)(4,"input",79),Gt("ngModelChange",function(i){ze(n);let o=me();return Ut(o.commentDocumentForm.message,i)||(o.commentDocumentForm.message=i),Re(i)}),F()(),Je(5,K6e,5,2,"ng-template",null,13,dn)(7,Z6e,4,0,"ng-template",null,14,dn),F()()}if(e&2){let n=bn(6),r=bn(8),i=me();$(),oe("ngIf",i.document),$(2),oe("nzPrefix",n)("nzAddOnAfter",r),$(),qt("ngModel",i.commentDocumentForm.message)}}function Q6e(e,t){e&1&&(D(0,"div"),xe(1,"nz-empty"),F())}function eke(e,t){if(e&1&&(D(0,"div"),ce(1),F()),e&2){let n=t.$implicit;$(),db(" ",n.title," ",n.description," ",n.creator," ")}}function tke(e,t){if(e&1&&(D(0,"div"),Je(1,eke,2,3,"div",83),F()),e&2){let n=me(3);$(),oe("ngForOf",n.document.linkedDocuments)}}function nke(e,t){if(e&1&&(D(0,"div")(1,"h5"),ce(2,"Linked Documents"),F(),D(3,"div",64),Je(4,Q6e,2,0,"div",35)(5,tke,2,1,"div",35),F()()),e&2){let n=me(2);$(4),oe("ngIf",n.document.comments.length==0),$(),oe("ngIf",n.document.comments.length>0)}}function rke(e,t){if(e&1&&(D(0,"div"),Je(1,nke,6,2,"div",35),F()),e&2){let n=me();$(),oe("ngIf",n.document)}}function ike(e,t){if(e&1&&(D(0,"nz-timeline-item")(1,"div",25)(2,"div")(3,"nz-tag",93),ce(4),F(),ce(5),F(),D(6,"div",94),ce(7),Ea(8,"date"),Ea(9,"date"),F()(),D(10,"div"),ce(11),F()()),e&2){let n=t.$implicit;$(3),oe("nzBordered",!1),$(),Yt(n.action),$(),Wt(" ",n.message," "),$(2),Km(" ",ns(8,6,n.createdAt,"dd MMM yyyy")," ",ns(9,9,n.createdAt,"HH:mm")," "),$(4),Wt("by ",n.author,"")}}function oke(e,t){if(e&1&&(D(0,"div")(1,"h5"),ce(2,"Activity"),F(),D(3,"div",64)(4,"nz-timeline"),Je(5,ike,12,12,"nz-timeline-item",83),F()()()),e&2){let n=me(2);$(5),oe("ngForOf",n.document.audit)}}function ake(e,t){if(e&1&&(D(0,"div"),Je(1,oke,6,1,"div",35),F()),e&2){let n=me();$(),oe("ngIf",n.document)}}function ske(e,t){e&1&&uv(0)}function lke(e,t){if(e&1){let n=pt();D(0,"li",95),Xe("click",function(){let i=ze(n).index,o=me();return Re(o.selectViewOption(i))}),Je(1,ske,1,0,"ng-container",96),F()}if(e&2){let n=t.$implicit,r=t.index,i=me();oe("ngClass",i.currentViewOption==r?"authorise-edit-tab-li-active":""),$(),oe("ngTemplateOutlet",i.getViewOption(n.name))}}function cke(e,t){e&1&&(Ct(),D(0,"svg",97),xe(1,"path",98),F())}function uke(e,t){e&1&&(Ct(),D(0,"svg",99),xe(1,"path",100),F())}function fke(e,t){e&1&&(Ct(),D(0,"svg",101),xe(1,"path",102),F())}function pke(e,t){e&1&&(Ct(),D(0,"svg",103)(1,"defs")(2,"mask",104)(3,"g",105),xe(4,"path",106)(5,"path",107),F()()(),xe(6,"path",108),F())}function dke(e,t){}function hke(e,t){if(e&1){let n=pt();D(0,"div")(1,"h5"),ce(2,"Share Document"),F(),D(3,"form",109)(4,"nz-form-item"),xe(5,"input",110),F(),D(6,"nz-form-item")(7,"button",111),Xe("click",function(){ze(n);let i=me(2);return Re(i.shareDocument())}),D(8,"span",27),Ct(),D(9,"svg",28)(10,"g",29),xe(11,"path",30)(12,"path",31),F()()(),ce(13," Share "),F()()()()}if(e&2){let n=me(2);$(3),oe("formGroup",n.shareDocumentForm)}}function mke(e,t){if(e&1){let n=pt();D(0,"div")(1,"input",112),Gt("ngModelChange",function(i){ze(n);let o=me(2);return Ut(o.actionDocumentForm.reason,i)||(o.actionDocumentForm.reason=i),Re(i)}),F()()}if(e&2){let n=me(2);$(),qt("ngModel",n.actionDocumentForm.reason)}}function gke(e,t){if(e&1){let n=pt();D(0,"div")(1,"app-signature",114),Xe("signatureChanged",function(i){ze(n);let o=me(3);return Re(o.signatureChanged(i))}),F()()}}function vke(e,t){if(e&1&&(D(0,"div",64),xe(1,"img",67),F()),e&2){let n=me(3);$(),oe("src",n.signature,Xm)}}function yke(e,t){if(e&1){let n=pt();D(0,"div")(1,"label",113),Gt("ngModelChange",function(i){ze(n);let o=me(2);return Ut(o.useSavedSignature,i)||(o.useSavedSignature=i),Re(i)}),Xe("ngModelChange",function(){ze(n);let i=me(2);return Re(i.checkIfUserHasSavedSignature())}),ce(2,"Use saved signature"),F(),Je(3,gke,2,0,"div",35)(4,vke,2,1,"div",63),F()}if(e&2){let n=me(2);$(),qt("ngModel",n.useSavedSignature),$(2),oe("ngIf",!n.useSavedSignature),$(),oe("ngIf",n.useSavedSignature)}}function xke(e,t){if(e&1){let n=pt();D(0,"div")(1,"button",111),Xe("click",function(){ze(n);let i=me(2);return Re(i.actionDocument("APPROVE"))}),D(2,"span",27),Ct(),D(3,"svg",28)(4,"g",29),xe(5,"path",115)(6,"path",116),F()()(),ce(7," Approve "),F()()}}function bke(e,t){if(e&1){let n=pt();D(0,"div")(1,"button",111),Xe("click",function(){ze(n);let i=me(2);return Re(i.actionDocument("DECLINE"))}),D(2,"span",27),Ct(),D(3,"svg",28)(4,"g",46),xe(5,"circle",47)(6,"path",49),F()()(),ce(7," Decline "),F()()}}function _ke(e,t){if(e&1){let n=pt();D(0,"div")(1,"button",111),Xe("click",function(){ze(n);let i=me(2);return Re(i.actionDocument("PAUSE"))}),D(2,"span",27),Ct(),D(3,"svg",28),xe(4,"path",117),F()(),ce(5," Pause "),F()()}}function wke(e,t){if(e&1&&Je(0,hke,14,1,"div",35)(1,mke,2,1,"div",35)(2,yke,5,3,"div",35)(3,xke,8,0,"div",35)(4,bke,8,0,"div",35)(5,_ke,6,0,"div",35),e&2){let n=me();oe("ngIf",n.actionModal.share),$(),oe("ngIf",n.actionModal.decline||n.actionModal.pause),$(),oe("ngIf",n.actionModal.signature),$(),oe("ngIf",n.actionModal.approve),$(),oe("ngIf",n.actionModal.decline),$(),oe("ngIf",n.actionModal.pause)}}function Ske(e,t){}function Cke(e,t){}function Oke(e,t){if(e&1){let n=pt();D(0,"div",118),ce(1),F(),D(2,"div")(3,"nz-form-item")(4,"input",79),Gt("ngModelChange",function(i){ze(n);let o=me();return Ut(o.addDocumentCommentForm.message,i)||(o.addDocumentCommentForm.message=i),Re(i)}),F()(),D(5,"nz-form-item")(6,"button",111),Xe("click",function(){ze(n);let i=me();return Re(i.updateDocument())}),D(7,"span",27),Ct(),D(8,"svg",28)(9,"g",29),xe(10,"path",30)(11,"path",31),F()()(),ce(12," Submit "),F()()()}if(e&2){let n=me();$(),Wt(' " ',n.addDocumentCommentForm.value,' " '),$(3),qt("ngModel",n.addDocumentCommentForm.message)}}function Mke(e,t){}var NQ=(()=>{let t=class t{constructor(r,i,o,a,s,l,c){this.route=r,this.documentsService=i,this.routingService=o,this.sanitizer=a,this.notificationService=s,this.cookiesService=l,this.datePipe=c,this.subs=new ci,this.shareDocumentForm=new Md({email:new ic("",[Ol.required,Ol.minLength(5)])}),this.user=this.cookiesService.getCookie("user"),this.actionDocumentForm={reason:"",signature:""},this.useSavedSignature=!1,this.actionersWhoSigned=[],this.text="Your text from the backend goes here.",this.selectedText="",this.commentText="",this.comments=[],this.documentViewOptions=[{name:"collaborators"},{name:"comments"},{name:"linked-documents"},{name:"activity"}],this.currentViewOption=0,this.isVisible=!1,this.actionModal={share:!1,approve:!1,decline:!1,pause:!1,signature:!1},this.commentDocumentForm={message:""},this.fileList=[],this.beforeUpload=u=>(this.fileList=this.fileList.concat(u),!1),this.shareDocumentModal=!1,this.isCommentDocumentVisible=!1,this.addDocumentCommentForm={user:this.user.email,value:{},message:"",type:"COMMENT",elementType:"",time:"",resolved:!1,to:""}}shareDocument(){let r={documentId:parseInt(this.documentId),action:"SHARE",newUser:this.shareDocumentForm.value.email};console.log("The request: ",r),this.documentsService.actionDocument(r)}actionDocument(r){let i={documentId:parseInt(this.documentId),action:r,reason:this.actionDocumentForm.reason,signature:this.actionDocumentForm.signature};this.useSavedSignature&&(i.signature=this.signature),this.documentsService.actionDocument(i)}checkIfUserHasSavedSignature(){console.log("here"),localStorage.getItem("signature")?.length==0&&(this.notificationService.create("error","Error","Please add a signature on the preferences page"),this.useSavedSignature=this.useSavedSignature),console.log(this.useSavedSignature)}signatureChanged(r){console.log("We got the signature: "),console.log("Signature before conversion: ",r),this.actionDocumentForm.signature=r}compress(r){let i=atob(r),o=i.length,a=new Uint8Array(o);for(let c=0;c<o;c++)a[c]=i.charCodeAt(c);let s=zJ(a);return btoa(String.fromCharCode(...s))}decompress(r){let i=atob(r),o=i.length,a=new Uint8Array(o);for(let c=0;c<o;c++)a[c]=i.charCodeAt(c);let s=RJ(a);return btoa(String.fromCharCode(...s))}ngOnInit(){this.signature="data:image/png;base64,"+localStorage.getItem("signature"),this.route.params.subscribe(r=>{this.documentId=r.id,this.getDocument(r.id)}),this.subs.add=this.documentsService.getDocumentResponse$.subscribe(r=>{console.log(r),this.onGetDocumentResponse(r)}),this.subs.add=this.documentsService.actionDocumentResponse$.subscribe(r=>{console.log(r),this.onActionDocumentResponse(r)}),this.subs.add=this.documentsService.commentResponse$.subscribe(r=>{console.log(r),this.onCommentDocument(r)}),this.subs.add=this.documentsService.updateDocumentResponse$.subscribe(r=>{console.log(r),this.onUpdateDocument(r)})}onUpdateDocument(r){r.success?(this.notificationService.create("success","Success",r.message),this.addDocumentCommentForm.message="",this.addDocumentCommentForm.time="",this.addDocumentCommentForm.to="",this.getDocument(this.documentId),this.isCommentDocumentVisible=!1):this.notificationService.create("error","Error",r.message)}onCommentDocument(r){r.success?(this.notificationService.create("success","Success",r.message),this.commentDocumentForm.message="",this.fileList=[],this.getDocument(this.documentId)):this.notificationService.create("error","Error",r.message)}onActionDocumentResponse(r){r.success?(this.notificationService.create("success","Success",r.message),this.getDocument(this.documentId),this.handleCancel()):this.notificationService.create("error","Error",r.message)}getDocument(r){this.getDocumentLoader=!0,this.documentsService.getDocument(r)}onGetDocumentResponse(r){if(console.log("the response, ",r),r.success){this.document=r.data,this.document.audit.sort((s,l)=>Number(new Date(s.createdAt))-Number(new Date(l.createdAt))),this.document.comments.sort((s,l)=>Number(new Date(s.createdAt))-Number(new Date(l.createdAt))),this.document.actioners.sort((s,l)=>s.index-l.index),console.log("Sorted Doc: ",this.document);let i=this.document.actioners.reduce((s,l)=>(l.index===-1||(s[l.index]||(s[l.index]=[]),s[l.index].push(l)),s),{}),o=Object.entries(i).map(([s,l])=>({index:Number(s),items:l}));console.log(i),console.log(o),this.signaturesQuota=o;let a=this.document.actioners.filter(s=>s.signature);console.log("Actioners with Signature: ",a),this.actionersWhoSigned.push(...a),this.signaturesQuota=this.signaturesQuota.filter(s=>!this.actionersWhoSigned.some(l=>l.index===s.index))}this.getDocumentLoader=!1}onBack(){this.routingService.navigateByUrl("authorise/documents/all")}getHighlightedText(r){let i=r.value;return r.comments&&r.comments.length>0&&r.comments.forEach(o=>{let a=new RegExp(`(${o.highlightedText})`,"gi");i=i.replace(a,' <span nzTooltipTitle="Export to Word" nzTooltipPlacement="top" nz-tooltip nz-button style="background: yellow">$1</span>')}),this.sanitizer.bypassSecurityTrustHtml(i)}selectViewOption(r){this.currentViewOption=r}getViewOption(r){switch(r){case"collaborators":return this.collaboratorsTemplate;case"comments":return this.commentsTemplate;case"linked-documents":return this.linkedDocumentsTemplate;case"activity":return this.activityDocumentsTemplate;default:return null}}onTextSelect(r){console.log("Something happened"),console.log(r);let i=window.getSelection();this.selectedText=i.toString(),console.log(this.selectedText),this.selectedText}saveComment(){this.selectedText&&this.commentText&&(this.comments.push({text:this.selectedText,comment:this.commentText}),this.selectedText="",this.commentText="")}resetActionModal(){this.actionDocumentForm.signature="",this.actionDocumentForm.reason="",Object.keys(this.actionModal).forEach(r=>{this.actionModal[r]=!1})}commentDocument(){var r=new FormData;r.append("documentId",parseInt(this.documentId)),r.append("message",this.commentDocumentForm.message);for(let i of this.fileList)r.append("attachments",i);this.documentsService.comment(r)}showModal(r){switch(this.resetActionModal(),r){case"share":this.actionModal.share=!0;break;case"approve":this.actionModal.approve=!0,this.actionModal.signature=!0;break;case"decline":this.actionModal.decline=!0,this.actionModal.signature=!0;break;case"pause":this.actionModal.pause=!0;break;default:break}this.isVisible=!0}handleCancel(){this.resetActionModal(),this.actionDocumentForm.signature="",this.actionDocumentForm.reason="",this.isVisible=!1}generatePDF(){var r=document.getElementById("authorise-document");(0,PQ.default)(r).then(i=>{var o="Authorise - "+this.document.id+"-"+this.document.template.title+"-"+new Date,a=i.width,s=i.height,l=a/592.28*841.89,c=s,u=0,f=595.28,p=592.28/a*s,d=i.toDataURL("image/jpeg",1);let h=new MQ("p","pt","a4");if(c<l)h.addImage(d,"JPEG",0,0,f,p);else for(;c>0;)h.addImage(d,"JPEG",0,u,f,p),c-=l,u-=841.89,c>0&&h.addPage();h.save(o+".pdf")})}logSelectedText(r){console.log(r),this.commentIndex=r.index,this.addDocumentCommentForm.value=r.block.value,this.addDocumentCommentForm.elementType=r.block.type,this.openAddDocumentComment()}openAddDocumentComment(){this.isCommentDocumentVisible=!0}handleCommentDocumentModalCancel(){this.commentIndex=null,this.highlightedText="",this.isCommentDocumentVisible=!1}updateDocument(){let r=this.document.form.blocks[this.commentIndex];console.log("Before comment update: ",r),this.addDocumentCommentForm.time=new Date().toString(),r.comments.push(this.addDocumentCommentForm),console.log("After comment update: ",r);let i={documentId:this.document.id,form:this.document.form};console.log("Updated document: ",i),this.documentsService.updateDocument(i)}formatDateTime(r){return this.datePipe.transform(r,"yyyy-MM-dd HH:mm:ss")||""}ngOnDestroy(){this.subs.dispose()}};t.\u0275fac=function(i){return new(i||t)(ht(Qf),ht(No),ht(cr),ht(Qm),ht(Zi),ht(Sl),ht(Uu))},t.\u0275cmp=tn({type:t,selectors:[["app-view-document"]],viewQuery:function(i,o){if(i&1&&(Qa(S6e,5),Qa(C6e,7),Qa(O6e,7),Qa(M6e,7),Qa(k6e,7)),i&2){let a;es(a=ts())&&(o.commentTemplate=a.first),es(a=ts())&&(o.collaboratorsTemplate=a.first),es(a=ts())&&(o.commentsTemplate=a.first),es(a=ts())&&(o.linkedDocumentsTemplate=a.first),es(a=ts())&&(o.activityDocumentsTemplate=a.first)}},decls:64,vars:16,consts:[["collaboratorsTemplate",""],["commentsTemplate",""],["linkedDocumentsTemplate",""],["activityDocumentsTemplate",""],["modalTitle",""],["modalContent",""],["modalFooter",""],["commentDocumentModalTitle",""],["commentDocumentModalContent",""],["commentDocumentModalFooter",""],["commentTemplate",""],["iconActionerTemplate",""],["iconOwnerTemplate",""],["prefixTemplateAttachment",""],["addOnAfterTemplate",""],["titleTemplate",""],["contentTemplate",""],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to view all documents",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../../workspace"],["nz-icon","","nzType","home"],["routerLink","../../all"],[1,"row"],[1,"col-md-8"],[1,"authorise-editor-toolbar","mb-3"],[1,"d-flex","justify-content-between"],["nzTooltipTitle","Share Document","nzTooltipPlacement","top","nz-tooltip","","nz-button","",1,"authorise-editor-button",3,"click"],["nz-icon",""],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","color","currentColor"],["d","m20.393 8.032l-1.747-1.517c-1.259-1.093-1.752-1.681-2.434-1.474c-.85.26-.57 1.895-.57 2.447c-1.321 0-2.695-.101-3.998.11c-4.3.7-5.644 3.759-5.644 7.055c1.217-.747 2.433-1.578 3.895-1.924c1.826-.432 3.865-.226 5.747-.226c0 .552-.28 2.188.57 2.447c.772.236 1.175-.38 2.434-1.473l1.747-1.517C21.464 11.03 22 10.564 22 9.996s-.536-1.034-1.607-1.964"],["d","M10.568 3c-3.86.007-5.882.102-7.174 1.39C2 5.783 2 8.022 2 12.5s0 6.717 1.394 8.109C4.788 22 7.032 22 11.52 22s6.73 0 8.125-1.391C20.615 19.64 20.91 18.26 21 16"],["nzTooltipTitle","Export to PDF","nzTooltipPlacement","top","nz-tooltip","","nz-button","",1,"authorise-editor-button",3,"click"],["d","M3.5 13v-.804c0-2.967 0-4.45.469-5.636c.754-1.905 2.348-3.407 4.37-4.118C9.595 2 11.168 2 14.318 2c1.798 0 2.698 0 3.416.253c1.155.406 2.066 1.264 2.497 2.353c.268.677.268 1.525.268 3.22V13"],["d","M3.5 12a3.333 3.333 0 0 1 3.333-3.333c.666 0 1.451.116 2.098-.057a1.67 1.67 0 0 0 1.179-1.18c.173-.647.057-1.432.057-2.098A3.333 3.333 0 0 1 13.5 2m-10 20v-3m0 0v-1.8c0-.566 0-.848.176-1.024C3.85 16 4.134 16 4.7 16h.8a1.5 1.5 0 0 1 0 3zm17-3H19c-.943 0-1.414 0-1.707.293S17 17.057 17 18v1m0 3v-3m0 0h2.5M14 19a3 3 0 0 1-3 3c-.374 0-.56 0-.7-.08c-.333-.193-.3-.582-.3-.92v-4c0-.338-.033-.727.3-.92c.14-.08.326-.08.7-.08a3 3 0 0 1 3 3"],[4,"ngIf"],[1,"authorise-document-a4-page-container"],[1,"col-md-4"],[1,"col-md-4","authorise-document-edit-tools-container"],[1,"row","h-100"],[1,"col","authorise-form-builder-tools-content"],[1,"col","content-tabs"],[1,"authorise-edit-tabs"],["class","authorise-edit-tab-li",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter"],["nz-button","",1,"authorise-editor-button",3,"click","disabled"],["fill","none","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","12","r","10"],["stroke-linecap","round","stroke-linejoin","round","d","m8.5 12.5l2 2l5-5"],["stroke-linecap","round","d","m14.5 9.5l-5 5m0-5l5 5"],["d","M8 9.5c0-.466 0-.699.076-.883a1 1 0 0 1 .541-.54C8.801 8 9.034 8 9.5 8s.699 0 .883.076a1 1 0 0 1 .54.541c.077.184.077.417.077.883v5c0 .466 0 .699-.076.883a1 1 0 0 1-.541.54C10.199 16 9.966 16 9.5 16s-.699 0-.883-.076a1 1 0 0 1-.54-.541C8 15.199 8 14.966 8 14.5zm5 0c0-.466 0-.699.076-.883a1 1 0 0 1 .541-.54C13.801 8 14.034 8 14.5 8s.699 0 .883.076a1 1 0 0 1 .54.541c.077.184.077.417.077.883v5c0 .466 0 .699-.076.883a1 1 0 0 1-.541.54c-.184.077-.417.077-.883.077s-.699 0-.883-.076a1 1 0 0 1-.54-.541C13 15.199 13 14.966 13 14.5z"],[3,"nzActive"],["id","authorise-document",1,"authorise-document-a4-page"],[1,"d-flex","flex-column","h-100"],[1,"flex-grow-1"],[1,"authorise-document-content","h-100"],[1,"d-flex","flex-column","justify-content-between","h-100"],[1,"d-flex","justify-content-center"],[1,"authorise-document-a4-page-footer"],[1,"comment-popup"],[3,"ngModelChange","ngModel"],[3,"click"],[3,"status"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"selectInputValue","blocks"],["class","col-md-4",4,"ngFor","ngForOf"],["alt","",2,"max-width","150px",3,"src"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"d-flex",3,"ngClass"],[3,"nzCount"],[3,"nzSize","nzText","ngStyle"],[1,"flex-grow-1","ms-3",2,"font-size","14px"],[3,"nzColor","nzBordered"],["nz-icon","","nzType","check-circle","class","ant-scroll-number-custom-component","style","color: #17cb50",4,"ngIf"],["nz-icon","","nzType","check-circle",1,"ant-scroll-number-custom-component",2,"color","#17cb50"],["nz-icon","","nzType","edit",1,"ant-scroll-number-custom-component",2,"color","#3b3b3b"],[3,"nzPrefix","nzAddOnAfter"],["nz-input","","placeholder","Message",3,"ngModelChange","ngModel"],[1,"comments-container"],[1,"comments-top-section"],[1,"comments-bottom-section"],[4,"ngFor","ngForOf"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",2,"color","#f56a00","background-color","#fde3cf",3,"nzText"],["nz-icon","","nzType","paper-clip","nz-popover","",3,"nzPopoverTitle","nzPopoverContent"],["nzType","drag","nzAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",3,"nzFileListChange","nzMultiple","nzFileList","nzBeforeUpload"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","plus"],[1,"ant-upload-text"],["nz-button","","nzType","primary",3,"click"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M6 12L3.269 3.125A59.8 59.8 0 0 1 21.486 12a59.8 59.8 0 0 1-18.217 8.875zm0 0h7.5"],["nzColor","yellow",3,"nzBordered"],[1,"authorise-audit-timeline-date"],[1,"authorise-edit-tab-li",3,"click","ngClass"],[4,"ngTemplateOutlet"],["nzTooltipTitle","Collaborators","nzTooltipPlacement","left","nz-tooltip","","xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","currentColor","d","M15.5 7.5a3.5 3.5 0 1 1-7 0a3.5 3.5 0 0 1 7 0m2.5 9c0 1.933-2.686 3.5-6 3.5s-6-1.567-6-3.5S8.686 13 12 13s6 1.567 6 3.5M7.122 5q.267 0 .518.05A5 5 0 0 0 7 7.5c0 .868.221 1.685.61 2.396q-.237.045-.488.045c-1.414 0-2.561-1.106-2.561-2.47S5.708 5 7.122 5M5.447 18.986C4.88 18.307 4.5 17.474 4.5 16.5c0-.944.357-1.756.896-2.423C3.49 14.225 2 15.267 2 16.529c0 1.275 1.517 2.325 3.447 2.457M17 7.5c0 .868-.221 1.685-.61 2.396q.236.045.488.045c1.414 0 2.56-1.106 2.56-2.47S18.293 5 16.879 5q-.267 0-.518.05c.407.724.64 1.56.64 2.45m1.552 11.486c1.93-.132 3.447-1.182 3.447-2.457c0-1.263-1.491-2.304-3.396-2.452c.54.667.896 1.479.896 2.423c0 .974-.38 1.807-.947 2.486"],["nzTooltipTitle","Comments","nzTooltipPlacement","left","nz-tooltip","","xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","currentColor","fill-rule","evenodd","d","m13.087 21.388l.542-.916c.42-.71.63-1.066.968-1.262c.338-.197.763-.204 1.613-.219c1.256-.021 2.043-.098 2.703-.372a5 5 0 0 0 2.706-2.706C22 14.995 22 13.83 22 11.5v-1c0-3.273 0-4.91-.737-6.112a5 5 0 0 0-1.65-1.651C18.41 2 16.773 2 13.5 2h-3c-3.273 0-4.91 0-6.112.737a5 5 0 0 0-1.651 1.65C2 5.59 2 7.228 2 10.5v1c0 2.33 0 3.495.38 4.413a5 5 0 0 0 2.707 2.706c.66.274 1.447.35 2.703.372c.85.015 1.275.022 1.613.219c.337.196.548.551.968 1.262l.542.916c.483.816 1.69.816 2.174 0M16 12a1 1 0 1 0 0-2a1 1 0 0 0 0 2m-3-1a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-5 1a1 1 0 1 0 0-2a1 1 0 0 0 0 2","clip-rule","evenodd"],["nzTooltipTitle","Linked Documents","nzTooltipPlacement","left","nz-tooltip","","xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["fill","currentColor","fill-rule","evenodd","d","M4.172 3.172C3 4.343 3 6.229 3 10v4c0 3.771 0 5.657 1.172 6.828S7.229 22 11 22h2c3.771 0 5.657 0 6.828-1.172S21 17.771 21 14v-4c0-3.771 0-5.657-1.172-6.828S16.771 2 13 2h-2C7.229 2 5.343 2 4.172 3.172M7.25 8A.75.75 0 0 1 8 7.25h8a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 8m0 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75M8 15.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5z","clip-rule","evenodd"],["nzTooltipTitle","Activity","nzTooltipPlacement","left","nz-tooltip","","xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","viewBox","0 0 24 24"],["id","solarClockCircleBold0"],["fill","none"],["fill","#fff","d","M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2s10 4.477 10 10"],["fill","#000","fill-rule","evenodd","d","M12 7.25a.75.75 0 0 1 .75.75v3.69l2.28 2.28a.75.75 0 1 1-1.06 1.06l-2.5-2.5a.75.75 0 0 1-.22-.53V8a.75.75 0 0 1 .75-.75","clip-rule","evenodd"],["fill","currentColor","d","M0 0h24v24H0z","mask","url(#solarClockCircleBold0)"],[3,"formGroup"],["nz-input","","placeholder","Email","formControlName","email"],["nz-button","","nzType","primary","type","submit",3,"click"],["nz-input","","placeholder","Reason",3,"ngModelChange","ngModel"],["nz-checkbox","",3,"ngModelChange","ngModel"],[3,"signatureChanged"],["d","M17 3.338A9.95 9.95 0 0 0 12 2C6.477 2 2 6.477 2 12s4.477 10 10 10s10-4.477 10-10q-.002-1.03-.2-2"],["d","M8 12.5s1.5 0 3.5 3.5c0 0 5.559-9.167 10.5-11"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M4 7c0-1.414 0-2.121.44-2.56C4.878 4 5.585 4 7 4s2.121 0 2.56.44C10 4.878 10 5.585 10 7v10c0 1.414 0 2.121-.44 2.56C9.122 20 8.415 20 7 20s-2.121 0-2.56-.44C4 19.122 4 18.415 4 17zm10 0c0-1.414 0-2.121.44-2.56C14.878 4 15.585 4 17 4s2.121 0 2.56.44C20 4.878 20 5.585 20 7v10c0 1.414 0 2.121-.44 2.56c-.439.44-1.146.44-2.56.44s-2.121 0-2.56-.44C14 19.122 14 18.415 14 17z","color","currentColor"],[1,"authorise-highlighted-text"]],template:function(i,o){if(i&1){let a=pt();D(0,"div")(1,"nz-page-header",17),Xe("nzBack",function(){return ze(a),Re(o.onBack())}),D(2,"nz-breadcrumb",18)(3,"nz-breadcrumb-item",19),xe(4,"span",20),F(),D(5,"nz-breadcrumb-item")(6,"a",21),ce(7,"All Documents"),F()(),D(8,"nz-breadcrumb-item"),ce(9,"View Document"),F()()()(),D(10,"div",22)(11,"div",23)(12,"div",24)(13,"div",25)(14,"div")(15,"button",26),Xe("click",function(){return ze(a),Re(o.showModal("share"))}),D(16,"span",27),Ct(),D(17,"svg",28)(18,"g",29),xe(19,"path",30)(20,"path",31),F()()()(),Yn(),D(21,"button",32),Xe("click",function(){return ze(a),Re(o.generatePDF())}),D(22,"span",27),Ct(),D(23,"svg",28)(24,"g",29),xe(25,"path",33)(26,"path",34),F()()()()(),Je(27,A6e,23,3,"div",35),F()(),Yn(),D(28,"div",36),Je(29,T6e,2,1,"div",35)(30,R6e,18,2,"div",35),F()(),D(31,"div",37)(32,"div",38)(33,"div",39)(34,"div",40),Je(35,W6e,2,1,"div",35)(36,J6e,9,4,"div",35)(37,rke,2,1,"div",35)(38,ake,2,1,"div",35),F(),D(39,"div",41)(40,"ul",42),Je(41,lke,2,2,"li",43)(42,cke,2,0,"ng-template",null,0,dn)(44,uke,2,0,"ng-template",null,1,dn)(46,fke,2,0,"ng-template",null,2,dn)(48,pke,7,0,"ng-template",null,3,dn),F()()()()()(),D(50,"nz-modal",44),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(51,dke,0,0,"ng-template",null,4,dn)(53,wke,6,6,"ng-template",null,5,dn)(55,Ske,0,0,"ng-template",null,6,dn),F(),D(57,"nz-modal",44),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isCommentDocumentVisible,l)||(o.isCommentDocumentVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCommentDocumentModalCancel())}),Je(58,Cke,0,0,"ng-template",null,7,dn)(60,Oke,13,2,"ng-template",null,8,dn)(62,Mke,0,0,"ng-template",null,9,dn),F()}if(i&2){let a=bn(52),s=bn(54),l=bn(56),c=bn(59),u=bn(61),f=bn(63);$(27),oe("ngIf",o.document),$(2),oe("ngIf",o.getDocumentLoader),$(),oe("ngIf",!o.getDocumentLoader),$(5),oe("ngIf",o.currentViewOption==0),$(),oe("ngIf",o.currentViewOption==1),$(),oe("ngIf",o.currentViewOption==2),$(),oe("ngIf",o.currentViewOption==3),$(3),oe("ngForOf",o.documentViewOptions),$(9),qt("nzVisible",o.isVisible),oe("nzTitle",a)("nzContent",s)("nzFooter",l),$(7),qt("nzVisible",o.isCommentDocumentVisible),oe("nzTitle",c)("nzContent",u)("nzFooter",f)}},dependencies:[Jm,Xi,Ki,vb,yI,ei,Hc,Kn,Vc,KI,YI,XI,np,e9,qr,Wr,Xn,ui,wi,ss,Ml,ra,kl,Wc,ls,qc,as,i0,kI,El,o0,ZI,JI,Lb,tp,Cl,yo,ep,is,n0,r0,G1,bM,TQ,Uu],styles:[".authorise-document-a4-page-container[_ngcontent-%COMP%]{max-height:calc(100vh - 250px);overflow-x:hidden;overflow-y:scroll}.authorise-document-a4-page[_ngcontent-%COMP%]{padding:12mm 10mm!important;margin:auto;border-radius:2px;background-color:#fff;box-shadow:0 0 2rem #33475005;min-height:297mm;max-width:21cm;border:1px solid transparent;page-break-after:always}.authorise-document-a4-page[_ngcontent-%COMP%]:active{border:1px solid #d7f2de}.highlight-comment[_ngcontent-%COMP%]{background:#fef7a9}.authorise-editor-toolbar[_ngcontent-%COMP%]{background:#fff;padding:4px;border:1px solid #ccced1;border-radius:4px}.authorise-editor-button[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;cursor:default;font-size:inherit;line-height:1;min-height:2.3em;min-width:2.3em;text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap;color:#333;transition-duration:.5s}.authorise-editor-button[_ngcontent-%COMP%]:hover{background:#f0f0f0;cursor:pointer}.authorise-document-edit-tools-container[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:10px;border-radius:8px;max-height:calc(100vh - 186px);width:100%;height:100%}.authorise-edit-tab-li[_ngcontent-%COMP%]{padding:10px;border-left:5px solid transparent;transition-duration:.5s;color:#393842}.authorise-edit-tab-li[_ngcontent-%COMP%]:hover{color:#2ab347;cursor:pointer}.authorise-edit-tab-li-active[_ngcontent-%COMP%]{border-left:5px solid #2ab347;color:#2ab347}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.content-tabs[_ngcontent-%COMP%]{max-width:fit-content;padding:0;margin-left:10px;border-left:1px solid #DEE2E6}.authorise-form-builder-tools-content[_ngcontent-%COMP%]{max-height:calc(100vh - 270px);overflow-y:scroll}.comments-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 340px)}.comments-top-section[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.ant-input[_ngcontent-%COMP%]{margin:0!important}.text-area[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;min-height:100px;cursor:text}.authorise-highlighted-text[_ngcontent-%COMP%]{font-style:italic}.authorise-document-a4-page-footer[_ngcontent-%COMP%]{font-size:12px;color:#90d39d;font-weight:400}.authorise-audit-timeline-date[_ngcontent-%COMP%]{font-size:10px;color:#b4b4b4;text-align:right}.doc-owner-space[_ngcontent-%COMP%]{padding-bottom:20px}"]});let e=t;return e})();var kke=()=>[16,16],LQ=(()=>{let t=class t{constructor(r,i){this.documentsService=r,this.routingService=i}navigateTo(r){this.routingService.navigateByUrl("authorise/admin/"+r)}onBack(){this.routingService.navigateByUrl("authorise/workspace")}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-all-admin"]],decls:20,vars:2,consts:[[1,"d-flex","flex-column"],[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to your workspace",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../workspace"],["nz-icon","","nzType","home"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"flex-grow-1"],["nz-row","",2,"padding","0 10px",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","8","nzXl","8"],["nzTooltipTitle","Manage templates and categories","nzTooltipPlacement","bottom","nz-tooltip","",1,"admin-stats-card",3,"click"],[1,"admin-card-img-container"],["src","/assets/images/illustrations/admin-templates.svg","alt","",1,"admin-img"],[1,"admin-card-header"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"div")(2,"nav",1)(3,"nz-page-header",2),Xe("nzBack",function(){return o.onBack()}),D(4,"nz-breadcrumb",3)(5,"nz-breadcrumb-item",4),xe(6,"span",5),F(),D(7,"nz-breadcrumb-item"),ce(8,"Administration"),F()()(),D(9,"div",6)(10,"div",7),xe(11,"ul",8),F()()()(),D(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),Xe("click",function(){return o.navigateTo("categories")}),D(16,"div",13),xe(17,"img",14),F(),D(18,"div",15),ce(19,"Categories"),F()()()()()()),i&2&&($(13),oe("nzGutter",Yi(1,kke)))},dependencies:[ei,Kn,qr,Wr,Xn,ui,wi,zI,ss,ra],styles:[".admin-stats-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;transition-duration:.8s;border:1px solid transparent}.admin-card-img-container[_ngcontent-%COMP%]{height:250px;display:flex;justify-content:center;align-items:center}.admin-card-header[_ngcontent-%COMP%]{color:#0000007a;text-align:center;font-size:20px;transition-duration:.5s}.admin-stats-card[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:#2ab34733 0 8px 24px;border:1px solid #2ab347}.admin-stats-card[_ngcontent-%COMP%]:hover   .admin-card-header[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2ab347}.admin-img[_ngcontent-%COMP%]{transition-duration:.5s;max-height:300px}.admin-stats-card[_ngcontent-%COMP%]:hover   .admin-img[_ngcontent-%COMP%]{transform:scale(1.1)}"]});let e=t;return e})();var IQ=(()=>{let t=class t{constructor(r,i){this.documentsService=r,this.routingService=i,this.checkOptionsOne=[{label:"Apple",value:"Apple",checked:!0},{label:"Pear",value:"Pear"},{label:"Orange",value:"Orange"}]}log(r){console.log(r)}onBack(){this.routingService.navigateByUrl("authorise/admin/all")}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-users-admin"]],decls:14,vars:1,consts:[[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to view all admin functions",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../../workspace"],["nz-icon","","nzType","home"],["routerLink","../"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(D(0,"nav",0)(1,"nz-page-header",1),Xe("nzBack",function(){return o.onBack()}),D(2,"nz-breadcrumb",2)(3,"nz-breadcrumb-item",3),xe(4,"span",4),F(),D(5,"nz-breadcrumb-item")(6,"a",5),ce(7,"Administration"),F()(),D(8,"nz-breadcrumb-item"),ce(9,"Users"),F()()(),D(10,"div",6)(11,"div",7),xe(12,"ul",8),F()()(),D(13,"nz-checkbox-group",9),Gt("ngModelChange",function(s){return Ut(o.checkOptionsOne,s)||(o.checkOptionsOne=s),s}),Xe("ngModelChange",function(){return o.log(o.checkOptionsOne)}),F()),i&2&&($(13),qt("ngModel",o.checkOptionsOne))},dependencies:[ei,Kn,qr,Wr,Xn,ui,wi,Cb,yo,is]});let e=t;return e})();var DQ=(()=>{let t=class t{constructor(r,i){this.documentsService=r,this.routingService=i,this.tabs=[{name:"Categories"},{name:"SLAs"},{name:"Forms"}],this.nzTabPosition="left"}onBack(){this.routingService.navigateByUrl("authorise/admin/all")}ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-templates-admin"]],decls:15,vars:0,consts:[[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to view all admin functions",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../../workspace"],["nz-icon","","nzType","home"],["routerLink","../"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"page-card"]],template:function(i,o){i&1&&(D(0,"nav",0)(1,"nz-page-header",1),Xe("nzBack",function(){return o.onBack()}),D(2,"nz-breadcrumb",2)(3,"nz-breadcrumb-item",3),xe(4,"span",4),F(),D(5,"nz-breadcrumb-item")(6,"a",5),ce(7,"Administration"),F()(),D(8,"nz-breadcrumb-item"),ce(9,"Templates"),F()()(),D(10,"div",6)(11,"div",7),xe(12,"ul",8),F()()(),D(13,"div",9),xe(14,"router-outlet"),F())},dependencies:[rs,ei,Kn,qr,Wr,Xn,ui,wi],styles:[".page-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;transition-duration:.8s;height:calc(100vh - 180px);overflow-y:scroll}"]});let e=t;return e})();var zQ=(()=>{let t=class t{constructor(r,i){this.documentsService=r,this.routingService=i}onBack(){this.routingService.navigateByUrl("authorise/admin/all")}};t.\u0275fac=function(i){return new(i||t)(ht(No),ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-permissions-admin"]],decls:13,vars:0,consts:[[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to view all admin functions",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../../workspace"],["nz-icon","","nzType","home"],["routerLink","../"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"]],template:function(i,o){i&1&&(D(0,"nav",0)(1,"nz-page-header",1),Xe("nzBack",function(){return o.onBack()}),D(2,"nz-breadcrumb",2)(3,"nz-breadcrumb-item",3),xe(4,"span",4),F(),D(5,"nz-breadcrumb-item")(6,"a",5),ce(7,"Administration"),F()(),D(8,"nz-breadcrumb-item"),ce(9,"Permissions"),F()()(),D(10,"div",6)(11,"div",7),xe(12,"ul",8),F()()())},dependencies:[ei,Kn,qr,Wr,Xn,ui,wi]});let e=t;return e})();var wM=()=>({rows:1});function Eke(e,t){e&1&&(D(0,"div"),xe(1,"nz-skeleton",9)(2,"nz-skeleton",9)(3,"nz-skeleton",9)(4,"nz-skeleton",9),F()),e&2&&($(),oe("nzAvatar",!0)("nzParagraph",Yi(8,wM)),$(),oe("nzAvatar",!0)("nzParagraph",Yi(9,wM)),$(),oe("nzAvatar",!0)("nzParagraph",Yi(10,wM)),$(),oe("nzAvatar",!0)("nzParagraph",Yi(11,wM)))}function Ake(e,t){if(e&1){let n=pt();D(0,"li",12),Xe("click",function(){let i=ze(n).$implicit,o=me(2);return Re(o.openCategory(i))}),D(1,"div",13)(2,"div",14)(3,"span",15),Ct(),D(4,"svg",16),xe(5,"path",17),F()()(),Yn(),D(6,"div",18)(7,"span"),ce(8),F()()(),D(9,"div",4)(10,"div",19),ce(11,"click to view"),F()()()}if(e&2){let n=t.$implicit;$(8),Wt(" ",n.name," ")}}function Tke(e,t){if(e&1&&(D(0,"div")(1,"ul",10),Je(2,Ake,12,1,"li",11),F()()),e&2){let n=me();$(2),oe("ngForOf",n.categories)}}function Pke(e,t){e&1&&(D(0,"div"),xe(1,"nz-empty",20),F()),e&2&&($(),oe("nzNotFoundContent",null))}function Nke(e,t){}function Lke(e,t){if(e&1){let n=pt();D(0,"h5"),ce(1,"Add Category"),F(),D(2,"form",21)(3,"nz-form-item"),xe(4,"input",22),F(),D(5,"div",23)(6,"afc-button",5),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.handleCancel())}),F(),D(7,"afc-button",5),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.createCategory())}),F()()()}if(e&2){let n=me();$(2),oe("formGroup",n.createCategoryForm),$(4),br("cancel"),oe("label","Cancel")("disableButton",!1)("loading",!1),$(),br("primary"),oe("label","Submit")("disableButton",n.createCategoryForm.invalid)("loading",n.createCategoryLoader)}}function Ike(e,t){}var RQ=(()=>{let t=class t{constructor(r,i,o){this.categoriesService=r,this.notificationService=i,this.router=o,this.getCategoriesLoader=!1,this.subs=new ci,this.createCategoryLoader=!1,this.createCategoryForm=new Md({name:new ic("",[Ol.required,Ol.minLength(3)])}),this.isVisible=!1}getCategories(){this.getCategoriesLoader=!0,this.categoriesService.getCategories()}onGetCategories(r){r.success?(this.categories=r.data,console.log(this.categories)):(this.categories=null,this.notificationService.create("error","Error","Failed to fetch categories")),setTimeout(()=>this.getCategoriesLoader=!1,800)}ngOnInit(){this.getCategories(),this.subs.add=this.categoriesService.getCategoriesResponse$.subscribe(r=>{this.onGetCategories(r)}),this.subs.add=this.categoriesService.createCategoryResponse$.subscribe(r=>{this.onCreateCategory(r)})}onCreateCategory(r){r.success?(this.notificationService.create("success","Success",r.message),this.createCategoryLoader=!1,this.getCategories(),this.handleCancel()):this.notificationService.create("error","Error","Failed to create category")}createCategory(){this.createCategoryLoader=!0,this.categoriesService.createCategory(this.createCategoryForm.value)}openCategory(r){this.router.navigate(["/authorise/admin/categories/view/",r.id])}showModal(){this.isVisible=!0}handleCancel(){this.createCategoryForm.reset(),this.isVisible=!1}ngOnDestroy(){this.subs.dispose()}};t.\u0275fac=function(i){return new(i||t)(ht(e0),ht(Zi),ht(yb))},t.\u0275cmp=tn({type:t,selectors:[["app-all-categories"]],decls:22,vars:12,consts:[["modalTitle",""],["modalContent",""],["modalFooter",""],[1,"mt-4","d-flex","justify-content-between"],[1,"d-flex","align-items-center"],[3,"buttonClick","label","disableButton","loading"],[1,"mt-3"],[4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzVisible","nzTitle","nzContent","nzFooter"],[3,"nzAvatar","nzParagraph"],[1,"authorise-ul"],["class","authorise-li",3,"click",4,"ngFor","ngForOf"],[1,"authorise-li",3,"click"],[1,"d-flex"],[1,"authorise-li-icon"],[1,"authorise-folder"],["xmlns","http://www.w3.org/2000/svg","width","3em","height","3em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M7 6.5h9.75c2.107 0 3.16 0 3.917.506a3 3 0 0 1 .827.827c.464.694.503 1.427.506 3.167M12 6.5l-.633-1.267c-.525-1.05-1.005-2.106-2.168-2.542C8.69 2.5 8.108 2.5 6.944 2.5c-1.816 0-2.724 0-3.406.38A3 3 0 0 0 2.38 4.038C2 4.72 2 5.628 2 7.444V10.5c0 4.714 0 7.071 1.464 8.535c1.3 1.3 3.304 1.447 7.036 1.463h.5m6.556 1.002h.888c1.677 0 2.515 0 3.035-.527C22 20.446 22 19.597 22 17.9v-.309c0-.736 0-1.104-.135-1.434c-.136-.331-.393-.591-.906-1.111l-1.31-1.327c-.417-.421-.625-.632-.864-.788a2.7 2.7 0 0 0-.882-.37c-.278-.061-.573-.061-1.162-.061c-.898 0-1.347 0-1.697.16c-.393.18-.707.5-.885.897c-.159.354-.159.809-.159 1.718V17.9c0 1.697 0 2.546.52 3.073c.521.527 1.36.527 3.036.527","color","currentColor"],[1,"authorise-li-text"],[1,"authorise-li-actions"],[3,"nzNotFoundContent"],[3,"formGroup"],["formControlName","name","nz-input","","placeholder","Name"],[1,"d-flex","justify-content-between"]],template:function(i,o){if(i&1){let a=pt();D(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),ce(2,"Categories"),F(),D(3,"nz-breadcrumb-item"),ce(4,"All"),F()(),D(5,"div",3)(6,"div",4)(7,"h5"),ce(8,"Categories"),F()(),D(9,"div")(10,"afc-button",5),Xe("buttonClick",function(){return ze(a),Re(o.showModal())}),F()()(),D(11,"div",6),Je(12,Eke,5,12,"div",7)(13,Tke,3,1,"div",7)(14,Pke,2,1,"div",7),F(),D(15,"nz-modal",8),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(16,Nke,0,0,"ng-template",null,0,dn)(18,Lke,8,11,"ng-template",null,1,dn)(20,Ike,0,0,"ng-template",null,2,dn),F()}if(i&2){let a=bn(17),s=bn(19),l=bn(21);$(10),br("secondary"),oe("label","Create Category")("disableButton",!1)("loading",!1),$(2),oe("ngIf",o.getCategoriesLoader),$(),oe("ngIf",!o.getCategoriesLoader&&o.categories.length>0),$(),oe("ngIf",!o.getCategoriesLoader&&o.categories.length==0),$(),qt("nzVisible",o.isVisible),oe("nzTitle",a)("nzContent",s)("nzFooter",l)}},dependencies:[Xi,Ki,Ji,qr,Wr,ss,Ml,kl,Wc,ls,as,tp,Cl,yo,ep,n0,r0],styles:[".page-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;transition-duration:.8s;overflow-y:scroll}.authorise-ul[_ngcontent-%COMP%]{padding:0}.authorise-li[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:space-between;padding:10px;margin:5px 0;border-radius:5px;transition-duration:.5s}.authorise-li-actions[_ngcontent-%COMP%]{margin-right:10px;opacity:0;transition-duration:.6s;font-size:12px}.authorise-li[_ngcontent-%COMP%]:hover   .authorise-li-actions[_ngcontent-%COMP%]{opacity:1}.authorise-li[_ngcontent-%COMP%]:hover{background:#e6e6e64d;cursor:pointer}.authorise-folder[_ngcontent-%COMP%]{color:#fac652}.authorise-li-icon[_ngcontent-%COMP%]{font-size:10px}.authorise-li-text[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:20px}.authorise-file[_ngcontent-%COMP%]{color:#323232}.authorise-modal-icon-header[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-left:10px}"]});let e=t;return e})();var FQ=()=>({top:"20px"});function Dke(e,t){if(e&1&&(D(0,"span"),ce(1),F()),e&2){let n=me();$(),Yt(n.category.name)}}function zke(e,t){e&1&&(D(0,"span"),ce(1,"..."),F())}function Rke(e,t){e&1&&(D(0,"div"),xe(1,"nz-skeleton",9),F()),e&2&&($(),oe("nzActive",!0))}function Fke(e,t){if(e&1&&(D(0,"div",15),xe(1,"nz-empty",16),D(2,"div",17),ce(3),F()()),e&2){let n=me(2);$(),oe("nzNotFoundContent",null),$(2),Wt(" There are not subcategories in ",n.category.name,". Create the first one ")}}function Bke(e,t){e&1&&(D(0,"div"),ce(1," There are no templates in this subcategory "),F())}function jke(e,t){if(e&1){let n=pt();D(0,"li",25)(1,"div",26),Xe("click",function(){let i=ze(n).$implicit,o=me(6);return Re(o.openViewTemplateModal(i.id))}),D(2,"div",27)(3,"span",28),Ct(),D(4,"svg",29),xe(5,"path",30),F()()(),Yn(),D(6,"div",31)(7,"div")(8,"span",32),ce(9),F(),D(10,"p",33),ce(11),F()()()(),D(12,"div",11)(13,"div",34),ce(14,"click to view"),F()()()}if(e&2){let n=t.$implicit;$(9),Wt(" ",n.title," "),$(2),Yt(n.description)}}function Vke(e,t){if(e&1&&(D(0,"ul",23),Je(1,jke,15,2,"li",24),F()),e&2){let n=me().$implicit;$(),oe("ngForOf",n.templates)}}function Hke(e,t){if(e&1){let n=pt();D(0,"nz-collapse-panel",20),Je(1,Bke,2,0,"div",7)(2,Vke,2,1,"ul",21),D(3,"div",15)(4,"afc-button",22),Xe("buttonClick",function(){let i=ze(n).$implicit,o=me(4);return Re(o.addTemplateModal(i.id))}),F()()()}if(e&2){let n=t.$implicit;oe("nzHeader",n.name),$(),oe("ngIf",n.templates.length==0),$(),oe("ngIf",n.templates.length!=0),$(2),br("primary"),oe("size","sm")("label","Add Template")("disableButton",!1)("loading",!1)}}function Wke(e,t){if(e&1&&(D(0,"div")(1,"nz-collapse",18),Je(2,Hke,5,9,"nz-collapse-panel",19),F()()),e&2){let n=me(3);$(2),oe("ngForOf",n.category.subCategories)}}function qke(e,t){if(e&1&&(D(0,"div"),Je(1,Wke,3,1,"div",7),F()),e&2){let n=me(2);$(),oe("ngIf",!n.createSubcategoryFormToggle)}}function Uke(e,t){if(e&1){let n=pt();D(0,"div",35)(1,"h5"),ce(2,"Add Subcategory"),F(),D(3,"form",36)(4,"nz-form-item"),xe(5,"input",37),F(),D(6,"nz-form-item"),xe(7,"textarea",38),F(),D(8,"div",39)(9,"afc-button",12),Xe("buttonClick",function(){ze(n);let i=me(2);return Re(i.cancelCreateSubcategory())}),F(),D(10,"afc-button",12),Xe("buttonClick",function(){ze(n);let i=me(2);return Re(i.submitCreateSubcategory())}),F()()()()}if(e&2){let n=me(2);$(3),oe("formGroup",n.createSubcategoryForm),$(6),br("cancel"),oe("label","Cancel")("disableButton",!1)("loading",!1),$(),br("primary"),oe("label","Submit")("disableButton",n.createSubcategoryForm.invalid)("loading",n.createSubcategoryLoader)}}function Gke(e,t){if(e&1){let n=pt();D(0,"div")(1,"div",10)(2,"div",11)(3,"h5"),ce(4,"Subcategories"),F()(),D(5,"div")(6,"afc-button",12),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.createSubcategory())}),F()()(),Je(7,Fke,4,2,"div",13)(8,qke,2,1,"div",7)(9,Uke,11,11,"div",14),F()}if(e&2){let n=me();$(6),br("secondary"),oe("label","Add Subcategory")("disableButton",!1)("loading",!1),$(),oe("ngIf",n.category.subCategories.length==0&&!n.createSubcategoryFormToggle),$(),oe("ngIf",n.category.subCategories.length!=0),$(),oe("ngIf",n.createSubcategoryFormToggle)}}function $ke(e,t){}function Yke(e,t){if(e&1){let n=pt();D(0,"app-create-template",40),Xe("onCreateTemplateSuccess",function(i){ze(n);let o=me();return Re(o.onCreateTemplateSuccess(i))}),F()}if(e&2){let n=me();oe("subcategoryId",n.selectedSubcategoryId)}}function Xke(e,t){}function Kke(e,t){}function Zke(e,t){if(e&1&&(D(0,"div")(1,"div",41)(2,"h1"),ce(3),F()(),D(4,"div",41)(5,"p"),ce(6),F()(),xe(7,"hr"),D(8,"div",15),xe(9,"app-form-view",42),F()()),e&2){let n=me(2);$(3),Yt(n.template.title),$(3),Yt(n.template.description),$(3),oe("blocks",n.template.form.blocks)}}function Jke(e,t){if(e&1&&Je(0,Zke,10,3,"div",7),e&2){let n=me();oe("ngIf",n.template)}}function Qke(e,t){}var BQ=(()=>{let t=class t{createSubcategory(){this.createSubcategoryFormToggle=!0}cancelCreateSubcategory(){this.createSubcategoryFormToggle=!1}submitCreateSubcategory(){this.createSubcategoryLoader=!0,console.log("Submit"),this.categoriesService.createSubcategory(this.createSubcategoryForm.value)}constructor(r,i,o,a,s){this.router=r,this.route=i,this.categoriesService=o,this.templatesService=a,this.notificationService=s,this.categoryId=null,this.category=null,this.getCategoryLoader=!1,this.template=null,this.getTemplateLoader=!1,this.createSubcategoryFormToggle=!1,this.createSubcategoryLoader=!1,this.createSubcategoryForm=new Md({name:new ic("",[Ol.required,Ol.minLength(3)]),description:new ic("",[Ol.required,Ol.minLength(3)]),category:new ic({},[])}),this.subs=new ci,this.isVisible=!1,this.isViewTemplateModalVisible=!1}ngOnInit(){this.route.paramMap.subscribe(r=>{this.categoryId=r.get("id"),this.getCategory(this.categoryId)}),this.subs.add=this.categoriesService.createSubcategoryResponse$.subscribe(r=>{this.onCreateSubcategory(r)}),this.subs.add=this.categoriesService.getCategoryResponse$.subscribe(r=>{this.onGetCategory(r)}),this.subs.add=this.templatesService.getTemplateResponse$.subscribe(r=>{this.onGetTemplate(r)})}onGetTemplate(r){r.success?(console.log(r),this.template=r.data):this.notificationService.create("error","Error",r.message),this.getTemplateLoader=!1}onGetCategory(r){r.success?(this.category=r.data,this.createSubcategoryForm.controls.category.setValue({id:this.category.id,name:this.category.name})):this.notificationService.create("error","Error",r.message),this.getCategoryLoader=!1}onCreateSubcategory(r){r.success?(this.notificationService.create("success","Success","Subcategory created successfully"),this.updateSubcategory(),this.createSubcategoryLoader=!1,this.createSubcategoryFormToggle=!1):this.notificationService.create("error","Error","Failed to create subcategory")}updateSubcategory(){this.getCategory(this.categoryId)}onCreateTemplateSuccess(r){this.updateSubcategory(),this.handleCancel()}addTemplateModal(r){this.selectedSubcategoryId=r,this.showModal()}getCategory(r){this.getCategoryLoader=!0,this.categoriesService.getCategory(r)}showModal(){this.isVisible=!0}handleCancel(){this.isVisible=!1}openViewTemplateModal(r){this.getTemplate(r),this.isViewTemplateModalVisible=!0}handleViewTemplateModalCancel(){this.isViewTemplateModalVisible=!1}getTemplate(r){this.getTemplateLoader=!0,this.templatesService.getTemplate(r)}ngOnDestroy(){this.subs.dispose()}};t.\u0275fac=function(i){return new(i||t)(ht(yb),ht(Qf),ht(e0),ht($1),ht(Zi))},t.\u0275cmp=tn({type:t,selectors:[["app-view-category"]],decls:24,vars:16,consts:[["modalTitle",""],["modalContent",""],["modalFooter",""],["viewTemplateModalTitle",""],["viewTemplateModalContent",""],["viewTemplateModalFooter",""],["routerLink","../../"],[4,"ngIf"],["nzWidth","90vw","nzDraggable","",3,"nzVisibleChange","nzOnCancel","nzStyle","nzVisible","nzTitle","nzContent","nzFooter"],[3,"nzActive"],[1,"mt-4","d-flex","justify-content-between"],[1,"d-flex","align-items-center"],[3,"buttonClick","label","disableButton","loading"],["class","mt-3",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"mt-3"],[3,"nzNotFoundContent"],[2,"text-align","center"],["nzGhost",""],["nzActive","false",3,"nzHeader",4,"ngFor","ngForOf"],["nzActive","false",3,"nzHeader"],["class","authorise-ul",4,"ngIf"],[3,"buttonClick","size","label","disableButton","loading"],[1,"authorise-ul"],["class","authorise-li",4,"ngFor","ngForOf"],[1,"authorise-li"],[1,"d-flex",3,"click"],[1,"authorise-li-icon"],[1,"authorise-file"],["xmlns","http://www.w3.org/2000/svg","width","3em","height","3em","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12M11 7h6M7 7h1m-1 5h1m-1 5h1m3-5h6m-6 5h6","color","currentColor"],[1,"authorise-li-text"],[2,"font-size","16px","font-weight","600"],[2,"margin","0px"],[1,"authorise-li-actions"],[1,"mt-5"],[3,"formGroup"],["formControlName","name","nz-input","","placeholder","Name"],["formControlName","description","rows","4","nz-input","","placeholder","Description"],[1,"d-flex","justify-content-between"],[3,"onCreateTemplateSuccess","subcategoryId"],[1,"d-flex","justify-content-center"],[3,"blocks"]],template:function(i,o){if(i&1){let a=pt();D(0,"nz-breadcrumb")(1,"nz-breadcrumb-item",6),ce(2,"Categories"),F(),D(3,"nz-breadcrumb-item"),ce(4,"View"),F(),D(5,"nz-breadcrumb-item"),Je(6,Dke,2,1,"span",7)(7,zke,2,0,"span",7),F()(),Je(8,Rke,2,1,"div",7)(9,Gke,10,8,"div",7),D(10,"nz-modal",8),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isVisible,l)||(o.isVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleCancel())}),Je(11,$ke,0,0,"ng-template",null,0,dn)(13,Yke,1,1,"ng-template",null,1,dn)(15,Xke,0,0,"ng-template",null,2,dn),F(),D(17,"nz-modal",8),Gt("nzVisibleChange",function(l){return ze(a),Ut(o.isViewTemplateModalVisible,l)||(o.isViewTemplateModalVisible=l),Re(l)}),Xe("nzOnCancel",function(){return ze(a),Re(o.handleViewTemplateModalCancel())}),Je(18,Kke,0,0,"ng-template",null,3,dn)(20,Jke,1,1,"ng-template",null,4,dn)(22,Qke,0,0,"ng-template",null,5,dn),F()}if(i&2){let a=bn(12),s=bn(14),l=bn(16),c=bn(19),u=bn(21),f=bn(23);$(6),oe("ngIf",!o.getCategoryLoader&&o.category),$(),oe("ngIf",o.getCategoryLoader&&!o.category),$(),oe("ngIf",o.getCategoryLoader&&!o.category),$(),oe("ngIf",!o.getCategoryLoader&&o.category),$(),oe("nzStyle",Yi(14,FQ)),qt("nzVisible",o.isVisible),oe("nzTitle",a)("nzContent",s)("nzFooter",l),$(7),oe("nzStyle",Yi(15,FQ)),qt("nzVisible",o.isViewTemplateModalVisible),oe("nzTitle",c)("nzContent",u)("nzFooter",f)}},dependencies:[Xi,Ki,ei,Ji,qr,Wr,ss,Ml,kl,Wc,ls,as,Nb,Pb,tp,Cl,yo,ep,n0,r0,mg,bM],styles:[".page-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;transition-duration:.8s;overflow-y:scroll}.authorise-ul[_ngcontent-%COMP%]{padding:0}.authorise-li[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:space-between;padding:10px;margin:5px 0;border-radius:5px;transition-duration:.5s}.authorise-li-actions[_ngcontent-%COMP%]{margin-right:10px;opacity:0;transition-duration:.6s;font-size:12px}.authorise-li[_ngcontent-%COMP%]:hover   .authorise-li-actions[_ngcontent-%COMP%]{opacity:1}.authorise-li[_ngcontent-%COMP%]:hover{background:#e6e6e64d;cursor:pointer}.authorise-folder[_ngcontent-%COMP%]{color:#fac652}.authorise-li-icon[_ngcontent-%COMP%]{font-size:10px}.authorise-li-text[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:20px}.authorise-file[_ngcontent-%COMP%]{color:#323232}.authorise-modal-icon-header[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-left:10px}"]});let e=t;return e})();var jQ=(()=>{let t=class t{constructor(r){this.routingService=r}onBack(){this.routingService.navigateByUrl("authorise/admin")}};t.\u0275fac=function(i){return new(i||t)(ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-categories-admin"]],decls:18,vars:0,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to view all admin functions",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../../workspace"],["nz-icon","","nzType","home"],["routerLink","../"],[1,"container-fluid"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"flex-grow-1"],[1,"page-card","h-100"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"div")(2,"nav",1)(3,"nz-page-header",2),Xe("nzBack",function(){return o.onBack()}),D(4,"nz-breadcrumb",3)(5,"nz-breadcrumb-item",4),xe(6,"span",5),F(),D(7,"nz-breadcrumb-item")(8,"a",6),ce(9,"Administration"),F()(),D(10,"nz-breadcrumb-item"),ce(11,"Categories"),F()()(),D(12,"div",7)(13,"div",8),xe(14,"ul",9),F()()()(),D(15,"div",10)(16,"div",11),xe(17,"router-outlet"),F()()())},dependencies:[rs,ei,Kn,qr,Wr,Xn,ui,wi],styles:[".page-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px;margin:0 10px;transition-duration:.8s;overflow-y:scroll}.authorise-ul[_ngcontent-%COMP%]{padding:0}.authorise-li[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:space-between;padding:10px;margin:5px 0;border-radius:5px;transition-duration:.5s}.authorise-li-actions[_ngcontent-%COMP%]{margin-right:10px;opacity:0;transition-duration:.6s;font-size:12px}.authorise-li[_ngcontent-%COMP%]:hover   .authorise-li-actions[_ngcontent-%COMP%]{opacity:1}.authorise-li[_ngcontent-%COMP%]:hover{background:#e6e6e64d;cursor:pointer}.authorise-folder[_ngcontent-%COMP%]{color:#fac652}.authorise-li-icon[_ngcontent-%COMP%]{font-size:10px}.authorise-li-text[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:20px}.authorise-file[_ngcontent-%COMP%]{color:#323232}.authorise-modal-icon-header[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-left:10px}"]});let e=t;return e})();var VQ=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-view-template"]],decls:2,vars:0,template:function(i,o){i&1&&(D(0,"p"),ce(1,"view-template works!"),F())}});let e=t;return e})();var HQ=(()=>{let t=class t{constructor(r){this.routingService=r}createTemplate(){this.routingService.navigateByUrl("authorise/admin/templates/create")}onBack(){this.routingService.navigateByUrl("authorise/workspace")}};t.\u0275fac=function(i){return new(i||t)(ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-all-templates"]],decls:11,vars:5,consts:[[1,"d-flex","justify-content-between","mt-3"],[3,"buttonClick","label","disableButton","loading"]],template:function(i,o){i&1&&(D(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),ce(2,"Templates"),F(),D(3,"nz-breadcrumb-item"),ce(4,"All"),F()(),D(5,"div",0)(6,"div")(7,"h5"),ce(8,"Templates"),F()(),D(9,"div")(10,"afc-button",1),Xe("buttonClick",function(){return o.createTemplate()}),F()()()),i&2&&($(10),br("gradient"),oe("label","Create New Template")("disableButton",!1)("loading",!1))},dependencies:[Ji,qr,Wr],styles:[".navbar[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-lg[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-md[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-sm[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xl[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xxl[_ngcontent-%COMP%]{justify-content:end}"]});let e=t;return e})();var WQ=(()=>{let t=class t{constructor(r){this.routingService=r}onBack(){this.routingService.navigateByUrl("authorise/workspace")}newIssue(){}};t.\u0275fac=function(i){return new(i||t)(ht(cr))},t.\u0275cmp=tn({type:t,selectors:[["app-self-service-admin"]],decls:18,vars:5,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-expand-lg"],["nzBackIcon","","nzTitle","Go Back","nzSubtitle","Navigate to your workspace",1,"site-page-header",3,"nzBack"],["nz-page-header-breadcrumb",""],["routerLink","../../workspace"],["nz-icon","","nzType","home"],[1,"container-fluid","remove-padding"],[1,""],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"d-flex"],[1,"ml-5"],[3,"buttonClick","label","disableButton","loading"],[1,"flex-grow-1"],[1,"authorise-section-card","h-100"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"div")(2,"nav",1)(3,"nz-page-header",2),Xe("nzBack",function(){return o.onBack()}),D(4,"nz-breadcrumb",3)(5,"nz-breadcrumb-item",4),xe(6,"span",5),F(),D(7,"nz-breadcrumb-item"),ce(8,"Self Service Administration"),F()()(),D(9,"div",6)(10,"div",7),xe(11,"ul",8),D(12,"div",9)(13,"div",10)(14,"afc-button",11),Xe("buttonClick",function(){return o.newIssue()}),F()()()()()()(),D(15,"div",12)(16,"div",13),xe(17,"router-outlet"),F()()()),i&2&&($(14),br("gradient"),oe("label","Open New Issue")("disableButton",!1)("loading",!1))},dependencies:[rs,ei,Ji,Kn,qr,Wr,Xn,ui,wi],styles:['.authorise-workspace-table-header[_ngcontent-%COMP%]{text-transform:uppercase;background:#eaedf0;border-radius:4px;display:flex;align-items:center;padding:15px 10px;font-weight:900;color:#91999c;font-size:14px;margin:0 10px}.authorise-workspace-table-data[_ngcontent-%COMP%]{margin:10px 10px 0;background:#fff;border-radius:4px;display:flex;align-items:center;padding:5px;font-weight:600;color:#677074;font-size:13px;border:1px solid transparent;transition-duration:.5s}.authorise-workspace-table-data[_ngcontent-%COMP%]:hover{border:1px solid #d7f2de;box-shadow:0 0 2rem #3347501a;cursor:pointer}.ellipse-border[_ngcontent-%COMP%]{position:relative;padding-left:10px}.ellipse-border[_ngcontent-%COMP%]:before{display:block;content:"";position:absolute;top:0;left:0;background-image:linear-gradient(-180deg,#dee2e600,#dee2e6 49%,#dee2e600);width:1px;height:100%}.workspace-ellipse[_ngcontent-%COMP%]:hover{cursor:pointer}.document-name-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.document-name-icon[_ngcontent-%COMP%]{margin-right:5px}.authorise-workspace-table-p[_ngcontent-%COMP%]{margin:0}.navbar[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-lg[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-md[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-sm[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xl[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-xxl[_ngcontent-%COMP%]{justify-content:end}.authorise-section-card[_ngcontent-%COMP%]{background-color:#fff9;box-shadow:0 0 2rem #33475005;padding:1rem;border-radius:8px}']});let e=t;return e})();var qQ=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-tickets"]],decls:2,vars:0,consts:[[1,"h-100"]],template:function(i,o){i&1&&(D(0,"div",0),xe(1,"router-outlet"),F())},dependencies:[rs]});let e=t;return e})();var SM=(()=>{let t=class t{constructor(r){this.http=r,this.getTickets$=new Xr,this.getTicket$=new Xr,this.submitForApproval$=new Xr}getTickets(){this.http.post("http://192.168.1.106:7000/self-service/tickets",{}).subscribe(r=>{this.getTickets$.next(r)})}getTicket(r,i){this.http.post("http://192.168.1.106:7000/self-service/query/ticket/"+r+"?service="+i,{}).subscribe(o=>{this.getTicket$.next(o)})}submitForApproval(r,i){this.http.post("http://192.168.1.106:7000/self-service/submit-for-approval?service="+i,r).subscribe(o=>{this.submitForApproval$.next(o)})}};t.\u0275fac=function(i){return new(i||t)(_l(wl))},t.\u0275prov=Rs({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var eEe=()=>[5,10,20];function tEe(e,t){e&1&&(D(0,"button",16),xe(1,"span",17),F())}function nEe(e,t){if(e&1){let n=pt();D(0,"tr")(1,"td"),ce(2),F(),D(3,"td"),ce(4),F(),D(5,"td"),ce(6),F(),D(7,"td"),ce(8),F(),D(9,"td")(10,"a",18),Xe("click",function(){let i=ze(n).$implicit,o=me(2);return Re(o.viewTicket(i))}),ce(11,"View"),F()()()}if(e&2){let n=t.$implicit;$(2),Yt(n.ticketId),$(2),Yt(n.service),$(2),Yt(n.status),$(2),Yt(n.message)}}function rEe(e,t){if(e&1&&(D(0,"nz-table",14,1)(2,"thead")(3,"tr")(4,"th"),ce(5,"Ticket ID"),F(),D(6,"th"),ce(7,"Service"),F(),D(8,"th"),ce(9,"Status"),F(),D(10,"th"),ce(11,"Message"),F(),xe(12,"th"),F()(),D(13,"tbody"),gI(14,nEe,12,4,"tr",null,mI),F()()),e&2){let n=bn(1),r=me();oe("nzData",r.tickets)("nzTotal",r.tickets.length)("nzPageSizeOptions",Yi(3,eEe)),$(14),vI(n.data)}}function iEe(e,t){e&1&&xe(0,"nz-skeleton",15),e&2&&oe("nzActive",!0)}var GQ=(()=>{let t=class t{constructor(r,i,o,a){this.selfService=r,this.notificationService=i,this.routingService=o,this.cookiesService=a,this.tickets=[],this.user=this.cookiesService.getCookie("user"),this.subs=new ci}ngOnInit(){this.loadTickets(),console.log(this.user),this.subs.add=this.selfService.getTickets$.subscribe(r=>{this.onGetTickets(r)})}onGetTickets(r){console.log(`\u{1F514} FETCH TICKETS RESPONSE: 
`,r),r.success?this.tickets=r.data:this.notificationService.create("error","Error","Failed to load tickets")}viewTicket(r){this.routingService.navigateByUrl("authorise/self-service-admin/tickets/view/"+r.ticketId+"?service="+r.service)}ngOnDestroy(){this.subs.dispose()}loadTickets(){this.selfService.getTickets()}};t.\u0275fac=function(i){return new(i||t)(ht(SM),ht(Zi),ht(cr),ht(Sl))},t.\u0275cmp=tn({type:t,selectors:[["app-all-tickets"]],decls:18,vars:3,consts:[["suffixIconButton",""],["basicTable",""],[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-expand-lg","remove-padding",2,"padding","0"],[1,"container-fluid","remove-padding"],[1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"d-flex"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","Search Ticket",2,"background-color","white"],[1,"flex-grow-1",2,"padding-top","1rem"],["nzShowPagination","","nzShowSizeChanger","",3,"nzData","nzTotal","nzPageSizeOptions"],[3,"nzActive"],["nz-button","","nzType","primary","nzSearch",""],["nz-icon","","nzType","search"],[3,"click"]],template:function(i,o){if(i&1&&(D(0,"div",2)(1,"div")(2,"nav",3)(3,"div",4)(4,"a",5),ce(5,"Tickets"),F(),D(6,"button",6),xe(7,"span",7),F(),D(8,"div",8),xe(9,"ul",9),D(10,"div",10)(11,"nz-input-group",11),xe(12,"input",12),F(),Je(13,tEe,2,0,"ng-template",null,0,dn),F()()()()(),D(15,"div",13),Je(16,rEe,16,4,"nz-table",14)(17,iEe,1,1,"nz-skeleton",15),F()()),i&2){let a=bn(14);$(11),oe("nzAddOnAfter",a),$(5),Fs(o.tickets?16:-1),$(),Fs(o.tickets?-1:17)}},dependencies:[Hc,Kn,Vc,Xn,kl,HI,BI,jI,qI,VI,WI,as,i0]});let e=t;return e})();function oEe(e,t){if(e&1){let n=pt();D(0,"button",13),Xe("click",function(){ze(n);let i=me();return Re(i.toggleEdit())}),xe(1,"span",14),ce(2),F()}if(e&2){let n=me();oe("nzTooltipTitle",n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null?"Edit the form before submission":"You can no longer edit this form")("disabled",!(n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null))("nzLoading",n.submitForApprovalLoader),$(),oe("nzType",n.editToggler?"eye":"edit"),$(),Wt(" ",n.editToggler?"View Record":"Edit Record"," ")}}function aEe(e,t){if(e&1){let n=pt();D(0,"button",46),Xe("click",function(){ze(n);let i=me(4);return Re(i.submitForApproval())}),xe(1,"span",47),ce(2," Submit for Approval "),F()}if(e&2){let n=me(4);oe("disabled",!(n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null))("nzLoading",n.submitForApprovalLoader)}}function sEe(e,t){if(e&1){let n=pt();D(0,"div")(1,"nz-list",35)(2,"nz-list-item")(3,"span",36),ce(4,"FULL NAME"),F(),ce(5),F(),D(6,"nz-list-item")(7,"span",36),ce(8,"ID NUMBER"),F(),ce(9),F(),D(10,"nz-list-item")(11,"span",36),ce(12,"GENDER"),F(),ce(13),F(),D(14,"nz-list-item")(15,"span",36),ce(16,"DOB"),F(),ce(17),F(),D(18,"nz-list-item")(19,"span",36),ce(20,"PRIMARY NATIONALITY"),F(),ce(21),F(),D(22,"nz-list-item")(23,"span",36),ce(24,"MARITAL STATUS"),F(),ce(25),F()(),D(26,"nz-list",37)(27,"nz-list-item")(28,"span",36),ce(29,"MOBILE NUMBER"),F(),ce(30),F(),D(31,"nz-list-item")(32,"span",36),ce(33,"EMAIL ADDRESS"),F(),ce(34),F(),D(35,"nz-list-item")(36,"span",36),ce(37,"ADDRESS"),F(),ce(38),F(),D(39,"nz-list-item")(40,"span",36),ce(41,"ADDRESS TYPE"),F(),ce(42),F(),D(43,"nz-list-item")(44,"span",36),ce(45,"STAYING SINCE"),F(),ce(46),F(),D(47,"nz-list-item")(48,"span",36),ce(49,"BRANCH"),F(),ce(50),F()(),D(51,"nz-list",38)(52,"nz-list-item")(53,"span",36),ce(54,"LINE OF ACTIVITY"),F(),ce(55),F(),D(56,"nz-list-item")(57,"span",36),ce(58,"OCCUPATION"),F(),ce(59),F(),D(60,"nz-list-item")(61,"span",36),ce(62,"ANNUAL INCOME SLAB"),F(),ce(63),F()(),D(64,"nz-list",39)(65,"nz-list-item")(66,"span",36),ce(67,"ID"),F(),D(68,"div",8)(69,"button",40),Xe("click",function(){ze(n);let i=me(3);return Re(i.openFile(i.record.documentInfo.id))}),xe(70,"span",41),ce(71," Open File "),F(),D(72,"button",42),Xe("click",function(){ze(n);let i=me(3);return Re(i.downloadFile(i.record.documentInfo.id))}),xe(73,"span",43),ce(74," Download File "),F()()(),D(75,"nz-list-item")(76,"span",36),ce(77,"PROFILE PICTURE"),F(),D(78,"div",8)(79,"button",40),Xe("click",function(){ze(n);let i=me(3);return Re(i.openFile(i.record.documentInfo.profile))}),xe(80,"span",41),ce(81," Open File "),F(),D(82,"button",42),Xe("click",function(){ze(n);let i=me(3);return Re(i.downloadFile(i.record.documentInfo.profile))}),xe(83,"span",43),ce(84," Download File "),F()()(),D(85,"nz-list-item")(86,"span",36),ce(87,"SIGNATURE"),F(),D(88,"div",8)(89,"button",40),Xe("click",function(){ze(n);let i=me(3);return Re(i.openFile(i.record.documentInfo.signature))}),xe(90,"span",41),ce(91," Open File "),F(),D(92,"button",42),Xe("click",function(){ze(n);let i=me(3);return Re(i.downloadFile(i.record.documentInfo.signature))}),xe(93,"span",43),ce(94," Download File "),F()()(),D(95,"nz-list-item")(96,"span",36),ce(97,"PROOF OF RES"),F(),D(98,"div",8)(99,"button",40),Xe("click",function(){ze(n);let i=me(3);return Re(i.openFile(i.record.documentInfo.proofOfRes))}),xe(100,"span",41),ce(101," Open File "),F(),D(102,"button",42),Xe("click",function(){ze(n);let i=me(3);return Re(i.downloadFile(i.record.documentInfo.proofOfRes))}),xe(103,"span",43),ce(104," Download File "),F()()(),D(105,"nz-list-item")(106,"span",36),ce(107,"OTHER DOCUMENTS"),F(),D(108,"div",8)(109,"button",40),Xe("click",function(){ze(n);let i=me(3);return Re(i.openFile(i.record.documentInfo.otherDocuments))}),xe(110,"span",41),ce(111," Open File "),F(),D(112,"button",42),Xe("click",function(){ze(n);let i=me(3);return Re(i.downloadFile(i.record.documentInfo.otherDocuments))}),xe(113,"span",43),ce(114," Download File "),F()()()(),D(115,"div",44),Je(116,aEe,3,2,"button",45),F()()}if(e&2){let n=me(3);$(5),QM(" ",n.record.personalInfo.title," ",n.record.personalInfo.firstName," ",n.record.personalInfo.middleName!=""?n.record.personalInfo.middleName:""," ",n.record.personalInfo.lastName," "),$(4),Wt(" ",n.record.personalInfo.pidNumber," "),$(4),Wt(" ",n.record.personalInfo.gender," "),$(4),Wt(" ",n.record.personalInfo.dateOfBirth," "),$(4),Wt(" ",n.record.personalInfo.primaryNationality," "),$(4),Wt(" ",n.record.personalInfo.maritalStatus," "),$(5),Wt(" ",n.record.contactInfo.mobileNumber," "),$(4),Wt(" ",n.record.contactInfo.emailAddress," "),$(4),QM(" ",n.record.contactInfo.addressLine1," ",n.record.contactInfo.streetAddress," ",n.record.contactInfo.city," ",n.record.contactInfo.country," "),$(4),Wt(" ",n.record.contactInfo.addressType," "),$(4),Wt(" ",n.record.contactInfo.stayingSince," "),$(4),Wt(" ",n.record.contactInfo.branch," "),$(5),Wt(" ",n.record.employmentInfo.lineOfActivity," "),$(4),Wt(" ",n.record.employmentInfo.occupation," "),$(4),Wt(" ",n.record.employmentInfo.annualIncomeSlab," "),$(53),oe("ngIf",n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null)}}function lEe(e,t){if(e&1){let n=pt();D(0,"div"),xe(1,"nz-page-header",48),D(2,"nz-list",49)(3,"nz-list-item")(4,"span",36),ce(5,"Name"),F(),ce(6),F(),D(7,"nz-list-item")(8,"span",36),ce(9,"Account"),F(),ce(10),F(),D(11,"nz-list-item")(12,"span",36),ce(13,"Max Qualifying Amount"),F(),ce(14),Ea(15,"number"),F(),D(16,"nz-list-item")(17,"span",36),ce(18,"FCB"),F(),D(19,"nz-tag",50),ce(20),F()(),D(21,"nz-list-item")(22,"span",36),ce(23,"FCB Score"),F(),ce(24),F(),D(25,"nz-list-item")(26,"span",36),ce(27,"Applied Amount"),F(),ce(28),F()(),D(29,"div",44)(30,"button",46),Xe("click",function(){ze(n);let i=me(3);return Re(i.submitForApproval())}),xe(31,"span",47),ce(32," Submit for Approval "),F()()()}if(e&2){let n=me(3);$(6),Wt("",n.record.enquiryResult.additionalData.CUSTOMER_NAME," "),$(4),Km("",n.record.additionalData.currency," ",n.record.additionalData.accountNumber," "),$(4),Km("",n.record.additionalData.currency," ",ns(15,11,n.record.enquiryResult.maxQualifyingAmount_L,"1.2-2")," "),$(5),oe("nzBordered",!1),$(),Yt(n.record.enquiryResult.fcbStatus),$(4),Wt(" ",n.record.enquiryResult.fcbScore," "),$(4),Wt(" ",n.record.additionalData.amount," "),$(2),oe("disabled",!(n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null))("nzLoading",n.submitForApprovalLoader)}}function cEe(e,t){if(e&1&&Je(0,sEe,117,22,"div",34)(1,lEe,33,14,"div",34),e&2){let n=me(2);oe("ngIf",n.ticket.service=="account-opening"),$(),oe("ngIf",n.ticket.service=="loans")}}function uEe(e,t){e&1&&xe(0,"div")}function fEe(e,t){if(e&1){let n=pt();D(0,"div",11)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"div",19),xe(6,"img",20),F(),D(7,"div",21),ce(8," Ticket "),F()(),D(9,"div",22),ce(10),F(),D(11,"div",23)(12,"p",24),ce(13,"date created"),F(),D(14,"p",25),ce(15),F()(),D(16,"div",23)(17,"p",24),ce(18,"service"),F(),D(19,"p",25),ce(20),F()(),D(21,"div",26)(22,"p",24),ce(23,"status"),F(),D(24,"p",25),ce(25),F()()(),D(26,"div",27)(27,"div",28),xe(28,"img",29),F(),D(29,"div",30)(30,"afc-button",31),Xe("buttonClick",function(){ze(n);let i=me();return Re(i.openAuthoriseDocument(i.ticket.docApprovalReference))}),F()()()()(),D(31,"div",32)(32,"div",33)(33,"div",28)(34,"h3"),ce(35),F()(),Je(36,cEe,2,2)(37,uEe,1,0,"div"),F()()()}if(e&2){let n=me();$(10),Wt(" ",n.ticket.ticketId," "),$(5),Yt(n.ticket.createdAt),$(5),Yt(n.ticket.service),$(5),Km("",n.ticket.status," - ",n.ticket.message,""),$(5),br("gradient"),oe("nzTooltipTitle",n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null?"To view the Flexi Doc, first submit the record for approval":"View Flexi Doc to track approval progress")("size","sm")("label","View Document")("disableButton",n.ticket.docApprovalReference==""||n.ticket.docApprovalReference==null)("loading",!1),$(5),Yt(n.ticket.service=="account-opening"?"Account Opening Form":"Loan Application Form"),$(),Fs(n.editToggler?-1:36),$(),Fs(n.editToggler?37:-1)}}function pEe(e,t){e&1&&xe(0,"nz-skeleton",12),e&2&&oe("nzActive",!0)}var $Q=(()=>{let t=class t{constructor(r,i,o,a,s,l){this.route=r,this.selfService=i,this.notificationService=o,this.routingService=a,this.cdnService=s,this.cookiesService=l,this.user=this.cookiesService.getCookie("user"),this.submitForApprovalLoader=!1,this.downloadFileLoader=!1,this.editToggler=!1,this.subs=new ci}ngOnInit(){this.route.params.subscribe(r=>{this.route.queryParams.subscribe(i=>{let o=i.service;console.log(o),this.getTicket(r.id,o)})}),this.subs.add=this.selfService.getTicket$.subscribe(r=>{this.onGetTicket(r)}),this.subs.add=this.cdnService.downloadResponse$.subscribe(r=>{this.onDownloadFile(r)}),this.subs.add=this.cdnService.openResponse$.subscribe(r=>{this.onOpenFile(r)}),this.subs.add=this.selfService.submitForApproval$.subscribe(r=>{this.onSubmitForApproval(r)})}onGetTicket(r){console.log(`\u{1F514} FETCH TICKET RESPONSE: 
`,r),r.success?(this.ticket=r.data.ticket,this.record=r.data.record):this.notificationService.create("error","Error","Failed to load ticket")}onSubmitForApproval(r){console.log(`\u{1F514} SUBMIT FOR APPROVAL RESPONSE: 
`,r),r.success?(this.notificationService.create("success","Success",r.message),this.getTicket(this.ticket.ticketId,this.ticket.service)):this.notificationService.create("error","Error",r.message),this.submitForApprovalLoader=!1}onBack(){this.routingService.navigateByUrl("authorise/self-service-admin")}submitForApproval(){this.submitForApprovalLoader=!0,this.selfService.submitForApproval({id:this.ticket.ticketId,actioner:this.user.email},this.ticket.service)}downloadFile(r){this.downloadFileLoader=!0,this.fileName=r,this.cdnService.downloadFile(r)}openFile(r){this.downloadFileLoader=!0,this.fileName=r,this.cdnService.openFile(r)}onOpenFile(r){console.log(r);let i=new Blob([r.body],{type:r.body.type}),o=URL.createObjectURL(i);window.open(o,"_blank"),setTimeout(()=>{URL.revokeObjectURL(o)},5e3),this.downloadFileLoader=!1}onDownloadFile(r){console.log(r);let i=new Blob([r.body],{type:r.body.type}),o=r.headers.get("Content-Disposition"),a=this.fileName;if(o&&o.indexOf("attachment")!==-1){let c=/filename="([^"]*)"/.exec(o);c&&c[1]&&(a=c[1])}let s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.target="_blank",l.download=a,l.click(),setTimeout(()=>{URL.revokeObjectURL(s)},1e3),this.downloadFileLoader=!1}ngOnDestroy(){this.subs.dispose()}getTicket(r,i){this.selfService.getTicket(r,i)}openAuthoriseDocument(r){this.routingService.navigateByUrl("authorise/documents/view/"+r)}toggleEdit(){this.editToggler=!this.editToggler}};t.\u0275fac=function(i){return new(i||t)(ht(Qf),ht(SM),ht(Zi),ht(cr),ht(Y1),ht(Sl))},t.\u0275cmp=tn({type:t,selectors:[["app-view-ticket"]],decls:14,vars:4,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-expand-lg","remove-padding",2,"padding","0"],[1,"container-fluid","remove-padding"],["nzBackIcon","","nzTitle","View Ticket",1,"site-page-header",3,"nzBack","nzSubtitle"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"d-flex"],["nz-tooltip","","nz-button","","nzType","primary",1,"ms-3",3,"nzTooltipTitle","disabled","nzLoading"],[1,"flex-grow-1",2,"padding-top","1rem"],[1,"row","h-100"],[3,"nzActive"],["nz-tooltip","","nz-button","","nzType","primary",1,"ms-3",3,"click","nzTooltipTitle","disabled","nzLoading"],["nz-icon","",3,"nzType"],[1,"col-md-3"],[1,"ticket-container"],[1,"ticket-top"],[1,"row","mt-3"],[1,"col-md-6"],["src","/assets/images/brand/logo-full.png","alt","",1,"w-100",2,"max-width","80px"],[1,"col-md-6","d-flex","align-items-center","justify-content-end",2,"font-size","24px","font-weight","600"],[1,"mt-3","ticket-id-banner"],[1,"mt-3"],[1,"ticket-heading"],[1,"ticket-details"],[1,"mt-3","mb-3"],[1,"ticket-bottom"],[1,"d-flex","justify-content-center"],["src","/assets/images/stock-images/barcode.png","alt","",1,"barcode"],[1,"mt-3","mb-3","d-flex","justify-content-center"],["nz-tooltip","",3,"buttonClick","nzTooltipTitle","size","label","disableButton","loading"],[1,"col-md-9"],[1,"authorise-document-a4-page"],[4,"ngIf"],["nzBordered","","nzHeader","Personal Information",1,"mt-3"],["nz-typography",""],["nzBordered","","nzHeader","Contact Information",1,"mt-3"],["nzBordered","","nzHeader","Employment Information",1,"mt-3"],["nzBordered","","nzHeader","Documents",1,"mt-3"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","export"],["nz-button","","nzType","primary",1,"ms-3",3,"click"],["nz-icon","","nzType","download"],[1,"mt-3","d-flex","justify-content-center"],["nz-button","","nzType","primary","class","ms-3",3,"disabled","nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",1,"ms-3",3,"click","disabled","nzLoading"],["nz-icon","","nzType","check"],["nzTitle","Enquiry Results"],["nzBordered",""],["nzColor","green",3,"nzBordered"]],template:function(i,o){i&1&&(D(0,"div",0)(1,"div")(2,"nav",1)(3,"div",2)(4,"nz-page-header",3),Xe("nzBack",function(){return o.onBack()}),F(),D(5,"button",4),xe(6,"span",5),F(),D(7,"div",6),xe(8,"ul",7),D(9,"div",8),Je(10,oEe,3,5,"button",9),F()()()()(),D(11,"div",10),Je(12,fEe,38,15,"div",11)(13,pEe,1,1,"nz-skeleton",12),F()()),i&2&&($(4),oe("nzSubtitle",o.ticket?o.ticket.ticketId:"..."),$(6),Fs(o.record?10:-1),$(2),Fs(o.record?12:-1),$(),Fs(o.record?-1:13))},dependencies:[Ki,Ji,Hc,Kn,Vc,GI,$I,Xn,ui,ra,kl,o0,xI],styles:[".ticket-top[_ngcontent-%COMP%]{padding:10px;background-color:#fff;border-radius:10px}.ticket-bottom[_ngcontent-%COMP%]{padding:10px;background-color:#fff;border-radius:10px;border-top:1px dashed #ccc}.barcode[_ngcontent-%COMP%]{height:50px;width:150px}.ticket-heading[_ngcontent-%COMP%]{font-size:12px;color:#acadaf;text-transform:uppercase;margin-bottom:2px}.ticket-details[_ngcontent-%COMP%]{font-size:12px;color:#000;margin-bottom:2px;font-family:Space Mono,monospace}.ticket-id-banner[_ngcontent-%COMP%]{background-color:gray;background-color:#eaedf0;display:flex;justify-content:center;padding:5px 10px;font-size:14px;font-family:Space Mono,monospace}.authorise-document-a4-page[_ngcontent-%COMP%]{padding:12mm 10mm!important;margin:auto;border-radius:2px;background-color:#fff;box-shadow:0 0 2rem #33475005;height:100%;overflow:scroll;max-width:21cm;border:1px solid transparent;page-break-after:always;max-height:calc(100vh - 255px)}"]});let e=t;return e})();var YQ=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=tn({type:t,selectors:[["app-edit-ticket"]],decls:2,vars:0,template:function(i,o){i&1&&(D(0,"p"),ce(1,"edit-ticket works!"),F())}});let e=t;return e})();var dEe=[{path:"",component:u9,children:[{path:"",redirectTo:"workspace",pathMatch:"full"},{path:"workspace",component:dY},{path:"documents",component:hY,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:xY},{path:"create",component:gZ},{path:"view/:id",component:NQ}]},{path:"self-service-admin",component:WQ,children:[{path:"",redirectTo:"tickets",pathMatch:"full"},{path:"tickets",component:qQ,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:GQ},{path:"view/:id",component:$Q},{path:"edit/:id",component:YQ}]}]},{path:"reports",component:mY},{path:"preferences",component:vY},{path:"admin",component:yY,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:LQ},{path:"users",component:IQ},{path:"categories",component:jQ,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:RQ},{path:"view/:id",component:BQ}]},{path:"templates",component:DQ,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:HQ},{path:"view/:id",component:VQ},{path:"create",component:mg}]},{path:"permissions",component:zQ}]}]}],XQ=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qu({type:t}),t.\u0275inj=Wu({imports:[t6.forChild(dEe),t6]});let e=t;return e})();var Lkt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=qu({type:t}),t.\u0275inj=Wu({imports:[fv,XQ,i9,r9,MI,l9,c9,uZ,bb,AQ]});let e=t;return e})();export{Lkt as ApplicationModule};
